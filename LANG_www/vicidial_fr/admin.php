<?php
# admin.php - VICIDIAL administration page
#
# Copyright (C) 2012  Matt Florell <vicidial@gmail.com>    LICENSE: AGPLv2
# 

require("dbconnect.php");
require("functions.php");

######################################################################################################
######################################################################################################
#######   static variable settings for display options
######################################################################################################
######################################################################################################

$page_width='770';
$section_width='750';
$header_font_size='3';
$subheader_font_size='2';
$subcamp_font_size='2';
$header_selected_bold='<b>';
$header_nonselected_bold='';
$users_color =		'#FFFF99';
$campaigns_color =	'#FFCC99';
$lists_color =		'#FFCCCC';
$ingroups_color =	'#CC99FF';
$remoteagent_color ='#CCFFCC';
$usergroups_color =	'#CCFFFF';
$scripts_color =	'#99FFCC';
$filters_color =	'#CCCCCC';
$admin_color =		'#FF99FF';
$reports_color =	'#99FF33';
	$times_color =		'#FF33FF';
	$shifts_color =		'#FF33FF';
	$phones_color =		'#FF33FF';
	$conference_color =	'#FF33FF';
	$server_color =		'#FF33FF';
	$templates_color =	'#FF33FF';
	$carriers_color =	'#FF33FF';
	$settings_color = 	'#FF33FF';
	$label_color =		'#FF33FF';
	$status_color = 	'#FF33FF';
	$moh_color = 		'#FF33FF';
	$vm_color = 		'#FF33FF';
	$tts_color = 		'#FF33FF';
	$cc_color = 		'#FF33FF';
	$cts_color = 		'#FF33FF';
$subcamp_color =	'#FF9933';
$users_font =		'BLACK';
$campaigns_font =	'BLACK';
$lists_font =		'BLACK';
$ingroups_font =	'BLACK';
$remoteagent_font =	'BLACK';
$usergroups_font =	'BLACK';
$scripts_font =		'BLACK';
$filters_font =		'BLACK';
$admin_font =		'BLACK';
$reports_font =		'BLACK';
	$times_font =		'BLACK';
	$phones_font =		'BLACK';
	$conference_font =	'BLACK';
	$server_font =		'BLACK';
	$settings_font = 	'BLACK';
	$label_font = 	'BLACK';
	$status_font = 	'BLACK';
	$moh_font = 	'BLACK';
	$vm_font = 		'BLACK';
	$tts_font = 	'BLACK';
	$cc_font =		'BLACK';
	$cts_font = 	'BLACK';
$subcamp_font =		'BLACK';

### comment this section out for colorful section headings
$users_color =		'#E6E6E6';
$campaigns_color =	'#E6E6E6';
$lists_color =		'#E6E6E6';
$ingroups_color =	'#E6E6E6';
$remoteagent_color ='#E6E6E6';
$usergroups_color =	'#E6E6E6';
$scripts_color =	'#E6E6E6';
$filters_color =	'#E6E6E6';
$admin_color =		'#E6E6E6';
$reports_color =	'#E6E6E6';
	$times_color =		'#C6C6C6';
	$shifts_color =		'#C6C6C6';
	$phones_color =		'#C6C6C6';
	$conference_color =	'#C6C6C6';
	$server_color =		'#C6C6C6';
	$templates_color =	'#C6C6C6';
	$carriers_color =	'#C6C6C6';
	$settings_color = 	'#C6C6C6';
	$label_color =		'#C6C6C6';
	$status_color = 	'#C6C6C6';
	$moh_color = 		'#C6C6C6';
	$vm_color = 		'#C6C6C6';
	$tts_color = 		'#C6C6C6';
	$cc_color = 		'#C6C6C6';
	$cts_color = 		'#C6C6C6';
$subcamp_color =	'#C6C6C6';
###


$PHP_AUTH_USER=$_SERVER['PHP_AUTH_USER'];
$PHP_AUTH_PW=$_SERVER['PHP_AUTH_PW'];
$PHP_SELF=$_SERVER['PHP_SELF'];
$QUERY_STRING = getenv("QUERY_STRING");

$Vreports = "NONE, Real-Time Main Report, Real-Time Campagne Summary , Entrant Report, Entrant Service Level Report, Entrant Résumé Hourly Report, Entrant Daily Report, Entrant DID Report, Entrant IVR Report, Outbound Calling Report, Outbound Summary Interval Report, Outbound IVR Report, Fronter - Closer Report, Listes Statuts De Campagne Report, Campagne Status List Report, Appels d'exportation Rapport, Pistes d'exportation Rapport , Agent Time Détails, Agent Status Détail, Agent Performance Détail, Team Performance Détail, Single Agent Daily , UtilisateurHorloge en temps Report, Groupe utilisateurHorloge en temps Status Report, UtilisateurHorloge en temps Rapport détaillé , Server Performance Report, Administration Change Log, List Update Stats, Statistiques utilisateur, Utilisateur Feuille de temps, Download List, Dialer Rapport d'inventaire, Maximum System Stats, Maximum Stats Détail, Search Leads Logs";

$UGreports = "ALL RAPPORTS, NONE, Real-Time Main Report, Real-Time Campagne Summary , Entrant Report, Entrant Service Level Report, Entrant Résumé Hourly Report, Entrant Daily Report, Entrant DID Report, Entrant IVR Report, Outbound Calling Report, Outbound Summary Interval Report, Outbound IVR Report, Fronter - Closer Report, Listes Statuts De Campagne Report, Campagne Status List Report, Appels d'exportation Rapport , Pistes d'exportation Rapport , Agent Time Détails, Agent Status Détail, Agent Performance Détail, Team Performance Détail, Single Agent Daily , UtilisateurHorloge en temps Report, Groupe utilisateurHorloge en temps Status Report, UtilisateurHorloge en temps Rapport détaillé , Server Performance Report, Administration Change Log, List Update Stats, Statistiques utilisateur, Utilisateur Feuille de temps, Download List, Dialer Rapport d'inventaire, Custom Rapports Links, CallCard Search, Maximum System Stats, Maximum Stats Détail, Search Leads Logs";

$Vtables = 'NONE,log_noanswer,did_agent_log,contact_information';

######################################################################################################
######################################################################################################
#######   Form variable declaration
######################################################################################################
######################################################################################################


if (isset($_GET["DB"]))				{$DB=$_GET["DB"];}
	elseif (isset($_POST["DB"]))	{$DB=$_POST["DB"];}
if (isset($_GET["active"]))	{$active=$_GET["active"];}
	elseif (isset($_POST["active"]))	{$active=$_POST["active"];}
if (isset($_GET["adaptive_dl_diff_target"]))	{$adaptive_dl_diff_target=$_GET["adaptive_dl_diff_target"];}
	elseif (isset($_POST["adaptive_dl_diff_target"]))	{$adaptive_dl_diff_target=$_POST["adaptive_dl_diff_target"];}
if (isset($_GET["adaptive_dropped_percentage"]))	{$adaptive_dropped_percentage=$_GET["adaptive_dropped_percentage"];}
	elseif (isset($_POST["adaptive_dropped_percentage"])){$adaptive_dropped_percentage=$_POST["adaptive_dropped_percentage"];}
if (isset($_GET["adaptive_intensity"]))	{$adaptive_intensity=$_GET["adaptive_intensity"];}
	elseif (isset($_POST["adaptive_intensity"]))	{$adaptive_intensity=$_POST["adaptive_intensity"];}
if (isset($_GET["adaptive_latest_server_time"]))	{$adaptive_latest_server_time=$_GET["adaptive_latest_server_time"];}
	elseif (isset($_POST["adaptive_latest_server_time"])){$adaptive_latest_server_time=$_POST["adaptive_latest_server_time"];}
if (isset($_GET["adaptive_maximum_level"]))	{$adaptive_maximum_level=$_GET["adaptive_maximum_level"];}
	elseif (isset($_POST["adaptive_maximum_level"]))	{$adaptive_maximum_level=$_POST["adaptive_maximum_level"];}
if (isset($_GET["SUB"]))			{$SUB=$_GET["SUB"];}
	elseif (isset($_POST["SUB"]))	{$SUB=$_POST["SUB"];}
if (isset($_GET["ADD"]))			{$ADD=$_GET["ADD"];}
	elseif (isset($_POST["ADD"]))	{$ADD=$_POST["ADD"];}
if (isset($_GET["admin_hangup_enabled"]))	{$admin_hangup_enabled=$_GET["admin_hangup_enabled"];}
	elseif (isset($_POST["admin_hangup_enabled"]))	{$admin_hangup_enabled=$_POST["admin_hangup_enabled"];}
if (isset($_GET["admin_hijack_enabled"]))	{$admin_hijack_enabled=$_GET["admin_hijack_enabled"];}
	elseif (isset($_POST["admin_hijack_enabled"]))	{$admin_hijack_enabled=$_POST["admin_hijack_enabled"];}
if (isset($_GET["admin_monitor_enabled"]))	{$admin_monitor_enabled=$_GET["admin_monitor_enabled"];}
	elseif (isset($_POST["admin_monitor_enabled"]))	{$admin_monitor_enabled=$_POST["admin_monitor_enabled"];}
if (isset($_GET["AFLogging_enabled"]))	{$AFLogging_enabled=$_GET["AFLogging_enabled"];}
	elseif (isset($_POST["AFLogging_enabled"]))	{$AFLogging_enabled=$_POST["AFLogging_enabled"];}
if (isset($_GET["agent_choose_ingroups"]))	{$agent_choose_ingroups=$_GET["agent_choose_ingroups"];}
	elseif (isset($_POST["agent_choose_ingroups"]))	{$agent_choose_ingroups=$_POST["agent_choose_ingroups"];}
if (isset($_GET["agentcall_manual"]))	{$agentcall_manual=$_GET["agentcall_manual"];}
	elseif (isset($_POST["agentcall_manual"]))	{$agentcall_manual=$_POST["agentcall_manual"];}
if (isset($_GET["agentonly_callbacks"]))	{$agentonly_callbacks=$_GET["agentonly_callbacks"];}
	elseif (isset($_POST["agentonly_callbacks"]))	{$agentonly_callbacks=$_POST["agentonly_callbacks"];}
if (isset($_GET["AGI_call_logging_enabled"]))	{$AGI_call_logging_enabled=$_GET["AGI_call_logging_enabled"];}
	elseif (isset($_POST["AGI_call_logging_enabled"]))	{$AGI_call_logging_enabled=$_POST["AGI_call_logging_enabled"];}
if (isset($_GET["agi_output"]))	{$agi_output=$_GET["agi_output"];}
	elseif (isset($_POST["agi_output"]))	{$agi_output=$_POST["agi_output"];}
if (isset($_GET["allcalls_delay"]))	{$allcalls_delay=$_GET["allcalls_delay"];}
	elseif (isset($_POST["allcalls_delay"]))	{$allcalls_delay=$_POST["allcalls_delay"];}
if (isset($_GET["allow_closers"]))	{$allow_closers=$_GET["allow_closers"];}
	elseif (isset($_POST["allow_closers"]))	{$allow_closers=$_POST["allow_closers"];}
if (isset($_GET["alt_number_dialing"]))	{$alt_number_dialing=$_GET["alt_number_dialing"];}
	elseif (isset($_POST["alt_number_dialing"]))	{$alt_number_dialing=$_POST["alt_number_dialing"];}
if (isset($_GET["alter_agent_interface_options"]))	{$alter_agent_interface_options=$_GET["alter_agent_interface_options"];}
	elseif (isset($_POST["alter_agent_interface_options"]))	{$alter_agent_interface_options=$_POST["alter_agent_interface_options"];}
if (isset($_GET["am_message_exten"]))	{$am_message_exten=$_GET["am_message_exten"];}
	elseif (isset($_POST["am_message_exten"]))	{$am_message_exten=$_POST["am_message_exten"];}
if (isset($_GET["amd_send_to_vmx"]))	{$amd_send_to_vmx=$_GET["amd_send_to_vmx"];}
	elseif (isset($_POST["amd_send_to_vmx"]))	{$amd_send_to_vmx=$_POST["amd_send_to_vmx"];}
if (isset($_GET["answer_transfer_agent"]))	{$answer_transfer_agent=$_GET["answer_transfer_agent"];}
	elseif (isset($_POST["answer_transfer_agent"]))	{$answer_transfer_agent=$_POST["answer_transfer_agent"];}
if (isset($_GET["ast_admin_access"]))	{$ast_admin_access=$_GET["ast_admin_access"];}
	elseif (isset($_POST["ast_admin_access"]))	{$ast_admin_access=$_POST["ast_admin_access"];}
if (isset($_GET["ast_delete_phones"]))	{$ast_delete_phones=$_GET["ast_delete_phones"];}
	elseif (isset($_POST["ast_delete_phones"]))	{$ast_delete_phones=$_POST["ast_delete_phones"];}
if (isset($_GET["asterisk_version"]))	{$asterisk_version=$_GET["asterisk_version"];}
	elseif (isset($_POST["asterisk_version"]))	{$asterisk_version=$_POST["asterisk_version"];}
if (isset($_GET["ASTmgrSECRET"]))	{$ASTmgrSECRET=$_GET["ASTmgrSECRET"];}
	elseif (isset($_POST["ASTmgrSECRET"]))	{$ASTmgrSECRET=$_POST["ASTmgrSECRET"];}
if (isset($_GET["ASTmgrUSERNAME"]))	{$ASTmgrUSERNAME=$_GET["ASTmgrUSERNAME"];}
	elseif (isset($_POST["ASTmgrUSERNAME"]))	{$ASTmgrUSERNAME=$_POST["ASTmgrUSERNAME"];}
if (isset($_GET["ASTmgrUSERNAMElisten"]))	{$ASTmgrUSERNAMElisten=$_GET["ASTmgrUSERNAMElisten"];}
	elseif (isset($_POST["ASTmgrUSERNAMElisten"]))	{$ASTmgrUSERNAMElisten=$_POST["ASTmgrUSERNAMElisten"];}
if (isset($_GET["ASTmgrUSERNAMEsend"]))	{$ASTmgrUSERNAMEsend=$_GET["ASTmgrUSERNAMEsend"];}
	elseif (isset($_POST["ASTmgrUSERNAMEsend"]))	{$ASTmgrUSERNAMEsend=$_POST["ASTmgrUSERNAMEsend"];}
if (isset($_GET["ASTmgrUSERNAMEupdate"]))	{$ASTmgrUSERNAMEupdate=$_GET["ASTmgrUSERNAMEupdate"];}
	elseif (isset($_POST["ASTmgrUSERNAMEupdate"]))	{$ASTmgrUSERNAMEupdate=$_POST["ASTmgrUSERNAMEupdate"];}
if (isset($_GET["attempt_delay"]))	{$attempt_delay=$_GET["attempt_delay"];}
	elseif (isset($_POST["attempt_delay"]))	{$attempt_delay=$_POST["attempt_delay"];}
if (isset($_GET["attempt_maximum"]))	{$attempt_maximum=$_GET["attempt_maximum"];}
	elseif (isset($_POST["attempt_maximum"]))	{$attempt_maximum=$_POST["attempt_maximum"];}
if (isset($_GET["auto_dial_level"]))	{$auto_dial_level=$_GET["auto_dial_level"];}
	elseif (isset($_POST["auto_dial_level"]))	{$auto_dial_level=$_POST["auto_dial_level"];}
if (isset($_GET["auto_dial_next_number"]))	{$auto_dial_next_number=$_GET["auto_dial_next_number"];}
	elseif (isset($_POST["auto_dial_next_number"]))	{$auto_dial_next_number=$_POST["auto_dial_next_number"];}
if (isset($_GET["available_only_ratio_tally"]))	{$available_only_ratio_tally=$_GET["available_only_ratio_tally"];}
	elseif (isset($_POST["available_only_ratio_tally"])){$available_only_ratio_tally=$_POST["available_only_ratio_tally"];}
if (isset($_GET["call_out_number_group"]))	{$call_out_number_group=$_GET["call_out_number_group"];}
	elseif (isset($_POST["call_out_number_group"]))	{$call_out_number_group=$_POST["call_out_number_group"];}
if (isset($_GET["call_parking_enabled"]))	{$call_parking_enabled=$_GET["call_parking_enabled"];}
	elseif (isset($_POST["call_parking_enabled"]))	{$call_parking_enabled=$_POST["call_parking_enabled"];}
if (isset($_GET["call_time_comments"]))	{$call_time_comments=$_GET["call_time_comments"];}
	elseif (isset($_POST["call_time_comments"]))	{$call_time_comments=$_POST["call_time_comments"];}
if (isset($_GET["call_time_id"]))	{$call_time_id=$_GET["call_time_id"];}
	elseif (isset($_POST["call_time_id"]))	{$call_time_id=$_POST["call_time_id"];}
if (isset($_GET["call_time_name"]))	{$call_time_name=$_GET["call_time_name"];}
	elseif (isset($_POST["call_time_name"]))	{$call_time_name=$_POST["call_time_name"];}
if (isset($_GET["CallerID_popup_enabled"]))	{$CallerID_popup_enabled=$_GET["CallerID_popup_enabled"];}
	elseif (isset($_POST["CallerID_popup_enabled"]))	{$CallerID_popup_enabled=$_POST["CallerID_popup_enabled"];}
if (isset($_GET["campaign_cid"]))	{$campaign_cid=$_GET["campaign_cid"];}
	elseif (isset($_POST["campaign_cid"]))	{$campaign_cid=$_POST["campaign_cid"];}
if (isset($_GET["campaign_detail"]))	{$campaign_detail=$_GET["campaign_detail"];}
	elseif (isset($_POST["campaign_detail"]))	{$campaign_detail=$_POST["campaign_detail"];}
if (isset($_GET["campaign_id"]))	{$campaign_id=$_GET["campaign_id"];}
	elseif (isset($_POST["campaign_id"]))	{$campaign_id=$_POST["campaign_id"];}
if (isset($_GET["campaign_name"]))	{$campaign_name=$_GET["campaign_name"];}
	elseif (isset($_POST["campaign_name"]))	{$campaign_name=$_POST["campaign_name"];}
if (isset($_GET["campaign_rec_exten"]))	{$campaign_rec_exten=$_GET["campaign_rec_exten"];}
	elseif (isset($_POST["campaign_rec_exten"]))	{$campaign_rec_exten=$_POST["campaign_rec_exten"];}
if (isset($_GET["campaign_rec_filename"]))	{$campaign_rec_filename=$_GET["campaign_rec_filename"];}
	elseif (isset($_POST["campaign_rec_filename"]))	{$campaign_rec_filename=$_POST["campaign_rec_filename"];}
if (isset($_GET["ingroup_rec_filename"]))	{$ingroup_rec_filename=$_GET["ingroup_rec_filename"];}
	elseif (isset($_POST["ingroup_rec_filename"]))	{$ingroup_rec_filename=$_POST["ingroup_rec_filename"];}
if (isset($_GET["campaign_recording"]))	{$campaign_recording=$_GET["campaign_recording"];}
	elseif (isset($_POST["campaign_recording"]))	{$campaign_recording=$_POST["campaign_recording"];}
if (isset($_GET["campaign_vdad_exten"]))	{$campaign_vdad_exten=$_GET["campaign_vdad_exten"];}
	elseif (isset($_POST["campaign_vdad_exten"]))	{$campaign_vdad_exten=$_POST["campaign_vdad_exten"];}
if (isset($_GET["change_agent_campaign"]))	{$change_agent_campaign=$_GET["change_agent_campaign"];}
	elseif (isset($_POST["change_agent_campaign"]))	{$change_agent_campaign=$_POST["change_agent_campaign"];}
if (isset($_GET["client_browser"]))	{$client_browser=$_GET["client_browser"];}
	elseif (isset($_POST["client_browser"]))	{$client_browser=$_POST["client_browser"];}
if (isset($_GET["closer_default_blended"]))	{$closer_default_blended=$_GET["closer_default_blended"];}
	elseif (isset($_POST["closer_default_blended"]))	{$closer_default_blended=$_POST["closer_default_blended"];}
if (isset($_GET["company"]))	{$company=$_GET["company"];}
	elseif (isset($_POST["company"]))	{$company=$_POST["company"];}
if (isset($_GET["computer_ip"]))	{$computer_ip=$_GET["computer_ip"];}
	elseif (isset($_POST["computer_ip"]))	{$computer_ip=$_POST["computer_ip"];}
if (isset($_GET["conf_exten"]))	{$conf_exten=$_GET["conf_exten"];}
	elseif (isset($_POST["conf_exten"]))	{$conf_exten=$_POST["conf_exten"];}
if (isset($_GET["conf_on_extension"]))	{$conf_on_extension=$_GET["conf_on_extension"];}
	elseif (isset($_POST["conf_on_extension"]))	{$conf_on_extension=$_POST["conf_on_extension"];}
if (isset($_GET["conferencing_enabled"]))	{$conferencing_enabled=$_GET["conferencing_enabled"];}
	elseif (isset($_POST["conferencing_enabled"]))	{$conferencing_enabled=$_POST["conferencing_enabled"];}
if (isset($_GET["CoNfIrM"]))	{$CoNfIrM=$_GET["CoNfIrM"];}
	elseif (isset($_POST["CoNfIrM"]))	{$CoNfIrM=$_POST["CoNfIrM"];}
if (isset($_GET["ct_default_start"]))	{$ct_default_start=$_GET["ct_default_start"];}
	elseif (isset($_POST["ct_default_start"]))	{$ct_default_start=$_POST["ct_default_start"];}
if (isset($_GET["ct_default_stop"]))	{$ct_default_stop=$_GET["ct_default_stop"];}
	elseif (isset($_POST["ct_default_stop"]))	{$ct_default_stop=$_POST["ct_default_stop"];}
if (isset($_GET["ct_friday_start"]))	{$ct_friday_start=$_GET["ct_friday_start"];}
	elseif (isset($_POST["ct_friday_start"]))	{$ct_friday_start=$_POST["ct_friday_start"];}
if (isset($_GET["ct_friday_stop"]))	{$ct_friday_stop=$_GET["ct_friday_stop"];}
	elseif (isset($_POST["ct_friday_stop"]))	{$ct_friday_stop=$_POST["ct_friday_stop"];}
if (isset($_GET["ct_monday_start"]))	{$ct_monday_start=$_GET["ct_monday_start"];}
	elseif (isset($_POST["ct_monday_start"]))	{$ct_monday_start=$_POST["ct_monday_start"];}
if (isset($_GET["ct_monday_stop"]))	{$ct_monday_stop=$_GET["ct_monday_stop"];}
	elseif (isset($_POST["ct_monday_stop"]))	{$ct_monday_stop=$_POST["ct_monday_stop"];}
if (isset($_GET["ct_saturday_start"]))	{$ct_saturday_start=$_GET["ct_saturday_start"];}
	elseif (isset($_POST["ct_saturday_start"]))	{$ct_saturday_start=$_POST["ct_saturday_start"];}
if (isset($_GET["ct_saturday_stop"]))	{$ct_saturday_stop=$_GET["ct_saturday_stop"];}
	elseif (isset($_POST["ct_saturday_stop"]))	{$ct_saturday_stop=$_POST["ct_saturday_stop"];}
if (isset($_GET["ct_sunday_start"]))	{$ct_sunday_start=$_GET["ct_sunday_start"];}
	elseif (isset($_POST["ct_sunday_start"]))	{$ct_sunday_start=$_POST["ct_sunday_start"];}
if (isset($_GET["ct_sunday_stop"]))	{$ct_sunday_stop=$_GET["ct_sunday_stop"];}
	elseif (isset($_POST["ct_sunday_stop"]))	{$ct_sunday_stop=$_POST["ct_sunday_stop"];}
if (isset($_GET["ct_thursday_start"]))	{$ct_thursday_start=$_GET["ct_thursday_start"];}
	elseif (isset($_POST["ct_thursday_start"]))	{$ct_thursday_start=$_POST["ct_thursday_start"];}
if (isset($_GET["ct_thursday_stop"]))	{$ct_thursday_stop=$_GET["ct_thursday_stop"];}
	elseif (isset($_POST["ct_thursday_stop"]))	{$ct_thursday_stop=$_POST["ct_thursday_stop"];}
if (isset($_GET["ct_tuesday_start"]))	{$ct_tuesday_start=$_GET["ct_tuesday_start"];}
	elseif (isset($_POST["ct_tuesday_start"]))	{$ct_tuesday_start=$_POST["ct_tuesday_start"];}
if (isset($_GET["ct_tuesday_stop"]))	{$ct_tuesday_stop=$_GET["ct_tuesday_stop"];}
	elseif (isset($_POST["ct_tuesday_stop"]))	{$ct_tuesday_stop=$_POST["ct_tuesday_stop"];}
if (isset($_GET["ct_wednesday_start"]))	{$ct_wednesday_start=$_GET["ct_wednesday_start"];}
	elseif (isset($_POST["ct_wednesday_start"]))	{$ct_wednesday_start=$_POST["ct_wednesday_start"];}
if (isset($_GET["ct_wednesday_stop"]))	{$ct_wednesday_stop=$_GET["ct_wednesday_stop"];}
	elseif (isset($_POST["ct_wednesday_stop"]))	{$ct_wednesday_stop=$_POST["ct_wednesday_stop"];}
if (isset($_GET["DBX_database"]))	{$DBX_database=$_GET["DBX_database"];}
	elseif (isset($_POST["DBX_database"]))	{$DBX_database=$_POST["DBX_database"];}
if (isset($_GET["DBX_pass"]))	{$DBX_pass=$_GET["DBX_pass"];}
	elseif (isset($_POST["DBX_pass"]))	{$DBX_pass=$_POST["DBX_pass"];}
if (isset($_GET["DBX_port"]))	{$DBX_port=$_GET["DBX_port"];}
	elseif (isset($_POST["DBX_port"]))	{$DBX_port=$_POST["DBX_port"];}
if (isset($_GET["DBX_server"]))	{$DBX_server=$_GET["DBX_server"];}
	elseif (isset($_POST["DBX_server"]))	{$DBX_server=$_POST["DBX_server"];}
if (isset($_GET["DBX_user"]))	{$DBX_user=$_GET["DBX_user"];}
	elseif (isset($_POST["DBX_user"]))	{$DBX_user=$_POST["DBX_user"];}
if (isset($_GET["DBY_database"]))	{$DBY_database=$_GET["DBY_database"];}
	elseif (isset($_POST["DBY_database"]))	{$DBY_database=$_POST["DBY_database"];}
if (isset($_GET["DBY_pass"]))	{$DBY_pass=$_GET["DBY_pass"];}
	elseif (isset($_POST["DBY_pass"]))	{$DBY_pass=$_POST["DBY_pass"];}
if (isset($_GET["DBY_port"]))	{$DBY_port=$_GET["DBY_port"];}
	elseif (isset($_POST["DBY_port"]))	{$DBY_port=$_POST["DBY_port"];}
if (isset($_GET["DBY_server"]))	{$DBY_server=$_GET["DBY_server"];}
	elseif (isset($_POST["DBY_server"]))	{$DBY_server=$_POST["DBY_server"];}
if (isset($_GET["DBY_user"]))	{$DBY_user=$_GET["DBY_user"];}
	elseif (isset($_POST["DBY_user"]))	{$DBY_user=$_POST["DBY_user"];}
if (isset($_GET["delete_call_times"]))	{$delete_call_times=$_GET["delete_call_times"];}
	elseif (isset($_POST["delete_call_times"]))	{$delete_call_times=$_POST["delete_call_times"];}
if (isset($_GET["delete_campaigns"]))	{$delete_campaigns=$_GET["delete_campaigns"];}
	elseif (isset($_POST["delete_campaigns"]))	{$delete_campaigns=$_POST["delete_campaigns"];}
if (isset($_GET["delete_filters"]))	{$delete_filters=$_GET["delete_filters"];}
	elseif (isset($_POST["delete_filters"]))	{$delete_filters=$_POST["delete_filters"];}
if (isset($_GET["delete_ingroups"]))	{$delete_ingroups=$_GET["delete_ingroups"];}
	elseif (isset($_POST["delete_ingroups"]))	{$delete_ingroups=$_POST["delete_ingroups"];}
if (isset($_GET["delete_lists"]))	{$delete_lists=$_GET["delete_lists"];}
	elseif (isset($_POST["delete_lists"]))	{$delete_lists=$_POST["delete_lists"];}
if (isset($_GET["delete_remote_agents"]))	{$delete_remote_agents=$_GET["delete_remote_agents"];}
	elseif (isset($_POST["delete_remote_agents"]))	{$delete_remote_agents=$_POST["delete_remote_agents"];}
if (isset($_GET["delete_scripts"]))	{$delete_scripts=$_GET["delete_scripts"];}
	elseif (isset($_POST["delete_scripts"]))	{$delete_scripts=$_POST["delete_scripts"];}
if (isset($_GET["delete_user_groups"]))	{$delete_user_groups=$_GET["delete_user_groups"];}
	elseif (isset($_POST["delete_user_groups"]))	{$delete_user_groups=$_POST["delete_user_groups"];}
if (isset($_GET["delete_users"]))	{$delete_users=$_GET["delete_users"];}
	elseif (isset($_POST["delete_users"]))	{$delete_users=$_POST["delete_users"];}
if (isset($_GET["dial_method"]))	{$dial_method=$_GET["dial_method"];}
	elseif (isset($_POST["dial_method"]))	{$dial_method=$_POST["dial_method"];}
if (isset($_GET["dial_prefix"]))	{$dial_prefix=$_GET["dial_prefix"];}
	elseif (isset($_POST["dial_prefix"]))	{$dial_prefix=$_POST["dial_prefix"];}
if (isset($_GET["dial_status_a"]))	{$dial_status_a=$_GET["dial_status_a"];}
	elseif (isset($_POST["dial_status_a"]))	{$dial_status_a=$_POST["dial_status_a"];}
if (isset($_GET["dial_status_b"]))	{$dial_status_b=$_GET["dial_status_b"];}
	elseif (isset($_POST["dial_status_b"]))	{$dial_status_b=$_POST["dial_status_b"];}
if (isset($_GET["dial_status_c"]))	{$dial_status_c=$_GET["dial_status_c"];}
	elseif (isset($_POST["dial_status_c"]))	{$dial_status_c=$_POST["dial_status_c"];}
if (isset($_GET["dial_status_d"]))	{$dial_status_d=$_GET["dial_status_d"];}
	elseif (isset($_POST["dial_status_d"]))	{$dial_status_d=$_POST["dial_status_d"];}
if (isset($_GET["dial_status_e"]))	{$dial_status_e=$_GET["dial_status_e"];}
	elseif (isset($_POST["dial_status_e"]))	{$dial_status_e=$_POST["dial_status_e"];}
if (isset($_GET["dial_timeout"]))	{$dial_timeout=$_GET["dial_timeout"];}
	elseif (isset($_POST["dial_timeout"]))	{$dial_timeout=$_POST["dial_timeout"];}
if (isset($_GET["dialplan_number"]))	{$dialplan_number=$_GET["dialplan_number"];}
	elseif (isset($_POST["dialplan_number"]))	{$dialplan_number=$_POST["dialplan_number"];}
if (isset($_GET["drop_call_seconds"]))	{$drop_call_seconds=$_GET["drop_call_seconds"];}
	elseif (isset($_POST["drop_call_seconds"]))	{$drop_call_seconds=$_POST["drop_call_seconds"];}
if (isset($_GET["drop_exten"]))	{$drop_exten=$_GET["drop_exten"];}
	elseif (isset($_POST["drop_exten"]))	{$drop_exten=$_POST["drop_exten"];}
if (isset($_GET["drop_action"]))	{$drop_action=$_GET["drop_action"];}
	elseif (isset($_POST["drop_action"]))	{$drop_action=$_POST["drop_action"];}
if (isset($_GET["dtmf_send_extension"]))	{$dtmf_send_extension=$_GET["dtmf_send_extension"];}
	elseif (isset($_POST["dtmf_send_extension"]))	{$dtmf_send_extension=$_POST["dtmf_send_extension"];}
if (isset($_GET["enable_fast_rafraîchir"]))	{$enable_fast_rafraîchir=$_GET["enable_fast_rafraîchir"];}
	elseif (isset($_POST["enable_fast_rafraîchir"]))	{$enable_fast_rafraîchir=$_POST["enable_fast_rafraîchir"];}
if (isset($_GET["enable_persistant_mysql"]))	{$enable_persistant_mysql=$_GET["enable_persistant_mysql"];}
	elseif (isset($_POST["enable_persistant_mysql"]))	{$enable_persistant_mysql=$_POST["enable_persistant_mysql"];}
if (isset($_GET["ext_context"]))	{$ext_context=$_GET["ext_context"];}
	elseif (isset($_POST["ext_context"]))	{$ext_context=$_POST["ext_context"];}
if (isset($_GET["extension"]))	{$extension=$_GET["extension"];}
	elseif (isset($_POST["extension"]))	{$extension=$_POST["extension"];}
if (isset($_GET["fast_rafraîchir_rate"]))	{$fast_rafraîchir_rate=$_GET["fast_rafraîchir_rate"];}
	elseif (isset($_POST["fast_rafraîchir_rate"]))	{$fast_rafraîchir_rate=$_POST["fast_rafraîchir_rate"];}
if (isset($_GET["force_logout"]))	{$force_logout=$_GET["force_logout"];}
	elseif (isset($_POST["force_logout"]))	{$force_logout=$_POST["force_logout"];}
if (isset($_GET["fronter_display"]))	{$fronter_display=$_GET["fronter_display"];}
	elseif (isset($_POST["fronter_display"]))	{$fronter_display=$_POST["fronter_display"];}
if (isset($_GET["full_name"]))	{$full_name=$_GET["full_name"];}
	elseif (isset($_POST["full_name"]))	{$full_name=$_POST["full_name"];}
if (isset($_GET["fullname"]))	{$fullname=$_GET["fullname"];}
	elseif (isset($_POST["fullname"]))	{$fullname=$_POST["fullname"];}
if (isset($_GET["get_call_launch"]))	{$get_call_launch=$_GET["get_call_launch"];}
	elseif (isset($_POST["get_call_launch"]))	{$get_call_launch=$_POST["get_call_launch"];}
if (isset($_GET["group_color"]))	{$group_color=$_GET["group_color"];}
	elseif (isset($_POST["group_color"]))	{$group_color=$_POST["group_color"];}
if (isset($_GET["group_id"]))	{$group_id=$_GET["group_id"];}
	elseif (isset($_POST["group_id"]))	{$group_id=$_POST["group_id"];}
if (isset($_GET["group_name"]))	{$group_name=$_GET["group_name"];}
	elseif (isset($_POST["group_name"]))	{$group_name=$_POST["group_name"];}
if (isset($_GET["groups"]))	{$groups=$_GET["groups"];}
	elseif (isset($_POST["groups"]))	{$groups=$_POST["groups"];}
if (isset($_GET["XFERgroups"]))	{$XFERgroups=$_GET["XFERgroups"];}
	elseif (isset($_POST["XFERgroups"]))	{$XFERgroups=$_POST["XFERgroups"];}
if (isset($_GET["HKstatus"]))	{$HKstatus=$_GET["HKstatus"];}
	elseif (isset($_POST["HKstatus"]))	{$HKstatus=$_POST["HKstatus"];}
if (isset($_GET["hopper_level"]))	{$hopper_level=$_GET["hopper_level"];}
	elseif (isset($_POST["hopper_level"]))	{$hopper_level=$_POST["hopper_level"];}
if (isset($_GET["hotkey"]))	{$hotkey=$_GET["hotkey"];}
	elseif (isset($_POST["hotkey"]))	{$hotkey=$_POST["hotkey"];}
if (isset($_GET["hotkeys_active"]))	{$hotkeys_active=$_GET["hotkeys_active"];}
	elseif (isset($_POST["hotkeys_active"]))	{$hotkeys_active=$_POST["hotkeys_active"];}
if (isset($_GET["install_directory"]))	{$install_directory=$_GET["install_directory"];}
	elseif (isset($_POST["install_directory"]))	{$install_directory=$_POST["install_directory"];}
if (isset($_GET["lead_filter_comments"]))	{$lead_filter_comments=$_GET["lead_filter_comments"];}
	elseif (isset($_POST["lead_filter_comments"]))	{$lead_filter_comments=$_POST["lead_filter_comments"];}
if (isset($_GET["lead_filter_id"]))	{$lead_filter_id=$_GET["lead_filter_id"];}
	elseif (isset($_POST["lead_filter_id"]))	{$lead_filter_id=$_POST["lead_filter_id"];}
if (isset($_GET["lead_filter_name"]))	{$lead_filter_name=$_GET["lead_filter_name"];}
	elseif (isset($_POST["lead_filter_name"]))	{$lead_filter_name=$_POST["lead_filter_name"];}
if (isset($_GET["lead_filter_sql"]))	{$lead_filter_sql=$_GET["lead_filter_sql"];}
	elseif (isset($_POST["lead_filter_sql"]))	{$lead_filter_sql=$_POST["lead_filter_sql"];}
if (isset($_GET["lead_order"]))	{$lead_order=$_GET["lead_order"];}
	elseif (isset($_POST["lead_order"]))	{$lead_order=$_POST["lead_order"];}
if (isset($_GET["list_id"]))	{$list_id=$_GET["list_id"];}
	elseif (isset($_POST["list_id"]))	{$list_id=$_POST["list_id"];}
if (isset($_GET["list_name"]))	{$list_name=$_GET["list_name"];}
	elseif (isset($_POST["list_name"]))	{$list_name=$_POST["list_name"];}
if (isset($_GET["load_leads"]))	{$load_leads=$_GET["load_leads"];}
	elseif (isset($_POST["load_leads"]))	{$load_leads=$_POST["load_leads"];}
if (isset($_GET["local_call_time"]))	{$local_call_time=$_GET["local_call_time"];}
	elseif (isset($_POST["local_call_time"]))	{$local_call_time=$_POST["local_call_time"];}
if (isset($_GET["local_gmt"]))	{$local_gmt=$_GET["local_gmt"];}
	elseif (isset($_POST["local_gmt"]))	{$local_gmt=$_POST["local_gmt"];}
if (isset($_GET["local_web_callerID_URL"]))	{$local_web_callerID_URL=$_GET["local_web_callerID_URL"];}
	elseif (isset($_POST["local_web_callerID_URL"]))	{$local_web_callerID_URL=$_POST["local_web_callerID_URL"];}
if (isset($_GET["login"]))	{$login=$_GET["login"];}
	elseif (isset($_POST["login"]))	{$login=$_POST["login"];}
if (isset($_GET["login_campaign"]))	{$login_campaign=$_GET["login_campaign"];}
	elseif (isset($_POST["login_campaign"]))	{$login_campaign=$_POST["login_campaign"];}
if (isset($_GET["login_pass"]))	{$login_pass=$_GET["login_pass"];}
	elseif (isset($_POST["login_pass"]))	{$login_pass=$_POST["login_pass"];}
if (isset($_GET["login_user"]))	{$login_user=$_GET["login_user"];}
	elseif (isset($_POST["login_user"]))	{$login_user=$_POST["login_user"];}
if (isset($_GET["max_vicidial_trunks"]))	{$max_vicidial_trunks=$_GET["max_vicidial_trunks"];}
	elseif (isset($_POST["max_vicidial_trunks"]))	{$max_vicidial_trunks=$_POST["max_vicidial_trunks"];}
if (isset($_GET["modify_call_times"]))	{$modify_call_times=$_GET["modify_call_times"];}
	elseif (isset($_POST["modify_call_times"]))	{$modify_call_times=$_POST["modify_call_times"];}
if (isset($_GET["modify_leads"]))	{$modify_leads=$_GET["modify_leads"];}
	elseif (isset($_POST["modify_leads"]))	{$modify_leads=$_POST["modify_leads"];}
if (isset($_GET["monitor_prefix"]))	{$monitor_prefix=$_GET["monitor_prefix"];}
	elseif (isset($_POST["monitor_prefix"]))	{$monitor_prefix=$_POST["monitor_prefix"];}
if (isset($_GET["next_agent_call"]))	{$next_agent_call=$_GET["next_agent_call"];}
	elseif (isset($_POST["next_agent_call"]))	{$next_agent_call=$_POST["next_agent_call"];}
if (isset($_GET["number_of_lines"]))	{$number_of_lines=$_GET["number_of_lines"];}
	elseif (isset($_POST["number_of_lines"]))	{$number_of_lines=$_POST["number_of_lines"];}
if (isset($_GET["old_campaign_id"]))	{$old_campaign_id=$_GET["old_campaign_id"];}
	elseif (isset($_POST["old_campaign_id"]))	{$old_campaign_id=$_POST["old_campaign_id"];}
if (isset($_GET["old_conf_exten"]))	{$old_conf_exten=$_GET["old_conf_exten"];}
	elseif (isset($_POST["old_conf_exten"]))	{$old_conf_exten=$_POST["old_conf_exten"];}
if (isset($_GET["old_extension"]))	{$old_extension=$_GET["old_extension"];}
	elseif (isset($_POST["old_extension"]))	{$old_extension=$_POST["old_extension"];}
if (isset($_GET["old_server_id"]))	{$old_server_id=$_GET["old_server_id"];}
	elseif (isset($_POST["old_server_id"]))	{$old_server_id=$_POST["old_server_id"];}
if (isset($_GET["old_server_ip"]))	{$old_server_ip=$_GET["old_server_ip"];}
	elseif (isset($_POST["old_server_ip"]))	{$old_server_ip=$_POST["old_server_ip"];}
if (isset($_GET["OLDuser_group"]))	{$OLDuser_group=$_GET["OLDuser_group"];}
	elseif (isset($_POST["OLDuser_group"]))	{$OLDuser_group=$_POST["OLDuser_group"];}
if (isset($_GET["omit_phone_code"]))	{$omit_phone_code=$_GET["omit_phone_code"];}
	elseif (isset($_POST["omit_phone_code"]))	{$omit_phone_code=$_POST["omit_phone_code"];}
if (isset($_GET["outbound_cid"]))	{$outbound_cid=$_GET["outbound_cid"];}
	elseif (isset($_POST["outbound_cid"]))	{$outbound_cid=$_POST["outbound_cid"];}
if (isset($_GET["park_ext"]))	{$park_ext=$_GET["park_ext"];}
	elseif (isset($_POST["park_ext"]))	{$park_ext=$_POST["park_ext"];}
if (isset($_GET["park_file_name"]))	{$park_file_name=$_GET["park_file_name"];}
	elseif (isset($_POST["park_file_name"]))	{$park_file_name=$_POST["park_file_name"];}
if (isset($_GET["park_on_extension"]))	{$park_on_extension=$_GET["park_on_extension"];}
	elseif (isset($_POST["park_on_extension"]))	{$park_on_extension=$_POST["park_on_extension"];}
if (isset($_GET["pass"]))	{$pass=$_GET["pass"];}
	elseif (isset($_POST["pass"]))	{$pass=$_POST["pass"];}
if (isset($_GET["phone_ip"]))	{$phone_ip=$_GET["phone_ip"];}
	elseif (isset($_POST["phone_ip"]))	{$phone_ip=$_POST["phone_ip"];}
if (isset($_GET["phone_login"]))	{$phone_login=$_GET["phone_login"];}
	elseif (isset($_POST["phone_login"]))	{$phone_login=$_POST["phone_login"];}
if (isset($_GET["phone_number"]))	{$phone_number=$_GET["phone_number"];}
	elseif (isset($_POST["phone_number"]))	{$phone_number=$_POST["phone_number"];}
if (isset($_GET["phone_pass"]))	{$phone_pass=$_GET["phone_pass"];}
	elseif (isset($_POST["phone_pass"]))	{$phone_pass=$_POST["phone_pass"];}
if (isset($_GET["phone_type"]))	{$phone_type=$_GET["phone_type"];}
	elseif (isset($_POST["phone_type"]))	{$phone_type=$_POST["phone_type"];}
if (isset($_GET["picture"]))	{$picture=$_GET["picture"];}
	elseif (isset($_POST["picture"]))	{$picture=$_POST["picture"];}
if (isset($_GET["protocol"]))	{$protocol=$_GET["protocol"];}
	elseif (isset($_POST["protocol"]))	{$protocol=$_POST["protocol"];}
if (isset($_GET["QUEUE_ACTION_enabled"]))	{$QUEUE_ACTION_enabled=$_GET["QUEUE_ACTION_enabled"];}
	elseif (isset($_POST["QUEUE_ACTION_enabled"]))	{$QUEUE_ACTION_enabled=$_POST["QUEUE_ACTION_enabled"];}
if (isset($_GET["recording_exten"]))	{$recording_exten=$_GET["recording_exten"];}
	elseif (isset($_POST["recording_exten"]))	{$recording_exten=$_POST["recording_exten"];}
if (isset($_GET["remote_agent_id"]))	{$remote_agent_id=$_GET["remote_agent_id"];}
	elseif (isset($_POST["remote_agent_id"]))	{$remote_agent_id=$_POST["remote_agent_id"];}
if (isset($_GET["reset_hopper"]))	{$reset_hopper=$_GET["reset_hopper"];}
	elseif (isset($_POST["reset_hopper"]))	{$reset_hopper=$_POST["reset_hopper"];}
if (isset($_GET["reset_list"]))	{$reset_list=$_GET["reset_list"];}
	elseif (isset($_POST["reset_list"]))	{$reset_list=$_POST["reset_list"];}
if (isset($_GET["safe_harbor_exten"]))	{$safe_harbor_exten=$_GET["safe_harbor_exten"];}
	elseif (isset($_POST["safe_harbor_exten"]))	{$safe_harbor_exten=$_POST["safe_harbor_exten"];}
if (isset($_GET["drop_action"]))	{$drop_action=$_GET["drop_action"];}
	elseif (isset($_POST["drop_action"]))	{$drop_action=$_POST["drop_action"];}
if (isset($_GET["scheduled_callbacks"]))	{$scheduled_callbacks=$_GET["scheduled_callbacks"];}
	elseif (isset($_POST["scheduled_callbacks"]))	{$scheduled_callbacks=$_POST["scheduled_callbacks"];}
if (isset($_GET["script_comments"]))	{$script_comments=$_GET["script_comments"];}
	elseif (isset($_POST["script_comments"]))	{$script_comments=$_POST["script_comments"];}
if (isset($_GET["script_id"]))	{$script_id=$_GET["script_id"];}
	elseif (isset($_POST["script_id"]))	{$script_id=$_POST["script_id"];}
if (isset($_GET["script_name"]))	{$script_name=$_GET["script_name"];}
	elseif (isset($_POST["script_name"]))	{$script_name=$_POST["script_name"];}
if (isset($_GET["script_text"]))	{$script_text=$_GET["script_text"];}
	elseif (isset($_POST["script_text"]))	{$script_text=$_POST["script_text"];}
if (isset($_GET["selectable"]))	{$selectable=$_GET["selectable"];}
	elseif (isset($_POST["selectable"]))	{$selectable=$_POST["selectable"];}
if (isset($_GET["server_description"]))	{$server_description=$_GET["server_description"];}
	elseif (isset($_POST["server_description"]))	{$server_description=$_POST["server_description"];}
if (isset($_GET["server_id"]))	{$server_id=$_GET["server_id"];}
	elseif (isset($_POST["server_id"]))	{$server_id=$_POST["server_id"];}
if (isset($_GET["server_ip"]))	{$server_ip=$_GET["server_ip"];}
	elseif (isset($_POST["server_ip"]))	{$server_ip=$_POST["server_ip"];}
if (isset($_GET["stage"]))	{$stage=$_GET["stage"];}
	elseif (isset($_POST["stage"]))	{$stage=$_POST["stage"];}
if (isset($_GET["state_call_time_state"]))	{$state_call_time_state=$_GET["state_call_time_state"];}
	elseif (isset($_POST["state_call_time_state"]))	{$state_call_time_state=$_POST["state_call_time_state"];}
if (isset($_GET["state_rule"]))	{$state_rule=$_GET["state_rule"];}
	elseif (isset($_POST["state_rule"]))	{$state_rule=$_POST["state_rule"];}
if (isset($_GET["status"]))	{$status=$_GET["status"];}
	elseif (isset($_POST["status"]))	{$status=$_POST["status"];}
if (isset($_GET["status_id"]))	{$status_id=$_GET["status_id"];}
	elseif (isset($_POST["status_id"]))	{$status_id=$_POST["status_id"];}
if (isset($_GET["status_name"]))	{$status_name=$_GET["status_name"];}
	elseif (isset($_POST["status_name"]))	{$status_name=$_POST["status_name"];}
if (isset($_GET["submit"]))	{$submit=$_GET["submit"];}
	elseif (isset($_POST["submit"]))	{$submit=$_POST["submit"];}
if (isset($_GET["VALIDER"]))	{$VALIDER=$_GET["VALIDER"];}
	elseif (isset($_POST["VALIDER"]))	{$VALIDER=$_POST["VALIDER"];}
if (isset($_GET["sys_perf_log"]))	{$sys_perf_log=$_GET["sys_perf_log"];}
	elseif (isset($_POST["sys_perf_log"]))	{$sys_perf_log=$_POST["sys_perf_log"];}
if (isset($_GET["telnet_host"]))	{$telnet_host=$_GET["telnet_host"];}
	elseif (isset($_POST["telnet_host"]))	{$telnet_host=$_POST["telnet_host"];}
if (isset($_GET["telnet_port"]))	{$telnet_port=$_GET["telnet_port"];}
	elseif (isset($_POST["telnet_port"]))	{$telnet_port=$_POST["telnet_port"];}
if (isset($_GET["updater_check_enabled"]))	{$updater_check_enabled=$_GET["updater_check_enabled"];}
	elseif (isset($_POST["updater_check_enabled"]))	{$updater_check_enabled=$_POST["updater_check_enabled"];}
if (isset($_GET["use_internal_dnc"]))	{$use_internal_dnc=$_GET["use_internal_dnc"];}
	elseif (isset($_POST["use_internal_dnc"]))	{$use_internal_dnc=$_POST["use_internal_dnc"];}
if (isset($_GET["use_campaign_dnc"]))	{$use_campaign_dnc=$_GET["use_campaign_dnc"];}
	elseif (isset($_POST["use_campaign_dnc"]))	{$use_campaign_dnc=$_POST["use_campaign_dnc"];}
if (isset($_GET["user"]))	{$user=$_GET["user"];}
	elseif (isset($_POST["user"]))	{$user=$_POST["user"];}
if (isset($_GET["user_group"]))	{$user_group=$_GET["user_group"];}
	elseif (isset($_POST["user_group"]))	{$user_group=$_POST["user_group"];}
if (isset($_GET["user_level"]))	{$user_level=$_GET["user_level"];}
	elseif (isset($_POST["user_level"]))	{$user_level=$_POST["user_level"];}
if (isset($_GET["user_start"]))	{$user_start=$_GET["user_start"];}
	elseif (isset($_POST["user_start"]))	{$user_start=$_POST["user_start"];}
if (isset($_GET["user_switching_enabled"]))	{$user_switching_enabled=$_GET["user_switching_enabled"];}
	elseif (isset($_POST["user_switching_enabled"]))	{$user_switching_enabled=$_POST["user_switching_enabled"];}
if (isset($_GET["vd_server_logs"]))	{$vd_server_logs=$_GET["vd_server_logs"];}
	elseif (isset($_POST["vd_server_logs"]))	{$vd_server_logs=$_POST["vd_server_logs"];}
if (isset($_GET["VDstop_rec_after_each_call"]))	{$VDstop_rec_after_each_call=$_GET["VDstop_rec_after_each_call"];}
	elseif (isset($_POST["VDstop_rec_after_each_call"]))	{$VDstop_rec_after_each_call=$_POST["VDstop_rec_after_each_call"];}
if (isset($_GET["VICIDIAL_park_on_extension"]))	{$VICIDIAL_park_on_extension=$_GET["VICIDIAL_park_on_extension"];}
	elseif (isset($_POST["VICIDIAL_park_on_extension"]))	{$VICIDIAL_park_on_extension=$_POST["VICIDIAL_park_on_extension"];}
if (isset($_GET["VICIDIAL_park_on_filename"]))	{$VICIDIAL_park_on_filename=$_GET["VICIDIAL_park_on_filename"];}
	elseif (isset($_POST["VICIDIAL_park_on_filename"]))	{$VICIDIAL_park_on_filename=$_POST["VICIDIAL_park_on_filename"];}
if (isset($_GET["vicidial_recording"]))	{$vicidial_recording=$_GET["vicidial_recording"];}
	elseif (isset($_POST["vicidial_recording"]))	{$vicidial_recording=$_POST["vicidial_recording"];}
if (isset($_GET["vicidial_transfers"]))	{$vicidial_transfers=$_GET["vicidial_transfers"];}
	elseif (isset($_POST["vicidial_transfers"]))	{$vicidial_transfers=$_POST["vicidial_transfers"];}
if (isset($_GET["VICIDIAL_web_URL"]))	{$VICIDIAL_web_URL=$_GET["VICIDIAL_web_URL"];}
	elseif (isset($_POST["VICIDIAL_web_URL"]))	{$VICIDIAL_web_URL=$_POST["VICIDIAL_web_URL"];}
if (isset($_GET["voicemail_button_enabled"]))	{$voicemail_button_enabled=$_GET["voicemail_button_enabled"];}
	elseif (isset($_POST["voicemail_button_enabled"]))	{$voicemail_button_enabled=$_POST["voicemail_button_enabled"];}
if (isset($_GET["voicemail_dump_exten"]))	{$voicemail_dump_exten=$_GET["voicemail_dump_exten"];}
	elseif (isset($_POST["voicemail_dump_exten"]))	{$voicemail_dump_exten=$_POST["voicemail_dump_exten"];}
if (isset($_GET["voicemail_ext"]))	{$voicemail_ext=$_GET["voicemail_ext"];}
	elseif (isset($_POST["voicemail_ext"]))	{$voicemail_ext=$_POST["voicemail_ext"];}
if (isset($_GET["voicemail_exten"]))	{$voicemail_exten=$_GET["voicemail_exten"];}
	elseif (isset($_POST["voicemail_exten"]))	{$voicemail_exten=$_POST["voicemail_exten"];}
if (isset($_GET["voicemail_id"]))	{$voicemail_id=$_GET["voicemail_id"];}
	elseif (isset($_POST["voicemail_id"]))	{$voicemail_id=$_POST["voicemail_id"];}
if (isset($_GET["web_form_address"]))	{$web_form_address=$_GET["web_form_address"];}
	elseif (isset($_POST["web_form_address"]))	{$web_form_address=$_POST["web_form_address"];}
if (isset($_GET["wrapup_message"]))	{$wrapup_message=$_GET["wrapup_message"];}
	elseif (isset($_POST["wrapup_message"]))	{$wrapup_message=$_POST["wrapup_message"];}
if (isset($_GET["wrapup_seconds"]))	{$wrapup_seconds=$_GET["wrapup_seconds"];}
	elseif (isset($_POST["wrapup_seconds"]))	{$wrapup_seconds=$_POST["wrapup_seconds"];}
if (isset($_GET["xferconf_a_dtmf"]))	{$xferconf_a_dtmf=$_GET["xferconf_a_dtmf"];}
	elseif (isset($_POST["xferconf_a_dtmf"]))	{$xferconf_a_dtmf=$_POST["xferconf_a_dtmf"];}
if (isset($_GET["xferconf_a_number"]))	{$xferconf_a_number=$_GET["xferconf_a_number"];}
	elseif (isset($_POST["xferconf_a_number"]))	{$xferconf_a_number=$_POST["xferconf_a_number"];}
if (isset($_GET["xferconf_b_dtmf"]))	{$xferconf_b_dtmf=$_GET["xferconf_b_dtmf"];}
	elseif (isset($_POST["xferconf_b_dtmf"]))	{$xferconf_b_dtmf=$_POST["xferconf_b_dtmf"];}
if (isset($_GET["xferconf_b_number"]))	{$xferconf_b_number=$_GET["xferconf_b_number"];}
	elseif (isset($_POST["xferconf_b_number"]))	{$xferconf_b_number=$_POST["xferconf_b_number"];}
if (isset($_GET["vicidial_balance_active"]))	{$vicidial_balance_active=$_GET["vicidial_balance_active"];}
	elseif (isset($_POST["vicidial_balance_active"]))	{$vicidial_balance_active=$_POST["vicidial_balance_active"];}
if (isset($_GET["balance_trunks_offlimits"]))	{$balance_trunks_offlimits=$_GET["balance_trunks_offlimits"];}
	elseif (isset($_POST["balance_trunks_offlimits"]))	{$balance_trunks_offlimits=$_POST["balance_trunks_offlimits"];}
if (isset($_GET["dedicated_trunks"]))	{$dedicated_trunks=$_GET["dedicated_trunks"];}
	elseif (isset($_POST["dedicated_trunks"]))	{$dedicated_trunks=$_POST["dedicated_trunks"];}
if (isset($_GET["trunk_restriction"]))	{$trunk_restriction=$_GET["trunk_restriction"];}
	elseif (isset($_POST["trunk_restriction"]))	{$trunk_restriction=$_POST["trunk_restriction"];}
if (isset($_GET["campaigns"]))						{$campaigns=$_GET["campaigns"];}
	elseif (isset($_POST["campaigns"]))				{$campaigns=$_POST["campaigns"];}
if (isset($_GET["dial_level_override"]))			{$dial_level_override=$_GET["dial_level_override"];}
	elseif (isset($_POST["dial_level_override"]))	{$dial_level_override=$_POST["dial_level_override"];}
if (isset($_GET["concurrent_transfers"]))			{$concurrent_transfers=$_GET["concurrent_transfers"];}
	elseif (isset($_POST["concurrent_transfers"]))	{$concurrent_transfers=$_POST["concurrent_transfers"];}
if (isset($_GET["auto_alt_dial"]))			{$auto_alt_dial=$_GET["auto_alt_dial"];}
	elseif (isset($_POST["auto_alt_dial"]))	{$auto_alt_dial=$_POST["auto_alt_dial"];}
if (isset($_GET["modify_users"]))				{$modify_users=$_GET["modify_users"];}
	elseif (isset($_POST["modify_users"]))		{$modify_users=$_POST["modify_users"];}
if (isset($_GET["modify_campaigns"]))			{$modify_campaigns=$_GET["modify_campaigns"];}
	elseif (isset($_POST["modify_campaigns"]))	{$modify_campaigns=$_POST["modify_campaigns"];}
if (isset($_GET["modify_lists"]))				{$modify_lists=$_GET["modify_lists"];}
	elseif (isset($_POST["modify_lists"]))		{$modify_lists=$_POST["modify_lists"];}
if (isset($_GET["modify_scripts"]))				{$modify_scripts=$_GET["modify_scripts"];}
	elseif (isset($_POST["modify_scripts"]))	{$modify_scripts=$_POST["modify_scripts"];}
if (isset($_GET["modify_filters"]))				{$modify_filters=$_GET["modify_filters"];}
	elseif (isset($_POST["modify_filters"]))	{$modify_filters=$_POST["modify_filters"];}
if (isset($_GET["modify_ingroups"]))			{$modify_ingroups=$_GET["modify_ingroups"];}
	elseif (isset($_POST["modify_ingroups"]))	{$modify_ingroups=$_POST["modify_ingroups"];}
if (isset($_GET["modify_usergroups"]))			{$modify_usergroups=$_GET["modify_usergroups"];}
	elseif (isset($_POST["modify_usergroups"]))	{$modify_usergroups=$_POST["modify_usergroups"];}
if (isset($_GET["modify_remoteagents"]))			{$modify_remoteagents=$_GET["modify_remoteagents"];}
	elseif (isset($_POST["modify_remoteagents"]))	{$modify_remoteagents=$_POST["modify_remoteagents"];}
if (isset($_GET["modify_servers"]))				{$modify_servers=$_GET["modify_servers"];}
	elseif (isset($_POST["modify_servers"]))	{$modify_servers=$_POST["modify_servers"];}
if (isset($_GET["view_reports"]))				{$view_reports=$_GET["view_reports"];}
	elseif (isset($_POST["view_reports"]))		{$view_reports=$_POST["view_reports"];}
if (isset($_GET["agent_pause_codes_active"]))			{$agent_pause_codes_active=$_GET["agent_pause_codes_active"];}
	elseif (isset($_POST["agent_pause_codes_active"]))	{$agent_pause_codes_active=$_POST["agent_pause_codes_active"];}
if (isset($_GET["pause_code"]))					{$pause_code=$_GET["pause_code"];}
	elseif (isset($_POST["pause_code"]))		{$pause_code=$_POST["pause_code"];}
if (isset($_GET["pause_code_name"]))			{$pause_code_name=$_GET["pause_code_name"];}
	elseif (isset($_POST["pause_code_name"]))	{$pause_code_name=$_POST["pause_code_name"];}
if (isset($_GET["billable"]))					{$billable=$_GET["billable"];}
	elseif (isset($_POST["billable"]))			{$billable=$_POST["billable"];}
if (isset($_GET["campaign_description"]))			{$campaign_description=$_GET["campaign_description"];}
	elseif (isset($_POST["campaign_description"]))	{$campaign_description=$_POST["campaign_description"];}
if (isset($_GET["campaign_stats_rafraîchir"]))			{$campaign_stats_rafraîchir=$_GET["campaign_stats_rafraîchir"];}
	elseif (isset($_POST["campaign_stats_rafraîchir"])){$campaign_stats_rafraîchir=$_POST["campaign_stats_rafraîchir"];}
if (isset($_GET["list_description"]))			{$list_description=$_GET["list_description"];}
	elseif (isset($_POST["list_description"]))	{$list_description=$_POST["list_description"];}
if (isset($_GET["vicidial_recording_override"]))		{$vicidial_recording_override=$_GET["vicidial_recording_override"];}	
	elseif (isset($_POST["vicidial_recording_override"]))	{$vicidial_recording_override=$_POST["vicidial_recording_override"];}
if (isset($_GET["use_non_latin"]))				{$use_non_latin=$_GET["use_non_latin"];}
	elseif (isset($_POST["use_non_latin"]))		{$use_non_latin=$_POST["use_non_latin"];}
if (isset($_GET["webroot_writable"]))			{$webroot_writable=$_GET["webroot_writable"];}
	elseif (isset($_POST["webroot_writable"]))	{$webroot_writable=$_POST["webroot_writable"];}
if (isset($_GET["enable_queuemetrics_logging"]))	{$enable_queuemetrics_logging=$_GET["enable_queuemetrics_logging"];}
	elseif (isset($_POST["enable_queuemetrics_logging"]))	{$enable_queuemetrics_logging=$_POST["enable_queuemetrics_logging"];}
if (isset($_GET["queuemetrics_server_ip"]))				{$queuemetrics_server_ip=$_GET["queuemetrics_server_ip"];}
	elseif (isset($_POST["queuemetrics_server_ip"]))	{$queuemetrics_server_ip=$_POST["queuemetrics_server_ip"];}
if (isset($_GET["queuemetrics_dbname"]))			{$queuemetrics_dbname=$_GET["queuemetrics_dbname"];}
	elseif (isset($_POST["queuemetrics_dbname"]))	{$queuemetrics_dbname=$_POST["queuemetrics_dbname"];}
if (isset($_GET["queuemetrics_login"]))				{$queuemetrics_login=$_GET["queuemetrics_login"];}
	elseif (isset($_POST["queuemetrics_login"]))	{$queuemetrics_login=$_POST["queuemetrics_login"];}
if (isset($_GET["queuemetrics_pass"]))			{$queuemetrics_pass=$_GET["queuemetrics_pass"];}
	elseif (isset($_POST["queuemetrics_pass"]))	{$queuemetrics_pass=$_POST["queuemetrics_pass"];}
if (isset($_GET["queuemetrics_url"]))			{$queuemetrics_url=$_GET["queuemetrics_url"];}
	elseif (isset($_POST["queuemetrics_url"]))	{$queuemetrics_url=$_POST["queuemetrics_url"];}
if (isset($_GET["queuemetrics_log_id"]))			{$queuemetrics_log_id=$_GET["queuemetrics_log_id"];}
	elseif (isset($_POST["queuemetrics_log_id"]))	{$queuemetrics_log_id=$_POST["queuemetrics_log_id"];}
if (isset($_GET["dial_status"]))				{$dial_status=$_GET["dial_status"];}
	elseif (isset($_POST["dial_status"]))		{$dial_status=$_POST["dial_status"];}
if (isset($_GET["queuemetrics_eq_prepend"]))			{$queuemetrics_eq_prepend=$_GET["queuemetrics_eq_prepend"];}
	elseif (isset($_POST["queuemetrics_eq_prepend"]))	{$queuemetrics_eq_prepend=$_POST["queuemetrics_eq_prepend"];}
if (isset($_GET["vicidial_agent_disable"]))				{$vicidial_agent_disable=$_GET["vicidial_agent_disable"];}
	elseif (isset($_POST["vicidial_agent_disable"]))	{$vicidial_agent_disable=$_POST["vicidial_agent_disable"];}
if (isset($_GET["disable_alter_custdata"]))				{$disable_alter_custdata=$_GET["disable_alter_custdata"];}
	elseif (isset($_POST["disable_alter_custdata"]))	{$disable_alter_custdata=$_POST["disable_alter_custdata"];}
if (isset($_GET["alter_custdata_override"]))			{$alter_custdata_override=$_GET["alter_custdata_override"];}
	elseif (isset($_POST["alter_custdata_override"]))	{$alter_custdata_override=$_POST["alter_custdata_override"];}
if (isset($_GET["no_hopper_leads_logins"]))				{$no_hopper_leads_logins=$_GET["no_hopper_leads_logins"];}
	elseif (isset($_POST["no_hopper_leads_logins"]))	{$no_hopper_leads_logins=$_POST["no_hopper_leads_logins"];}
if (isset($_GET["enable_sipsak_messages"]))				{$enable_sipsak_messages=$_GET["enable_sipsak_messages"];}
	elseif (isset($_POST["enable_sipsak_messages"]))	{$enable_sipsak_messages=$_POST["enable_sipsak_messages"];}
if (isset($_GET["allow_sipsak_messages"]))				{$allow_sipsak_messages=$_GET["allow_sipsak_messages"];}
	elseif (isset($_POST["allow_sipsak_messages"]))		{$allow_sipsak_messages=$_POST["allow_sipsak_messages"];}
if (isset($_GET["admin_home_url"]))				{$admin_home_url=$_GET["admin_home_url"];}
	elseif (isset($_POST["admin_home_url"]))	{$admin_home_url=$_POST["admin_home_url"];}
if (isset($_GET["list_order_mix"]))				{$list_order_mix=$_GET["list_order_mix"];}
	elseif (isset($_POST["list_order_mix"]))	{$list_order_mix=$_POST["list_order_mix"];}
if (isset($_GET["vcl_id"]))						{$vcl_id=$_GET["vcl_id"];}
	elseif (isset($_POST["vcl_id"]))			{$vcl_id=$_POST["vcl_id"];}
if (isset($_GET["vcl_name"]))					{$vcl_name=$_GET["vcl_name"];}
	elseif (isset($_POST["vcl_name"]))			{$vcl_name=$_POST["vcl_name"];}
if (isset($_GET["list_mix_container"]))				{$list_mix_container=$_GET["list_mix_container"];}
	elseif (isset($_POST["list_mix_container"]))	{$list_mix_container=$_POST["list_mix_container"];}
if (isset($_GET["mix_method"]))					{$mix_method=$_GET["mix_method"];}
	elseif (isset($_POST["mix_method"]))		{$mix_method=$_POST["mix_method"];}
if (isset($_GET["human_answered"]))				{$human_answered=$_GET["human_answered"];}
	elseif (isset($_POST["human_answered"]))	{$human_answered=$_POST["human_answered"];}
if (isset($_GET["category"]))					{$category=$_GET["category"];}
	elseif (isset($_POST["category"]))			{$category=$_POST["category"];}
if (isset($_GET["vsc_id"]))						{$vsc_id=$_GET["vsc_id"];}
	elseif (isset($_POST["vsc_id"]))			{$vsc_id=$_POST["vsc_id"];}
if (isset($_GET["vsc_name"]))					{$vsc_name=$_GET["vsc_name"];}
	elseif (isset($_POST["vsc_name"]))			{$vsc_name=$_POST["vsc_name"];}
if (isset($_GET["vsc_description"]))			{$vsc_description=$_GET["vsc_description"];}
	elseif (isset($_POST["vsc_description"]))	{$vsc_description=$_POST["vsc_description"];}
if (isset($_GET["tovdad_display"]))				{$tovdad_display=$_GET["tovdad_display"];}
	elseif (isset($_POST["tovdad_display"]))	{$tovdad_display=$_POST["tovdad_display"];}
if (isset($_GET["mix_container_item"]))				{$mix_container_item=$_GET["mix_container_item"];}
	elseif (isset($_POST["mix_container_item"]))	{$mix_container_item=$_POST["mix_container_item"];}
if (isset($_GET["enable_agc_xfer_log"]))			{$enable_agc_xfer_log=$_GET["enable_agc_xfer_log"];}
	elseif (isset($_POST["enable_agc_xfer_log"]))	{$enable_agc_xfer_log=$_POST["enable_agc_xfer_log"];}
if (isset($_GET["after_hours_action"]))				{$after_hours_action=$_GET["after_hours_action"];}
	elseif (isset($_POST["after_hours_action"]))	{$after_hours_action=$_POST["after_hours_action"];}
if (isset($_GET["after_hours_message_filename"]))			{$after_hours_message_filename=$_GET["after_hours_message_filename"];}
	elseif (isset($_POST["after_hours_message_filename"]))	{$after_hours_message_filename=$_POST["after_hours_message_filename"];}
if (isset($_GET["after_hours_exten"]))				{$after_hours_exten=$_GET["after_hours_exten"];}
	elseif (isset($_POST["after_hours_exten"]))		{$after_hours_exten=$_POST["after_hours_exten"];}
if (isset($_GET["after_hours_voicemail"]))			{$after_hours_voicemail=$_GET["after_hours_voicemail"];}
	elseif (isset($_POST["after_hours_voicemail"]))	{$after_hours_voicemail=$_POST["after_hours_voicemail"];}
if (isset($_GET["welcome_message_filename"]))			{$welcome_message_filename=$_GET["welcome_message_filename"];}
	elseif (isset($_POST["welcome_message_filename"]))	{$welcome_message_filename=$_POST["welcome_message_filename"];}
if (isset($_GET["moh_context"]))					{$moh_context=$_GET["moh_context"];}
	elseif (isset($_POST["moh_context"]))			{$moh_context=$_POST["moh_context"];}
if (isset($_GET["onhold_prompt_filename"]))				{$onhold_prompt_filename=$_GET["onhold_prompt_filename"];}
	elseif (isset($_POST["onhold_prompt_filename"]))	{$onhold_prompt_filename=$_POST["onhold_prompt_filename"];}
if (isset($_GET["prompt_interval"]))				{$prompt_interval=$_GET["prompt_interval"];}
	elseif (isset($_POST["prompt_interval"]))		{$prompt_interval=$_POST["prompt_interval"];}
if (isset($_GET["agent_alert_exten"]))				{$agent_alert_exten=$_GET["agent_alert_exten"];}
	elseif (isset($_POST["agent_alert_exten"]))		{$agent_alert_exten=$_POST["agent_alert_exten"];}
if (isset($_GET["agent_alert_delay"]))				{$agent_alert_delay=$_GET["agent_alert_delay"];}
	elseif (isset($_POST["agent_alert_delay"]))		{$agent_alert_delay=$_POST["agent_alert_delay"];}
if (isset($_GET["group_rank"]))					{$group_rank=$_GET["group_rank"];}
	elseif (isset($_POST["group_rank"]))		{$group_rank=$_POST["group_rank"];}
if (isset($_GET["campaign_allow_inbound"]))				{$campaign_allow_inbound=$_GET["campaign_allow_inbound"];}
	elseif (isset($_POST["campaign_allow_inbound"]))	{$campaign_allow_inbound=$_POST["campaign_allow_inbound"];}
if (isset($_GET["old_campaign_allow_inbound"]))				{$old_campaign_allow_inbound=$_GET["old_campaign_allow_inbound"];}
	elseif (isset($_POST["old_campaign_allow_inbound"]))	{$old_campaign_allow_inbound=$_POST["old_campaign_allow_inbound"];}
if (isset($_GET["manual_dial_list_id"]))				{$manual_dial_list_id=$_GET["manual_dial_list_id"];}
	elseif (isset($_POST["manual_dial_list_id"]))		{$manual_dial_list_id=$_POST["manual_dial_list_id"];}
if (isset($_GET["campaign_rank"]))				{$campaign_rank=$_GET["campaign_rank"];}
	elseif (isset($_POST["campaign_rank"]))		{$campaign_rank=$_POST["campaign_rank"];}
if (isset($_GET["source_campaign_id"]))				{$source_campaign_id=$_GET["source_campaign_id"];}
	elseif (isset($_POST["source_campaign_id"]))	{$source_campaign_id=$_POST["source_campaign_id"];}
if (isset($_GET["source_user_id"]))				{$source_user_id=$_GET["source_user_id"];}
	elseif (isset($_POST["source_user_id"]))	{$source_user_id=$_POST["source_user_id"];}
if (isset($_GET["source_group_id"]))			{$source_group_id=$_GET["source_group_id"];}
	elseif (isset($_POST["source_group_id"]))	{$source_group_id=$_POST["source_group_id"];}
if (isset($_GET["default_xfer_group"]))				{$default_xfer_group=$_GET["default_xfer_group"];}
	elseif (isset($_POST["default_xfer_group"]))	{$default_xfer_group=$_POST["default_xfer_group"];}
if (isset($_GET["qc_enabled"]))					{$qc_enabled=$_GET["qc_enabled"];}
	elseif (isset($_POST["qc_enabled"]))		{$qc_enabled=$_POST["qc_enabled"];}
if (isset($_GET["qc_user_level"]))				{$qc_user_level=$_GET["qc_user_level"];}
	elseif (isset($_POST["qc_user_level"]))		{$qc_user_level=$_POST["qc_user_level"];}
if (isset($_GET["qc_pass"]))					{$qc_pass=$_GET["qc_pass"];}
	elseif (isset($_POST["qc_pass"]))			{$qc_pass=$_POST["qc_pass"];}
if (isset($_GET["qc_finish"]))					{$qc_finish=$_GET["qc_finish"];}
	elseif (isset($_POST["qc_finish"]))			{$qc_finish=$_POST["qc_finish"];}
if (isset($_GET["qc_commit"]))					{$qc_commit=$_GET["qc_commit"];}
	elseif (isset($_POST["qc_commit"]))			{$qc_commit=$_POST["qc_commit"];}
if (isset($_GET["qc_campaigns"]))				{$qc_campaigns=$_GET["qc_campaigns"];}
	elseif (isset($_POST["qc_campaigns"]))		{$qc_campaigns=$_POST["qc_campaigns"];}
if (isset($_GET["qc_groups"]))					{$qc_groups=$_GET["qc_groups"];}
	elseif (isset($_POST["qc_groups"]))			{$qc_groups=$_POST["qc_groups"];}
if (isset($_GET["queue_priority"]))				{$queue_priority=$_GET["queue_priority"];}
	elseif (isset($_POST["queue_priority"]))	{$queue_priority=$_POST["queue_priority"];}
if (isset($_GET["drop_inbound_group"]))				{$drop_inbound_group=$_GET["drop_inbound_group"];}
	elseif (isset($_POST["drop_inbound_group"]))	{$drop_inbound_group=$_POST["drop_inbound_group"];}
if (isset($_GET["qc_statuses"]))			{$qc_statuses=$_GET["qc_statuses"];}
	elseif (isset($_POST["qc_statuses"]))	{$qc_statuses=$_POST["qc_statuses"];}
if (isset($_GET["qc_lists"]))				{$qc_lists=$_GET["qc_lists"];}
	elseif (isset($_POST["qc_lists"]))		{$qc_lists=$_POST["qc_lists"];}
if (isset($_GET["qc_get_record_launch"]))			{$qc_get_record_launch=$_GET["qc_get_record_launch"];}
	elseif (isset($_POST["qc_get_record_launch"]))	{$qc_get_record_launch=$_POST["qc_get_record_launch"];}
if (isset($_GET["qc_show_recording"]))				{$qc_show_recording=$_GET["qc_show_recording"];}
	elseif (isset($_POST["qc_show_recording"]))		{$qc_show_recording=$_POST["qc_show_recording"];}
if (isset($_GET["qc_shift_id"]))				{$qc_shift_id=$_GET["qc_shift_id"];}
	elseif (isset($_POST["qc_shift_id"]))		{$qc_shift_id=$_POST["qc_shift_id"];}
if (isset($_GET["qc_web_form_address"]))				{$qc_web_form_address=$_GET["qc_web_form_address"];}
	elseif (isset($_POST["qc_web_form_address"]))	{$qc_web_form_address=$_POST["qc_web_form_address"];}
if (isset($_GET["qc_script"]))						{$qc_script=$_GET["qc_script"];}
	elseif (isset($_POST["qc_script"]))				{$qc_script=$_POST["qc_script"];}
if (isset($_GET["ingroup_recording_override"]))		{$ingroup_recording_override=$_GET["ingroup_recording_override"];}	
	elseif (isset($_POST["ingroup_recording_override"]))	{$ingroup_recording_override=$_POST["ingroup_recording_override"];}
if (isset($_GET["code"]))				{$code=$_GET["code"];}	
	elseif (isset($_POST["code"]))		{$code=$_POST["code"];}
if (isset($_GET["code_name"]))			{$code_name=$_GET["code_name"];}	
	elseif (isset($_POST["code_name"]))	{$code_name=$_POST["code_name"];}
if (isset($_GET["afterhours_xfer_group"]))			{$afterhours_xfer_group=$_GET["afterhours_xfer_group"];}	
	elseif (isset($_POST["afterhours_xfer_group"]))	{$afterhours_xfer_group=$_POST["afterhours_xfer_group"];}
if (isset($_GET["alias_id"]))				{$alias_id=$_GET["alias_id"];}	
	elseif (isset($_POST["alias_id"]))		{$alias_id=$_POST["alias_id"];}
if (isset($_GET["alias_name"]))				{$alias_name=$_GET["alias_name"];}	
	elseif (isset($_POST["alias_name"]))		{$alias_name=$_POST["alias_name"];}
if (isset($_GET["logins_list"]))				{$logins_list=$_GET["logins_list"];}	
	elseif (isset($_POST["logins_list"]))		{$logins_list=$_POST["logins_list"];}
if (isset($_GET["shift_id"]))				{$shift_id=$_GET["shift_id"];}	
	elseif (isset($_POST["shift_id"]))		{$shift_id=$_POST["shift_id"];}
if (isset($_GET["shift_name"]))				{$shift_name=$_GET["shift_name"];}	
	elseif (isset($_POST["shift_name"]))		{$shift_name=$_POST["shift_name"];}
if (isset($_GET["shift_start_time"]))			{$shift_start_time=$_GET["shift_start_time"];}	
	elseif (isset($_POST["shift_start_time"]))	{$shift_start_time=$_POST["shift_start_time"];}
if (isset($_GET["shift_length"]))				{$shift_length=$_GET["shift_length"];}	
	elseif (isset($_POST["shift_length"]))		{$shift_length=$_POST["shift_length"];}
if (isset($_GET["shift_weekdays"]))				{$shift_weekdays=$_GET["shift_weekdays"];}	
	elseif (isset($_POST["shift_weekdays"]))	{$shift_weekdays=$_POST["shift_weekdays"];}
if (isset($_GET["group_shifts"]))			{$group_shifts=$_GET["group_shifts"];}	
	elseif (isset($_POST["group_shifts"]))	{$group_shifts=$_POST["group_shifts"];}
if (isset($_GET["timeclock_end_of_day"]))			{$timeclock_end_of_day=$_GET["timeclock_end_of_day"];}	
	elseif (isset($_POST["timeclock_end_of_day"]))	{$timeclock_end_of_day=$_POST["timeclock_end_of_day"];}
if (isset($_GET["survey_first_audio_file"]))			{$survey_first_audio_file=$_GET["survey_first_audio_file"];}	
	elseif (isset($_POST["survey_first_audio_file"]))	{$survey_first_audio_file=$_POST["survey_first_audio_file"];}
if (isset($_GET["survey_dtmf_digits"]))					{$survey_dtmf_digits=$_GET["survey_dtmf_digits"];}	
	elseif (isset($_POST["survey_dtmf_digits"]))		{$survey_dtmf_digits=$_POST["survey_dtmf_digits"];}
if (isset($_GET["survey_ni_digit"]))					{$survey_ni_digit=$_GET["survey_ni_digit"];}	
	elseif (isset($_POST["survey_ni_digit"]))			{$survey_ni_digit=$_POST["survey_ni_digit"];}
if (isset($_GET["survey_opt_in_audio_file"]))			{$survey_opt_in_audio_file=$_GET["survey_opt_in_audio_file"];}	
	elseif (isset($_POST["survey_opt_in_audio_file"]))	{$survey_opt_in_audio_file=$_POST["survey_opt_in_audio_file"];}
if (isset($_GET["survey_ni_audio_file"]))				{$survey_ni_audio_file=$_GET["survey_ni_audio_file"];}	
	elseif (isset($_POST["survey_ni_audio_file"]))		{$survey_ni_audio_file=$_POST["survey_ni_audio_file"];}
if (isset($_GET["survey_method"]))						{$survey_method=$_GET["survey_method"];}	
	elseif (isset($_POST["survey_method"]))				{$survey_method=$_POST["survey_method"];}
if (isset($_GET["survey_no_response_action"]))			{$survey_no_response_action=$_GET["survey_no_response_action"];}	
	elseif (isset($_POST["survey_no_response_action"]))	{$survey_no_response_action=$_POST["survey_no_response_action"];}
if (isset($_GET["survey_ni_status"]))					{$survey_ni_status=$_GET["survey_ni_status"];}	
	elseif (isset($_POST["survey_ni_status"]))			{$survey_ni_status=$_POST["survey_ni_status"];}
if (isset($_GET["survey_response_digit_map"]))			{$survey_response_digit_map=$_GET["survey_response_digit_map"];}	
	elseif (isset($_POST["survey_response_digit_map"]))	{$survey_response_digit_map=$_POST["survey_response_digit_map"];}
if (isset($_GET["survey_xfer_exten"]))					{$survey_xfer_exten=$_GET["survey_xfer_exten"];}	
	elseif (isset($_POST["survey_xfer_exten"]))			{$survey_xfer_exten=$_POST["survey_xfer_exten"];}
if (isset($_GET["survey_camp_record_dir"]))				{$survey_camp_record_dir=$_GET["survey_camp_record_dir"];}	
	elseif (isset($_POST["survey_camp_record_dir"]))	{$survey_camp_record_dir=$_POST["survey_camp_record_dir"];}
if (isset($_GET["add_timeclock_log"]))				{$add_timeclock_log=$_GET["add_timeclock_log"];}	
	elseif (isset($_POST["add_timeclock_log"]))		{$add_timeclock_log=$_POST["add_timeclock_log"];}
if (isset($_GET["modify_timeclock_log"]))			{$modify_timeclock_log=$_GET["modify_timeclock_log"];}	
	elseif (isset($_POST["modify_timeclock_log"]))	{$modify_timeclock_log=$_POST["modify_timeclock_log"];}
if (isset($_GET["delete_timeclock_log"]))			{$delete_timeclock_log=$_GET["delete_timeclock_log"];}	
	elseif (isset($_POST["delete_timeclock_log"]))	{$delete_timeclock_log=$_POST["delete_timeclock_log"];}
if (isset($_GET["phone_numbers"]))					{$phone_numbers=$_GET["phone_numbers"];}	
	elseif (isset($_POST["phone_numbers"]))			{$phone_numbers=$_POST["phone_numbers"];}
if (isset($_GET["vdc_header_date_format"]))					{$vdc_header_date_format=$_GET["vdc_header_date_format"];}	
	elseif (isset($_POST["vdc_header_date_format"]))		{$vdc_header_date_format=$_POST["vdc_header_date_format"];}
if (isset($_GET["vdc_customer_date_format"]))				{$vdc_customer_date_format=$_GET["vdc_customer_date_format"];}	
	elseif (isset($_POST["vdc_customer_date_format"]))		{$vdc_customer_date_format=$_POST["vdc_customer_date_format"];}
if (isset($_GET["vdc_header_phone_format"]))				{$vdc_header_phone_format=$_GET["vdc_header_phone_format"];}	
	elseif (isset($_POST["vdc_header_phone_format"]))		{$vdc_header_phone_format=$_POST["vdc_header_phone_format"];}
if (isset($_GET["disable_alter_custphone"]))			{$disable_alter_custphone=$_GET["disable_alter_custphone"];}	
	elseif (isset($_POST["disable_alter_custphone"]))	{$disable_alter_custphone=$_POST["disable_alter_custphone"];}
if (isset($_GET["alter_custphone_override"]))			{$alter_custphone_override=$_GET["alter_custphone_override"];}	
	elseif (isset($_POST["alter_custphone_override"]))	{$alter_custphone_override=$_POST["alter_custphone_override"];}
if (isset($_GET["vdc_agent_api_access"]))				{$vdc_agent_api_access=$_GET["vdc_agent_api_access"];}	
	elseif (isset($_POST["vdc_agent_api_access"]))		{$vdc_agent_api_access=$_POST["vdc_agent_api_access"];}
if (isset($_GET["vdc_agent_api_active"]))				{$vdc_agent_api_active=$_GET["vdc_agent_api_active"];}	
	elseif (isset($_POST["vdc_agent_api_active"]))		{$vdc_agent_api_active=$_POST["vdc_agent_api_active"];}
if (isset($_GET["display_queue_count"]))				{$display_queue_count=$_GET["display_queue_count"];}	
	elseif (isset($_POST["display_queue_count"]))		{$display_queue_count=$_POST["display_queue_count"];}
if (isset($_GET["sale_category"]))				{$sale_category=$_GET["sale_category"];}	
	elseif (isset($_POST["sale_category"]))		{$sale_category=$_POST["sale_category"];}
if (isset($_GET["dead_lead_category"]))				{$dead_lead_category=$_GET["dead_lead_category"];}	
	elseif (isset($_POST["dead_lead_category"]))	{$dead_lead_category=$_POST["dead_lead_category"];}
if (isset($_GET["manual_dial_filter"]))				{$manual_dial_filter=$_GET["manual_dial_filter"];}	
	elseif (isset($_POST["manual_dial_filter"]))	{$manual_dial_filter=$_POST["manual_dial_filter"];}
if (isset($_GET["agent_clipboard_copy"]))			{$agent_clipboard_copy=$_GET["agent_clipboard_copy"];}	
	elseif (isset($_POST["agent_clipboard_copy"]))	{$agent_clipboard_copy=$_POST["agent_clipboard_copy"];}
if (isset($_GET["agent_extended_alt_dial"]))			{$agent_extended_alt_dial=$_GET["agent_extended_alt_dial"];}	
	elseif (isset($_POST["agent_extended_alt_dial"]))	{$agent_extended_alt_dial=$_POST["agent_extended_alt_dial"];}
if (isset($_GET["play_place_in_line"]))				{$play_place_in_line=$_GET["play_place_in_line"];}	
	elseif (isset($_POST["play_place_in_line"]))	{$play_place_in_line=$_POST["play_place_in_line"];}
if (isset($_GET["play_estimate_hold_time"]))			{$play_estimate_hold_time=$_GET["play_estimate_hold_time"];}	
	elseif (isset($_POST["play_estimate_hold_time"]))	{$play_estimate_hold_time=$_POST["play_estimate_hold_time"];}
if (isset($_GET["hold_time_option"]))				{$hold_time_option=$_GET["hold_time_option"];}	
	elseif (isset($_POST["hold_time_option"]))		{$hold_time_option=$_POST["hold_time_option"];}
if (isset($_GET["hold_time_option_seconds"]))			{$hold_time_option_seconds=$_GET["hold_time_option_seconds"];}	
	elseif (isset($_POST["hold_time_option_seconds"]))	{$hold_time_option_seconds=$_POST["hold_time_option_seconds"];}
if (isset($_GET["hold_time_option_exten"]))				{$hold_time_option_exten=$_GET["hold_time_option_exten"];}	
	elseif (isset($_POST["hold_time_option_exten"]))	{$hold_time_option_exten=$_POST["hold_time_option_exten"];}
if (isset($_GET["hold_time_option_voicemail"]))				{$hold_time_option_voicemail=$_GET["hold_time_option_voicemail"];}	
	elseif (isset($_POST["hold_time_option_voicemail"]))	{$hold_time_option_voicemail=$_POST["hold_time_option_voicemail"];}
if (isset($_GET["hold_time_option_xfer_group"]))			{$hold_time_option_xfer_group=$_GET["hold_time_option_xfer_group"];}	
	elseif (isset($_POST["hold_time_option_xfer_group"]))	{$hold_time_option_xfer_group=$_POST["hold_time_option_xfer_group"];}
if (isset($_GET["hold_time_option_callback_filename"]))				{$hold_time_option_callback_filename=$_GET["hold_time_option_callback_filename"];}	
	elseif (isset($_POST["hold_time_option_callback_filename"]))	{$hold_time_option_callback_filename=$_POST["hold_time_option_callback_filename"];}
if (isset($_GET["hold_time_option_callback_list_id"]))				{$hold_time_option_callback_list_id=$_GET["hold_time_option_callback_list_id"];}	
	elseif (isset($_POST["hold_time_option_callback_list_id"]))		{$hold_time_option_callback_list_id=$_POST["hold_time_option_callback_list_id"];}
if (isset($_GET["hold_recall_xfer_group"]))				{$hold_recall_xfer_group=$_GET["hold_recall_xfer_group"];}	
	elseif (isset($_POST["hold_recall_xfer_group"]))	{$hold_recall_xfer_group=$_POST["hold_recall_xfer_group"];}
if (isset($_GET["no_delay_call_route"]))			{$no_delay_call_route=$_GET["no_delay_call_route"];}	
	elseif (isset($_POST["no_delay_call_route"]))	{$no_delay_call_route=$_POST["no_delay_call_route"];}
if (isset($_GET["play_welcome_message"]))			{$play_welcome_message=$_GET["play_welcome_message"];}	
	elseif (isset($_POST["play_welcome_message"]))	{$play_welcome_message=$_POST["play_welcome_message"];}
if (isset($_GET["did_id"]))					{$did_id=$_GET["did_id"];}	
	elseif (isset($_POST["did_id"]))		{$did_id=$_POST["did_id"];}
if (isset($_GET["source_did"]))				{$source_did=$_GET["source_did"];}	
	elseif (isset($_POST["source_did"]))	{$source_did=$_POST["source_did"];}
if (isset($_GET["did_pattern"]))			{$did_pattern=$_GET["did_pattern"];}	
	elseif (isset($_POST["did_pattern"]))	{$did_pattern=$_POST["did_pattern"];}
if (isset($_GET["did_description"]))			{$did_description=$_GET["did_description"];}	
	elseif (isset($_POST["did_description"]))	{$did_description=$_POST["did_description"];}
if (isset($_GET["did_active"]))				{$did_active=$_GET["did_active"];}	
	elseif (isset($_POST["did_active"]))	{$did_active=$_POST["did_active"];}
if (isset($_GET["did_route"]))				{$did_route=$_GET["did_route"];}	
	elseif (isset($_POST["did_route"]))		{$did_route=$_POST["did_route"];}
if (isset($_GET["exten_context"]))			{$exten_context=$_GET["exten_context"];}	
	elseif (isset($_POST["exten_context"]))	{$exten_context=$_POST["exten_context"];}
if (isset($_GET["phone"]))					{$phone=$_GET["phone"];}	
	elseif (isset($_POST["phone"]))			{$phone=$_POST["phone"];}
if (isset($_GET["user_unavailable_action"]))			{$user_unavailable_action=$_GET["user_unavailable_action"];}	
	elseif (isset($_POST["user_unavailable_action"]))	{$user_unavailable_action=$_POST["user_unavailable_action"];}
if (isset($_GET["user_route_settings_ingroup"]))			{$user_route_settings_ingroup=$_GET["user_route_settings_ingroup"];}	
	elseif (isset($_POST["user_route_settings_ingroup"]))	{$user_route_settings_ingroup=$_POST["user_route_settings_ingroup"];}
if (isset($_GET["call_handle_method"]))				{$call_handle_method=$_GET["call_handle_method"];}	
	elseif (isset($_POST["call_handle_method"]))	{$call_handle_method=$_POST["call_handle_method"];}
if (isset($_GET["agent_search_method"]))			{$agent_search_method=$_GET["agent_search_method"];}	
	elseif (isset($_POST["agent_search_method"]))	{$agent_search_method=$_POST["agent_search_method"];}
if (isset($_GET["phone_code"]))				{$phone_code=$_GET["phone_code"];}	
	elseif (isset($_POST["phone_code"]))	{$phone_code=$_POST["phone_code"];}
if (isset($_GET["email"]))					{$email=$_GET["email"];}	
	elseif (isset($_POST["email"]))			{$email=$_POST["email"];}
if (isset($_GET["modify_inbound_dids"]))			{$modify_inbound_dids=$_GET["modify_inbound_dids"];}	
	elseif (isset($_POST["modify_inbound_dids"]))	{$modify_inbound_dids=$_POST["modify_inbound_dids"];}
if (isset($_GET["delete_inbound_dids"]))			{$delete_inbound_dids=$_GET["delete_inbound_dids"];}	
	elseif (isset($_POST["delete_inbound_dids"]))	{$delete_inbound_dids=$_POST["delete_inbound_dids"];}
if (isset($_GET["three_way_call_cid"]))				{$three_way_call_cid=$_GET["three_way_call_cid"];}	
	elseif (isset($_POST["three_way_call_cid"]))	{$three_way_call_cid=$_POST["three_way_call_cid"];}
if (isset($_GET["three_way_dial_prefix"]))			{$three_way_dial_prefix=$_GET["three_way_dial_prefix"];}
	elseif (isset($_POST["three_way_dial_prefix"]))	{$three_way_dial_prefix=$_POST["three_way_dial_prefix"];}
if (isset($_GET["forced_timeclock_login"]))				{$forced_timeclock_login=$_GET["forced_timeclock_login"];}
	elseif (isset($_POST["forced_timeclock_login"]))	{$forced_timeclock_login=$_POST["forced_timeclock_login"];}
if (isset($_GET["answer_sec_pct_rt_stat_one"]))				{$answer_sec_pct_rt_stat_one=$_GET["answer_sec_pct_rt_stat_one"];}
	elseif (isset($_POST["answer_sec_pct_rt_stat_one"]))	{$answer_sec_pct_rt_stat_one=$_POST["answer_sec_pct_rt_stat_one"];}
if (isset($_GET["answer_sec_pct_rt_stat_two"]))				{$answer_sec_pct_rt_stat_two=$_GET["answer_sec_pct_rt_stat_two"];}
	elseif (isset($_POST["answer_sec_pct_rt_stat_two"]))	{$answer_sec_pct_rt_stat_two=$_POST["answer_sec_pct_rt_stat_two"];}
if (isset($_GET["list_active_change"]))				{$list_active_change=$_GET["list_active_change"];}
	elseif (isset($_POST["list_active_change"]))	{$list_active_change=$_POST["list_active_change"];}
if (isset($_GET["web_form_target"]))			{$web_form_target=$_GET["web_form_target"];}
	elseif (isset($_POST["web_form_target"]))	{$web_form_target=$_POST["web_form_target"];}
if (isset($_GET["alt_server_ip"]))				{$alt_server_ip=$_GET["alt_server_ip"];}
	elseif (isset($_POST["alt_server_ip"]))	{$alt_server_ip=$_POST["alt_server_ip"];}
if (isset($_GET["recording_web_link"]))				{$recording_web_link=$_GET["recording_web_link"];}
	elseif (isset($_POST["recording_web_link"]))	{$recording_web_link=$_POST["recording_web_link"];}
if (isset($_GET["enable_vtiger_integration"]))			{$enable_vtiger_integration=$_GET["enable_vtiger_integration"];}
	elseif (isset($_POST["enable_vtiger_integration"]))	{$enable_vtiger_integration=$_POST["enable_vtiger_integration"];}
if (isset($_GET["vtiger_server_ip"]))			{$vtiger_server_ip=$_GET["vtiger_server_ip"];}
	elseif (isset($_POST["vtiger_server_ip"]))	{$vtiger_server_ip=$_POST["vtiger_server_ip"];}
if (isset($_GET["vtiger_dbname"]))				{$vtiger_dbname=$_GET["vtiger_dbname"];}
	elseif (isset($_POST["vtiger_dbname"]))		{$vtiger_dbname=$_POST["vtiger_dbname"];}
if (isset($_GET["vtiger_login"]))			{$vtiger_login=$_GET["vtiger_login"];}
	elseif (isset($_POST["vtiger_login"]))	{$vtiger_login=$_POST["vtiger_login"];}
if (isset($_GET["vtiger_pass"]))			{$vtiger_pass=$_GET["vtiger_pass"];}
	elseif (isset($_POST["vtiger_pass"]))	{$vtiger_pass=$_POST["vtiger_pass"];}
if (isset($_GET["vtiger_url"]))				{$vtiger_url=$_GET["vtiger_url"];}
	elseif (isset($_POST["vtiger_url"]))	{$vtiger_url=$_POST["vtiger_url"];}
if (isset($_GET["vtiger_search_category"]))				{$vtiger_search_category=$_GET["vtiger_search_category"];}
	elseif (isset($_POST["vtiger_search_category"]))	{$vtiger_search_category=$_POST["vtiger_search_category"];}
if (isset($_GET["vtiger_create_call_record"]))			{$vtiger_create_call_record=$_GET["vtiger_create_call_record"];}
	elseif (isset($_POST["vtiger_create_call_record"]))	{$vtiger_create_call_record=$_POST["vtiger_create_call_record"];}
if (isset($_GET["vtiger_create_lead_record"]))			{$vtiger_create_lead_record=$_GET["vtiger_create_lead_record"];}
	elseif (isset($_POST["vtiger_create_lead_record"]))	{$vtiger_create_lead_record=$_POST["vtiger_create_lead_record"];}
if (isset($_GET["vtiger_screen_login"]))			{$vtiger_screen_login=$_GET["vtiger_screen_login"];}
	elseif (isset($_POST["vtiger_screen_login"]))	{$vtiger_screen_login=$_POST["vtiger_screen_login"];}
if (isset($_GET["qc_features_active"]))				{$qc_features_active=$_GET["qc_features_active"];}
	elseif (isset($_POST["qc_features_active"]))	{$qc_features_active=$_POST["qc_features_active"];}
if (isset($_GET["outbound_autodial_active"]))			{$outbound_autodial_active=$_GET["outbound_autodial_active"];}
	elseif (isset($_POST["outbound_autodial_active"]))	{$outbound_autodial_active=$_POST["outbound_autodial_active"];}
if (isset($_GET["cpd_amd_action"]))				{$cpd_amd_action=$_GET["cpd_amd_action"];}
	elseif (isset($_POST["cpd_amd_action"]))	{$cpd_amd_action=$_POST["cpd_amd_action"];}
if (isset($_GET["download_lists"]))				{$download_lists=$_GET["download_lists"];}
	elseif (isset($_POST["download_lists"]))	{$download_lists=$_POST["download_lists"];}
if (isset($_GET["active_asterisk_server"]))				{$active_asterisk_server=$_GET["active_asterisk_server"];}
	elseif (isset($_POST["active_asterisk_server"]))	{$active_asterisk_server=$_POST["active_asterisk_server"];}
if (isset($_GET["generate_vicidial_conf"]))				{$generate_vicidial_conf=$_GET["generate_vicidial_conf"];}
	elseif (isset($_POST["generate_vicidial_conf"]))	{$generate_vicidial_conf=$_POST["generate_vicidial_conf"];}
if (isset($_GET["rebuild_conf_files"]))				{$rebuild_conf_files=$_GET["rebuild_conf_files"];}
	elseif (isset($_POST["rebuild_conf_files"]))	{$rebuild_conf_files=$_POST["rebuild_conf_files"];}
if (isset($_GET["template_id"]))			{$template_id=$_GET["template_id"];}
	elseif (isset($_POST["template_id"]))	{$template_id=$_POST["template_id"];}
if (isset($_GET["conf_override"]))			{$conf_override=$_GET["conf_override"];}
	elseif (isset($_POST["conf_override"]))	{$conf_override=$_POST["conf_override"];}
if (isset($_GET["template_name"]))			{$template_name=$_GET["template_name"];}
	elseif (isset($_POST["template_name"]))	{$template_name=$_POST["template_name"];}
if (isset($_GET["template_contents"]))			{$template_contents=$_GET["template_contents"];}
	elseif (isset($_POST["template_contents"]))	{$template_contents=$_POST["template_contents"];}
if (isset($_GET["carrier_id"]))			{$carrier_id=$_GET["carrier_id"];}
	elseif (isset($_POST["carrier_id"]))	{$carrier_id=$_POST["carrier_id"];}
if (isset($_GET["carrier_name"]))			{$carrier_name=$_GET["carrier_name"];}
	elseif (isset($_POST["carrier_name"]))	{$carrier_name=$_POST["carrier_name"];}
if (isset($_GET["registration_string"]))			{$registration_string=$_GET["registration_string"];}
	elseif (isset($_POST["registration_string"]))	{$registration_string=$_POST["registration_string"];}
if (isset($_GET["account_entry"]))			{$account_entry=$_GET["account_entry"];}
	elseif (isset($_POST["account_entry"]))	{$account_entry=$_POST["account_entry"];}
if (isset($_GET["globals_string"]))				{$globals_string=$_GET["globals_string"];}
	elseif (isset($_POST["globals_string"]))	{$globals_string=$_POST["globals_string"];}
if (isset($_GET["dialplan_entry"]))				{$dialplan_entry=$_GET["dialplan_entry"];}
	elseif (isset($_POST["dialplan_entry"]))	{$dialplan_entry=$_POST["dialplan_entry"];}
if (isset($_GET["group_alias_id"]))				{$group_alias_id=$_GET["group_alias_id"];}
	elseif (isset($_POST["group_alias_id"]))	{$group_alias_id=$_POST["group_alias_id"];}
if (isset($_GET["group_alias_name"]))				{$group_alias_name=$_GET["group_alias_name"];}
	elseif (isset($_POST["group_alias_name"]))	{$group_alias_name=$_POST["group_alias_name"];}
if (isset($_GET["caller_id_number"]))				{$caller_id_number=$_GET["caller_id_number"];}
	elseif (isset($_POST["caller_id_number"]))	{$caller_id_number=$_POST["caller_id_number"];}
if (isset($_GET["caller_id_name"]))				{$caller_id_name=$_GET["caller_id_name"];}
	elseif (isset($_POST["caller_id_name"]))	{$caller_id_name=$_POST["caller_id_name"];}
if (isset($_GET["agent_allow_group_alias"]))			{$agent_allow_group_alias=$_GET["agent_allow_group_alias"];}
	elseif (isset($_POST["agent_allow_group_alias"]))	{$agent_allow_group_alias=$_POST["agent_allow_group_alias"];}
if (isset($_GET["default_group_alias"]))				{$default_group_alias=$_GET["default_group_alias"];}
	elseif (isset($_POST["default_group_alias"]))		{$default_group_alias=$_POST["default_group_alias"];}
if (isset($_GET["outbound_calls_per_second"]))				{$outbound_calls_per_second=$_GET["outbound_calls_per_second"];}
	elseif (isset($_POST["outbound_calls_per_second"]))		{$outbound_calls_per_second=$_POST["outbound_calls_per_second"];}
if (isset($_GET["shift_enforcement"]))				{$shift_enforcement=$_GET["shift_enforcement"];}
	elseif (isset($_POST["shift_enforcement"]))		{$shift_enforcement=$_POST["shift_enforcement"];}
if (isset($_GET["agent_shift_enforcement_override"]))			{$agent_shift_enforcement_override=$_GET["agent_shift_enforcement_override"];}
	elseif (isset($_POST["agent_shift_enforcement_override"]))	{$agent_shift_enforcement_override=$_POST["agent_shift_enforcement_override"];}
if (isset($_GET["manager_shift_enforcement_override"]))				{$manager_shift_enforcement_override=$_GET["manager_shift_enforcement_override"];}
	elseif (isset($_POST["manager_shift_enforcement_override"]))	{$manager_shift_enforcement_override=$_POST["manager_shift_enforcement_override"];}
if (isset($_GET["export_reports"]))				{$export_reports=$_GET["export_reports"];}
	elseif (isset($_POST["export_reports"]))	{$export_reports=$_POST["export_reports"];}
if (isset($_GET["delete_from_dnc"]))			{$delete_from_dnc=$_GET["delete_from_dnc"];}
	elseif (isset($_POST["delete_from_dnc"]))	{$delete_from_dnc=$_POST["delete_from_dnc"];}
if (isset($_GET["vtiger_search_dead"]))				{$vtiger_search_dead=$_GET["vtiger_search_dead"];}
	elseif (isset($_POST["vtiger_search_dead"]))	{$vtiger_search_dead=$_POST["vtiger_search_dead"];}
if (isset($_GET["vtiger_status_call"]))				{$vtiger_status_call=$_GET["vtiger_status_call"];}
	elseif (isset($_POST["vtiger_status_call"]))	{$vtiger_status_call=$_POST["vtiger_status_call"];}
if (isset($_GET["sale"]))				{$sale=$_GET["sale"];}
	elseif (isset($_POST["sale"]))		{$sale=$_POST["sale"];}
if (isset($_GET["dnc"]))				{$dnc=$_GET["dnc"];}
	elseif (isset($_POST["dnc"]))		{$dnc=$_POST["dnc"];}
if (isset($_GET["customer_contact"]))			{$customer_contact=$_GET["customer_contact"];}
	elseif (isset($_POST["customer_contact"]))	{$customer_contact=$_POST["customer_contact"];}
if (isset($_GET["not_interested"]))				{$not_interested=$_GET["not_interested"];}
	elseif (isset($_POST["not_interested"]))	{$not_interested=$_POST["not_interested"];}
if (isset($_GET["unworkable"]))					{$unworkable=$_GET["unworkable"];}
	elseif (isset($_POST["unworkable"]))		{$unworkable=$_POST["unworkable"];}
if (isset($_GET["user_code"]))					{$user_code=$_GET["user_code"];}
	elseif (isset($_POST["user_code"]))			{$user_code=$_POST["user_code"];}
if (isset($_GET["territory"]))					{$territory=$_GET["territory"];}
	elseif (isset($_POST["territory"]))			{$territory=$_POST["territory"];}
if (isset($_GET["survey_third_digit"]))				{$survey_third_digit=$_GET["survey_third_digit"];}
	elseif (isset($_POST["survey_third_digit"]))	{$survey_third_digit=$_POST["survey_third_digit"];}
if (isset($_GET["survey_fourth_digit"]))			{$survey_fourth_digit=$_GET["survey_fourth_digit"];}
	elseif (isset($_POST["survey_fourth_digit"]))	{$survey_fourth_digit=$_POST["survey_fourth_digit"];}
if (isset($_GET["survey_third_audio_file"]))			{$survey_third_audio_file=$_GET["survey_third_audio_file"];}
	elseif (isset($_POST["survey_third_audio_file"]))	{$survey_third_audio_file=$_POST["survey_third_audio_file"];}
if (isset($_GET["survey_fourth_audio_file"]))			{$survey_fourth_audio_file=$_GET["survey_fourth_audio_file"];}
	elseif (isset($_POST["survey_fourth_audio_file"]))	{$survey_fourth_audio_file=$_POST["survey_fourth_audio_file"];}
if (isset($_GET["survey_third_status"]))				{$survey_third_status=$_GET["survey_third_status"];}
	elseif (isset($_POST["survey_third_status"]))		{$survey_third_status=$_POST["survey_third_status"];}
if (isset($_GET["survey_fourth_status"]))				{$survey_fourth_status=$_GET["survey_fourth_status"];}
	elseif (isset($_POST["survey_fourth_status"]))		{$survey_fourth_status=$_POST["survey_fourth_status"];}
if (isset($_GET["survey_third_exten"]))					{$survey_third_exten=$_GET["survey_third_exten"];}
	elseif (isset($_POST["survey_third_exten"]))		{$survey_third_exten=$_POST["survey_third_exten"];}
if (isset($_GET["survey_fourth_exten"]))				{$survey_fourth_exten=$_GET["survey_fourth_exten"];}
	elseif (isset($_POST["survey_fourth_exten"]))		{$survey_fourth_exten=$_POST["survey_fourth_exten"];}
if (isset($_GET["menu_id"]))				{$menu_id=$_GET["menu_id"];}
	elseif (isset($_POST["menu_id"]))		{$menu_id=$_POST["menu_id"];}
if (isset($_GET["menu_name"]))				{$menu_name=$_GET["menu_name"];}
	elseif (isset($_POST["menu_name"]))		{$menu_name=$_POST["menu_name"];}
if (isset($_GET["menu_prompt"]))			{$menu_prompt=$_GET["menu_prompt"];}
	elseif (isset($_POST["menu_prompt"]))	{$menu_prompt=$_POST["menu_prompt"];}
if (isset($_GET["menu_timeout"]))			{$menu_timeout=$_GET["menu_timeout"];}
	elseif (isset($_POST["menu_timeout"]))	{$menu_timeout=$_POST["menu_timeout"];}
if (isset($_GET["menu_timeout_prompt"]))			{$menu_timeout_prompt=$_GET["menu_timeout_prompt"];}
	elseif (isset($_POST["menu_timeout_prompt"]))	{$menu_timeout_prompt=$_POST["menu_timeout_prompt"];}
if (isset($_GET["menu_invalid_prompt"]))			{$menu_invalid_prompt=$_GET["menu_invalid_prompt"];}
	elseif (isset($_POST["menu_invalid_prompt"]))	{$menu_invalid_prompt=$_POST["menu_invalid_prompt"];}
if (isset($_GET["menu_repeat"]))				{$menu_repeat=$_GET["menu_repeat"];}
	elseif (isset($_POST["menu_repeat"]))		{$menu_repeat=$_POST["menu_repeat"];}
if (isset($_GET["menu_time_check"]))			{$menu_time_check=$_GET["menu_time_check"];}
	elseif (isset($_POST["menu_time_check"]))	{$menu_time_check=$_POST["menu_time_check"];}
if (isset($_GET["track_in_vdac"]))				{$track_in_vdac=$_GET["track_in_vdac"];}
	elseif (isset($_POST["track_in_vdac"]))		{$track_in_vdac=$_POST["track_in_vdac"];}
if (isset($_GET["source_menu"]))			{$source_menu=$_GET["source_menu"];}
	elseif (isset($_POST["source_menu"]))	{$source_menu=$_POST["source_menu"];}
if (isset($_GET["agentonly_callback_campaign_lock"]))			{$agentonly_callback_campaign_lock=$_GET["agentonly_callback_campaign_lock"];}
	elseif (isset($_POST["agentonly_callback_campaign_lock"]))	{$agentonly_callback_campaign_lock=$_POST["agentonly_callback_campaign_lock"];}
if (isset($_GET["sounds_central_control_active"]))			{$sounds_central_control_active=$_GET["sounds_central_control_active"];}
	elseif (isset($_POST["sounds_central_control_active"]))	{$sounds_central_control_active=$_POST["sounds_central_control_active"];}
if (isset($_GET["sounds_web_server"]))				{$sounds_web_server=$_GET["sounds_web_server"];}
	elseif (isset($_POST["sounds_web_server"]))		{$sounds_web_server=$_POST["sounds_web_server"];}
if (isset($_GET["sounds_web_directory"]))			{$sounds_web_directory=$_GET["sounds_web_directory"];}
	elseif (isset($_POST["sounds_web_directory"]))	{$sounds_web_directory=$_POST["sounds_web_directory"];}
if (isset($_GET["sounds_update"]))			{$sounds_update=$_GET["sounds_update"];}
	elseif (isset($_POST["sounds_update"]))	{$sounds_update=$_POST["sounds_update"];}
if (isset($_GET["active_voicemail_server"]))			{$active_voicemail_server=$_GET["active_voicemail_server"];}
	elseif (isset($_POST["active_voicemail_server"]))	{$active_voicemail_server=$_POST["active_voicemail_server"];}
if (isset($_GET["auto_dial_limit"]))			{$auto_dial_limit=$_GET["auto_dial_limit"];}
	elseif (isset($_POST["auto_dial_limit"]))	{$auto_dial_limit=$_POST["auto_dial_limit"];}
if (isset($_GET["user_territories_active"]))			{$user_territories_active=$_GET["user_territories_active"];}
	elseif (isset($_POST["user_territories_active"]))	{$user_territories_active=$_POST["user_territories_active"];}
if (isset($_GET["vicidial_recording_limit"]))			{$vicidial_recording_limit=$_GET["vicidial_recording_limit"];}
	elseif (isset($_POST["vicidial_recording_limit"]))	{$vicidial_recording_limit=$_POST["vicidial_recording_limit"];}
if (isset($_GET["phone_context"]))				{$phone_context=$_GET["phone_context"];}
	elseif (isset($_POST["phone_context"]))		{$phone_context=$_POST["phone_context"];}
if (isset($_GET["carrier_logging_active"]))				{$carrier_logging_active=$_GET["carrier_logging_active"];}
	elseif (isset($_POST["carrier_logging_active"]))	{$carrier_logging_active=$_POST["carrier_logging_active"];}
if (isset($_GET["drop_lockout_time"]))				{$drop_lockout_time=$_GET["drop_lockout_time"];}
	elseif (isset($_POST["drop_lockout_time"]))		{$drop_lockout_time=$_POST["drop_lockout_time"];}
if (isset($_GET["allow_custom_dialplan"]))				{$allow_custom_dialplan=$_GET["allow_custom_dialplan"];}
	elseif (isset($_POST["allow_custom_dialplan"]))		{$allow_custom_dialplan=$_POST["allow_custom_dialplan"];}
if (isset($_GET["custom_dialplan_entry"]))				{$custom_dialplan_entry=$_GET["custom_dialplan_entry"];}
	elseif (isset($_POST["custom_dialplan_entry"]))		{$custom_dialplan_entry=$_POST["custom_dialplan_entry"];}
if (isset($_GET["phone_ring_timeout"]))					{$phone_ring_timeout=$_GET["phone_ring_timeout"];}
	elseif (isset($_POST["phone_ring_timeout"]))		{$phone_ring_timeout=$_POST["phone_ring_timeout"];}
if (isset($_GET["conf_secret"]))					{$conf_secret=$_GET["conf_secret"];}
	elseif (isset($_POST["conf_secret"]))			{$conf_secret=$_POST["conf_secret"];}
if (isset($_GET["tracking_group"]))					{$tracking_group=$_GET["tracking_group"];}
	elseif (isset($_POST["tracking_group"]))		{$tracking_group=$_POST["tracking_group"];}
if (isset($_GET["no_agent_no_queue"]))				{$no_agent_no_queue=$_GET["no_agent_no_queue"];}
	elseif (isset($_POST["no_agent_no_queue"]))		{$no_agent_no_queue=$_POST["no_agent_no_queue"];}
if (isset($_GET["no_agent_action"]))				{$no_agent_action=$_GET["no_agent_action"];}
	elseif (isset($_POST["no_agent_action"]))		{$no_agent_action=$_POST["no_agent_action"];}
if (isset($_GET["no_agent_action_value"]))			{$no_agent_action_value=$_GET["no_agent_action_value"];}
	elseif (isset($_POST["no_agent_action_value"]))	{$no_agent_action_value=$_POST["no_agent_action_value"];}
if (isset($_GET["quick_transfer_button"]))			{$quick_transfer_button=$_GET["quick_transfer_button"];}
	elseif (isset($_POST["quick_transfer_button"]))	{$quick_transfer_button=$_POST["quick_transfer_button"];}
if (isset($_GET["prepopulate_transfer_preset"]))			{$prepopulate_transfer_preset=$_GET["prepopulate_transfer_preset"];}
	elseif (isset($_POST["prepopulate_transfer_preset"]))	{$prepopulate_transfer_preset=$_POST["prepopulate_transfer_preset"];}
if (isset($_GET["enable_tts_integration"]))				{$enable_tts_integration=$_GET["enable_tts_integration"];}
	elseif (isset($_POST["enable_tts_integration"]))	{$enable_tts_integration=$_POST["enable_tts_integration"];}
if (isset($_GET["tts_id"]))							{$tts_id=$_GET["tts_id"];}
	elseif (isset($_POST["tts_id"]))				{$tts_id=$_POST["tts_id"];}
if (isset($_GET["tts_name"]))						{$tts_name=$_GET["tts_name"];}
	elseif (isset($_POST["tts_name"]))				{$tts_name=$_POST["tts_name"];}
if (isset($_GET["tts_text"]))						{$tts_text=$_GET["tts_text"];}
	elseif (isset($_POST["tts_text"]))				{$tts_text=$_POST["tts_text"];}
if (isset($_GET["drop_rate_group"]))				{$drop_rate_group=$_GET["drop_rate_group"];}
	elseif (isset($_POST["drop_rate_group"]))		{$drop_rate_group=$_POST["drop_rate_group"];}
if (isset($_GET["agent_status_viewable_groups"]))			{$agent_status_viewable_groups=$_GET["agent_status_viewable_groups"];}
	elseif (isset($_POST["agent_status_viewable_groups"]))	{$agent_status_viewable_groups=$_POST["agent_status_viewable_groups"];}
if (isset($_GET["agent_status_view_time"]))				{$agent_status_view_time=$_GET["agent_status_view_time"];}
	elseif (isset($_POST["agent_status_view_time"]))	{$agent_status_view_time=$_POST["agent_status_view_time"];}
if (isset($_GET["view_calls_in_queue"]))			{$view_calls_in_queue=$_GET["view_calls_in_queue"];}
	elseif (isset($_POST["view_calls_in_queue"]))	{$view_calls_in_queue=$_POST["view_calls_in_queue"];}
if (isset($_GET["view_calls_in_queue_launch"]))				{$view_calls_in_queue_launch=$_GET["view_calls_in_queue_launch"];}
	elseif (isset($_POST["view_calls_in_queue_launch"]))	{$view_calls_in_queue_launch=$_POST["view_calls_in_queue_launch"];}
if (isset($_GET["grab_calls_in_queue"]))			{$grab_calls_in_queue=$_GET["grab_calls_in_queue"];}
	elseif (isset($_POST["grab_calls_in_queue"]))	{$grab_calls_in_queue=$_POST["grab_calls_in_queue"];}
if (isset($_GET["call_requeue_button"]))			{$call_requeue_button=$_GET["call_requeue_button"];}
	elseif (isset($_POST["call_requeue_button"]))	{$call_requeue_button=$_POST["call_requeue_button"];}
if (isset($_GET["pause_after_each_call"]))			{$pause_after_each_call=$_GET["pause_after_each_call"];}
	elseif (isset($_POST["pause_after_each_call"]))	{$pause_after_each_call=$_POST["pause_after_each_call"];}
if (isset($_GET["no_hopper_dialing"]))				{$no_hopper_dialing=$_GET["no_hopper_dialing"];}
	elseif (isset($_POST["no_hopper_dialing"]))		{$no_hopper_dialing=$_POST["no_hopper_dialing"];}
if (isset($_GET["agent_dial_owner_only"]))			{$agent_dial_owner_only=$_GET["agent_dial_owner_only"];}
	elseif (isset($_POST["agent_dial_owner_only"]))	{$agent_dial_owner_only=$_POST["agent_dial_owner_only"];}
if (isset($_GET["reset_time"]))						{$reset_time=$_GET["reset_time"];}
	elseif (isset($_POST["reset_time"]))			{$reset_time=$_POST["reset_time"];}
if (isset($_GET["allow_alerts"]))					{$allow_alerts=$_GET["allow_alerts"];}
	elseif (isset($_POST["allow_alerts"]))			{$allow_alerts=$_POST["allow_alerts"];}
if (isset($_GET["agent_display_dialable_leads"]))			{$agent_display_dialable_leads=$_GET["agent_display_dialable_leads"];}
	elseif (isset($_POST["agent_display_dialable_leads"]))	{$agent_display_dialable_leads=$_POST["agent_display_dialable_leads"];}
if (isset($_GET["vicidial_balance_rank"]))			{$vicidial_balance_rank=$_GET["vicidial_balance_rank"];}
	elseif (isset($_POST["vicidial_balance_rank"]))	{$vicidial_balance_rank=$_POST["vicidial_balance_rank"];}
if (isset($_GET["agent_script_override"]))			{$agent_script_override=$_GET["agent_script_override"];}
	elseif (isset($_POST["agent_script_override"]))	{$agent_script_override=$_POST["agent_script_override"];}
if (isset($_GET["moh_id"]))				{$moh_id=$_GET["moh_id"];}
	elseif (isset($_POST["moh_id"]))	{$moh_id=$_POST["moh_id"];}
if (isset($_GET["moh_name"]))			{$moh_name=$_GET["moh_name"];}
	elseif (isset($_POST["moh_name"]))	{$moh_name=$_POST["moh_name"];}
if (isset($_GET["random"]))				{$random=$_GET["random"];}
	elseif (isset($_POST["random"]))	{$random=$_POST["random"];}
if (isset($_GET["filename"]))			{$filename=$_GET["filename"];}
	elseif (isset($_POST["filename"]))	{$filename=$_POST["filename"];}
if (isset($_GET["rank"]))				{$rank=$_GET["rank"];}
	elseif (isset($_POST["rank"]))		{$rank=$_POST["rank"];}
if (isset($_GET["rebuild_music_on_hold"]))				{$rebuild_music_on_hold=$_GET["rebuild_music_on_hold"];}
	elseif (isset($_POST["rebuild_music_on_hold"]))		{$rebuild_music_on_hold=$_POST["rebuild_music_on_hold"];}
if (isset($_GET["active_agent_login_server"]))			{$active_agent_login_server=$_GET["active_agent_login_server"];}
	elseif (isset($_POST["active_agent_login_server"]))	{$active_agent_login_server=$_POST["active_agent_login_server"];}
if (isset($_GET["enable_second_webform"]))			{$enable_second_webform=$_GET["enable_second_webform"];}
	elseif (isset($_POST["enable_second_webform"]))	{$enable_second_webform=$_POST["enable_second_webform"];}
if (isset($_GET["web_form_address_two"]))			{$web_form_address_two=$_GET["web_form_address_two"];}
	elseif (isset($_POST["web_form_address_two"]))	{$web_form_address_two=$_POST["web_form_address_two"];}
if (isset($_GET["waitforsilence_options"]))			{$waitforsilence_options=$_GET["waitforsilence_options"];}
	elseif (isset($_POST["waitforsilence_options"]))	{$waitforsilence_options=$_POST["waitforsilence_options"];}
if (isset($_GET["campaign_cid_override"]))			{$campaign_cid_override=$_GET["campaign_cid_override"];}
	elseif (isset($_POST["campaign_cid_override"]))	{$campaign_cid_override=$_POST["campaign_cid_override"];}
if (isset($_GET["am_message_exten_override"]))			{$am_message_exten_override=$_GET["am_message_exten_override"];}
	elseif (isset($_POST["am_message_exten_override"]))	{$am_message_exten_override=$_POST["am_message_exten_override"];}
if (isset($_GET["drop_inbound_group_override"]))			{$drop_inbound_group_override=$_GET["drop_inbound_group_override"];}
	elseif (isset($_POST["drop_inbound_group_override"]))	{$drop_inbound_group_override=$_POST["drop_inbound_group_override"];}
if (isset($_GET["agent_select_territories"]))			{$agent_select_territories=$_GET["agent_select_territories"];}
	elseif (isset($_POST["agent_select_territories"]))	{$agent_select_territories=$_POST["agent_select_territories"];}
if (isset($_GET["agent_choose_territories"]))			{$agent_choose_territories=$_GET["agent_choose_territories"];}
	elseif (isset($_POST["agent_choose_territories"]))	{$agent_choose_territories=$_POST["agent_choose_territories"];}
if (isset($_GET["carrier_description"]))			{$carrier_description=$_GET["carrier_description"];}
	elseif (isset($_POST["carrier_description"]))	{$carrier_description=$_POST["carrier_description"];}
if (isset($_GET["delete_vm_after_email"]))			{$delete_vm_after_email=$_GET["delete_vm_after_email"];}
	elseif (isset($_POST["delete_vm_after_email"]))	{$delete_vm_after_email=$_POST["delete_vm_after_email"];}
if (isset($_GET["custom_one"]))					{$custom_one=$_GET["custom_one"];}
	elseif (isset($_POST["custom_one"]))		{$custom_one=$_POST["custom_one"];}
if (isset($_GET["custom_two"]))					{$custom_two=$_GET["custom_two"];}
	elseif (isset($_POST["custom_two"]))		{$custom_two=$_POST["custom_two"];}
if (isset($_GET["custom_three"]))				{$custom_three=$_GET["custom_three"];}
	elseif (isset($_POST["custom_three"]))		{$custom_three=$_POST["custom_three"];}
if (isset($_GET["custom_four"]))				{$custom_four=$_GET["custom_four"];}
	elseif (isset($_POST["custom_four"]))		{$custom_four=$_POST["custom_four"];}
if (isset($_GET["custom_five"]))				{$custom_five=$_GET["custom_five"];}
	elseif (isset($_POST["custom_five"]))		{$custom_five=$_POST["custom_five"];}
if (isset($_GET["crm_popup_login"]))			{$crm_popup_login=$_GET["crm_popup_login"];}
	elseif (isset($_POST["crm_popup_login"]))	{$crm_popup_login=$_POST["crm_popup_login"];}
if (isset($_GET["crm_login_address"]))			{$crm_login_address=$_GET["crm_login_address"];}
	elseif (isset($_POST["crm_login_address"]))	{$crm_login_address=$_POST["crm_login_address"];}
if (isset($_GET["timer_action"]))					{$timer_action=$_GET["timer_action"];}
	elseif (isset($_POST["timer_action"]))			{$timer_action=$_POST["timer_action"];}
if (isset($_GET["timer_action_message"]))			{$timer_action_message=$_GET["timer_action_message"];}
	elseif (isset($_POST["timer_action_message"]))	{$timer_action_message=$_POST["timer_action_message"];}
if (isset($_GET["timer_action_seconds"]))			{$timer_action_seconds=$_GET["timer_action_seconds"];}
	elseif (isset($_POST["timer_action_seconds"]))	{$timer_action_seconds=$_POST["timer_action_seconds"];}
if (isset($_GET["start_call_url"]))				{$start_call_url=$_GET["start_call_url"];}
	elseif (isset($_POST["start_call_url"]))	{$start_call_url=$_POST["start_call_url"];}
if (isset($_GET["dispo_call_url"]))				{$dispo_call_url=$_GET["dispo_call_url"];}
	elseif (isset($_POST["dispo_call_url"]))	{$dispo_call_url=$_POST["dispo_call_url"];}
if (isset($_GET["xferconf_c_number"]))			{$xferconf_c_number=$_GET["xferconf_c_number"];}
	elseif (isset($_POST["xferconf_c_number"]))	{$xferconf_c_number=$_POST["xferconf_c_number"];}
if (isset($_GET["xferconf_d_number"]))			{$xferconf_d_number=$_GET["xferconf_d_number"];}
	elseif (isset($_POST["xferconf_d_number"]))	{$xferconf_d_number=$_POST["xferconf_d_number"];}
if (isset($_GET["xferconf_e_number"]))			{$xferconf_e_number=$_GET["xferconf_e_number"];}
	elseif (isset($_POST["xferconf_e_number"]))	{$xferconf_e_number=$_POST["xferconf_e_number"];}
if (isset($_GET["record_call"]))				{$record_call=$_GET["record_call"];}
	elseif (isset($_POST["record_call"]))		{$record_call=$_POST["record_call"];}
if (isset($_GET["ignore_list_script_override"]))			{$ignore_list_script_override=$_GET["ignore_list_script_override"];}
	elseif (isset($_POST["ignore_list_script_override"]))	{$ignore_list_script_override=$_POST["ignore_list_script_override"];}
if (isset($_GET["external_server_ip"]))			{$external_server_ip=$_GET["external_server_ip"];}
	elseif (isset($_POST["external_server_ip"])){$external_server_ip=$_POST["external_server_ip"];}
if (isset($_GET["is_webphone"]))				{$is_webphone=$_GET["is_webphone"];}
	elseif (isset($_POST["is_webphone"]))		{$is_webphone=$_POST["is_webphone"];}
if (isset($_GET["use_external_server_ip"]))			{$use_external_server_ip=$_GET["use_external_server_ip"];}
	elseif (isset($_POST["use_external_server_ip"])){$use_external_server_ip=$_POST["use_external_server_ip"];}
if (isset($_GET["default_webphone"]))			{$default_webphone=$_GET["default_webphone"];}
	elseif (isset($_POST["default_webphone"]))	{$default_webphone=$_POST["default_webphone"];}
if (isset($_GET["default_external_server_ip"]))			{$default_external_server_ip=$_GET["default_external_server_ip"];}
	elseif (isset($_POST["default_external_server_ip"])){$default_external_server_ip=$_POST["default_external_server_ip"];}
if (isset($_GET["webphone_url"]))				{$webphone_url=$_GET["webphone_url"];}
	elseif (isset($_POST["webphone_url"]))		{$webphone_url=$_POST["webphone_url"];}
if (isset($_GET["enable_agc_dispo_log"]))			{$enable_agc_dispo_log=$_GET["enable_agc_dispo_log"];}
	elseif (isset($_POST["enable_agc_dispo_log"]))	{$enable_agc_dispo_log=$_POST["enable_agc_dispo_log"];}
if (isset($_GET["agent_call_log_view"]))			{$agent_call_log_view=$_GET["agent_call_log_view"];}
	elseif (isset($_POST["agent_call_log_view"]))	{$agent_call_log_view=$_POST["agent_call_log_view"];}
if (isset($_GET["agent_call_log_view_override"]))			{$agent_call_log_view_override=$_GET["agent_call_log_view_override"];}
	elseif (isset($_POST["agent_call_log_view_override"]))	{$agent_call_log_view_override=$_POST["agent_call_log_view_override"];}
if (isset($_GET["use_custom_cid"]))				{$use_custom_cid=$_GET["use_custom_cid"];}
	elseif (isset($_POST["use_custom_cid"]))	{$use_custom_cid=$_POST["use_custom_cid"];}
if (isset($_GET["scheduled_callbacks_alert"]))			{$scheduled_callbacks_alert=$_GET["scheduled_callbacks_alert"];}
	elseif (isset($_POST["scheduled_callbacks_alert"]))	{$scheduled_callbacks_alert=$_POST["scheduled_callbacks_alert"];}
if (isset($_GET["queuemetrics_loginout"]))			{$queuemetrics_loginout=$_GET["queuemetrics_loginout"];}
	elseif (isset($_POST["queuemetrics_loginout"]))	{$queuemetrics_loginout=$_POST["queuemetrics_loginout"];}
if (isset($_GET["callcard_enabled"]))				{$callcard_enabled=$_GET["callcard_enabled"];}
	elseif (isset($_POST["callcard_enabled"]))		{$callcard_enabled=$_POST["callcard_enabled"];}
if (isset($_GET["callcard_admin"]))					{$callcard_admin=$_GET["callcard_admin"];}
	elseif (isset($_POST["callcard_admin"]))		{$callcard_admin=$_POST["callcard_admin"];}
if (isset($_GET["agent_xfer_consultative"]))				{$agent_xfer_consultative=$_GET["agent_xfer_consultative"];}
	elseif (isset($_POST["agent_xfer_consultative"]))		{$agent_xfer_consultative=$_POST["agent_xfer_consultative"];}
if (isset($_GET["agent_xfer_dial_override"]))				{$agent_xfer_dial_override=$_GET["agent_xfer_dial_override"];}
	elseif (isset($_POST["agent_xfer_dial_override"]))		{$agent_xfer_dial_override=$_POST["agent_xfer_dial_override"];}
if (isset($_GET["agent_xfer_vm_transfer"]))					{$agent_xfer_vm_transfer=$_GET["agent_xfer_vm_transfer"];}
	elseif (isset($_POST["agent_xfer_vm_transfer"]))		{$agent_xfer_vm_transfer=$_POST["agent_xfer_vm_transfer"];}
if (isset($_GET["agent_xfer_blind_transfer"]))				{$agent_xfer_blind_transfer=$_GET["agent_xfer_blind_transfer"];}
	elseif (isset($_POST["agent_xfer_blind_transfer"]))		{$agent_xfer_blind_transfer=$_POST["agent_xfer_blind_transfer"];}
if (isset($_GET["agent_xfer_dial_with_customer"]))			{$agent_xfer_dial_with_customer=$_GET["agent_xfer_dial_with_customer"];}
	elseif (isset($_POST["agent_xfer_dial_with_customer"]))	{$agent_xfer_dial_with_customer=$_POST["agent_xfer_dial_with_customer"];}
if (isset($_GET["agent_xfer_park_customer_dial"]))			{$agent_xfer_park_customer_dial=$_GET["agent_xfer_park_customer_dial"];}
	elseif (isset($_POST["agent_xfer_park_customer_dial"]))	{$agent_xfer_park_customer_dial=$_POST["agent_xfer_park_customer_dial"];}
if (isset($_GET["agent_fullscreen"]))			{$agent_fullscreen=$_GET["agent_fullscreen"];}
	elseif (isset($_POST["agent_fullscreen"]))	{$agent_fullscreen=$_POST["agent_fullscreen"];}
if (isset($_GET["extension_id"]))				{$extension_id=$_GET["extension_id"];}
	elseif (isset($_POST["extension_id"]))		{$extension_id=$_POST["extension_id"];}
if (isset($_GET["extension_group_id"]))				{$extension_group_id=$_GET["extension_group_id"];}
	elseif (isset($_POST["extension_group_id"]))	{$extension_group_id=$_POST["extension_group_id"];}
if (isset($_GET["campaign_groups"]))			{$campaign_groups=$_GET["campaign_groups"];}
	elseif (isset($_POST["campaign_groups"]))	{$campaign_groups=$_POST["campaign_groups"];}
if (isset($_GET["extension_group"]))			{$extension_group=$_GET["extension_group"];}
	elseif (isset($_POST["extension_group"]))	{$extension_group=$_POST["extension_group"];}
if (isset($_GET["agent_choose_blended"]))			{$agent_choose_blended=$_GET["agent_choose_blended"];}
	elseif (isset($_POST["agent_choose_blended"]))	{$agent_choose_blended=$_POST["agent_choose_blended"];}
if (isset($_GET["queuemetrics_callstatus"]))			{$queuemetrics_callstatus=$_GET["queuemetrics_callstatus"];}
	elseif (isset($_POST["queuemetrics_callstatus"]))	{$queuemetrics_callstatus=$_POST["queuemetrics_callstatus"];}
if (isset($_GET["extension_appended_cidname"]))				{$extension_appended_cidname=$_GET["extension_appended_cidname"];}
	elseif (isset($_POST["extension_appended_cidname"]))	{$extension_appended_cidname=$_POST["extension_appended_cidname"];}
if (isset($_GET["scheduled_callbacks_count"]))			{$scheduled_callbacks_count=$_GET["scheduled_callbacks_count"];}
	elseif (isset($_POST["scheduled_callbacks_count"]))	{$scheduled_callbacks_count=$_POST["scheduled_callbacks_count"];}
if (isset($_GET["realtime_block_user_info"]))			{$realtime_block_user_info=$_GET["realtime_block_user_info"];}
	elseif (isset($_POST["realtime_block_user_info"]))	{$realtime_block_user_info=$_POST["realtime_block_user_info"];}
if (isset($_GET["manual_dial_override"]))			{$manual_dial_override=$_GET["manual_dial_override"];}
	elseif (isset($_POST["manual_dial_override"]))	{$manual_dial_override=$_POST["manual_dial_override"];}
if (isset($_GET["blind_monitor_warning"]))			{$blind_monitor_warning=$_GET["blind_monitor_warning"];}
	elseif (isset($_POST["blind_monitor_warning"]))	{$blind_monitor_warning=$_POST["blind_monitor_warning"];}
if (isset($_GET["blind_monitor_message"]))			{$blind_monitor_message=$_GET["blind_monitor_message"];}
	elseif (isset($_POST["blind_monitor_message"]))	{$blind_monitor_message=$_POST["blind_monitor_message"];}
if (isset($_GET["blind_monitor_filename"]))				{$blind_monitor_filename=$_GET["blind_monitor_filename"];}
	elseif (isset($_POST["blind_monitor_filename"]))	{$blind_monitor_filename=$_POST["blind_monitor_filename"];}
if (isset($_GET["uniqueid_status_display"]))			{$uniqueid_status_display=$_GET["uniqueid_status_display"];}
	elseif (isset($_POST["uniqueid_status_display"]))	{$uniqueid_status_display=$_POST["uniqueid_status_display"];}
if (isset($_GET["uniqueid_status_prefix"]))				{$uniqueid_status_prefix=$_GET["uniqueid_status_prefix"];}
	elseif (isset($_POST["uniqueid_status_prefix"]))	{$uniqueid_status_prefix=$_POST["uniqueid_status_prefix"];}
if (isset($_GET["default_codecs"]))				{$default_codecs=$_GET["default_codecs"];}
	elseif (isset($_POST["default_codecs"]))	{$default_codecs=$_POST["default_codecs"];}
if (isset($_GET["codecs_list"]))			{$codecs_list=$_GET["codecs_list"];}
	elseif (isset($_POST["codecs_list"]))	{$codecs_list=$_POST["codecs_list"];}
if (isset($_GET["codecs_with_template"]))			{$codecs_with_template=$_GET["codecs_with_template"];}
	elseif (isset($_POST["codecs_with_template"]))	{$codecs_with_template=$_POST["codecs_with_template"];}
if (isset($_GET["custom_fields_modify"]))			{$custom_fields_modify=$_GET["custom_fields_modify"];}
	elseif (isset($_POST["custom_fields_modify"]))	{$custom_fields_modify=$_POST["custom_fields_modify"];}
if (isset($_GET["hold_time_option_minimum"]))			{$hold_time_option_minimum=$_GET["hold_time_option_minimum"];}
	elseif (isset($_POST["hold_time_option_minimum"]))	{$hold_time_option_minimum=$_POST["hold_time_option_minimum"];}
if (isset($_GET["source_carrier"]))				{$source_carrier=$_GET["source_carrier"];}
	elseif (isset($_POST["source_carrier"]))	{$source_carrier=$_POST["source_carrier"];}
if (isset($_GET["hold_time_option_press_filename"]))			{$hold_time_option_press_filename=$_GET["hold_time_option_press_filename"];}
	elseif (isset($_POST["hold_time_option_press_filename"]))	{$hold_time_option_press_filename=$_POST["hold_time_option_press_filename"];}
if (isset($_GET["hold_time_option_callmenu"]))			{$hold_time_option_callmenu=$_GET["hold_time_option_callmenu"];}
	elseif (isset($_POST["hold_time_option_callmenu"]))	{$hold_time_option_callmenu=$_POST["hold_time_option_callmenu"];}
if (isset($_GET["inbound_queue_no_dial"]))			{$inbound_queue_no_dial=$_GET["inbound_queue_no_dial"];}
	elseif (isset($_POST["inbound_queue_no_dial"]))	{$inbound_queue_no_dial=$_POST["inbound_queue_no_dial"];}
if (isset($_GET["default_afterhours_filename_override"]))			{$default_afterhours_filename_override=$_GET["default_afterhours_filename_override"];}
	elseif (isset($_POST["default_afterhours_filename_override"]))	{$default_afterhours_filename_override=$_POST["default_afterhours_filename_override"];}
if (isset($_GET["sunday_afterhours_filename_override"]))			{$sunday_afterhours_filename_override=$_GET["sunday_afterhours_filename_override"];}
	elseif (isset($_POST["sunday_afterhours_filename_override"]))	{$sunday_afterhours_filename_override=$_POST["sunday_afterhours_filename_override"];}
if (isset($_GET["monday_afterhours_filename_override"]))			{$monday_afterhours_filename_override=$_GET["monday_afterhours_filename_override"];}
	elseif (isset($_POST["monday_afterhours_filename_override"]))	{$monday_afterhours_filename_override=$_POST["monday_afterhours_filename_override"];}
if (isset($_GET["tuesday_afterhours_filename_override"]))			{$tuesday_afterhours_filename_override=$_GET["tuesday_afterhours_filename_override"];}
	elseif (isset($_POST["tuesday_afterhours_filename_override"]))	{$tuesday_afterhours_filename_override=$_POST["tuesday_afterhours_filename_override"];}
if (isset($_GET["wednesday_afterhours_filename_override"]))			{$wednesday_afterhours_filename_override=$_GET["wednesday_afterhours_filename_override"];}
	elseif (isset($_POST["wednesday_afterhours_filename_override"]))	{$wednesday_afterhours_filename_override=$_POST["wednesday_afterhours_filename_override"];}
if (isset($_GET["thursday_afterhours_filename_override"]))			{$thursday_afterhours_filename_override=$_GET["thursday_afterhours_filename_override"];}
	elseif (isset($_POST["thursday_afterhours_filename_override"]))	{$thursday_afterhours_filename_override=$_POST["thursday_afterhours_filename_override"];}
if (isset($_GET["friday_afterhours_filename_override"]))			{$friday_afterhours_filename_override=$_GET["friday_afterhours_filename_override"];}
	elseif (isset($_POST["friday_afterhours_filename_override"]))	{$friday_afterhours_filename_override=$_POST["friday_afterhours_filename_override"];}
if (isset($_GET["saturday_afterhours_filename_override"]))			{$saturday_afterhours_filename_override=$_GET["saturday_afterhours_filename_override"];}
	elseif (isset($_POST["saturday_afterhours_filename_override"]))	{$saturday_afterhours_filename_override=$_POST["saturday_afterhours_filename_override"];}
if (isset($_GET["onhold_prompt_no_block"]))				{$onhold_prompt_no_block=$_GET["onhold_prompt_no_block"];}
	elseif (isset($_POST["onhold_prompt_no_block"]))	{$onhold_prompt_no_block=$_POST["onhold_prompt_no_block"];}
if (isset($_GET["onhold_prompt_seconds"]))			{$onhold_prompt_seconds=$_GET["onhold_prompt_seconds"];}
	elseif (isset($_POST["onhold_prompt_seconds"]))	{$onhold_prompt_seconds=$_POST["onhold_prompt_seconds"];}
if (isset($_GET["hold_time_option_no_block"]))			{$hold_time_option_no_block=$_GET["hold_time_option_no_block"];}
	elseif (isset($_POST["hold_time_option_no_block"]))	{$hold_time_option_no_block=$_POST["hold_time_option_no_block"];}
if (isset($_GET["hold_time_option_prompt_seconds"]))			{$hold_time_option_prompt_seconds=$_GET["hold_time_option_prompt_seconds"];}
	elseif (isset($_POST["hold_time_option_prompt_seconds"]))	{$hold_time_option_prompt_seconds=$_POST["hold_time_option_prompt_seconds"];}
if (isset($_GET["admin_web_directory"]))			{$admin_web_directory=$_GET["admin_web_directory"];}
	elseif (isset($_POST["admin_web_directory"]))	{$admin_web_directory=$_POST["admin_web_directory"];}
if (isset($_GET["tts_voice"]))				{$tts_voice=$_GET["tts_voice"];}
	elseif (isset($_POST["tts_voice"]))		{$tts_voice=$_POST["tts_voice"];}
if (isset($_GET["label_title"]))					{$label_title=$_GET["label_title"];}
	elseif (isset($_POST["label_title"]))			{$label_title=$_POST["label_title"];}
if (isset($_GET["label_first_name"]))				{$label_first_name=$_GET["label_first_name"];}
	elseif (isset($_POST["label_first_name"]))		{$label_first_name=$_POST["label_first_name"];}
if (isset($_GET["label_middle_initial"]))			{$label_middle_initial=$_GET["label_middle_initial"];}
	elseif (isset($_POST["label_middle_initial"]))	{$label_middle_initial=$_POST["label_middle_initial"];}
if (isset($_GET["label_last_name"]))				{$label_last_name=$_GET["label_last_name"];}
	elseif (isset($_POST["label_last_name"]))		{$label_last_name=$_POST["label_last_name"];}
if (isset($_GET["label_address1"]))					{$label_address1=$_GET["label_address1"];}
	elseif (isset($_POST["label_address1"]))		{$label_address1=$_POST["label_address1"];}
if (isset($_GET["label_address2"]))					{$label_address2=$_GET["label_address2"];}
	elseif (isset($_POST["label_address2"]))		{$label_address2=$_POST["label_address2"];}
if (isset($_GET["label_address3"]))					{$label_address3=$_GET["label_address3"];}
	elseif (isset($_POST["label_address3"]))		{$label_address3=$_POST["label_address3"];}
if (isset($_GET["label_city"]))						{$label_city=$_GET["label_city"];}
	elseif (isset($_POST["label_city"]))			{$label_city=$_POST["label_city"];}
if (isset($_GET["label_state"]))					{$label_state=$_GET["label_state"];}
	elseif (isset($_POST["label_state"]))			{$label_state=$_POST["label_state"];}
if (isset($_GET["label_province"]))					{$label_province=$_GET["label_province"];}
	elseif (isset($_POST["label_province"]))		{$label_province=$_POST["label_province"];}
if (isset($_GET["label_postal_code"]))				{$label_postal_code=$_GET["label_postal_code"];}
	elseif (isset($_POST["label_postal_code"]))		{$label_postal_code=$_POST["label_postal_code"];}
if (isset($_GET["label_vendor_lead_code"]))			{$label_vendor_lead_code=$_GET["label_vendor_lead_code"];}
	elseif (isset($_POST["label_vendor_lead_code"])){$label_vendor_lead_code=$_POST["label_vendor_lead_code"];}
if (isset($_GET["label_gender"]))					{$label_gender=$_GET["label_gender"];}
	elseif (isset($_POST["label_gender"]))			{$label_gender=$_POST["label_gender"];}
if (isset($_GET["label_phone_number"]))				{$label_phone_number=$_GET["label_phone_number"];}
	elseif (isset($_POST["label_phone_number"]))	{$label_phone_number=$_POST["label_phone_number"];}
if (isset($_GET["label_phone_code"]))				{$label_phone_code=$_GET["label_phone_code"];}
	elseif (isset($_POST["label_phone_code"]))		{$label_phone_code=$_POST["label_phone_code"];}
if (isset($_GET["label_alt_phone"]))				{$label_alt_phone=$_GET["label_alt_phone"];}
	elseif (isset($_POST["label_alt_phone"]))		{$label_alt_phone=$_POST["label_alt_phone"];}
if (isset($_GET["label_security_phrase"]))			{$label_security_phrase=$_GET["label_security_phrase"];}
	elseif (isset($_POST["label_security_phrase"]))	{$label_security_phrase=$_POST["label_security_phrase"];}
if (isset($_GET["label_email"]))					{$label_email=$_GET["label_email"];}
	elseif (isset($_POST["label_email"]))			{$label_email=$_POST["label_email"];}
if (isset($_GET["label_comments"]))					{$label_comments=$_GET["label_comments"];}
	elseif (isset($_POST["label_comments"]))		{$label_comments=$_POST["label_comments"];}
if (isset($_GET["custom_fields_enabled"]))			{$custom_fields_enabled=$_GET["custom_fields_enabled"];}
	elseif (isset($_POST["custom_fields_enabled"]))	{$custom_fields_enabled=$_POST["custom_fields_enabled"];}
if (isset($_GET["slave_db_server"]))				{$slave_db_server=$_GET["slave_db_server"];}
	elseif (isset($_POST["slave_db_server"]))		{$slave_db_server=$_POST["slave_db_server"];}
if (isset($_GET["reports_use_slave_db"]))			{$reports_use_slave_db=$_GET["reports_use_slave_db"];}
	elseif (isset($_POST["reports_use_slave_db"]))	{$reports_use_slave_db=$_POST["reports_use_slave_db"];}
if (isset($_GET["hold_time_second_option"]))			{$hold_time_second_option=$_GET["hold_time_second_option"];}
	elseif (isset($_POST["hold_time_second_option"]))	{$hold_time_second_option=$_POST["hold_time_second_option"];}
if (isset($_GET["hold_time_third_option"]))				{$hold_time_third_option=$_GET["hold_time_third_option"];}
	elseif (isset($_POST["hold_time_third_option"]))	{$hold_time_third_option=$_POST["hold_time_third_option"];}
if (isset($_GET["wait_hold_option_priority"]))			{$wait_hold_option_priority=$_GET["wait_hold_option_priority"];}
	elseif (isset($_POST["wait_hold_option_priority"]))	{$wait_hold_option_priority=$_POST["wait_hold_option_priority"];}
if (isset($_GET["wait_time_option"]))					{$wait_time_option=$_GET["wait_time_option"];}
	elseif (isset($_POST["wait_time_option"]))			{$wait_time_option=$_POST["wait_time_option"];}
if (isset($_GET["wait_time_second_option"]))			{$wait_time_second_option=$_GET["wait_time_second_option"];}
	elseif (isset($_POST["wait_time_second_option"]))	{$wait_time_second_option=$_POST["wait_time_second_option"];}
if (isset($_GET["wait_time_third_option"]))				{$wait_time_third_option=$_GET["wait_time_third_option"];}
	elseif (isset($_POST["wait_time_third_option"]))	{$wait_time_third_option=$_POST["wait_time_third_option"];}
if (isset($_GET["wait_time_option_seconds"]))			{$wait_time_option_seconds=$_GET["wait_time_option_seconds"];}
	elseif (isset($_POST["wait_time_option_seconds"]))	{$wait_time_option_seconds=$_POST["wait_time_option_seconds"];}
if (isset($_GET["wait_time_option_exten"]))				{$wait_time_option_exten=$_GET["wait_time_option_exten"];}
	elseif (isset($_POST["wait_time_option_exten"]))	{$wait_time_option_exten=$_POST["wait_time_option_exten"];}
if (isset($_GET["wait_time_option_voicemail"]))			{$wait_time_option_voicemail=$_GET["wait_time_option_voicemail"];}
	elseif (isset($_POST["wait_time_option_voicemail"]))	{$wait_time_option_voicemail=$_POST["wait_time_option_voicemail"];}
if (isset($_GET["wait_time_option_xfer_group"]))			{$wait_time_option_xfer_group=$_GET["wait_time_option_xfer_group"];}
	elseif (isset($_POST["wait_time_option_xfer_group"]))	{$wait_time_option_xfer_group=$_POST["wait_time_option_xfer_group"];}
if (isset($_GET["wait_time_option_callmenu"]))				{$wait_time_option_callmenu=$_GET["wait_time_option_callmenu"];}
	elseif (isset($_POST["wait_time_option_callmenu"]))		{$wait_time_option_callmenu=$_POST["wait_time_option_callmenu"];}
if (isset($_GET["wait_time_option_callback_filename"]))				{$wait_time_option_callback_filename=$_GET["wait_time_option_callback_filename"];}
	elseif (isset($_POST["wait_time_option_callback_filename"]))	{$wait_time_option_callback_filename=$_POST["wait_time_option_callback_filename"];}
if (isset($_GET["wait_time_option_callback_list_id"]))			{$wait_time_option_callback_list_id=$_GET["wait_time_option_callback_list_id"];}
	elseif (isset($_POST["wait_time_option_callback_list_id"]))	{$wait_time_option_callback_list_id=$_POST["wait_time_option_callback_list_id"];}
if (isset($_GET["wait_time_option_press_filename"]))			{$wait_time_option_press_filename=$_GET["wait_time_option_press_filename"];}
	elseif (isset($_POST["wait_time_option_press_filename"]))	{$wait_time_option_press_filename=$_POST["wait_time_option_press_filename"];}
if (isset($_GET["wait_time_option_no_block"]))			{$wait_time_option_no_block=$_GET["wait_time_option_no_block"];}
	elseif (isset($_POST["wait_time_option_no_block"]))	{$wait_time_option_no_block=$_POST["wait_time_option_no_block"];}
if (isset($_GET["wait_time_option_prompt_seconds"]))			{$wait_time_option_prompt_seconds=$_GET["wait_time_option_prompt_seconds"];}
	elseif (isset($_POST["wait_time_option_prompt_seconds"]))	{$wait_time_option_prompt_seconds=$_POST["wait_time_option_prompt_seconds"];}
if (isset($_GET["timer_action_destination"]))			{$timer_action_destination=$_GET["timer_action_destination"];}
	elseif (isset($_POST["timer_action_destination"]))	{$timer_action_destination=$_POST["timer_action_destination"];}
if (isset($_GET["allowed_reports"]))			{$allowed_reports=$_GET["allowed_reports"];}
	elseif (isset($_POST["allowed_reports"]))	{$allowed_reports=$_POST["allowed_reports"];}
if (isset($_GET["filter_phone_group_id"]))			{$filter_phone_group_id=$_GET["filter_phone_group_id"];}
	elseif (isset($_POST["filter_phone_group_id"]))	{$filter_phone_group_id=$_POST["filter_phone_group_id"];}
if (isset($_GET["filter_phone_group_name"]))			{$filter_phone_group_name=$_GET["filter_phone_group_name"];}
	elseif (isset($_POST["filter_phone_group_name"]))	{$filter_phone_group_name=$_POST["filter_phone_group_name"];}
if (isset($_GET["filter_phone_group_description"]))				{$filter_phone_group_description=$_GET["filter_phone_group_description"];}
	elseif (isset($_POST["filter_phone_group_description"]))	{$filter_phone_group_description=$_POST["filter_phone_group_description"];}
if (isset($_GET["filter_inbound_number"]))			{$filter_inbound_number=$_GET["filter_inbound_number"];}
	elseif (isset($_POST["filter_inbound_number"]))	{$filter_inbound_number=$_POST["filter_inbound_number"];}
if (isset($_GET["filter_url"]))				{$filter_url=$_GET["filter_url"];}
	elseif (isset($_POST["filter_url"]))	{$filter_url=$_POST["filter_url"];}
if (isset($_GET["filter_action"]))			{$filter_action=$_GET["filter_action"];}
	elseif (isset($_POST["filter_action"]))	{$filter_action=$_POST["filter_action"];}
if (isset($_GET["filter_extension"]))			{$filter_extension=$_GET["filter_extension"];}
	elseif (isset($_POST["filter_extension"]))	{$filter_extension=$_POST["filter_extension"];}
if (isset($_GET["filter_exten_context"]))			{$filter_exten_context=$_GET["filter_exten_context"];}
	elseif (isset($_POST["filter_exten_context"]))	{$filter_exten_context=$_POST["filter_exten_context"];}
if (isset($_GET["filter_voicemail_ext"]))			{$filter_voicemail_ext=$_GET["filter_voicemail_ext"];}
	elseif (isset($_POST["filter_voicemail_ext"]))	{$filter_voicemail_ext=$_POST["filter_voicemail_ext"];}
if (isset($_GET["filter_phone"]))			{$filter_phone=$_GET["filter_phone"];}
	elseif (isset($_POST["filter_phone"]))	{$filter_phone=$_POST["filter_phone"];}
if (isset($_GET["filter_server_ip"]))			{$filter_server_ip=$_GET["filter_server_ip"];}
	elseif (isset($_POST["filter_server_ip"]))	{$filter_server_ip=$_POST["filter_server_ip"];}
if (isset($_GET["filter_user"]))			{$filter_user=$_GET["filter_user"];}
	elseif (isset($_POST["filter_user"]))	{$filter_user=$_POST["filter_user"];}
if (isset($_GET["filter_user_unavailable_action"]))				{$filter_user_unavailable_action=$_GET["filter_user_unavailable_action"];}
	elseif (isset($_POST["filter_user_unavailable_action"]))	{$filter_user_unavailable_action=$_POST["filter_user_unavailable_action"];}
if (isset($_GET["filter_user_route_settings_ingroup"]))				{$filter_user_route_settings_ingroup=$_GET["filter_user_route_settings_ingroup"];}
	elseif (isset($_POST["filter_user_route_settings_ingroup"]))	{$filter_user_route_settings_ingroup=$_POST["filter_user_route_settings_ingroup"];}
if (isset($_GET["filter_group_id"]))			{$filter_group_id=$_GET["filter_group_id"];}
	elseif (isset($_POST["filter_group_id"]))	{$filter_group_id=$_POST["filter_group_id"];}
if (isset($_GET["filter_call_handle_method"]))			{$filter_call_handle_method=$_GET["filter_call_handle_method"];}
	elseif (isset($_POST["filter_call_handle_method"]))	{$filter_call_handle_method=$_POST["filter_call_handle_method"];}
if (isset($_GET["filter_agent_search_method"]))				{$filter_agent_search_method=$_GET["filter_agent_search_method"];}
	elseif (isset($_POST["filter_agent_search_method"]))	{$filter_agent_search_method=$_POST["filter_agent_search_method"];}
if (isset($_GET["filter_list_id"]))				{$filter_list_id=$_GET["filter_list_id"];}
	elseif (isset($_POST["filter_list_id"]))	{$filter_list_id=$_POST["filter_list_id"];}
if (isset($_GET["filter_campaign_id"]))				{$filter_campaign_id=$_GET["filter_campaign_id"];}
	elseif (isset($_POST["filter_campaign_id"]))	{$filter_campaign_id=$_POST["filter_campaign_id"];}
if (isset($_GET["filter_phone_code"]))			{$filter_phone_code=$_GET["filter_phone_code"];}
	elseif (isset($_POST["filter_phone_code"]))	{$filter_phone_code=$_POST["filter_phone_code"];}
if (isset($_GET["filter_menu_id"]))				{$filter_menu_id=$_GET["filter_menu_id"];}
	elseif (isset($_POST["filter_menu_id"]))	{$filter_menu_id=$_POST["filter_menu_id"];}
if (isset($_GET["filter_clean_cid_number"]))			{$filter_clean_cid_number=$_GET["filter_clean_cid_number"];}
	elseif (isset($_POST["filter_clean_cid_number"]))	{$filter_clean_cid_number=$_POST["filter_clean_cid_number"];}
if (isset($_GET["webphone_url_override"]))			{$webphone_url_override=$_GET["webphone_url_override"];}
	elseif (isset($_POST["webphone_url_override"]))	{$webphone_url_override=$_POST["webphone_url_override"];}
if (isset($_GET["calculate_estimated_hold_seconds"]))			{$calculate_estimated_hold_seconds=$_GET["calculate_estimated_hold_seconds"];}
	elseif (isset($_POST["calculate_estimated_hold_seconds"]))	{$calculate_estimated_hold_seconds=$_POST["calculate_estimated_hold_seconds"];}
if (isset($_GET["enable_xfer_presets"]))			{$enable_xfer_presets=$_GET["enable_xfer_presets"];}
	elseif (isset($_POST["enable_xfer_presets"]))	{$enable_xfer_presets=$_POST["enable_xfer_presets"];}
if (isset($_GET["hide_xfer_number_to_dial"]))			{$hide_xfer_number_to_dial=$_GET["hide_xfer_number_to_dial"];}
	elseif (isset($_POST["hide_xfer_number_to_dial"]))	{$hide_xfer_number_to_dial=$_POST["hide_xfer_number_to_dial"];}
if (isset($_GET["preset_name"]))			{$preset_name=$_GET["preset_name"];}
	elseif (isset($_POST["preset_name"]))	{$preset_name=$_POST["preset_name"];}
if (isset($_GET["preset_number"]))			{$preset_number=$_GET["preset_number"];}
	elseif (isset($_POST["preset_number"]))	{$preset_number=$_POST["preset_number"];}
if (isset($_GET["preset_dtmf"]))			{$preset_dtmf=$_GET["preset_dtmf"];}
	elseif (isset($_POST["preset_dtmf"]))	{$preset_dtmf=$_POST["preset_dtmf"];}
if (isset($_GET["preset_hide_number"]))				{$preset_hide_number=$_GET["preset_hide_number"];}
	elseif (isset($_POST["preset_hide_number"]))	{$preset_hide_number=$_POST["preset_hide_number"];}
if (isset($_GET["manual_dial_prefix"]))				{$manual_dial_prefix=$_GET["manual_dial_prefix"];}
	elseif (isset($_POST["manual_dial_prefix"]))	{$manual_dial_prefix=$_POST["manual_dial_prefix"];}
if (isset($_GET["webphone_systemkey"]))				{$webphone_systemkey=$_GET["webphone_systemkey"];}
	elseif (isset($_POST["webphone_systemkey"]))	{$webphone_systemkey=$_POST["webphone_systemkey"];}
if (isset($_GET["webphone_dialpad"]))			{$webphone_dialpad=$_GET["webphone_dialpad"];}
	elseif (isset($_POST["webphone_dialpad"]))	{$webphone_dialpad=$_POST["webphone_dialpad"];}
if (isset($_GET["webphone_systemkey_override"]))			{$webphone_systemkey_override=$_GET["webphone_systemkey_override"];}
	elseif (isset($_POST["webphone_systemkey_override"]))	{$webphone_systemkey_override=$_POST["webphone_systemkey_override"];}
if (isset($_GET["webphone_dialpad_override"]))			{$webphone_dialpad_override=$_GET["webphone_dialpad_override"];}
	elseif (isset($_POST["webphone_dialpad_override"]))	{$webphone_dialpad_override=$_POST["webphone_dialpad_override"];}
if (isset($_GET["force_change_password"]))			{$force_change_password=$_GET["force_change_password"];}
	elseif (isset($_POST["force_change_password"]))	{$force_change_password=$_POST["force_change_password"];}
if (isset($_GET["first_login_trigger"]))			{$first_login_trigger=$_GET["first_login_trigger"];}
	elseif (isset($_POST["first_login_trigger"]))	{$first_login_trigger=$_POST["first_login_trigger"];}
if (isset($_GET["default_phone_registration_password"]))			{$default_phone_registration_password=$_GET["default_phone_registration_password"];}
	elseif (isset($_POST["default_phone_registration_password"]))	{$default_phone_registration_password=$_POST["default_phone_registration_password"];}
if (isset($_GET["default_phone_login_password"]))			{$default_phone_login_password=$_GET["default_phone_login_password"];}
	elseif (isset($_POST["default_phone_login_password"]))	{$default_phone_login_password=$_POST["default_phone_login_password"];}
if (isset($_GET["default_server_password"]))			{$default_server_password=$_GET["default_server_password"];}
	elseif (isset($_POST["default_server_password"]))	{$default_server_password=$_POST["default_server_password"];}
if (isset($_GET["customer_3way_hangup_logging"]))			{$customer_3way_hangup_logging=$_GET["customer_3way_hangup_logging"];}
	elseif (isset($_POST["customer_3way_hangup_logging"]))	{$customer_3way_hangup_logging=$_POST["customer_3way_hangup_logging"];}
if (isset($_GET["customer_3way_hangup_seconds"]))			{$customer_3way_hangup_seconds=$_GET["customer_3way_hangup_seconds"];}
	elseif (isset($_POST["customer_3way_hangup_seconds"]))	{$customer_3way_hangup_seconds=$_POST["customer_3way_hangup_seconds"];}
if (isset($_GET["customer_3way_hangup_action"]))			{$customer_3way_hangup_action=$_GET["customer_3way_hangup_action"];}
	elseif (isset($_POST["customer_3way_hangup_action"]))	{$customer_3way_hangup_action=$_POST["customer_3way_hangup_action"];}
if (isset($_GET["add_lead_url"]))			{$add_lead_url=$_GET["add_lead_url"];}
	elseif (isset($_POST["add_lead_url"]))	{$add_lead_url=$_POST["add_lead_url"];}
if (isset($_GET["ivr_park_call"]))			{$ivr_park_call=$_GET["ivr_park_call"];}
	elseif (isset($_POST["ivr_park_call"]))	{$ivr_park_call=$_POST["ivr_park_call"];}
if (isset($_GET["ivr_park_call_agi"]))			{$ivr_park_call_agi=$_GET["ivr_park_call_agi"];}
	elseif (isset($_POST["ivr_park_call_agi"]))	{$ivr_park_call_agi=$_POST["ivr_park_call_agi"];}
if (isset($_GET["manual_preview_dial"]))			{$manual_preview_dial=$_GET["manual_preview_dial"];}
	elseif (isset($_POST["manual_preview_dial"]))	{$manual_preview_dial=$_POST["manual_preview_dial"];}
if (isset($_GET["eht_minimum_prompt_filename"]))			{$eht_minimum_prompt_filename=$_GET["eht_minimum_prompt_filename"];}
	elseif (isset($_POST["eht_minimum_prompt_filename"]))	{$eht_minimum_prompt_filename=$_POST["eht_minimum_prompt_filename"];}
if (isset($_GET["eht_minimum_prompt_no_block"]))			{$eht_minimum_prompt_no_block=$_GET["eht_minimum_prompt_no_block"];}
	elseif (isset($_POST["eht_minimum_prompt_no_block"]))	{$eht_minimum_prompt_no_block=$_POST["eht_minimum_prompt_no_block"];}
if (isset($_GET["eht_minimum_prompt_seconds"]))				{$eht_minimum_prompt_seconds=$_GET["eht_minimum_prompt_seconds"];}
	elseif (isset($_POST["eht_minimum_prompt_seconds"]))	{$eht_minimum_prompt_seconds=$_POST["eht_minimum_prompt_seconds"];}
if (isset($_GET["realtime_agent_time_stats"]))				{$realtime_agent_time_stats=$_GET["realtime_agent_time_stats"];}
	elseif (isset($_POST["realtime_agent_time_stats"]))		{$realtime_agent_time_stats=$_POST["realtime_agent_time_stats"];}
if (isset($_GET["admin_modify_rafraîchir"]))			{$admin_modify_rafraîchir=$_GET["admin_modify_rafraîchir"];}
	elseif (isset($_POST["admin_modify_rafraîchir"]))	{$admin_modify_rafraîchir=$_POST["admin_modify_rafraîchir"];}
if (isset($_GET["nocache_admin"]))			{$nocache_admin=$_GET["nocache_admin"];}
	elseif (isset($_POST["nocache_admin"]))	{$nocache_admin=$_POST["nocache_admin"];}
if (isset($_GET["generate_cross_server_exten"]))			{$generate_cross_server_exten=$_GET["generate_cross_server_exten"];}
	elseif (isset($_POST["generate_cross_server_exten"]))	{$generate_cross_server_exten=$_POST["generate_cross_server_exten"];}
if (isset($_GET["queuemetrics_addmember_enabled"]))				{$queuemetrics_addmember_enabled=$_GET["queuemetrics_addmember_enabled"];}
	elseif (isset($_POST["queuemetrics_addmember_enabled"]))	{$queuemetrics_addmember_enabled=$_POST["queuemetrics_addmember_enabled"];}
if (isset($_GET["modify_page"]))			{$modify_page=$_GET["modify_page"];}
	elseif (isset($_POST["modify_page"]))	{$modify_page=$_POST["modify_page"];}
if (isset($_GET["modify_url"]))				{$modify_url=$_GET["modify_url"];}
	elseif (isset($_POST["modify_url"]))	{$modify_url=$_POST["modify_url"];}
if (isset($_GET["use_auto_hopper"]))			{$use_auto_hopper=$_GET["use_auto_hopper"];}
	elseif (isset($_POST["use_auto_hopper"]))	{$use_auto_hopper=$_POST["use_auto_hopper"];}
if (isset($_GET["auto_hopper_multi"]))			{$auto_hopper_multi=$_GET["auto_hopper_multi"];}
	elseif (isset($_POST["auto_hopper_multi"]))	{$auto_hopper_multi=$_POST["auto_hopper_multi"];}
if (isset($_GET["auto_trim_hopper"]))			{$auto_trim_hopper=$_GET["auto_trim_hopper"];}
	elseif (isset($_POST["auto_trim_hopper"]))	{$auto_trim_hopper=$_POST["auto_trim_hopper"];}
if (isset($_GET["api_manual_dial"]))			{$api_manual_dial=$_GET["api_manual_dial"];}
	elseif (isset($_POST["api_manual_dial"]))	{$api_manual_dial=$_POST["api_manual_dial"];}
if (isset($_GET["manual_dial_call_time_check"]))			{$manual_dial_call_time_check=$_GET["manual_dial_call_time_check"];}
	elseif (isset($_POST["manual_dial_call_time_check"]))	{$manual_dial_call_time_check=$_POST["manual_dial_call_time_check"];}
if (isset($_GET["queuemetrics_dispo_pause"]))			{$queuemetrics_dispo_pause=$_GET["queuemetrics_dispo_pause"];}
	elseif (isset($_POST["queuemetrics_dispo_pause"]))	{$queuemetrics_dispo_pause=$_POST["queuemetrics_dispo_pause"];}
if (isset($_GET["lead_order_randomize"]))			{$lead_order_randomize=$_GET["lead_order_randomize"];}
	elseif (isset($_POST["lead_order_randomize"]))	{$lead_order_randomize=$_POST["lead_order_randomize"];}
if (isset($_GET["lead_order_secondary"]))			{$lead_order_secondary=$_GET["lead_order_secondary"];}
	elseif (isset($_POST["lead_order_secondary"]))	{$lead_order_secondary=$_POST["lead_order_secondary"];}
if (isset($_GET["per_call_notes"]))				{$per_call_notes=$_GET["per_call_notes"];}
	elseif (isset($_POST["per_call_notes"]))	{$per_call_notes=$_POST["per_call_notes"];}
if (isset($_GET["my_callback_option"]))				{$my_callback_option=$_GET["my_callback_option"];}
	elseif (isset($_POST["my_callback_option"]))	{$my_callback_option=$_POST["my_callback_option"];}
if (isset($_GET["agent_lead_search"]))			{$agent_lead_search=$_GET["agent_lead_search"];}
	elseif (isset($_POST["agent_lead_search"]))	{$agent_lead_search=$_POST["agent_lead_search"];}
if (isset($_GET["agent_lead_search_method"]))			{$agent_lead_search_method=$_GET["agent_lead_search_method"];}
	elseif (isset($_POST["agent_lead_search_method"]))	{$agent_lead_search_method=$_POST["agent_lead_search_method"];}
if (isset($_GET["queuemetrics_phone_environment"]))				{$queuemetrics_phone_environment=$_GET["queuemetrics_phone_environment"];}
	elseif (isset($_POST["queuemetrics_phone_environment"]))	{$queuemetrics_phone_environment=$_POST["queuemetrics_phone_environment"];}
if (isset($_GET["active_twin_server_ip"]))			{$active_twin_server_ip=$_GET["active_twin_server_ip"];}
	elseif (isset($_POST["active_twin_server_ip"]))	{$active_twin_server_ip=$_POST["active_twin_server_ip"];}
if (isset($_GET["on_hook_agent"]))			{$on_hook_agent=$_GET["on_hook_agent"];}
	elseif (isset($_POST["on_hook_agent"]))	{$on_hook_agent=$_POST["on_hook_agent"];}
if (isset($_GET["on_hook_ring_time"]))			{$on_hook_ring_time=$_GET["on_hook_ring_time"];}
	elseif (isset($_POST["on_hook_ring_time"]))	{$on_hook_ring_time=$_POST["on_hook_ring_time"];}
if (isset($_GET["auto_pause_precall"]))			{$auto_pause_precall=$_GET["auto_pause_precall"];}
	elseif (isset($_POST["auto_pause_precall"]))	{$auto_pause_precall=$_POST["auto_pause_precall"];}
if (isset($_GET["auto_resume_precall"]))			{$auto_resume_precall=$_GET["auto_resume_precall"];}
	elseif (isset($_POST["auto_resume_precall"]))	{$auto_resume_precall=$_POST["auto_resume_precall"];}
if (isset($_GET["auto_pause_precall_code"]))			{$auto_pause_precall_code=$_GET["auto_pause_precall_code"];}
	elseif (isset($_POST["auto_pause_precall_code"]))	{$auto_pause_precall_code=$_POST["auto_pause_precall_code"];}
if (isset($_GET["reload_dialplan_on_servers"]))				{$reload_dialplan_on_servers=$_GET["reload_dialplan_on_servers"];}
	elseif (isset($_POST["reload_dialplan_on_servers"]))	{$reload_dialplan_on_servers=$_POST["reload_dialplan_on_servers"];}
if (isset($_GET["manual_dial_cid"]))			{$manual_dial_cid=$_GET["manual_dial_cid"];}
	elseif (isset($_POST["manual_dial_cid"]))	{$manual_dial_cid=$_POST["manual_dial_cid"];}
if (isset($_GET["post_phone_time_diff_alert"]))				{$post_phone_time_diff_alert=$_GET["post_phone_time_diff_alert"];}
	elseif (isset($_POST["post_phone_time_diff_alert"]))	{$post_phone_time_diff_alert=$_POST["post_phone_time_diff_alert"];}
if (isset($_GET["custom_3way_button_transfer"]))			{$custom_3way_button_transfer=$_GET["custom_3way_button_transfer"];}
	elseif (isset($_POST["custom_3way_button_transfer"]))	{$custom_3way_button_transfer=$_POST["custom_3way_button_transfer"];}
if (isset($_GET["available_only_tally_threshold"]))				{$available_only_tally_threshold=$_GET["available_only_tally_threshold"];}
	elseif (isset($_POST["available_only_tally_threshold"]))	{$available_only_tally_threshold=$_POST["available_only_tally_threshold"];}
if (isset($_GET["available_only_tally_threshold_agents"]))			{$available_only_tally_threshold_agents=$_GET["available_only_tally_threshold_agents"];}
	elseif (isset($_POST["available_only_tally_threshold_agents"]))	{$available_only_tally_threshold_agents=$_POST["available_only_tally_threshold_agents"];}
if (isset($_GET["dial_level_threshold"]))			{$dial_level_threshold=$_GET["dial_level_threshold"];}
	elseif (isset($_POST["dial_level_threshold"]))	{$dial_level_threshold=$_POST["dial_level_threshold"];}
if (isset($_GET["dial_level_threshold_agents"]))			{$dial_level_threshold_agents=$_GET["dial_level_threshold_agents"];}
	elseif (isset($_POST["dial_level_threshold_agents"]))	{$dial_level_threshold_agents=$_POST["dial_level_threshold_agents"];}
if (isset($_GET["time_zone_setting"]))			{$time_zone_setting=$_GET["time_zone_setting"];}
	elseif (isset($_POST["time_zone_setting"]))	{$time_zone_setting=$_POST["time_zone_setting"];}
if (isset($_GET["safe_harbor_audio"]))			{$safe_harbor_audio=$_GET["safe_harbor_audio"];}
	elseif (isset($_POST["safe_harbor_audio"]))	{$safe_harbor_audio=$_POST["safe_harbor_audio"];}
if (isset($_GET["safe_harbor_menu_id"]))			{$safe_harbor_menu_id=$_GET["safe_harbor_menu_id"];}
	elseif (isset($_POST["safe_harbor_menu_id"]))	{$safe_harbor_menu_id=$_POST["safe_harbor_menu_id"];}
if (isset($_GET["dtmf_log"]))			{$dtmf_log=$_GET["dtmf_log"];}
	elseif (isset($_POST["dtmf_log"]))	{$dtmf_log=$_POST["dtmf_log"];}
if (isset($_GET["webphone_auto_answer"]))			{$webphone_auto_answer=$_GET["webphone_auto_answer"];}
	elseif (isset($_POST["webphone_auto_answer"]))	{$webphone_auto_answer=$_POST["webphone_auto_answer"];}
if (isset($_GET["survey_menu_id"]))				{$survey_menu_id=$_GET["survey_menu_id"];}
	elseif (isset($_POST["survey_menu_id"]))	{$survey_menu_id=$_POST["survey_menu_id"];}
if (isset($_GET["callback_days_limit"]))			{$callback_days_limit=$_GET["callback_days_limit"];}
	elseif (isset($_POST["callback_days_limit"]))	{$callback_days_limit=$_POST["callback_days_limit"];}
if (isset($_GET["dl_diff_target_method"]))			{$dl_diff_target_method=$_GET["dl_diff_target_method"];}
	elseif (isset($_POST["dl_diff_target_method"]))	{$dl_diff_target_method=$_POST["dl_diff_target_method"];}
if (isset($_GET["disable_dispo_screen"]))			{$disable_dispo_screen=$_GET["disable_dispo_screen"];}
	elseif (isset($_POST["disable_dispo_screen"]))	{$disable_dispo_screen=$_POST["disable_dispo_screen"];}
if (isset($_GET["disable_dispo_status"]))			{$disable_dispo_status=$_GET["disable_dispo_status"];}
	elseif (isset($_POST["disable_dispo_status"]))	{$disable_dispo_status=$_POST["disable_dispo_status"];}
if (isset($_GET["screen_labels"]))			{$screen_labels=$_GET["screen_labels"];}
	elseif (isset($_POST["screen_labels"]))	{$screen_labels=$_POST["screen_labels"];}
if (isset($_GET["label_hide_field_logs"]))			{$label_hide_field_logs=$_GET["label_hide_field_logs"];}
	elseif (isset($_POST["label_hide_field_logs"]))	{$label_hide_field_logs=$_POST["label_hide_field_logs"];}
if (isset($_GET["label_id"]))			{$label_id=$_GET["label_id"];}
	elseif (isset($_POST["label_id"]))	{$label_id=$_POST["label_id"];}
if (isset($_GET["label_name"]))				{$label_name=$_GET["label_name"];}
	elseif (isset($_POST["label_name"]))	{$label_name=$_POST["label_name"];}
if (isset($_GET["status_display_fields"]))			{$status_display_fields=$_GET["status_display_fields"];}
	elseif (isset($_POST["status_display_fields"]))	{$status_display_fields=$_POST["status_display_fields"];}
if (isset($_GET["queuemetrics_pe_phone_append"]))			{$queuemetrics_pe_phone_append=$_GET["queuemetrics_pe_phone_append"];}
	elseif (isset($_POST["queuemetrics_pe_phone_append"]))	{$queuemetrics_pe_phone_append=$_POST["queuemetrics_pe_phone_append"];}
if (isset($_GET["test_campaign_calls"]))			{$test_campaign_calls=$_GET["test_campaign_calls"];}
	elseif (isset($_POST["test_campaign_calls"]))	{$test_campaign_calls=$_POST["test_campaign_calls"];}
if (isset($_GET["agents_calls_reset"]))				{$agents_calls_reset=$_GET["agents_calls_reset"];}
	elseif (isset($_POST["agents_calls_reset"]))	{$agents_calls_reset=$_POST["agents_calls_reset"];}
if (isset($_GET["voicemail_timezone"]))				{$voicemail_timezone=$_GET["voicemail_timezone"];}
	elseif (isset($_POST["voicemail_timezone"]))	{$voicemail_timezone=$_POST["voicemail_timezone"];}
if (isset($_GET["voicemail_options"]))			{$voicemail_options=$_GET["voicemail_options"];}
	elseif (isset($_POST["voicemail_options"]))	{$voicemail_options=$_POST["voicemail_options"];}
if (isset($_GET["default_voicemail_timezone"]))				{$default_voicemail_timezone=$_GET["default_voicemail_timezone"];}
	elseif (isset($_POST["default_voicemail_timezone"]))	{$default_voicemail_timezone=$_POST["default_voicemail_timezone"];}
if (isset($_GET["default_local_gmt"]))			{$default_local_gmt=$_GET["default_local_gmt"];}
	elseif (isset($_POST["default_local_gmt"]))	{$default_local_gmt=$_POST["default_local_gmt"];}
if (isset($_GET["na_call_url"]))			{$na_call_url=$_GET["na_call_url"];}
	elseif (isset($_POST["na_call_url"]))	{$na_call_url=$_POST["na_call_url"];}
if (isset($_GET["on_hook_cid"]))			{$on_hook_cid=$_GET["on_hook_cid"];}
	elseif (isset($_POST["on_hook_cid"]))	{$on_hook_cid=$_POST["on_hook_cid"];}
if (isset($_GET["form_end"]))			{$form_end=$_GET["form_end"];}
	elseif (isset($_POST["form_end"]))	{$form_end=$_POST["form_end"];}
if (isset($_GET["noanswer_log"]))			{$noanswer_log=$_GET["noanswer_log"];}
	elseif (isset($_POST["noanswer_log"]))	{$noanswer_log=$_POST["noanswer_log"];}
if (isset($_GET["alt_log_server_ip"]))			{$alt_log_server_ip=$_GET["alt_log_server_ip"];}
	elseif (isset($_POST["alt_log_server_ip"]))	{$alt_log_server_ip=$_POST["alt_log_server_ip"];}
if (isset($_GET["alt_log_dbname"]))			{$alt_log_dbname=$_GET["alt_log_dbname"];}
	elseif (isset($_POST["alt_log_dbname"]))	{$alt_log_dbname=$_POST["alt_log_dbname"];}
if (isset($_GET["alt_log_login"]))			{$alt_log_login=$_GET["alt_log_login"];}
	elseif (isset($_POST["alt_log_login"]))	{$alt_log_login=$_POST["alt_log_login"];}
if (isset($_GET["alt_log_pass"]))			{$alt_log_pass=$_GET["alt_log_pass"];}
	elseif (isset($_POST["alt_log_pass"]))	{$alt_log_pass=$_POST["alt_log_pass"];}
if (isset($_GET["tables_use_alt_log_db"]))			{$tables_use_alt_log_db=$_GET["tables_use_alt_log_db"];}
	elseif (isset($_POST["tables_use_alt_log_db"]))	{$tables_use_alt_log_db=$_POST["tables_use_alt_log_db"];}
if (isset($_GET["did_agent_log"]))			{$did_agent_log=$_GET["did_agent_log"];}
	elseif (isset($_POST["did_agent_log"]))	{$did_agent_log=$_POST["did_agent_log"];}
if (isset($_GET["survey_recording"]))			{$survey_recording=$_GET["survey_recording"];}
	elseif (isset($_POST["survey_recording"]))	{$survey_recording=$_POST["survey_recording"];}
if (isset($_GET["campaign_cid_areacodes_enabled"]))				{$campaign_cid_areacodes_enabled=$_GET["campaign_cid_areacodes_enabled"];}
	elseif (isset($_POST["campaign_cid_areacodes_enabled"]))	{$campaign_cid_areacodes_enabled=$_POST["campaign_cid_areacodes_enabled"];}
if (isset($_GET["areacode"]))			{$areacode=$_GET["areacode"];}
	elseif (isset($_POST["areacode"]))	{$areacode=$_POST["areacode"];}
if (isset($_GET["cid_description"]))			{$cid_description=$_GET["cid_description"];}
	elseif (isset($_POST["cid_description"]))	{$cid_description=$_POST["cid_description"];}
if (isset($_GET["pllb_grouping"]))			{$pllb_grouping=$_GET["pllb_grouping"];}
	elseif (isset($_POST["pllb_grouping"]))	{$pllb_grouping=$_POST["pllb_grouping"];}
if (isset($_GET["pllb_grouping_limit"]))			{$pllb_grouping_limit=$_GET["pllb_grouping_limit"];}
	elseif (isset($_POST["pllb_grouping_limit"]))	{$pllb_grouping_limit=$_POST["pllb_grouping_limit"];}
if (isset($_GET["description"]))			{$description=$_GET["description"];}
	elseif (isset($_POST["description"]))	{$description=$_POST["description"];}
if (isset($_GET["did_ra_extensions_enabled"]))			{$did_ra_extensions_enabled=$_GET["did_ra_extensions_enabled"];}
	elseif (isset($_POST["did_ra_extensions_enabled"]))	{$did_ra_extensions_enabled=$_POST["did_ra_extensions_enabled"];}
if (isset($_GET["modify_shifts"]))			{$modify_shifts=$_GET["modify_shifts"];}
	elseif (isset($_POST["modify_shifts"]))	{$modify_shifts=$_POST["modify_shifts"];}
if (isset($_GET["modify_phones"]))			{$modify_phones=$_GET["modify_phones"];}
	elseif (isset($_POST["modify_phones"]))	{$modify_phones=$_POST["modify_phones"];}
if (isset($_GET["modify_carriers"]))			{$modify_carriers=$_GET["modify_carriers"];}
	elseif (isset($_POST["modify_carriers"]))	{$modify_carriers=$_POST["modify_carriers"];}
if (isset($_GET["modify_labels"]))			{$modify_labels=$_GET["modify_labels"];}
	elseif (isset($_POST["modify_labels"]))	{$modify_labels=$_POST["modify_labels"];}
if (isset($_GET["modify_statuses"]))			{$modify_statuses=$_GET["modify_statuses"];}
	elseif (isset($_POST["modify_statuses"]))	{$modify_statuses=$_POST["modify_statuses"];}
if (isset($_GET["modify_voicemail"]))			{$modify_voicemail=$_GET["modify_voicemail"];}
	elseif (isset($_POST["modify_voicemail"]))	{$modify_voicemail=$_POST["modify_voicemail"];}
if (isset($_GET["modify_audiostore"]))			{$modify_audiostore=$_GET["modify_audiostore"];}
	elseif (isset($_POST["modify_audiostore"]))	{$modify_audiostore=$_POST["modify_audiostore"];}
if (isset($_GET["modify_moh"]))				{$modify_moh=$_GET["modify_moh"];}
	elseif (isset($_POST["modify_moh"]))	{$modify_moh=$_POST["modify_moh"];}
if (isset($_GET["modify_tts"]))				{$modify_tts=$_GET["modify_tts"];}
	elseif (isset($_POST["modify_tts"]))	{$modify_tts=$_POST["modify_tts"];}
if (isset($_GET["action_xfer_cid"]))			{$action_xfer_cid=$_GET["action_xfer_cid"];}
	elseif (isset($_POST["action_xfer_cid"]))	{$action_xfer_cid=$_POST["action_xfer_cid"];}
if (isset($_GET["drop_callmenu"]))			{$drop_callmenu=$_GET["drop_callmenu"];}
	elseif (isset($_POST["drop_callmenu"]))	{$drop_callmenu=$_POST["drop_callmenu"];}
if (isset($_GET["after_hours_callmenu"]))			{$after_hours_callmenu=$_GET["after_hours_callmenu"];}
	elseif (isset($_POST["after_hours_callmenu"]))	{$after_hours_callmenu=$_POST["after_hours_callmenu"];}
if (isset($_GET["dtmf_field"]))			{$dtmf_field=$_GET["dtmf_field"];}
	elseif (isset($_POST["dtmf_field"]))	{$dtmf_field=$_POST["dtmf_field"];}
if (isset($_GET["call_count_limit"]))			{$call_count_limit=$_GET["call_count_limit"];}
	elseif (isset($_POST["call_count_limit"]))	{$call_count_limit=$_POST["call_count_limit"];}
if (isset($_GET["call_count_target"]))			{$call_count_target=$_GET["call_count_target"];}
	elseif (isset($_POST["call_count_target"]))	{$call_count_target=$_POST["call_count_target"];}
if (isset($_GET["completed"]))			{$completed=$_GET["completed"];}
	elseif (isset($_POST["completed"]))	{$completed=$_POST["completed"];}
if (isset($_GET["expanded_list_stats"]))			{$expanded_list_stats=$_GET["expanded_list_stats"];}
	elseif (isset($_POST["expanded_list_stats"]))	{$expanded_list_stats=$_POST["expanded_list_stats"];}
if (isset($_GET["report_option"]))			{$report_option=$_GET["report_option"];}
	elseif (isset($_POST["report_option"]))	{$report_option=$_POST["report_option"];}
if (isset($_GET["preset_contact_search"]))			{$preset_contact_search=$_GET["preset_contact_search"];}
	elseif (isset($_POST["preset_contact_search"]))	{$preset_contact_search=$_POST["preset_contact_search"];}
if (isset($_GET["contacts_enabled"]))			{$contacts_enabled=$_GET["contacts_enabled"];}
	elseif (isset($_POST["contacts_enabled"]))	{$contacts_enabled=$_POST["contacts_enabled"];}
if (isset($_GET["contact_id"]))				{$contact_id=$_GET["contact_id"];}
	elseif (isset($_POST["contact_id"]))	{$contact_id=$_POST["contact_id"];}
if (isset($_GET["first_name"]))				{$first_name=$_GET["first_name"];}
	elseif (isset($_POST["first_name"]))	{$first_name=$_POST["first_name"];}
if (isset($_GET["last_name"]))				{$last_name=$_GET["last_name"];}
	elseif (isset($_POST["last_name"]))		{$last_name=$_POST["last_name"];}
if (isset($_GET["office_num"]))				{$office_num=$_GET["office_num"];}
	elseif (isset($_POST["office_num"]))	{$office_num=$_POST["office_num"];}
if (isset($_GET["cell_num"]))				{$cell_num=$_GET["cell_num"];}
	elseif (isset($_POST["cell_num"]))		{$cell_num=$_POST["cell_num"];}
if (isset($_GET["other_num1"]))				{$other_num1=$_GET["other_num1"];}
	elseif (isset($_POST["other_num1"]))	{$other_num1=$_POST["other_num1"];}
if (isset($_GET["other_num2"]))				{$other_num2=$_GET["other_num2"];}
	elseif (isset($_POST["other_num2"]))	{$other_num2=$_POST["other_num2"];}
if (isset($_GET["modify_contacts"]))			{$modify_contacts=$_GET["modify_contacts"];}
	elseif (isset($_POST["modify_contacts"]))	{$modify_contacts=$_POST["modify_contacts"];}
if (isset($_GET["bu_name"]))			{$bu_name=$_GET["bu_name"];}
	elseif (isset($_POST["bu_name"]))	{$bu_name=$_POST["bu_name"];}
if (isset($_GET["department"]))				{$department=$_GET["department"];}
	elseif (isset($_POST["department"]))	{$department=$_POST["department"];}
if (isset($_GET["job_title"]))			{$job_title=$_GET["job_title"];}
	elseif (isset($_POST["job_title"]))	{$job_title=$_POST["job_title"];}
if (isset($_GET["location"]))			{$location=$_GET["location"];}
	elseif (isset($_POST["location"]))	{$location=$_POST["location"];}
if (isset($_GET["callback_hours_block"]))			{$callback_hours_block=$_GET["callback_hours_block"];}
	elseif (isset($_POST["callback_hours_block"]))	{$callback_hours_block=$_POST["callback_hours_block"];}
if (isset($_GET["callback_list_calltime"]))				{$callback_list_calltime=$_GET["callback_list_calltime"];}
	elseif (isset($_POST["callback_list_calltime"]))	{$callback_list_calltime=$_POST["callback_list_calltime"];}
if (isset($_GET["modify_same_user_level"]))				{$modify_same_user_level=$_GET["modify_same_user_level"];}
	elseif (isset($_POST["modify_same_user_level"]))	{$modify_same_user_level=$_POST["modify_same_user_level"];}
if (isset($_GET["admin_hide_lead_data"]))			{$admin_hide_lead_data=$_GET["admin_hide_lead_data"];}
	elseif (isset($_POST["admin_hide_lead_data"]))	{$admin_hide_lead_data=$_POST["admin_hide_lead_data"];}
if (isset($_GET["admin_hide_phone_data"]))			{$admin_hide_phone_data=$_GET["admin_hide_phone_data"];}
	elseif (isset($_POST["admin_hide_phone_data"]))	{$admin_hide_phone_data=$_POST["admin_hide_phone_data"];}
if (isset($_GET["admin_viewable_groups"]))			{$admin_viewable_groups=$_GET["admin_viewable_groups"];}
	elseif (isset($_POST["admin_viewable_groups"]))	{$admin_viewable_groups=$_POST["admin_viewable_groups"];}
if (isset($_GET["admin_viewable_call_times"]))			{$admin_viewable_call_times=$_GET["admin_viewable_call_times"];}
	elseif (isset($_POST["admin_viewable_call_times"]))	{$admin_viewable_call_times=$_POST["admin_viewable_call_times"];}
if (isset($_GET["max_calls_method"]))			{$max_calls_method=$_GET["max_calls_method"];}
	elseif (isset($_POST["max_calls_method"]))	{$max_calls_method=$_POST["max_calls_method"];}
if (isset($_GET["max_calls_count"]))			{$max_calls_count=$_GET["max_calls_count"];}
	elseif (isset($_POST["max_calls_count"]))	{$max_calls_count=$_POST["max_calls_count"];}
if (isset($_GET["max_calls_action"]))			{$max_calls_action=$_GET["max_calls_action"];}
	elseif (isset($_POST["max_calls_action"]))	{$max_calls_action=$_POST["max_calls_action"];}
if (isset($_GET["territory_reset"]))			{$territory_reset=$_GET["territory_reset"];}
	elseif (isset($_POST["territory_reset"]))	{$territory_reset=$_POST["territory_reset"];}
if (isset($_GET["hopper_vlc_dup_check"]))			{$hopper_vlc_dup_check=$_GET["hopper_vlc_dup_check"];}
	elseif (isset($_POST["hopper_vlc_dup_check"]))	{$hopper_vlc_dup_check=$_POST["hopper_vlc_dup_check"];}
if (isset($_GET["inventory_report"]))			{$inventory_report=$_GET["inventory_report"];}
	elseif (isset($_POST["inventory_report"]))	{$inventory_report=$_POST["inventory_report"];}
if (isset($_GET["report_rank"]))			{$report_rank=$_GET["report_rank"];}
	elseif (isset($_POST["report_rank"]))	{$report_rank=$_POST["report_rank"];}



if (isset($script_id)) {$script_id= strtoupper($script_id);}
if (isset($lead_filter_id)) {$lead_filter_id = strtoupper($lead_filter_id);}

if (strlen($dial_status) > 0) 
	{
	$ADD='28';
	$status = $dial_status;
	}

#############################################
##### START SYSTEM_SETTINGS LOOKUP #####
$stmt = "SELECT use_non_latin,enable_queuemetrics_logging,enable_vtiger_integration,qc_features_active,outbound_autodial_active,sounds_central_control_active,enable_second_webform,user_territories_active,custom_fields_enabled,admin_web_directory,webphone_url,first_login_trigger,hosted_settings,default_phone_registration_password,default_phone_login_password,default_server_password,test_campaign_calls,active_voicemail_server,voicemail_timezones,default_voicemail_timezone,default_local_gmt,campaign_cid_areacodes_enabled,pllb_grouping_limit,did_ra_extensions_enabled,expanded_list_stats,contacts_enabled,alt_log_server_ip,alt_log_dbname,alt_log_login,alt_log_pass,tables_use_alt_log_db FROM system_settings;";
$rslt=mysql_query($stmt, $link);
if ($DB) {echo "$stmt\n";}
$qm_conf_ct = mysql_num_rows($rslt);
if ($qm_conf_ct > 0)
	{
	$row=mysql_fetch_row($rslt);
	$non_latin =							$row[0];
	$SSenable_queuemetrics_logging =		$row[1];
	$SSenable_vtiger_integration =			$row[2];
	$SSqc_features_active =					$row[3];
	$SSoutbound_autodial_active =			$row[4];
	$SSsounds_central_control_active =		$row[5];
	$SSenable_second_webform =				$row[6];
	$SSuser_territories_active =			$row[7];
	$SScustom_fields_enabled =				$row[8];
	$SSadmin_web_directory =				$row[9];
	$SSwebphone_url =						$row[10];
	$SSfirst_login_trigger =				$row[11];
	$SShosted_settings =					$row[12];
	$SSdefault_phone_registration_password =$row[13];
	$SSdefault_phone_login_password =		$row[14];
	$SSdefault_server_password =			$row[15];
	$SStest_campaign_calls =				$row[16];
	$SSactive_voicemail_server =			$row[17];
	$SSvoicemail_timezones =				$row[18];
	$SSdefault_voicemail_timezone =			$row[19];
	$SSdefault_local_gmt =					$row[20];
	$SScampaign_cid_areacodes_enabled =		$row[21];
	$SSpllb_grouping_limit =				$row[22];
	$SSdid_ra_extensions_enabled =			$row[23];
	$SSexpanded_list_stats =				$row[24];
	$SScontacts_enabled =					$row[25];
	$SSalt_log_server_ip =					$row[26];
	$SSalt_log_dbname =						$row[27];
	$SSalt_log_login =						$row[28];
	$SSalt_log_pass =						$row[29];
	$SStables_use_alt_log_db =				$row[30];
	}
##### END SETTINGS LOOKUP #####
###########################################


######################################################################################################
######################################################################################################
#######   Form variable filtering for security and data integrity
######################################################################################################
######################################################################################################

if ($non_latin < 1)
	{
	### DIGITS ONLY ###
	$adaptive_latest_server_time = ereg_replace("[^0-9]","",$adaptive_latest_server_time);
	$admin_hangup_enabled = ereg_replace("[^0-9]","",$admin_hangup_enabled);
	$admin_hijack_enabled = ereg_replace("[^0-9]","",$admin_hijack_enabled);
	$admin_monitor_enabled = ereg_replace("[^0-9]","",$admin_monitor_enabled);
	$AFLogging_enabled = ereg_replace("[^0-9]","",$AFLogging_enabled);
	$agent_choose_ingroups = ereg_replace("[^0-9]","",$agent_choose_ingroups);
	$agentcall_manual = ereg_replace("[^0-9]","",$agentcall_manual);
	$agentonly_callbacks = ereg_replace("[^0-9]","",$agentonly_callbacks);
	$AGI_call_logging_enabled = ereg_replace("[^0-9]","",$AGI_call_logging_enabled);
	$allcalls_delay = ereg_replace("[^0-9]","",$allcalls_delay);
	$alter_agent_interface_options = ereg_replace("[^0-9]","",$alter_agent_interface_options);
	$answer_transfer_agent = ereg_replace("[^0-9]","",$answer_transfer_agent);
	$ast_admin_access = ereg_replace("[^0-9]","",$ast_admin_access);
	$ast_delete_phones = ereg_replace("[^0-9]","",$ast_delete_phones);
	$attempt_delay = ereg_replace("[^0-9]","",$attempt_delay);
	$attempt_maximum = ereg_replace("[^0-9]","",$attempt_maximum);
	$auto_dial_next_number = ereg_replace("[^0-9]","",$auto_dial_next_number);
	$balance_trunks_offlimits = ereg_replace("[^0-9]","",$balance_trunks_offlimits);
	$call_parking_enabled = ereg_replace("[^0-9]","",$call_parking_enabled);
	$CallerID_popup_enabled = ereg_replace("[^0-9]","",$CallerID_popup_enabled);
	$campaign_detail = ereg_replace("[^0-9]","",$campaign_detail);
	$campaign_rec_exten = ereg_replace("[^0-9]","",$campaign_rec_exten);
	$campaign_vdad_exten = ereg_replace("[^0-9]","",$campaign_vdad_exten);
	$change_agent_campaign = ereg_replace("[^0-9]","",$change_agent_campaign);
	$closer_default_blended = ereg_replace("[^0-9]","",$closer_default_blended);
	$conf_exten = ereg_replace("[^0-9]","",$conf_exten);
	$conf_on_extension = ereg_replace("[^0-9]","",$conf_on_extension);
	$conferencing_enabled = ereg_replace("[^0-9]","",$conferencing_enabled);
	$ct_default_start = ereg_replace("[^0-9]","",$ct_default_start);
	$ct_default_stop = ereg_replace("[^0-9]","",$ct_default_stop);
	$ct_friday_start = ereg_replace("[^0-9]","",$ct_friday_start);
	$ct_friday_stop = ereg_replace("[^0-9]","",$ct_friday_stop);
	$ct_monday_start = ereg_replace("[^0-9]","",$ct_monday_start);
	$ct_monday_stop = ereg_replace("[^0-9]","",$ct_monday_stop);
	$ct_saturday_start = ereg_replace("[^0-9]","",$ct_saturday_start);
	$ct_saturday_stop = ereg_replace("[^0-9]","",$ct_saturday_stop);
	$ct_sunday_start = ereg_replace("[^0-9]","",$ct_sunday_start);
	$ct_sunday_stop = ereg_replace("[^0-9]","",$ct_sunday_stop);
	$ct_thursday_start = ereg_replace("[^0-9]","",$ct_thursday_start);
	$ct_thursday_stop = ereg_replace("[^0-9]","",$ct_thursday_stop);
	$ct_tuesday_start = ereg_replace("[^0-9]","",$ct_tuesday_start);
	$ct_tuesday_stop = ereg_replace("[^0-9]","",$ct_tuesday_stop);
	$ct_wednesday_start = ereg_replace("[^0-9]","",$ct_wednesday_start);
	$ct_wednesday_stop = ereg_replace("[^0-9]","",$ct_wednesday_stop);
	$DBX_port = ereg_replace("[^0-9]","",$DBX_port);
	$DBY_port = ereg_replace("[^0-9]","",$DBY_port);
	$dedicated_trunks = ereg_replace("[^0-9]","",$dedicated_trunks);
	$delete_call_times = ereg_replace("[^0-9]","",$delete_call_times);
	$delete_campaigns = ereg_replace("[^0-9]","",$delete_campaigns);
	$delete_filters = ereg_replace("[^0-9]","",$delete_filters);
	$delete_ingroups = ereg_replace("[^0-9]","",$delete_ingroups);
	$delete_lists = ereg_replace("[^0-9]","",$delete_lists);
	$delete_remote_agents = ereg_replace("[^0-9]","",$delete_remote_agents);
	$delete_scripts = ereg_replace("[^0-9]","",$delete_scripts);
	$delete_user_groups = ereg_replace("[^0-9]","",$delete_user_groups);
	$delete_users = ereg_replace("[^0-9]","",$delete_users);
	$dial_timeout = ereg_replace("[^0-9]","",$dial_timeout);
	$dialplan_number = ereg_replace("[^0-9]","",$dialplan_number);
	$enable_fast_rafraîchir = ereg_replace("[^0-9]","",$enable_fast_rafraîchir);
	$enable_persistant_mysql = ereg_replace("[^0-9]","",$enable_persistant_mysql);
	$fast_rafraîchir_rate = ereg_replace("[^0-9]","",$fast_rafraîchir_rate);
	$hopper_level = ereg_replace("[^0-9]","",$hopper_level);
	$hotkey = ereg_replace("[^0-9]","",$hotkey);
	$hotkeys_active = ereg_replace("[^0-9]","",$hotkeys_active);
	$list_id = ereg_replace("[^0-9]","",$list_id);
	$load_leads = ereg_replace("[^0-9]","",$load_leads);
	$max_vicidial_trunks = ereg_replace("[^0-9]","",$max_vicidial_trunks);
	$modify_call_times = ereg_replace("[^0-9]","",$modify_call_times);
	$modify_users = ereg_replace("[^0-9]","",$modify_users);
	$modify_campaigns = ereg_replace("[^0-9]","",$modify_campaigns);
	$modify_lists = ereg_replace("[^0-9]","",$modify_lists);
	$modify_scripts = ereg_replace("[^0-9]","",$modify_scripts);
	$modify_filters = ereg_replace("[^0-9]","",$modify_filters);
	$modify_ingroups = ereg_replace("[^0-9]","",$modify_ingroups);
	$modify_usergroups = ereg_replace("[^0-9]","",$modify_usergroups);
	$modify_remoteagents = ereg_replace("[^0-9]","",$modify_remoteagents);
	$modify_servers = ereg_replace("[^0-9]","",$modify_servers);
	$view_reports = ereg_replace("[^0-9]","",$view_reports);
	$modify_leads = ereg_replace("[^0-9]","",$modify_leads);
	$monitor_prefix = ereg_replace("[^0-9]","",$monitor_prefix);
	$number_of_lines = ereg_replace("[^0-9]","",$number_of_lines);
	$old_conf_exten = ereg_replace("[^0-9]","",$old_conf_exten);
	$outbound_cid = ereg_replace("[^0-9]","",$outbound_cid);
	$park_ext = ereg_replace("[^0-9]","",$park_ext);
	$park_on_extension = ereg_replace("[^0-9]","",$park_on_extension);
	$phone_number = ereg_replace("[^0-9]","",$phone_number);
	$QUEUE_ACTION_enabled = ereg_replace("[^0-9]","",$QUEUE_ACTION_enabled);
	$recording_exten = ereg_replace("[^0-9]","",$recording_exten);
	$remote_agent_id = ereg_replace("[^0-9]","",$remote_agent_id);
	$telnet_port = ereg_replace("[^0-9]","",$telnet_port);
	$updater_check_enabled = ereg_replace("[^0-9]","",$updater_check_enabled);
	$user_level = ereg_replace("[^0-9]","",$user_level);
	$user_switching_enabled = ereg_replace("[^0-9]","",$user_switching_enabled);
	$VDstop_rec_after_each_call = ereg_replace("[^0-9]","",$VDstop_rec_after_each_call);
	$VICIDIAL_park_on_extension = ereg_replace("[^0-9]","",$VICIDIAL_park_on_extension);
	$vicidial_recording = ereg_replace("[^0-9]","",$vicidial_recording);
	$vicidial_transfers = ereg_replace("[^0-9]","",$vicidial_transfers);
	$voicemail_button_enabled = ereg_replace("[^0-9]","",$voicemail_button_enabled);
	$voicemail_dump_exten = ereg_replace("[^0-9]","",$voicemail_dump_exten);
	$voicemail_exten = ereg_replace("[^0-9]","",$voicemail_exten);
	$wrapup_seconds = ereg_replace("[^0-9]","",$wrapup_seconds);
	$use_non_latin = ereg_replace("[^0-9]","",$use_non_latin);
	$webroot_writable = ereg_replace("[^0-9]","",$webroot_writable);
	$enable_queuemetrics_logging = ereg_replace("[^0-9]","",$enable_queuemetrics_logging);
	$enable_sipsak_messages = ereg_replace("[^0-9]","",$enable_sipsak_messages);
	$allow_sipsak_messages = ereg_replace("[^0-9]","",$allow_sipsak_messages);
	$mix_container_item = ereg_replace("[^0-9]","",$mix_container_item);
	$prompt_interval = ereg_replace("[^0-9]","",$prompt_interval);
	$agent_alert_delay = ereg_replace("[^0-9]","",$agent_alert_delay);
	$manual_dial_list_id = ereg_replace("[^0-9]","",$manual_dial_list_id);
	$qc_user_level = ereg_replace("[^0-9]","",$qc_user_level);
	$qc_pass = ereg_replace("[^0-9]","",$qc_pass);
	$qc_finish = ereg_replace("[^0-9]","",$qc_finish);
	$qc_commit = ereg_replace("[^0-9]","",$qc_commit);
	$shift_start_time = ereg_replace("[^0-9]","",$shift_start_time);
	$timeclock_end_of_day = ereg_replace("[^0-9]","",$timeclock_end_of_day);
	$survey_xfer_exten = ereg_replace("[^0-9]","",$survey_xfer_exten);
	$add_timeclock_log = ereg_replace("[^0-9]","",$add_timeclock_log);
	$modify_timeclock_log = ereg_replace("[^0-9]","",$modify_timeclock_log);
	$delete_timeclock_log = ereg_replace("[^0-9]","",$delete_timeclock_log);
	$vdc_agent_api_access = ereg_replace("[^0-9]","",$vdc_agent_api_access);
	$vdc_agent_api_active = ereg_replace("[^0-9]","",$vdc_agent_api_active);
	$hold_time_option_seconds = ereg_replace("[^0-9]","",$hold_time_option_seconds);
	$hold_time_option_callback_list_id = ereg_replace("[^0-9]","",$hold_time_option_callback_list_id);
	$did_id = ereg_replace("[^0-9]","",$did_id);
	$source_did = ereg_replace("[^0-9]","",$source_did);
	$modify_inbound_dids = ereg_replace("[^0-9]","",$modify_inbound_dids);
	$delete_inbound_dids = ereg_replace("[^0-9]","",$delete_inbound_dids);
	$answer_sec_pct_rt_stat_one = ereg_replace("[^0-9]","",$answer_sec_pct_rt_stat_one);
	$answer_sec_pct_rt_stat_two = ereg_replace("[^0-9]","",$answer_sec_pct_rt_stat_two);
	$enable_vtiger_integration = ereg_replace("[^0-9]","",$enable_vtiger_integration);
	$qc_features_active = ereg_replace("[^0-9]","",$qc_features_active);
	$outbound_autodial_active = ereg_replace("[^0-9]","",$outbound_autodial_active);
	$download_lists = ereg_replace("[^0-9]","",$download_lists);
	$caller_id_number = ereg_replace("[^0-9]","",$caller_id_number);
	$outbound_calls_per_second = ereg_replace("[^0-9]","",$outbound_calls_per_second);
	$manager_shift_enforcement_override = ereg_replace("[^0-9]","",$manager_shift_enforcement_override);
	$export_reports = ereg_replace("[^0-9]","",$export_reports);
	$delete_from_dnc = ereg_replace("[^0-9]","",$delete_from_dnc);
	$menu_timeout = ereg_replace("[^0-9]","",$menu_timeout);
	$menu_time_check = ereg_replace("[^0-9]","",$menu_time_check);
	$track_in_vdac = ereg_replace("[^0-9]","",$track_in_vdac);
	$menu_repeat = ereg_replace("[^0-9]","",$menu_repeat);
	$agentonly_callback_campaign_lock = ereg_replace("[^0-9]","",$agentonly_callback_campaign_lock);
	$sounds_central_control_active = ereg_replace("[^0-9]","",$sounds_central_control_active);
	$user_territories_active = ereg_replace("[^0-9]","",$user_territories_active);
	$vicidial_recording_limit = ereg_replace("[^0-9]","",$vicidial_recording_limit);
	$allow_custom_dialplan = ereg_replace("[^0-9]","",$allow_custom_dialplan);
	$phone_ring_timeout = ereg_replace("[^0-9]","",$phone_ring_timeout);
	$enable_tts_integration = ereg_replace("[^0-9]","",$enable_tts_integration);
	$allow_alerts = ereg_replace("[^0-9]","",$allow_alerts);
	$vicidial_balance_rank = ereg_replace("[^0-9]","",$vicidial_balance_rank);
	$rank = ereg_replace("[^0-9]","",$rank);
	$enable_second_webform = ereg_replace("[^0-9]","",$enable_second_webform);
	$campaign_cid_override = ereg_replace("[^0-9]","",$campaign_cid_override);
	$agent_choose_territories = ereg_replace("[^0-9]","",$agent_choose_territories);
	$timer_action_seconds = ereg_replace("[^0-9]","",$timer_action_seconds);
	$default_webphone = ereg_replace("[^0-9]","",$default_webphone);
	$default_external_server_ip = ereg_replace("[^0-9]","",$default_external_server_ip);
	$enable_agc_xfer_log = ereg_replace("[^0-9]","",$enable_agc_xfer_log);
	$enable_agc_dispo_log = ereg_replace("[^0-9]","",$enable_agc_dispo_log);
	$callcard_enabled = ereg_replace("[^0-9]","",$callcard_enabled);
	$callcard_admin = ereg_replace("[^0-9]","",$callcard_admin);
	$extension_id = ereg_replace("[^0-9]","",$extension_id);
	$agent_choose_blended = ereg_replace("[^0-9]","",$agent_choose_blended);
	$realtime_block_user_info = ereg_replace("[^0-9]","",$realtime_block_user_info);
	$codecs_with_template = ereg_replace("[^0-9]","",$codecs_with_template);
	$custom_fields_modify = ereg_replace("[^0-9]","",$custom_fields_modify);
	$hold_time_option_minimum = ereg_replace("[^0-9]","",$hold_time_option_minimum);
	$onhold_prompt_seconds = ereg_replace("[^0-9]","",$onhold_prompt_seconds);
	$hold_time_option_prompt_seconds = ereg_replace("[^0-9]","",$hold_time_option_prompt_seconds);
	$custom_fields_enabled = ereg_replace("[^0-9]","",$custom_fields_enabled);
	$wait_time_option_seconds = ereg_replace("[^0-9]","",$wait_time_option_seconds);
	$wait_time_option_callback_list_id = ereg_replace("[^0-9]","",$wait_time_option_callback_list_id);
	$wait_time_option_prompt_seconds = ereg_replace("[^0-9]","",$wait_time_option_prompt_seconds);
	$filter_list_id = ereg_replace("[^0-9]","",$filter_list_id);
	$calculate_estimated_hold_seconds = ereg_replace("[^0-9]","",$calculate_estimated_hold_seconds);
	$customer_3way_hangup_seconds = ereg_replace("[^0-9]","",$customer_3way_hangup_seconds);
	$eht_minimum_prompt_seconds = ereg_replace("[^0-9]","",$eht_minimum_prompt_seconds);
	$admin_modify_rafraîchir = ereg_replace("[^0-9]","",$admin_modify_rafraîchir);
	$nocache_admin = ereg_replace("[^0-9]","",$nocache_admin);
	$generate_cross_server_exten = ereg_replace("[^0-9]","",$generate_cross_server_exten);
	$queuemetrics_addmember_enabled = ereg_replace("[^0-9]","",$queuemetrics_addmember_enabled);
	$modify_page = ereg_replace("[^0-9]","",$modify_page);
	$on_hook_ring_time = ereg_replace("[^0-9]","",$on_hook_ring_time);
	$reload_dialplan_on_servers = ereg_replace("[^0-9]","",$reload_dialplan_on_servers);
	$available_only_tally_threshold_agents = ereg_replace("[^0-9]","",$available_only_tally_threshold_agents);
	$dial_level_threshold_agents = ereg_replace("[^0-9]","",$dial_level_threshold_agents);
	$dtmf_log = ereg_replace("[^0-9]","",$dtmf_log);
	$callback_days_limit = ereg_replace("[^0-9]","",$callback_days_limit);
	$queuemetrics_pe_phone_append = ereg_replace("[^0-9]","",$queuemetrics_pe_phone_append);
	$test_campaign_calls = ereg_replace("[^0-9]","",$test_campaign_calls);
	$agents_calls_reset = ereg_replace("[^0-9]","",$agents_calls_reset);
	$campaign_cid_areacodes_enabled = ereg_replace("[^0-9]","",$campaign_cid_areacodes_enabled);
	$areacode = ereg_replace("[^0-9]","",$areacode);
	$pllb_grouping_limit = ereg_replace("[^0-9]","",$pllb_grouping_limit);
	$did_ra_extensions_enabled = ereg_replace("[^0-9]","",$did_ra_extensions_enabled);
	$modify_shifts = ereg_replace("[^0-9]","",$modify_shifts);
	$modify_phones = ereg_replace("[^0-9]","",$modify_phones);
	$modify_carriers = ereg_replace("[^0-9]","",$modify_carriers);
	$modify_labels = ereg_replace("[^0-9]","",$modify_labels);
	$modify_statuses = ereg_replace("[^0-9]","",$modify_statuses);
	$modify_voicemail = ereg_replace("[^0-9]","",$modify_voicemail);
	$modify_audiostore = ereg_replace("[^0-9]","",$modify_audiostore);
	$modify_moh = ereg_replace("[^0-9]","",$modify_moh);
	$modify_tts = ereg_replace("[^0-9]","",$modify_tts);
	$call_count_limit = ereg_replace("[^0-9]","",$call_count_limit);
	$call_count_target = ereg_replace("[^0-9]","",$call_count_target);
	$expanded_list_stats = ereg_replace("[^0-9]","",$expanded_list_stats);
	$contacts_enabled = ereg_replace("[^0-9]","",$contacts_enabled);
	$contact_id = ereg_replace("[^0-9]","",$contact_id);
	$office_num = ereg_replace("[^0-9]","",$office_num);
	$cell_num = ereg_replace("[^0-9]","",$cell_num);
	$other_num1 = ereg_replace("[^0-9]","",$other_num1);
	$other_num2 = ereg_replace("[^0-9]","",$other_num2);
	$modify_contacts = ereg_replace("[^0-9]","",$modify_contacts);
	$callback_hours_block = ereg_replace("[^0-9]","",$callback_hours_block);
	$modify_same_user_level = ereg_replace("[^0-9]","",$modify_same_user_level);
	$admin_hide_lead_data = ereg_replace("[^0-9]","",$admin_hide_lead_data);
	$max_calls_count = ereg_replace("[^0-9]","",$max_calls_count);
	$report_rank = ereg_replace("[^0-9]","",$report_rank);

	$drop_call_seconds = ereg_replace("[^-0-9]","",$drop_call_seconds);

	### DIGITS and COLONS
	$shift_length = ereg_replace("[^\:0-9]","",$shift_length);

	### DIGITS and HASHES and STARS
	$survey_dtmf_digits = ereg_replace("[^\#\*0-9]","",$survey_dtmf_digits);
	$survey_ni_digit = ereg_replace("[^\#\*0-9]","",$survey_ni_digit);

	### DIGITS and DASHES
	$group_rank = ereg_replace("[^-0-9]","",$group_rank);
	$campaign_rank = ereg_replace("[^-0-9]","",$campaign_rank);
	$queue_priority = ereg_replace("[^-0-9]","",$queue_priority);

	### DIGITS and NEWLINES
	$phone_numbers = ereg_replace("[^X\n0-9]","",$phone_numbers);

	### Y or N ONLY ###
	$allow_closers = ereg_replace("[^NY]","",$allow_closers);
	$reset_hopper = ereg_replace("[^NY]","",$reset_hopper);
	$amd_send_to_vmx = ereg_replace("[^NY]","",$amd_send_to_vmx);
	$alt_number_dialing = ereg_replace("[^NY]","",$alt_number_dialing);
	$selectable = ereg_replace("[^NY]","",$selectable);
	$reset_list = ereg_replace("[^NY]","",$reset_list);
	$fronter_display = ereg_replace("[^NY]","",$fronter_display);
	$omit_phone_code = ereg_replace("[^NY]","",$omit_phone_code);
	$available_only_ratio_tally = ereg_replace("[^NY]","",$available_only_ratio_tally);
	$sys_perf_log = ereg_replace("[^NY]","",$sys_perf_log);
	$vicidial_balance_active = ereg_replace("[^NY]","",$vicidial_balance_active);
	$vd_server_logs = ereg_replace("[^NY]","",$vd_server_logs);
	$campaign_stats_rafraîchir = ereg_replace("[^NY]","",$campaign_stats_rafraîchir);
	$disable_alter_custdata = ereg_replace("[^NY]","",$disable_alter_custdata);
	$no_hopper_leads_logins = ereg_replace("[^NY]","",$no_hopper_leads_logins);
	$human_answered = ereg_replace("[^NY]","",$human_answered);
	$tovdad_display = ereg_replace("[^NY]","",$tovdad_display);
	$campaign_allow_inbound = ereg_replace("[^NY]","",$campaign_allow_inbound);
	$old_campaign_allow_inbound = ereg_replace("[^NY]","",$old_campaign_allow_inbound);
	$display_queue_count = ereg_replace("[^NY]","",$display_queue_count);
	$qc_show_recording = ereg_replace("[^NY]","",$qc_show_recording);
	$sale_category = ereg_replace("[^NY]","",$sale_category);
	$dead_lead_category = ereg_replace("[^NY]","",$dead_lead_category);
	$agent_extended_alt_dial  = ereg_replace("[^NY]","",$agent_extended_alt_dial);
	$play_place_in_line  = ereg_replace("[^NY]","",$play_place_in_line);
	$play_estimate_hold_time  = ereg_replace("[^NY]","",$play_estimate_hold_time);
	$no_delay_call_route  = ereg_replace("[^NY]","",$no_delay_call_route);
	$did_active  = ereg_replace("[^NY]","",$did_active);
	$active_asterisk_server = ereg_replace("[^NY]","",$active_asterisk_server);
	$generate_vicidial_conf = ereg_replace("[^NY]","",$generate_vicidial_conf);
	$rebuild_conf_files = ereg_replace("[^NY]","",$rebuild_conf_files);
	$agent_allow_group_alias = ereg_replace("[^NY]","",$agent_allow_group_alias);
	$vtiger_status_call = ereg_replace("[^NY]","",$vtiger_status_call);
	$sale = ereg_replace("[^NY]","",$sale);
	$dnc = ereg_replace("[^NY]","",$dnc);
	$customer_contact = ereg_replace("[^NY]","",$customer_contact);
	$not_interested = ereg_replace("[^NY]","",$not_interested);
	$unworkable = ereg_replace("[^NY]","",$unworkable);
	$sounds_update = ereg_replace("[^NY]","",$sounds_update);
	$carrier_logging_active = ereg_replace("[^NY]","",$carrier_logging_active);
	$agent_status_view_time = ereg_replace("[^NY]","",$agent_status_view_time);
	$no_hopper_dialing = ereg_replace("[^NY]","",$no_hopper_dialing);
	$agent_display_dialable_leads = ereg_replace("[^NY]","",$agent_display_dialable_leads);
	$random = ereg_replace("[^NY]","",$random);
	$rebuild_music_on_hold = ereg_replace("[^NY]","",$rebuild_music_on_hold);
	$active_agent_login_server = ereg_replace("[^NY]","",$active_agent_login_server);
	$agent_select_territories = ereg_replace("[^NY]","",$agent_select_territories);
	$delete_vm_after_email = ereg_replace("[^NY]","",$delete_vm_after_email);
	$crm_popup_login = ereg_replace("[^NY]","",$crm_popup_login);
	$ignore_list_script_override = ereg_replace("[^NY]","",$ignore_list_script_override);
	$is_webphone = ereg_replace("[^NY]","",$is_webphone);
	$use_external_server_ip = ereg_replace("[^NY]","",$use_external_server_ip);
	$agent_xfer_consultative = ereg_replace("[^NY]","",$agent_xfer_consultative);
	$agent_xfer_dial_override = ereg_replace("[^NY]","",$agent_xfer_dial_override);
	$agent_xfer_vm_transfer = ereg_replace("[^NY]","",$agent_xfer_vm_transfer);
	$agent_xfer_blind_transfer = ereg_replace("[^NY]","",$agent_xfer_blind_transfer);
	$agent_xfer_dial_with_customer = ereg_replace("[^NY]","",$agent_xfer_dial_with_customer);
	$agent_xfer_park_customer_dial = ereg_replace("[^NY]","",$agent_xfer_park_customer_dial);
	$agent_fullscreen = ereg_replace("[^NY]","",$agent_fullscreen);
	$extension_appended_cidname = ereg_replace("[^NY]","",$extension_appended_cidname);
	$onhold_prompt_no_block = ereg_replace("[^NY]","",$onhold_prompt_no_block);
	$hold_time_option_no_block = ereg_replace("[^NY]","",$hold_time_option_no_block);
	$wait_time_option_no_block = ereg_replace("[^NY]","",$wait_time_option_no_block);
	$preset_hide_number = ereg_replace("[^NY]","",$preset_hide_number);
	$use_auto_hopper = ereg_replace("[^NY]","",$use_auto_hopper);
	$auto_trim_hopper = ereg_replace("[^NY]","",$auto_trim_hopper);
	$force_change_password = ereg_replace("[^NY]","",$force_change_password);
	$first_login_trigger = ereg_replace("[^NY]","",$first_login_trigger);
	$eht_minimum_prompt_no_block = ereg_replace("[^NY]","",$eht_minimum_prompt_no_block);
	$lead_order_randomize = ereg_replace("[^NY]","",$lead_order_randomize);
	$on_hook_agent = ereg_replace("[^NY]","",$on_hook_agent);
	$auto_pause_precall = ereg_replace("[^NY]","",$auto_pause_precall);
	$auto_resume_precall = ereg_replace("[^NY]","",$auto_resume_precall);
	$webphone_auto_answer = ereg_replace("[^NY]","",$webphone_auto_answer);
	$noanswer_log = ereg_replace("[^NY]","",$noanswer_log);
	$did_agent_log = ereg_replace("[^NY]","",$did_agent_log);
	$completed = ereg_replace("[^NY]","",$completed);
	$report_option = ereg_replace("[^NY]","",$report_option);
	$hopper_vlc_dup_check = ereg_replace("[^NY]","",$hopper_vlc_dup_check);
	$inventory_report = ereg_replace("[^NY]","",$inventory_report);

	$qc_enabled = ereg_replace("[^0-9NY]","",$qc_enabled);
	$active = ereg_replace("[^0-9NY]","",$active);


	### ALPHA-NUMERIC ONLY ###
	$script_id = ereg_replace("[^0-9a-zA-Z]","",$script_id);
	$agent_script_override = ereg_replace("[^0-9a-zA-Z]","",$agent_script_override);
	$campaign_script = ereg_replace("[^0-9a-zA-Z]","",$campaign_script);
	$submit = ereg_replace("[^0-9a-zA-Z]","",$submit);
	$campaign_cid = ereg_replace("[^0-9a-zA-Z]","",$campaign_cid);
	$get_call_launch = ereg_replace("[^0-9a-zA-Z]","",$get_call_launch);
	$campaign_recording = ereg_replace("[^0-9a-zA-Z]","",$campaign_recording);
	$ADD = ereg_replace("[^0-9a-zA-Z]","",$ADD);
	$dial_prefix = ereg_replace("[^0-9a-zA-Z]","",$dial_prefix);
	$state_call_time_state = ereg_replace("[^0-9a-zA-Z]","",$state_call_time_state);
	$scheduled_callbacks = ereg_replace("[^0-9a-zA-Z]","",$scheduled_callbacks);
	$concurrent_transfers = ereg_replace("[^0-9a-zA-Z]","",$concurrent_transfers);
	$billable = ereg_replace("[^0-9a-zA-Z]","",$billable);
	$pause_code = ereg_replace("[^0-9a-zA-Z]","",$pause_code);
	$vicidial_recording_override = ereg_replace("[^0-9a-zA-Z]","",$vicidial_recording_override);
	$ingroup_recording_override = ereg_replace("[^0-9a-zA-Z]","",$ingroup_recording_override);
	$queuemetrics_log_id = ereg_replace("[^0-9a-zA-Z]","",$queuemetrics_log_id);
	$after_hours_exten = ereg_replace("[^0-9a-zA-Z]","",$after_hours_exten);
	$after_hours_voicemail = ereg_replace("[^0-9a-zA-Z]","",$after_hours_voicemail);
	$qc_script = ereg_replace("[^0-9a-zA-Z]","",$qc_script);
	$code = ereg_replace("[^0-9a-zA-Z]","",$code);
	$survey_no_response_action = ereg_replace("[^0-9a-zA-Z]","",$survey_no_response_action);
	$survey_ni_status = ereg_replace("[^0-9a-zA-Z]","",$survey_ni_status);
	$qc_get_record_launch = ereg_replace("[^0-9a-zA-Z]","",$qc_get_record_launch);
	$agent_pause_codes_active = ereg_replace("[^0-9a-zA-Z]","",$agent_pause_codes_active);
	$three_way_dial_prefix = ereg_replace("[^0-9a-zA-Z]","",$three_way_dial_prefix);
	$shift_enforcement = ereg_replace("[^0-9a-zA-Z]","",$shift_enforcement);
	$agent_shift_enforcement_override = ereg_replace("[^0-9a-zA-Z]","",$agent_shift_enforcement_override);
	$survey_third_status = ereg_replace("[^0-9a-zA-Z]","",$survey_third_status);
	$survey_fourth_status = ereg_replace("[^0-9a-zA-Z]","",$survey_fourth_status);
	$sounds_web_directory = ereg_replace("[^0-9a-zA-Z]","",$sounds_web_directory);
	$disable_alter_custphone = ereg_replace("[^0-9a-zA-Z]","",$disable_alter_custphone);
	$view_calls_in_queue = ereg_replace("[^0-9a-zA-Z]","",$view_calls_in_queue);
	$view_calls_in_queue_launch = ereg_replace("[^0-9a-zA-Z]","",$view_calls_in_queue_launch);
	$grab_calls_in_queue = ereg_replace("[^0-9a-zA-Z]","",$grab_calls_in_queue);
	$call_requeue_button = ereg_replace("[^0-9a-zA-Z]","",$call_requeue_button);
	$pause_after_each_call = ereg_replace("[^0-9a-zA-Z]","",$pause_after_each_call);
	$use_internal_dnc = ereg_replace("[^0-9a-zA-Z]","",$use_internal_dnc);
	$use_campaign_dnc = ereg_replace("[^0-9a-zA-Z]","",$use_campaign_dnc);
	$voicemail_id = ereg_replace("[^0-9a-zA-Z]","",$voicemail_id);
	$status_id = ereg_replace("[^0-9a-zA-Z]","",$status_id);
	$agent_call_log_view = ereg_replace("[^0-9a-zA-Z]","",$agent_call_log_view);
	$agent_call_log_view_override = ereg_replace("[^0-9a-zA-Z]","",$agent_call_log_view_override);
	$queuemetrics_loginout = ereg_replace("[^0-9a-zA-Z]","",$queuemetrics_loginout);
	$queuemetrics_callstatus = ereg_replace("[^0-9a-zA-Z]","",$queuemetrics_callstatus);
	$filter_inbound_number = ereg_replace("[^0-9a-zA-Z]","",$filter_inbound_number);
	$enable_xfer_presets = ereg_replace("[^0-9a-zA-Z]","",$enable_xfer_presets);
	$hide_xfer_number_to_dial = ereg_replace("[^0-9a-zA-Z]","",$hide_xfer_number_to_dial);
	$manual_dial_prefix = ereg_replace("[^0-9a-zA-Z]","",$manual_dial_prefix);
	$customer_3way_hangup_logging = ereg_replace("[^0-9a-zA-Z]","",$customer_3way_hangup_logging);
	$customer_3way_hangup_action = ereg_replace("[^0-9a-zA-Z]","",$customer_3way_hangup_action);
	$queuemetrics_dispo_pause = ereg_replace("[^0-9a-zA-Z]","",$queuemetrics_dispo_pause);
	$per_call_notes = ereg_replace("[^0-9a-zA-Z]","",$per_call_notes);
	$my_callback_option = ereg_replace("[^0-9a-zA-Z]","",$my_callback_option);
	$auto_pause_precall_code = ereg_replace("[^0-9a-zA-Z]","",$auto_pause_precall_code);
	$disable_dispo_status = ereg_replace("[^0-9a-zA-Z]","",$disable_dispo_status);
	$use_custom_cid = ereg_replace("[^0-9a-zA-Z]","",$use_custom_cid);
	$action_xfer_cid = ereg_replace("[^0-9a-zA-Z]","",$action_xfer_cid);
	$callback_list_calltime = ereg_replace("[^0-9a-zA-Z]","",$callback_list_calltime);

	### DIGITS and Dots
	$server_ip = ereg_replace("[^\.0-9]","",$server_ip);
	$auto_dial_level = ereg_replace("[^\.0-9]","",$auto_dial_level);
	$adaptive_maximum_level = ereg_replace("[^\.0-9]","",$adaptive_maximum_level);
	$phone_ip = ereg_replace("[^\.0-9]","",$phone_ip);
	$old_server_ip = ereg_replace("[^\.0-9]","",$old_server_ip);
	$computer_ip = ereg_replace("[^\.0-9]","",$computer_ip);
	$queuemetrics_server_ip = ereg_replace("[^\.0-9]","",$queuemetrics_server_ip);
	$vtiger_server_ip = ereg_replace("[^\.0-9]","",$vtiger_server_ip);
	$active_voicemail_server = ereg_replace("[^\.0-9]","",$active_voicemail_server);
	$auto_dial_limit = ereg_replace("[^\.0-9]","",$auto_dial_limit);
	$adaptive_dropped_percentage = ereg_replace("[^\.0-9]","",$adaptive_dropped_percentage);
	$drop_lockout_time = ereg_replace("[^\.0-9]","",$drop_lockout_time);
	$filter_server_ip = ereg_replace("[^\.0-9]","",$filter_server_ip);
	$auto_hopper_multi = ereg_replace("[^\.0-9]","",$auto_hopper_multi);

	### ALPHA-NUMERIC and spaces and hash and star and comma
	$xferconf_a_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$xferconf_a_dtmf);
	$xferconf_b_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$xferconf_b_dtmf);
	$xferconf_c_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$xferconf_c_dtmf);
	$xferconf_d_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$xferconf_d_dtmf);
	$xferconf_e_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$xferconf_e_dtmf);
	$survey_third_digit = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$survey_third_digit);
	$survey_fourth_digit = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$survey_fourth_digit);
	$survey_third_exten = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$survey_third_exten);
	$survey_fourth_exten = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$survey_fourth_exten);
	$preset_dtmf = ereg_replace("[^ \,\*\#0-9a-zA-Z]","",$preset_dtmf);


	### ALPHACAPS-NUMERIC
	$xferconf_a_number = ereg_replace("[^0-9A-Z]","",$xferconf_a_number);
	$xferconf_b_number = ereg_replace("[^0-9A-Z]","",$xferconf_b_number);

	### ALPHA-NUMERIC and underscore and dash
	$agi_output = ereg_replace("[^-_0-9a-zA-Z]","",$agi_output);
	$ASTmgrSECRET = ereg_replace("[^-_0-9a-zA-Z]","",$ASTmgrSECRET);
	$ASTmgrUSERNAME = ereg_replace("[^-_0-9a-zA-Z]","",$ASTmgrUSERNAME);
	$ASTmgrUSERNAMElisten = ereg_replace("[^-_0-9a-zA-Z]","",$ASTmgrUSERNAMElisten);
	$ASTmgrUSERNAMEsend = ereg_replace("[^-_0-9a-zA-Z]","",$ASTmgrUSERNAMEsend);
	$ASTmgrUSERNAMEupdate = ereg_replace("[^-_0-9a-zA-Z]","",$ASTmgrUSERNAMEupdate);
	$call_time_id = ereg_replace("[^-_0-9a-zA-Z]","",$call_time_id);
	$campaign_id = ereg_replace("[^-_0-9a-zA-Z]","",$campaign_id);
	$CoNfIrM = ereg_replace("[^-_0-9a-zA-Z]","",$CoNfIrM);
	$DBX_database = ereg_replace("[^-_0-9a-zA-Z]","",$DBX_database);
	$DBX_pass = ereg_replace("[^-_0-9a-zA-Z]","",$DBX_pass);
	$DBX_user = ereg_replace("[^-_0-9a-zA-Z]","",$DBX_user);
	$DBY_database = ereg_replace("[^-_0-9a-zA-Z]","",$DBY_database);
	$DBY_pass = ereg_replace("[^-_0-9a-zA-Z]","",$DBY_pass);
	$DBY_user = ereg_replace("[^-_0-9a-zA-Z]","",$DBY_user);
	$dial_method = ereg_replace("[^-_0-9a-zA-Z]","",$dial_method);
	$dial_status_a = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status_a);
	$dial_status_b = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status_b);
	$dial_status_c = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status_c);
	$dial_status_d = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status_d);
	$dial_status_e = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status_e);
	$ext_context = ereg_replace("[^-_0-9a-zA-Z]","",$ext_context);
	$group_id = ereg_replace("[^-_0-9a-zA-Z]","",$group_id);
	$lead_filter_id = ereg_replace("[^-_0-9a-zA-Z]","",$lead_filter_id);
	$local_call_time = ereg_replace("[^-_0-9a-zA-Z]","",$local_call_time);
	$login = ereg_replace("[^-_0-9a-zA-Z]","",$login);
	$login_campaign = ereg_replace("[^-_0-9a-zA-Z]","",$login_campaign);
	$login_pass = ereg_replace("[^-_0-9a-zA-Z]","",$login_pass);
	$login_user = ereg_replace("[^-_0-9a-zA-Z]","",$login_user);
	$next_agent_call = ereg_replace("[^-_0-9a-zA-Z]","",$next_agent_call);
	$old_campaign_id = ereg_replace("[^-_0-9a-zA-Z]","",$old_campaign_id);
	$old_server_id = ereg_replace("[^-_0-9a-zA-Z]","",$old_server_id);
	$OLDuser_group = ereg_replace("[^-_0-9a-zA-Z]","",$OLDuser_group);
	$park_file_name = ereg_replace("[^-_0-9a-zA-Z]","",$park_file_name);
	$pass = ereg_replace("[^-_0-9a-zA-Z]","",$pass);
	$phone_login = ereg_replace("[^-_0-9a-zA-Z]","",$phone_login);
	$phone_pass = ereg_replace("[^-_0-9a-zA-Z]","",$phone_pass);
	$PHP_AUTH_PW = ereg_replace("[^-_0-9a-zA-Z]","",$PHP_AUTH_PW);
	$PHP_AUTH_USER = ereg_replace("[^-_0-9a-zA-Z]","",$PHP_AUTH_USER);
	$protocol = ereg_replace("[^-_0-9a-zA-Z]","",$protocol);
	$server_id = ereg_replace("[^-_0-9a-zA-Z]","",$server_id);
	$stage = ereg_replace("[^-_0-9a-zA-Z]","",$stage);
	$state_rule = ereg_replace("[^-_0-9a-zA-Z]","",$state_rule);
	$trunk_restriction = ereg_replace("[^-_0-9a-zA-Z]","",$trunk_restriction);
	$user = ereg_replace("[^-_0-9a-zA-Z]","",$user);
	$user_group = ereg_replace("[^-_0-9a-zA-Z]","",$user_group);
	$VICIDIAL_park_on_filename = ereg_replace("[^-_0-9a-zA-Z]","",$VICIDIAL_park_on_filename);
	$auto_alt_dial = ereg_replace("[^-_0-9a-zA-Z]","",$auto_alt_dial);
	$dial_status = ereg_replace("[^-_0-9a-zA-Z]","",$dial_status);
	$queuemetrics_eq_prepend = ereg_replace("[^-_0-9a-zA-Z]","",$queuemetrics_eq_prepend);
	$vicidial_agent_disable = ereg_replace("[^-_0-9a-zA-Z]","",$vicidial_agent_disable);
	$alter_custdata_override = ereg_replace("[^-_0-9a-zA-Z]","",$alter_custdata_override);
	$list_order_mix = ereg_replace("[^-_0-9a-zA-Z]","",$list_order_mix);
	$vcl_id = ereg_replace("[^-_0-9a-zA-Z]","",$vcl_id);
	$mix_method = ereg_replace("[^-_0-9a-zA-Z]","",$mix_method);
	$category = ereg_replace("[^-_0-9a-zA-Z]","",$category);
	$vsc_id = ereg_replace("[^-_0-9a-zA-Z]","",$vsc_id);
	$moh_context = ereg_replace("[^-_0-9a-zA-Z]","",$moh_context);
	$source_campaign_id = ereg_replace("[^-_0-9a-zA-Z]","",$source_campaign_id);
	$source_user_id = ereg_replace("[^-_0-9a-zA-Z]","",$source_user_id);
	$source_group_id = ereg_replace("[^-_0-9a-zA-Z]","",$source_group_id);
	$default_xfer_group = ereg_replace("[^-_0-9a-zA-Z]","",$default_xfer_group);
	$drop_exten = ereg_replace("[^-_0-9a-zA-Z]","",$drop_exten);
	$safe_harbor_exten = ereg_replace("[^-_0-9a-zA-Z]","",$safe_harbor_exten);
	$drop_action = ereg_replace("[^-_0-9a-zA-Z]","",$drop_action);
	$drop_inbound_group = ereg_replace("[^-_0-9a-zA-Z]","",$drop_inbound_group);
	$afterhours_xfer_group = ereg_replace("[^-_0-9a-zA-Z]","",$afterhours_xfer_group);
	$after_hours_action = ereg_replace("[^-_0-9a-zA-Z]","",$after_hours_action);
	$alias_id = ereg_replace("[^-_0-9a-zA-Z]","",$alias_id);
	$shift_id = ereg_replace("[^-_0-9a-zA-Z]","",$shift_id);
	$qc_shift_id = ereg_replace("[^-_0-9a-zA-Z]","",$qc_shift_id);
	$survey_method = ereg_replace("[^-_0-9a-zA-Z]","",$survey_method);
	$alter_custphone_override = ereg_replace("[^-_0-9a-zA-Z]","",$alter_custphone_override);
	$manual_dial_filter = ereg_replace("[^-_0-9a-zA-Z]","",$manual_dial_filter);
	$agent_clipboard_copy = ereg_replace("[^-_0-9a-zA-Z]","",$agent_clipboard_copy);
	$hold_time_option = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_option);
	$hold_time_option_xfer_group = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_option_xfer_group);
	$hold_recall_xfer_group = ereg_replace("[^-_0-9a-zA-Z]","",$hold_recall_xfer_group);
	$play_welcome_message = ereg_replace("[^-_0-9a-zA-Z]","",$play_welcome_message);
	$did_route = ereg_replace("[^-_0-9a-zA-Z]","",$did_route);
	$user_unavailable_action = ereg_replace("[^-_0-9a-zA-Z]","",$user_unavailable_action);
	$user_route_settings_ingroup = ereg_replace("[^-_0-9a-zA-Z]","",$user_route_settings_ingroup);
	$call_handle_method = ereg_replace("[^-_0-9a-zA-Z]","",$call_handle_method);
	$agent_search_method = ereg_replace("[^-_0-9a-zA-Z]","",$agent_search_method);
	$hold_time_option_voicemail = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_option_voicemail);
	$exten_context = ereg_replace("[^-_0-9a-zA-Z]","",$exten_context);
	$three_way_call_cid = ereg_replace("[^-_0-9a-zA-Z]","",$three_way_call_cid);
	$web_form_target = ereg_replace("[^-_0-9a-zA-Z]","",$web_form_target);
	$recording_web_link = ereg_replace("[^-_0-9a-zA-Z]","",$recording_web_link);
	$vtiger_search_category = ereg_replace("[^-_0-9a-zA-Z]","",$vtiger_search_category);
	$vtiger_create_call_record = ereg_replace("[^-_0-9a-zA-Z]","",$vtiger_create_call_record);
	$vtiger_create_lead_record = ereg_replace("[^-_0-9a-zA-Z]","",$vtiger_create_lead_record);
	$vtiger_screen_login = ereg_replace("[^-_0-9a-zA-Z]","",$vtiger_screen_login);
	$cpd_amd_action = ereg_replace("[^-_0-9a-zA-Z]","",$cpd_amd_action);
	$template_id = ereg_replace("[^-_0-9a-zA-Z]","",$template_id);
	$carrier_id = ereg_replace("[^-_0-9a-zA-Z]","",$carrier_id);
	$source_carrier = ereg_replace("[^-_0-9a-zA-Z]","",$source_carrier);
	$group_alias_id = ereg_replace("[^-_0-9a-zA-Z]","",$group_alias_id);
	$default_group_alias = ereg_replace("[^-_0-9a-zA-Z]","",$default_group_alias);
	$vtiger_search_dead = ereg_replace("[^-_0-9a-zA-Z]","",$vtiger_search_dead);
	$menu_id = ereg_replace("[^-_0-9a-zA-Z]","",$menu_id);
	$source_menu = ereg_replace("[^-_0-9a-zA-Z]","",$source_menu);
	$call_time_id = ereg_replace("[^-_0-9a-zA-Z]","",$call_time_id);
	$phone_context = ereg_replace("[^-_0-9a-zA-Z]","",$phone_context);
	$conf_secret = ereg_replace("[^-_0-9a-zA-Z]","",$conf_secret);
	$tracking_group = ereg_replace("[^-_0-9a-zA-Z]","",$tracking_group);
	$no_agent_no_queue = ereg_replace("[^-_0-9a-zA-Z]","",$no_agent_no_queue);
	$no_agent_action = ereg_replace("[^-_0-9a-zA-Z]","",$no_agent_action);
	$quick_transfer_button = ereg_replace("[^-_0-9a-zA-Z]","",$quick_transfer_button);
	$prepopulate_transfer_preset = ereg_replace("[^-_0-9a-zA-Z]","",$prepopulate_transfer_preset);
	$tts_id = ereg_replace("[^-_0-9a-zA-Z]","",$tts_id);
	$drop_rate_group = ereg_replace("[^-_0-9a-zA-Z]","",$drop_rate_group);
	$agent_dial_owner_only = ereg_replace("[^-_0-9a-zA-Z]","",$agent_dial_owner_only);
	$reset_time = ereg_replace("[^-_0-9a-zA-Z]","",$reset_time);
	$moh_id = ereg_replace("[^-_0-9a-zA-Z]","",$moh_id);
	$drop_inbound_group_override = ereg_replace("[^-_0-9a-zA-Z]","",$drop_inbound_group_override);
	$timer_action = ereg_replace("[^-_0-9a-zA-Z]","",$timer_action);
	$record_call = ereg_replace("[^-_0-9a-zA-Z]","",$record_call);
	$scheduled_callbacks_alert = ereg_replace("[^-_0-9a-zA-Z]","",$scheduled_callbacks_alert);
	$extension_group_id = ereg_replace("[^-_0-9a-zA-Z]","",$extension_group_id);
	$extension_group = ereg_replace("[^-_0-9a-zA-Z]","",$extension_group);
	$scheduled_callbacks_count = ereg_replace("[^-_0-9a-zA-Z]","",$scheduled_callbacks_count);
	$manual_dial_override = ereg_replace("[^-_0-9a-zA-Z]","",$manual_dial_override);
	$blind_monitor_warning = ereg_replace("[^-_0-9a-zA-Z]","",$blind_monitor_warning);
	$uniqueid_status_display = ereg_replace("[^-_0-9a-zA-Z]","",$uniqueid_status_display);
	$hold_time_option_callmenu = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_option_callmenu);
	$inbound_queue_no_dial = ereg_replace("[^-_0-9a-zA-Z]","",$inbound_queue_no_dial);
	$hold_time_second_option = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_second_option);
	$hold_time_third_option = ereg_replace("[^-_0-9a-zA-Z]","",$hold_time_third_option);
	$wait_hold_option_priority = ereg_replace("[^-_0-9a-zA-Z]","",$wait_hold_option_priority);
	$wait_time_option = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_option);
	$wait_time_second_option = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_second_option);
	$wait_time_third_option = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_third_option);
	$wait_time_option_xfer_group = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_option_xfer_group);
	$wait_time_option_callmenu = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_option_callmenu);
	$wait_time_option_voicemail = ereg_replace("[^-_0-9a-zA-Z]","",$wait_time_option_voicemail);
	$filter_phone_group_id = ereg_replace("[^-_0-9a-zA-Z]","",$filter_phone_group_id);
	$filter_action = ereg_replace("[^-_0-9a-zA-Z]","",$filter_action);
	$filter_user_unavailable_action = ereg_replace("[^-_0-9a-zA-Z]","",$filter_user_unavailable_action);
	$filter_user_route_settings_ingroup = ereg_replace("[^-_0-9a-zA-Z]","",$filter_user_route_settings_ingroup);
	$filter_agent_search_method = ereg_replace("[^-_0-9a-zA-Z]","",$filter_agent_search_method);
	$filter_campaign_id = ereg_replace("[^-_0-9a-zA-Z]","",$filter_campaign_id);
	$filter_group_id = ereg_replace("[^-_0-9a-zA-Z]","",$filter_group_id);
	$filter_menu_id = ereg_replace("[^-_0-9a-zA-Z]","",$filter_menu_id);
	$filter_call_handle_method = ereg_replace("[^-_0-9a-zA-Z]","",$filter_call_handle_method);
	$filter_user = ereg_replace("[^-_0-9a-zA-Z]","",$filter_user);
	$filter_exten_context = ereg_replace("[^-_0-9a-zA-Z]","",$filter_exten_context);
	$webphone_systemkey = ereg_replace("[^-_0-9a-zA-Z]","",$webphone_systemkey);
	$webphone_dialpad = ereg_replace("[^-_0-9a-zA-Z]","",$webphone_dialpad);
	$webphone_systemkey_override = ereg_replace("[^-_0-9a-zA-Z]","",$webphone_systemkey_override);
	$webphone_dialpad_override = ereg_replace("[^-_0-9a-zA-Z]","",$webphone_dialpad_override);
	$default_phone_registration_password = ereg_replace("[^-_0-9a-zA-Z]","",$default_phone_registration_password);
	$default_phone_login_password = ereg_replace("[^-_0-9a-zA-Z]","",$default_phone_login_password);
	$default_server_password = ereg_replace("[^-_0-9a-zA-Z]","",$default_server_password);
	$ivr_park_call = ereg_replace("[^-_0-9a-zA-Z]","",$ivr_park_call);
	$manual_preview_dial = ereg_replace("[^-_0-9a-zA-Z]","",$manual_preview_dial);
	$realtime_agent_time_stats = ereg_replace("[^-_0-9a-zA-Z]","",$realtime_agent_time_stats);
	$api_manual_dial = ereg_replace("[^-_0-9a-zA-Z]","",$api_manual_dial);
	$manual_dial_call_time_check = ereg_replace("[^-_0-9a-zA-Z]","",$manual_dial_call_time_check);
	$lead_order_secondary = ereg_replace("[^-_0-9a-zA-Z]","",$lead_order_secondary);
	$agent_lead_search = ereg_replace("[^-_0-9a-zA-Z]","",$agent_lead_search);
	$agent_lead_search_method = ereg_replace("[^-_0-9a-zA-Z]","",$agent_lead_search_method);
	$manual_dial_cid = ereg_replace("[^-_0-9a-zA-Z]","",$manual_dial_cid);
	$post_phone_time_diff_alert = ereg_replace("[^-_0-9a-zA-Z]","",$post_phone_time_diff_alert);
	$custom_3way_button_transfer = ereg_replace("[^-_0-9a-zA-Z]","",$custom_3way_button_transfer);
	$available_only_tally_threshold_agents = ereg_replace("[^-_0-9a-zA-Z]","",$available_only_tally_threshold_agents);
	$dial_level_threshold_agents = ereg_replace("[^-_0-9a-zA-Z]","",$dial_level_threshold_agents);
	$time_zone_setting = ereg_replace("[^-_0-9a-zA-Z]","",$time_zone_setting);
	$safe_harbor_menu_id = ereg_replace("[^-_0-9a-zA-Z]","",$safe_harbor_menu_id);
	$survey_menu_id = ereg_replace("[^-_0-9a-zA-Z]","",$survey_menu_id);
	$dl_diff_target_method = ereg_replace("[^-_0-9a-zA-Z]","",$dl_diff_target_method);
	$disable_dispo_screen = ereg_replace("[^-_0-9a-zA-Z]","",$disable_dispo_screen);
	$screen_labels = ereg_replace("[^-_0-9a-zA-Z]","",$screen_labels);
	$label_hide_field_logs = ereg_replace("[^-_0-9a-zA-Z]","",$label_hide_field_logs);
	$label_id = ereg_replace("[^-_0-9a-zA-Z]","",$label_id);
	$status_display_fields = ereg_replace("[^-_0-9a-zA-Z]","",$status_display_fields);
	$voicemail_timezone = ereg_replace("[^-_0-9a-zA-Z]","",$voicemail_timezone);
	$default_voicemail_timezone = ereg_replace("[^-_0-9a-zA-Z]","",$default_voicemail_timezone);
	$on_hook_cid = ereg_replace("[^-_0-9a-zA-Z]","",$on_hook_cid);
	$pllb_grouping = ereg_replace("[^-_0-9a-zA-Z]","",$pllb_grouping);
	$user_start = ereg_replace("[^-_0-9a-zA-Z]","",$user_start);
	$drop_callmenu = ereg_replace("[^-_0-9a-zA-Z]","",$drop_callmenu);
	$after_hours_callmenu = ereg_replace("[^-_0-9a-zA-Z]","",$after_hours_callmenu);
	$survey_recording = ereg_replace("[^-_0-9a-zA-Z]","",$survey_recording);
	$dtmf_field = ereg_replace("[^-_0-9a-zA-Z]","",$dtmf_field);
	$preset_contact_search = ereg_replace("[^-_0-9a-zA-Z]","",$preset_contact_search);
	$admin_hide_phone_data = ereg_replace("[^-_0-9a-zA-Z]","",$admin_hide_phone_data);
	$max_calls_method = ereg_replace("[^-_0-9a-zA-Z]","",$max_calls_method);
	$max_calls_action = ereg_replace("[^-_0-9a-zA-Z]","",$max_calls_action);

	### ALPHA-NUMERIC and underscore and dash and slash and dot
	$menu_prompt = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$menu_prompt);
	$menu_timeout_prompt = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$menu_timeout_prompt);
	$menu_invalid_prompt = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$menu_invalid_prompt);
	$after_hours_message_filename = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$after_hours_message_filename);
	$welcome_message_filename = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$welcome_message_filename);
	$onhold_prompt_filename = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$onhold_prompt_filename);
	$hold_time_option_callback_filename = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$hold_time_option_callback_filename);
	$agent_alert_exten = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$agent_alert_exten);
	$filename = ereg_replace("[^-\/\._0-9a-zA-Z]","",$filename);
	$am_message_exten = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$am_message_exten);
	$am_message_exten_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$am_message_exten_override);
	$campaign_groups = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$campaign_groups);
	$blind_monitor_filename = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$blind_monitor_filename);
	$hold_time_option_press_filename = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$hold_time_option_press_filename);
	$default_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$default_afterhours_filename_override);
	$sunday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$sunday_afterhours_filename_override);
	$monday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$monday_afterhours_filename_override);
	$tuesday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$tuesday_afterhours_filename_override);
	$wednesday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$wednesday_afterhours_filename_override);
	$thursday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$thursday_afterhours_filename_override);
	$friday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$friday_afterhours_filename_override);
	$saturday_afterhours_filename_override = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$saturday_afterhours_filename_override);
	$admin_web_directory = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$admin_web_directory);
	$tts_voice = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$tts_voice);
	$wait_time_option_callback_filename = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$wait_time_option_callback_filename);
	$wait_time_option_press_filename = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$wait_time_option_press_filename);
	$eht_minimum_prompt_filename = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$eht_minimum_prompt_filename);
	$queuemetrics_phone_environment = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$queuemetrics_phone_environment);
	$active_twin_server_ip = ereg_replace("[^-\|\/\._0-9a-zA-Z]","",$active_twin_server_ip);
	$safe_harbor_audio = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$safe_harbor_audio);
	$alt_log_server_ip = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$alt_log_server_ip);
	$alt_log_dbname = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$alt_log_dbname);
	$alt_log_login = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$alt_log_login);
	$alt_log_pass = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$alt_log_pass);
	$survey_first_audio_file = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$survey_first_audio_file);
	$survey_opt_in_audio_file = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$survey_opt_in_audio_file);
	$survey_ni_audio_file = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$survey_ni_audio_file);
	$survey_third_audio_file = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$survey_third_audio_file);
	$survey_fourth_audio_file = ereg_replace("[^-\/\|\._0-9a-zA-Z]","",$survey_fourth_audio_file);

	### ALPHA-NUMERIC and underscore and dash and comma
	$logins_list = ereg_replace("[^-\,\_0-9a-zA-Z]","",$logins_list);
	$forced_timeclock_login = ereg_replace("[^-\,\_0-9a-zA-Z]","",$forced_timeclock_login);
	$uniqueid_status_prefix = ereg_replace("[^-\,\_0-9a-zA-Z]","",$uniqueid_status_prefix);

	### ALPHA-NUMERIC and dots
	$sounds_web_server = ereg_replace("[^-\:\.0-9a-zA-Z]","",$sounds_web_server);
	### ALPHA-NUMERIC and spaces
	$lead_order = ereg_replace("[^ 0-9a-zA-Z]","",$lead_order);
	### ALPHA-NUMERIC and spaces and dashes and underscores
	$preset_name = ereg_replace("[^- \_0-9a-zA-Z]","",$preset_name);

	### ALPHA-NUMERIC and hash
	$group_color = ereg_replace("[^\#0-9a-zA-Z]","",$group_color);
	### ALPHA-NUMERIC and hash and star and dot and underscore
	$hold_time_option_exten = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$hold_time_option_exten);
	$did_pattern = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$did_pattern);
	$voicemail_ext = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$voicemail_ext);
	$phone = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$phone);
	$phone_code = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$phone_code);
	$wait_time_option_exten = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$wait_time_option_exten);
	$filter_voicemail_ext = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$filter_voicemail_ext);
	$filter_phone_code = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$filter_phone_code);
	$filter_phone = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$filter_phone);
	$preset_number = ereg_replace("[^\*\#\.\_0-9a-zA-Z]","",$preset_number);


	### ALPHA-NUMERIC and spaces dots, commas, dashes, underscores
	$adaptive_dl_diff_target = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$adaptive_dl_diff_target);
	$adaptive_intensity = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$adaptive_intensity);
	$asterisk_version = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$asterisk_version);
	$call_time_comments = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$call_time_comments);
	$call_time_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$call_time_name);
	$campaign_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$campaign_name);
	$campaign_rec_filename = ereg_replace("[^\.-\_0-9a-zA-Z]","",$campaign_rec_filename);
	$ingroup_rec_filename = ereg_replace("[^\.-\_0-9a-zA-Z]","",$ingroup_rec_filename);
	$company = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$company);
	$full_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$full_name);
	$fullname = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$fullname);
	$group_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$group_name);
	$HKstatus = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$HKstatus);
	$lead_filter_comments = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$lead_filter_comments);
	$lead_filter_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$lead_filter_name);
	$list_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$list_name);
	$local_gmt = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$local_gmt);
	$phone_type = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$phone_type);
	$picture = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$picture);
	$script_comments = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$script_comments);
	$script_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$script_name);
	$server_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$server_description);
	$status = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$status);
	$status_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$status_name);
	$wrapup_message = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$wrapup_message);
	$pause_code_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$pause_code_name);
	$campaign_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$campaign_description);
	$list_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$list_description);
	$vcl_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$vcl_name);
	$vsc_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$vsc_name);
	$vsc_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$vsc_description);
	$code_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$code_name);
	$alias_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$alias_name);
	$shift_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$shift_name);
	$did_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$did_description);
	$alt_server_ip = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$alt_server_ip);
	$template_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$template_name);
	$carrier_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$carrier_name);
	$group_alias_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$group_alias_name);
	$caller_id_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$caller_id_name);
	$user_code = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$user_code);
	$territory = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$territory);
	$tts_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$tts_name);
	$moh_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$moh_name);
	$timer_action_message = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$timer_action_message);
	$external_server_ip = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$external_server_ip);
	$default_codecs = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$default_codecs);
	$codecs_list = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$codecs_list);
	$label_title = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_title);
	$label_first_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_first_name);
	$label_middle_initial = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_middle_initial);
	$label_last_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_last_name);
	$label_address1 = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_address1);
	$label_address2 = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_address2);
	$label_address3 = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_address3);
	$label_city = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_city);
	$label_state = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_state);
	$label_province = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_province);
	$label_postal_code = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_postal_code);
	$label_vendor_lead_code = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_vendor_lead_code);
	$label_gender = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_gender);
	$label_phone_number = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_phone_number);
	$label_phone_code = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_phone_code);
	$label_alt_phone = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_alt_phone);
	$label_security_phrase = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_security_phrase);
	$label_email = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_email);
	$label_comments = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_comments);
	$slave_db_server = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$slave_db_server);
	$filter_phone_group_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$filter_phone_group_name);
	$filter_phone_group_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$filter_phone_group_description);
	$filter_clean_cid_number = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$filter_clean_cid_number);
	$label_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$label_name);
	$default_local_gmt = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$default_local_gmt);
	$cid_description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$cid_description);
	$description = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$description);
	$first_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$first_name);
	$last_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$last_name);
	$bu_name = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$bu_name);
	$department = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$department);
	$group = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$group);
	$job_title = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$job_title);
	$location = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$location);

	### ALPHA-NUMERIC and underscore and dash and slash and at and dot
	$call_out_number_group = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$call_out_number_group);
	$client_browser = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$client_browser);
	$DBX_server = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$DBX_server);
	$DBY_server = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$DBY_server);
	$dtmf_send_extension = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$dtmf_send_extension);
	$install_directory = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$install_directory);
	$old_extension = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$old_extension);
	$telnet_host = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$telnet_host);
	$queuemetrics_dbname = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$queuemetrics_dbname);
	$queuemetrics_login = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$queuemetrics_login);
	$queuemetrics_pass = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$queuemetrics_pass);
	$email = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$email);
	$vtiger_dbname = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$vtiger_dbname);
	$vtiger_login = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$vtiger_login);
	$vtiger_pass = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$vtiger_pass);
	$custom_one = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$custom_one);
	$custom_two = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$custom_two);
	$custom_three = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$custom_three);
	$custom_four = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$custom_four);
	$custom_five = ereg_replace("[^-\.\:\/\@\_0-9a-zA-Z]","",$custom_five);

	### ALPHA-NUMERIC and underscore and dash and slash and at and dot and pound and star
	$extension = ereg_replace("[^-\*\#\.\:\/\@\_0-9a-zA-Z]","",$extension);
	$timer_action_destination = ereg_replace("[^-\*\#\.\:\/\@\_0-9a-zA-Z]","",$timer_action_destination);
	$filter_extension = ereg_replace("[^-\*\#\.\:\/\@\_0-9a-zA-Z]","",$filter_extension);

	### ALPHA-NUMERIC and space and underscore and dash and slash and at and dot and pound and star and pipe and comma
	$ivr_park_call_agi = ereg_replace("[^- \*\#\.\,\:\/\|\@\_0-9a-zA-Z]","",$ivr_park_call_agi);

	### ALPHA-NUMERIC and space and underscore and dash and slash and at and dot and pound and star and pipe and comma and equal
	$voicemail_options = ereg_replace("[^- \=\*\#\.\,\:\/\|\@\_0-9a-zA-Z]","",$voicemail_options);

	### NUMERIC and comma and pipe
	$waitforsilence_options = ereg_replace("[^\|\,0-9a-zA-Z]","",$waitforsilence_options);

	### value cleaning
	$no_agent_action_value = ereg_replace("[^-\/\|\_\#\*\,\.\_0-9a-zA-Z]","",$no_agent_action_value);

	### ALPHA-NUMERIC and underscore and dash and slash and at and space and colon
	$vdc_header_date_format = ereg_replace("[^- \:\/\_0-9a-zA-Z]","",$vdc_header_date_format);
	$vdc_customer_date_format = ereg_replace("[^- \:\/\_0-9a-zA-Z]","",$vdc_customer_date_format);
	$menu_name = ereg_replace("[^- \:\/\_0-9a-zA-Z]","",$menu_name);

	### ALPHA-NUMERIC and underscore and dash and at and space and parantheses
	$vdc_header_phone_format = ereg_replace("[^- \(\)\_0-9a-zA-Z]","",$vdc_header_phone_format);

	### remove semi-colons ###
	$lead_filter_sql = ereg_replace(";","",$lead_filter_sql);
	$list_mix_container = ereg_replace(";","",$list_mix_container);
	$survey_response_digit_map = ereg_replace(";","",$survey_response_digit_map);
	$survey_camp_record_dir = ereg_replace(";","",$survey_camp_record_dir);
	$conf_override = ereg_replace(";","",$conf_override);
	$template_contents = ereg_replace(";","",$template_contents);
	$registration_string = ereg_replace(";","",$registration_string);
	$account_entry = ereg_replace(";","",$account_entry);
	$account_entry = ereg_replace("\r","",$account_entry);
	$globals_string = ereg_replace(";","",$globals_string);
	$dialplan_entry = ereg_replace(";","",$dialplan_entry);
	$dialplan_entry = ereg_replace("\r","",$dialplan_entry);
	$custom_dialplan_entry = ereg_replace("\\\\","",$custom_dialplan_entry);
	$custom_dialplan_entry = ereg_replace("'","",$custom_dialplan_entry);
	$custom_dialplan_entry = ereg_replace("\r","",$custom_dialplan_entry);
	$tts_text = ereg_replace("\\\\","",$tts_text);
	$tts_text = ereg_replace(";","",$tts_text);
	$tts_text = ereg_replace("\r","",$tts_text);
	$tts_text = ereg_replace("\"","",$tts_text);
	$carrier_description = ereg_replace("\\\\","",$carrier_description);
	$carrier_description = ereg_replace(";","",$carrier_description);
	$carrier_description = ereg_replace("\r","",$carrier_description);
	$carrier_description = ereg_replace("\"","",$carrier_description);
	$blind_monitor_message = ereg_replace("\\\\","",$blind_monitor_message);
	$blind_monitor_message = ereg_replace(";","",$blind_monitor_message);
	$blind_monitor_message = ereg_replace("\r","",$blind_monitor_message);
	$blind_monitor_message = ereg_replace("\"","",$blind_monitor_message);
	$modify_url = ereg_replace("\\\\","",$modify_url);
	$modify_url = ereg_replace(";","",$modify_url);
	$modify_url = ereg_replace("\r","",$modify_url);
	$modify_url = ereg_replace("\"","",$modify_url);
	### VARIABLES TO BE mysql_real_escape_string ###
	# $web_form_address
	# $queuemetrics_url
	# $admin_home_url
	# $qc_web_form_address
	# $vtiger_url
	# $web_form_address_two
	# $crm_login_address
	# $start_call_url
	# $dispo_call_url
	# $add_lead_url
	# $webphone_url
	# $webphone_url_override
	# $filter_url
	# $na_call_url

	### VARIABLES not filtered at all ###
	# $script_text

	}	# end of non_latin
else
	{
	$PHP_AUTH_PW = ereg_replace("'|\"|\\\\|;","",$PHP_AUTH_PW);
	$PHP_AUTH_USER = ereg_replace("'|\"|\\\\|;","",$PHP_AUTH_USER);
	}



##### END VARIABLE FILTERING FOR SECURITY #####


# ViciDial database administration
# admin.php
# 
# CHANGELOG:
# 50315-1110 - Added Custom Campaign Statuses
# 50317-1438 - Added Fronter Display var to inbound groups
# 50322-1355 - Added custom callerID per campaign
# 50517-1356 - Added user_groups sections and user_group to vicidial_users
# 50517-1440 - Added ability to logout (must click OK with empty user/pass)
# 50602-1622 - Added lead loader pages to load new files into vicidial_list
# 50620-1351 - Added custom vdad transfer AGI extension per campaign
# 50810-1414 - modified in groups to kick out spaces and dashes
# 50908-2136 - Added Custom Campaign HotKeys
# 50914-0950 - Fixed user search by user_group
# 50926-1358 - Modified to allow for language translation
# 50926-1615 - Added WeBRooTWritablE write controls
# 51020-1008 - Added editable web address and park ext - NEW dial campaigns
# 51020-1056 - Added fields and help for campaign recording control
# 51123-1335 - Altered code to function in php globals=off
# 51208-1038 - Added user_level changes, function controls and default user phones
# 51208-1556 - Added deletion of users/lists/campaigns/in groups/remote agents
# 51213-1706 - Added add/delete/modify vicidial scripts
# 51214-1737 - Added preview of vicidial script in popup window
# 51219-1225 - Added campaign and ingroups script selector and get_call_launch field
# 51222-1055 - Added am_message_exten to campaigns to allow for AM Message button
# 51222-1125 - Fixed new vicidial_campaigns default values not being assigned bug
# 51222-1156 - Added LOG OUT ALL AGENTS ON THIS CAMPAIGN button to campaign screen
# 60204-0659 - Fixed hopper reset bug
# 60207-1413 - Added AMD send to voicemail extension and xfer-conf dtmf presets
# 60213-1100 - Added several vicidial_users permissions fields
# 60215-1319 - Added On-hold CallBacks display and links
# 60227-1226 - Fixed vicidial_inbound_groups insert bug
# 60413-1308 - Fixed list display to have 1 row/status: count and time zone tables
#            - Added status name in selected dial statuses in campaign screen
# 60417-1416 - Added vicidial_lead_filters sections
#            - Changed the header links to color-coded sectional with sublinks below
#            - Added filter name and script name to campaign and in-group modify sections
#            - Added callback and alt dial options to campaigns section
#            - Added callback, alt dial and other options to users section
# 60419-1628 - Alter Callbacks display to include status and LIVE listings, reordered
# 60421-1441 - check GET/POST vars lines with isset to not trigger PHP NOTICES
# 60425-2355 - Added agent options to vicidial_users, reformatted user page
# 60502-1627 - Added drop_call_seconds and safe_harbor_ fields to campaign screen
# 60503-1228 - Added drop_call_seconds and drop_ fields to inbound groups screen
# 60505-1117 - Added initial framework for new local_call_times tables and definitions
# 60506-1033 - More revisions to the local_call_time section
# 60508-1354 - Finished call_times and state_call_times sections
#            - Added modify/delete options for call_times
# 60509-1311 - Functionalize campaign dialable leads calculation
#            - Change state_call_times selection from call_times to only allow one per state
#            - Added dialable leads count popup to campaign screen if auto-calc is disabled
#            - Added test dialable leads count popup to filter screen 
# 60510-1050 - Added Wrapup seconds and Wrapup message to campaigns screen
# 60608-1401 - Added allowable inbound_groups checkboxes to CLOSER campaign detail screen
# 60609-1051 - Added add-to-dnc in LISTS section
# 60613-1415 - Added lead recycling options to campaign detail screen
# 60619-1523 - Added variable filtering to eliminate SQL injection attack threat
# 60622-1216 - Fixed HotKey addition form issues and variable filtering
# 60623-1159 - Fixed Scheduled Callbacks over-filtering bug and filter_sql bug
# 60808-1147 - Changed filtering for and added instructions for consutative transfers
# 60816-1552 - Added allcalls_delay start delay for recordings in vicidial.php
# 60817-2226 - Fixed bug that would not allow lead recycling of non-selectable statuses
# 60821-1543 - Added option to Omit Phone Code while dialing in vicidial
# 60821-1625 - Added ALLFORCE recording option for campaign_recording
# 60823-1154 - Added fields for adaptive dialing
# 60824-1326 - Added adaptive_latest_target_gmt for ADAPT_TAPERED dial method
# 60825-1205 - Added adaptive_intensity for ADAPT_ dial methods
# 60828-1019 - Changed adaptive_latest_target_gmt to adaptive_latest_server_time
# 60828-1115 - Added adaptive_dl_diff_target and changed intensity dropdown
# 60927-1246 - Added astguiclient/admin.php functions under SERVERS tab
# 61002-1402 - Added fields for vicidial balance trunk controls
# 61003-1123 - Added functions for vicidial_server_trunks records
# 61109-1022 - Added Emergency VDAC Jam Clear function to Campaign Detail screen
# 61110-1502 - Add ability to select NONE in dial statuses, new list_id must not be < 100
# 61122-1228 - Added user group campaign restrictions
# 61122-1535 - Changed script_text to unfiltered and added more variables to SCRIPTS
# 61129-1028 - Added headers to Users and Phones with clickable order-by titles
# 70108-1405 - Added ADAPT OVERRIDE to allow for forced dial_level changes in ADAPT dial methods
#            - Screen width definable at top of script, merged server_stats into this script
# 70109-1638 - Added ALTPH2 and ADDR3 hotkey options for alt number dialing with HotKeys
# 70109-1716 - Added concurrent_transfers option to vicidial_campaigns
# 70115-1152 - Aded (CLOSER|BLEND|INBND|_C$|_B$|_I$) options for CLOSER-type campaigns
# 70115-1532 - Added auto_alt_dial field to campaign screen for auto-dialing of alt numbers
# 70116-1200 - Added auto_alt_dial_status functionality to campaign screen
# 70117-1235 - Added header formatting variables at top of script
#            - Moved Call Times and Phones/Server functions to Admin section
# 70118-1706 - Added new user group displays and links
# 70123-1519 - Added user permission settings for all sections
# 70124-1346 - Fixed spelling errors and formatting consistency
# 70202-1120 - Added agent_pause_codes section to campaigns
# 70205-1204 - Added memo, last dialed, timestamp and stats-refresh fields to vicidial_campaigns/lists
# 70206-1323 - Added user setting for vicidial_recording_override
# 70212-1412 - Added system settings section
# 70214-1226 - Added QueueMetrics Log ID field to system settings section
# 70219-1102 - Changed campaign dial statuses to be one string allowing for high limit
# 70223-0957 - Added queuemetrics_eq_prepend for custom ENTERQUEUE prepending of a field
# 70302-1111 - Fixed small bug in dialable leads calculation
# 70314-1133 - Added insert selection on script forms
# 70319-1423 - Added Alter Customer Data and agent disable display functions
# 70319-1625 - Added option to allow agents to login to outbound campaigns with no leads in the hopper
# 70322-1455 - Added sipsak messages parameters
# 70402-1157 - Added HOME link and entry to system_settings table, added QM link on reports section
# 70516-1628 - Started reformatting campaigns to use submenus to break up options
# 70529-1653 - Added help for list mix
# 70530-1354 - Added human_answered field to statuses, added system status modification
# 70530-1714 - Added lists for all campaign subsections
# 70531-1631 - Development on List mix admin interface
# 70601-1629 - More development on List mix admin interface, formatting, and added some javascript
# 70602-1300 - More development on List mix admin interface, more javascript
# 70608-1459 - Added option to set LIVE Callbacks to INACTIVE after one month
# 70612-1451 - Added Callback INACTIVE link for after one week, sort by user/group/entrydate
# 70614-0231 - Added Status Categories, ability to Modify Statuses, moved system statuses to sub-section
# 70623-1008 - List Mix section now allows modification of list mix entries
# 70629-1721 - List Mix section adding and removing of list entries active
# 70706-1636 - List Mix section cleanup and more error-checking
# 70908-0941 - Added agc logile enable system_settings
# 71020-1934 - Added inbound groups options: on-hold music, messages, call_times
# 71022-1343 - Added inbound group ranks for users
# 71029-1710 - Added option for campaign to be inbound and/or blended with no restrictions on the campaign_id name
#            - Added 5th NEW and 6th NEW to the dial order options
# 71030-2010 - Added Manual Dial List ID field to campaigns table
# 71103-2207 - Added inbound_group_rank and fewest_calls to the inbound groups call order options
# 71113-1521 - Added campaign_rank to agent options
#            - Added ability to Copy a campaign's setting to a new campaign
# 71113-2225 - Added ability to copy user and in-group settings to new users and in-groups
# 71116-0942 - Added campaign_rank and fewest_calls as methods for agent call routing
# 71122-1135 - Added default transfer group for campaigns and inbound groups
# 71125-1751 - Added allowable transfer groups to campaign detail screen
# 80107-1204 - Started framework for new QC section
# 80112-0242 - Added more options for lead order
# 80211-1901 - Added DB Schema Version to system settings display
# 80224-1334 - Added Queue Priority to in-groups and campaigns
# 80302-0232 - added drop_action and transfer to in-group for both in-groups and outbound
# 80310-1504 - added QC settings section to campaign screen
# 80317-2037 - Added Recording override settings to in-groups
# 80414-1505 - More work on QC, added vicidial_qc_codes
# 80424-0442 - Added non_latin system_settings lookup at top to override dbconnect setting
# 80505-0333 - Added phones_alias sections to allow for load-balanced-phone-logins
# 80512-1529 - Added auto-generate of User ID feature
# 80515-1345 - Added Shifts sub-section to Admin section
# 80528-0001 - Added campaign survey sub-section
# 80528-1102 - Added user timeclock edit options
# 80608-1304 - Changed add-to-DNC to allow for multiple entries per submission
# 80625-0032 - Added time/phone display format options to system settings
# 80703-0124 - Added alter cust phone and api settings
# 80715-1130 - Added Recycle leads limit count
# 80719-1351 - Changed QC settings in campaigns and In-Groups
# 80809-2305 - Added Sale and Dead Lead categories to status categories page
# 80815-1036 - Added manual dial filter to capaigns
# 80823-2124 - Added copy to clipboard campaign option
# 80829-2359 - Added EXTENDED auto_alt_dial options
# 80831-0406 - Added agent screen extended alt-dial option to campaigns
# 80909-0553 - Added campaign-specific DNC list option and add
# 81002-1101 - Added more in-group options and new DID section and user options
# 81007-0936 - Added three_way_call_cid option to campaigns
# 81012-1725 - Added INBOUND_MAN dial method allowing for manual list dialing with inbound calls
# 81030-0348 - Added campaign pause code force option
# 81030-2228 - Fixed DIDs creation issue
# 81103-1408 - Added 3way call dial prefix option
# 81107-1551 - Added Stats Percent of Calls Answered Within X seconds fields to in-groups
# 81118-0933 - Changed lists listing with links and more options
# 81119-0715 - Added ability to bulk enable/disable lists from modify campaign screen
# 81209-1538 - Added web_form_target to campaign screen
# 81210-1430 - Added http server IP and recording link options to servers
# 81222-0500 - Reformatted all listings to same format changed to field selects instead of *
# 81228-2300 - Added fields for vtiger integration and active vicidial_user display
# 90101-1216 - Added options for user synchronization with vtiger
# 90112-0335 - Added vtiger_create_lead_record and vtiger_create_lead_record options
# 90115-0502 - Activated AGENT DID routing option
# 90126-2256 - Added vtiger_screen_login campaign option and user agent alert option
# 90201-1503 - Added option to disable the viewing of inactive QC features
# 90202-0112 - Added option to disable outbound autodialing(or list dialing)
# 90202-0444 - Added cpd_amd_action option for processing of AMD messages
# 90209-1339 - Added download_lists option to allow downloading of lists
# 90210-1042 - Added options for auto-generation of asterisk conf files
# 90301-2026 - Added Vtiger group synchronization
# 90302-2046 - Changed Section heading to be on the left side of the screen
# 90303-0631 - Added web vars to agent campaign and in-group settings
# 90303-2047 - Added group aliases and default group aliases
# 90306-1214 - Added shift enforcement and server/system calls per second options
# 90308-0956 - Added server statistics
# 90309-0059 - Changed logging to admin_server_log
# 90310-2203 - Added export_reports option for call activity report data exports
# 90315-1010 - Changed revision for new trunk 2.2.0
# 90320-0424 - Fixed several small bugs conf records group alias and permissions
# 90322-0122 - Added ability to delete from the DNC lists
# 90322-1105 - Added new status settings and vtiger options
# 90409-2133 - Fixed special characters in SCRIPTS
# 90413-0755 - Fixed filter and script slashes issues
# 90417-0211 - Fixed filter and script slashes issues
# 90422-0613 - Added user_code, territory and email to vicidial_users
# 90429-0542 - Added 3rd&4th options to SURVEY campaigns
# 90430-0154 - Added RANDOM and LAST CALL TIME options to lead order for campaigns
# 90504-0901 - Added Call Menu feature, changed script to use long PHP tags
# 90511-0910 - Added agentonly_callback_campaign_lock to system_settings
# 90512-0440 - Added sounds settings to system_settings table
# 90514-0607 - Added select prompts from list in call menu and in-group screens
# 90521-0029 - Added user territories enable option
# 90522-0506 - Security fix for logins when using non-latin setting
# 90524-2307 - Changed Reports screen layout
# 90528-2055 - Added ViciDial recording limit field in servers and phone_context to phones
# 90530-1206 - Changed List Mix to allow for 40 mixes
# 90531-1802 - Added auto-generated options for users, campaigns, in-groups, etc..., added option to HIDE custphone
# 90531-2339 - Added Dynamic options for Call Menu
# 90605-0248 - Added carrier_logging_active servers option
# 90607-1716 - Changed drop percent limit to allow for 0.1 steps under 3%
# 90608-0944 - Added Drop Lockout Time feature to Campaign Detail Modification screen
# 90612-0909 - Added audio prompt selection feature to survey screen
# 90614-0827 - Added In-Group routing to Call Menu screen, Added pull-down Call Menu option to DID screen
# 90617-0733 - Added phone ring timeout and call menu custom dialplan entries
# 90621-0821 - Added phone Conf File Secret field to use a separate password from the user interface for a phone
# 90621-1220 - Added Call Menu logging tracking_group
# 90627-0547 - Added no-agent-no-queue options
# 90627-2333 - Added default transfer button and prepopulate preset options
# 90628-0924 - Added Text To Speech(TTS) fields
# 90628-2213 - Added Multi-campaign drop rate groups
# 90705-0926 - Added User Group agent view options
# 90710-1528 - Added Agent view and grab queue calls and every call pause options
# 90717-0646 - Added dialed_label and dialed_number to script variables
# 90721-1350 - Added RANK and OWNER as list order options and list screen display tables
# 90722-1235 - Added list reset time and campaign no hopper dialing, agent dial owner only options
# 90726-0153 - Added allow_alerts for users to disable agent browser alerts
# 90729-0555 - Added agent_display_dialable_leads and vicidial_balance_rank options
# 90808-0300 - Added longest_wait_time option for agent call routing
# 90827-1552 - Added agent_script_override option for lists
# 90830-2217 - Added Music On Hold section
# 90904-1536 - Added moh chooser option, timezone list ordering
# 90908-1207 - Added cross-listing linking for DIDs, CallMenus and In-groups
# 90916-1105 - Added second web form to ingroups and campaigns and added audio choose for answering machine message and waitforsilence_options
# 90917-1108 - Added Extra Voicemail boxes config in Admin section
# 90919-2251 - Removed all SELECT STAR instances in the code, code cleanup to conform to standard
# 90924-1645 - Added list_id overrides for cid, am_message and drop in-group
# 90930-2107 - Added agent territory selection options for ViciDial agents
# 91026-1050 - Added AREACODE DNC option for campaigns
# 91031-1232 - Added carrier_description field, campaigns links from in-group screen, server links on reports page, agent ranks listing active only
# 91121-0334 - Limited list called count display to 100+
# 91125-0628 - Added conf_secret for servers
# 91204-1652 - Added recording_filename and recording_id as script variables
# 91205-2231 - Added delete_vm_after_email voicemail option to phones and extra voicemail sections
# 91210-2038 - Added better logging of Campaign emergency logout
# 91211-1359 - Added custom user fields and campaign CRM login fields
# 91219-0719 - Changed some field backgrounds in the Campaign Modification screens
# 91223-1031 - Added VIDPROMPT options for in-group routing in DIDs
# 91228-1837 - Added timer action settings to in-groups and campaigns
# 100103-0727 - Added Start/Dispo call url, 3/4/5 conf number presets, Lists conf-number overrides
# 100104-1454 - Fixed in-group/campaign copy duplication issue
# 100116-0718 - Added presets to script select list
# 100122-0747 - Added NOT-LOGGED-IN-AGENTS option for User Groups
# 100123-1301 - Added DID record call option
# 100127-0601 - Added Vtiger ViciDial user_level role lookup
# 100127-1546 - Added ignore_list_script_override option for ingroups
# 100219-1309 - Added agent dispo log system settings option and user call_log options
# 100220-1411 - Added system settings and servers custom_dialplan_entry
# 100221-0924 - Added Custom CallerID capability in Campaign settings
# 100302-2133 - Added Scheduled Callbacks Alert option
# 100309-0510 - Added queuemetrics_loginout option
# 100311-2348 - Added CallCard links and settings
# 100313-0020 - Added User Group agent screen transfer-conf button display options
# 100317-1244 - Added User Group agent_fullscreen option
# 100401-0014 - Added agent_choose_blended option
# 100405-1425 - Added queuemetrics_callstatus option and full logging of user campaign/in-group settings
# 100414-1603 - Added extension_appended_cidname option to campaigns
# 100420-1010 - Added scheduled_callbacks_count campaign option
# 100423-1030 - Added realtime_block_user_info, manual dial campaign, blind monitor warnings, in-group callid, phones codecs features
# 100506-1807 - Added hidden settings for lists custom fields
# 100507-1102 - Added hold_time_option_minimum option to in-groups and copy carrier function
# 100512-1615 - Added more hold time press-1 options
# 100518-0643 - Added inbound_queue_no_dial and call time after hours override features
# 100523-0840 - Added inbound prompt and no-block options
# 100616-2232 - Added VIDPROMPT call menu options
# 100621-1010 - Added admin_web_directory system setting
# 100622-1700 - Added custom agent field names for default fields
# 100702-1142 - Added FORM get_call_launch option for custom list fields tab in agent interface
# 100703-1322 - Added LEADS ability to admin log display
# 100709-1025 - Added option for slave DB server to be used for selected reports
# 100718-2318 - Added Wait Time options to in-groups
# 100720-1332 - Small changes to Phone addition and modification pages
# 100723-1519 - Added LOCKED options for Quick Transfer Button in campaigns
# 100726-1017 - Added HANGUP, CALLMENU, EXTENSION and IN_GROUP timer actions to campaigns and in-groups
# 100802-2130 - Changed Admin links to point to links page instead of Phones listings, changed Remote Agents to allow 9-digit IDs
# 100803-1412 - Added allowed_reports option to User Groups, added CAMPLISTS_ALL for manual_dial_filter(issue #369)
#             - Added allowed_campaigns enforcement for Campaign listings
# 100804-2313 - Added filter phone groups section for inbound call filtering by incoming phone number when it comes into a DID
# 100805-1539 - Added option to clean up cid numbers when calls come into DIDs
# 100806-0607 - Added validation for remote agents settings, user_start must be valid user, number of lines must not overlap
# 100811-0827 - Added webphone_url_override to User Groups and calculate_estimated_hold_seconds to In-Groups
# 100813-0544 - Added campaign presets and option to hide xfer number to dial
# 100815-0802 - Added manual_dial_prefix campaign option
# 100817-1243 - Added checking for reserved menu_id on creation of Call Menus
# 100823-1501 - Added CallCard search as an available User Group report option
# 100827-1535 - Added webphone options for dialpad and systemkey
# 100901-2055 - Added password strength grading, force password change, password default settings and first login screen
# 100908-0926 - Added 3way hangup logging options to campaigns
# 100912-0842 - Several small changes, removed Emergency VDAC clear since it does not do anything anymore
# 100927-2321 - Added entry_list_id as a script, webform, dispo_call_url variable
# 100928-1634 - Moved Realtime Block User Info user setting into the new ADMIN REPORT OPTIONS section
# 100929-1203 - Added add_lead_url feature to In-Groups
# 101008-0349 - Added Estimated Hold Time Minimum options, Manual Dial Preview settings and two new variables for recording filenames
# 101022-1427 - Added ability to change user in-group prefs from in-group mod screen, added realtime_agent_time_stats campaign option
# 101106-1850 - Added admin refrech, no-cache, cross-server-exten, QM-addmember options
# 101109-1621 - Added Auto Hopper Level which allows Vicidial to adjust the hopper for a campaign as needed (MikeC)
#             - Added Auto Trim Hopper which will allow Vicidial to remove excess leads from the hopper (MikeC)
# 101115-1355 - Added more options for the concurrent transfer limit campaign setting
# 101123-2214 - Added api_manual_dial and manual_dial_call_time_check campaign options
# 101127-2232 - Added webform override options to lists
# 101208-0341 - Changed some descriptions and field names in Phones
# 101209-2027 - Added display_leads_count option for campaign modification screens
# 101216-1838 - Changed Realtime report links to go to new realtime_report
# 101227-1320 - Added dialplan off toggle options
# 110103-1135 - Added queuemetrics_dispo_pause and lead_order_randomize features
# 110111-1305 - Added sort by list name for list listings in list section and campaign screens
# 110124-1134 - Small query fix for large queue_log tables
# 110212-2048 - Added Scheduled Callback as status flag to allow for custom scheduled callback statuses
# 110214-0001 - Added campaign settings for lead_order_secondary, per_call_notes and my_callback_option
# 110215-1721 - Added add-a-new-lead link to the lists submenu
# 110215-2135 - Added agent_lead_search options to user and campaign
# 110222-2039 - Added USER, GROUP and TERRITORY restrictions to agent lead search
# 110224-1427 - Added queuemetrics_phone_environment and active_twin_server_ip options
# 110301-1206 - Added options for ring-all in-group next-agent-call
# 110304-1651 - Added DEFER options to the scheduled callbacks alert campaign feature
# 110310-0311 - Added pre-call auto-pause and resume with pause code, for auto-pausing of callback-check, lead search, etc...
# 110408-0433 - Added Multi-alt block code and system settings reload dialplan setting
# 110428-1108 - Added manual_dial_cid campaign option
# 110430-1642 - Added post_phone_time_diff_alert campaign option
# 110506-1537 - Added custom_3way_button_transfer campaign option
# 110514-1351 - Added dial level and available only tally threshold campaign settings, and time zone list setting
# 110524-1401 - Small help text fix, issue #486
# 110525-2109 - Added safe_harbor_audio, safe_harbor_menu_id campaign options and dtmf_log call menu option
# 110526-1715 - Added webphone_auto_answer option
# 110528-2304 - Added campaign survey callmenu option
# 110531-2009 - Added callback_days_limit campaign option
# 110602-0941 - Added dl_diff_target_method campaign option
# 110619-1942 - Added disable_dispo_ agent screen options
# 110624-0842 - Added Export Leads Report links and permissions
# 110624-2246 - Added Screen Labels subsection for Admin and status_display_fields feature
# 110625-2338 - Added queuemetrics_pe_phone_append option
# 110703-1400 - Added test_campaign_calls and agents_calls_reset features
# 110707-0725 - Added AGENTEXT notes for in-groups settings
# 110707-1402 - Added last_inbound_call_time and finish to next agent call options for in-groups
# 110727-0130 - Added more voicemail box options and default timezone and voicemail zone to system settings
# 110730-2249 - Added DISPO_SELECT_DISABLED option for the Dispo Disable setting in campaigns
# 110731-0245 - Added na_call_url options to campaigns and in-groups
# 110801-0833 - Added on_hook_cid option for in-groups
# 110802-2053 - Added links to Team Performance Detail Report
# 110809-1547 - Added no-answer log and alt-log server system settings
# 110815-2155 - Added the Campaign Status List Report
# 110822-1204 - Added did_agent_log System Settings option
# 110829-1600 - Added multiple invalid option to Call Menus
# 110829-2129 - Added survey recording option
# 110831-2038 - Added Campaign Areacode CID features
# 110920-1344 - Added pllb_grouping_limit settings
# 110922-1218 - Added new User admin permissions, Added DID Remote Agent extension override section
# 110923-0834 - Added option for in-group action transfer cid, and CALLMENU as drop and after-hours action options
# 110923-2043 - Added custom DID fields
# 111004-1539 - Added dtmf_field call menu option
# 111006-1403 - Added several new campaign and other options, call_count_limit, status flag, shift report flag, etc...
# 111015-1914 - Added Preset Contact Search options
# 111018-1535 - Added more contact fields
# 111021-1646 - Added callback_hours_block option
# 111024-1234 - Added callback_list_calltime option
# 111025-0728 - Added user group to all sections, more user settings
# 111102-1930 - Added in-group max_calls_ options
# 111106-1116 - Many fixes for user_group restrictions
# 111116-0207 - Added ALT and ADDR3 in-group handle methods
# 111122-1333 - Added Inbound Daily Report
# 111201-0939 - Added graded-random next-agent-call option
# 111223-0043 - Added max stats displays for in-groups and , fixed several ereg issues
# 111227-1938 - Added Timer Action for Dx_DIAL_QUIET options
# 120102-2125 - Added Dialer Inventory Report
# 120104-2024 - Changed copyright dates, other small fixes
# 120118-2113 - Fixed bugs in phone alias and conf template updates
# 120125-1234 - Added Maximum System Stats report and permissions for it and Max Stats Detail report
# 120125-2107 - Added User Group Active User In-Group Select function to User Group page
# 120207-1955 - Added List territory reset function
# 120213-1512 - Added remote agent max stats display and campaign VLC hopper dup check option
# 120221-0054 - Fixed Call Time and User Group restrictions on several pages
# 120221-1647 - Added inventory report options to lists and shifts
# 120316-1203 - Fixed DIALBLE counts for completed statuses
# 120402-2111 - Added lead loading template and two carrier log reports to the admin utils page
# 120409-1136 - Added Search Leads Logs as slave db option
#

# make sure you have added a user to the vicidial_users MySQL table with at least user_level 8 to access this page the first time

$admin_version = '2.4-364a';
$build = '120409-1136';

$STARTtime = date("U");
$SQLdate = date("Y-m-d H:i:s");
$REPORTdate = date("Y-m-d");
$CIDdate = date("mdHis");
while (strlen($CIDdate) > 9) {$CIDdate = substr("$CIDdate", 1);}

$MT[0]='';
$US='_';
$active_lists=0;
$inactive_lists=0;
$modify_rafraîchir_set=0;
$modify_footer_rafraîchir=0;
$check_time = ($STARTtime - 86400);
$SSanswer_transfer_agent =	'8368';

$month_old = mktime(0, 0, 0, date("m")-1, date("d"),  date("Y"));
$past_month_date = date("Y-m-d H:i:s",$month_old);
$week_old = mktime(0, 0, 0, date("m"), date("d")-7,  date("Y"));
$past_week_date = date("Y-m-d H:i:s",$week_old);

$dtmf[0]='0';				$dtmf_key[0]='0';
$dtmf[1]='1';				$dtmf_key[1]='1';
$dtmf[2]='2';				$dtmf_key[2]='2';
$dtmf[3]='3';				$dtmf_key[3]='3';
$dtmf[4]='4';				$dtmf_key[4]='4';
$dtmf[5]='5';				$dtmf_key[5]='5';
$dtmf[6]='6';				$dtmf_key[6]='6';
$dtmf[7]='7';				$dtmf_key[7]='7';
$dtmf[8]='8';				$dtmf_key[8]='8';
$dtmf[9]='9';				$dtmf_key[9]='9';
$dtmf[10]='HASH';			$dtmf_key[10]='#';
$dtmf[11]='STAR';			$dtmf_key[11]='*';
$dtmf[12]='A';				$dtmf_key[12]='A';
$dtmf[13]='B';				$dtmf_key[13]='B';
$dtmf[14]='C';				$dtmf_key[14]='C';
$dtmf[15]='D';				$dtmf_key[15]='D';
$dtmf[16]='TIMECHECK';		$dtmf_key[16]='TIMECHECK';
$dtmf[17]='TIMEOUT';		$dtmf_key[17]='TIMEOUT';
$dtmf[18]='INVALID';		$dtmf_key[18]='INVALID';
$dtmf[19]='INVALID_2ND';	$dtmf_key[19]='INVALID_2ND';
$dtmf[20]='INVALID_3RD';	$dtmf_key[20]='INVALID_3RD';

if ($force_logout)
	{
	if( (strlen($PHP_AUTH_USER)>0) or (strlen($PHP_AUTH_PW)>0) )
		{
		Header("WWW-Authenticate: Basic realm=\"VICI-PROJECTS\"");
		Header("HTTP/1.0 401 Unauthorized");
		}
	echo "Vous êtes maintenant déconnecté. Merci.\n";
	exit;
	}

#############################################
##### START SYSTEM_SETTINGS LOOKUP #####
$stmt = "SELECT use_non_latin,auto_dial_limit,user_territories_active,allow_custom_dialplan,callcard_enabled,admin_modify_rafraîchir,nocache_admin,webroot_writable FROM system_settings;";
$rslt=mysql_query($stmt, $link);
if ($DB) {echo "$stmt\n";}
$qm_conf_ct = mysql_num_rows($rslt);
if ($qm_conf_ct > 0)
	{
	$row=mysql_fetch_row($rslt);
	$non_latin =					$row[0];
	$SSauto_dial_limit =			$row[1];
	$SSuser_territories_active =	$row[2];
	$SSallow_custom_dialplan =		$row[3];
	$SScallcard_enabled =			$row[4];
	$SSadmin_modify_rafraîchir =		$row[5];
	$SSnocache_admin =				$row[6];
	$SSwebroot_writable =			$row[7];
	}
##### END SETTINGS LOOKUP #####
###########################################

$stmt="SELECT count(*) from vicidial_users where user='$PHP_AUTH_USER' and pass='$PHP_AUTH_PW' and user_level > 7 and active='Y';";
if ($DB) {echo "|$stmt|\n";}
if ($non_latin > 0) {$rslt=mysql_query("SET NAMES 'UTF8'");}
$rslt=mysql_query($stmt, $link);
$row=mysql_fetch_row($rslt);
$auth=$row[0];

$stmt="SELECT count(*) from vicidial_users where user='$PHP_AUTH_USER' and pass='$PHP_AUTH_PW' and user_level > 6 and active='Y' and view_reports='1';";
if ($DB) {echo "|$stmt|\n";}
$rslt=mysql_query($stmt, $link);
$row=mysql_fetch_row($rslt);
$reports_auth=$row[0];

$reports_only_user=0;
if ( ($reports_auth > 0) and ($auth < 1) )
	{
	$ADD=999999;
	$reports_only_user=1;
	}

if ($SSwebroot_writable > 0)
	{$fp = fopen ("./project_auth_entries.txt", "a");}

$date = date("r");
$ip = getenv("REMOTE_ADDR");
$browser = getenv("HTTP_USER_AGENT");

if ( (strlen($PHP_AUTH_USER)<2) or (strlen($PHP_AUTH_PW)<2) or ( ($auth < 1 ) and ($reports_auth < 1) ) )
	{
	Header("WWW-Authenticate: Basic realm=\"VICI-PROJECTS\"");
	Header("HTTP/1.0 401 Unauthorized");
	echo "Login ou mot de passe invalide: |$PHP_AUTH_USER|$PHP_AUTH_PW|\n";
	exit;
	}

if ( ($auth > 0) or ($reports_auth > 0) )
	{
	$office_no=strtoupper($PHP_AUTH_USER);
	$password=strtoupper($PHP_AUTH_PW);
	$stmt="SELECT user_id,user,pass,full_name,user_level,user_group,phone_login,phone_pass,delete_users,delete_user_groups,delete_lists,delete_campaigns,delete_ingroups,delete_remote_agents,load_leads,campaign_detail,ast_admin_access,ast_delete_phones,delete_scripts,modify_leads,hotkeys_active,change_agent_campaign,agent_choose_ingroups,closer_campaigns,scheduled_callbacks,agentonly_callbacks,agentcall_manual,vicidial_recording,vicidial_transfers,delete_filters,alter_agent_interface_options,closer_default_blended,delete_call_times,modify_call_times,modify_users,modify_campaigns,modify_lists,modify_scripts,modify_filters,modify_ingroups,modify_usergroups,modify_remoteagents,modify_servers,view_reports,vicidial_recording_override,alter_custdata_override,qc_enabled,qc_user_level,qc_pass,qc_finish,qc_commit,add_timeclock_log,modify_timeclock_log,delete_timeclock_log,alter_custphone_override,vdc_agent_api_access,modify_inbound_dids,delete_inbound_dids,active,alert_enabled,download_lists,agent_shift_enforcement_override,manager_shift_enforcement_override,shift_override_flag,export_reports,delete_from_dnc,email,user_code,territory,allow_alerts,callcard_admin,force_change_password,modify_shifts,modify_phones,modify_carriers,modify_labels,modify_statuses,modify_voicemail,modify_audiostore,modify_moh,modify_tts,modify_contacts,modify_same_user_level from vicidial_users where user='$PHP_AUTH_USER' and pass='$PHP_AUTH_PW';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	$LOGfull_name				=$row[3];
	$LOGuser_level				=$row[4];
	$LOGuser_group				=$row[5];
	$LOGdelete_users			=$row[8];
	$LOGdelete_user_groups		=$row[9];
	$LOGdelete_lists			=$row[10];
	$LOGdelete_campaigns		=$row[11];
	$LOGdelete_ingroups			=$row[12];
	$LOGdelete_remote_agents	=$row[13];
	$LOGload_leads				=$row[14];
	$LOGcampaign_detail			=$row[15];
	$LOGast_admin_access		=$row[16];
	$LOGast_delete_phones		=$row[17];
	$LOGdelete_scripts			=$row[18];
	$LOGdelete_filters			=$row[29];
	$LOGalter_agent_interface	=$row[30];
	$LOGdelete_call_times		=$row[32];
	$LOGmodify_call_times		=$row[33];
	$LOGmodify_users			=$row[34];
	$LOGmodify_campaigns		=$row[35];
	$LOGmodify_lists			=$row[36];
	$LOGmodify_scripts			=$row[37];
	$LOGmodify_filters			=$row[38];
	$LOGmodify_ingroups			=$row[39];
	$LOGmodify_usergroups		=$row[40];
	$LOGmodify_remoteagents		=$row[41];
	$LOGmodify_servers			=$row[42];
	$LOGview_reports			=$row[43];
	$LOGmodify_dids				=$row[56];
	$LOGdelete_dids				=$row[57];
	$LOGmanager_shift_enforcement_override=$row[61];
	$LOGexport_reports			=$row[64];
	$LOGdelete_from_dnc			=$row[65];
	$LOGcallcard_admin			=$row[70];
	$LOGforce_change_password	=$row[71];
	$LOGmodify_shifts			=$row[72];
	$LOGmodify_phones			=$row[73];
	$LOGmodify_carriers			=$row[74];
	$LOGmodify_labels			=$row[75];
	$LOGmodify_statuses			=$row[76];
	$LOGmodify_voicemail		=$row[77];
	$LOGmodify_audiostore		=$row[78];
	$LOGmodify_moh				=$row[79];
	$LOGmodify_tts				=$row[80];
	$LOGmodify_contacts			=$row[81];
	$LOGmodify_same_user_level	=$row[82];

	$stmt="SELECT allowed_campaigns,allowed_reports,admin_viewable_groups,admin_viewable_call_times from vicidial_user_groups where user_group='$LOGuser_group';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	$LOGallowed_campaigns =			$row[0];
	$LOGallowed_reports =			$row[1];
	$LOGadmin_viewable_groups =		$row[2];
	$LOGadmin_viewable_call_times =	$row[3];

	$LOGallowed_campaignsSQL='';
	$whereLOGallowed_campaignsSQL='';
	if ( (!eregi("-ALL",$LOGallowed_campaigns)) )
		{
		$rawLOGallowed_campaignsSQL = preg_replace("/ -/",'',$LOGallowed_campaigns);
		$rawLOGallowed_campaignsSQL = preg_replace("/ /","','",$rawLOGallowed_campaignsSQL);
		$LOGallowed_campaignsSQL = "and campaign_id IN('$rawLOGallowed_campaignsSQL')";
		$whereLOGallowed_campaignsSQL = "where campaign_id IN('$rawLOGallowed_campaignsSQL')";
		}
	$regexLOGallowed_campaigns = " $LOGallowed_campaigns ";

	$admin_viewable_groupsALL=0;
	$LOGadmin_viewable_groupsSQL='';
	$whereLOGadmin_viewable_groupsSQL='';
	$valLOGadmin_viewable_groupsSQL='';
	$vmLOGadmin_viewable_groupsSQL='';
	if ( (!eregi("--ALL--",$LOGadmin_viewable_groups)) and (strlen($LOGadmin_viewable_groups) > 3) )
		{
		$rawLOGadmin_viewable_groupsSQL = preg_replace("/ -/",'',$LOGadmin_viewable_groups);
		$rawLOGadmin_viewable_groupsSQL = preg_replace("/ /","','",$rawLOGadmin_viewable_groupsSQL);
		$LOGadmin_viewable_groupsSQL = "and user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
		$whereLOGadmin_viewable_groupsSQL = "where user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
		$valLOGadmin_viewable_groupsSQL = "and val.user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
		$vmLOGadmin_viewable_groupsSQL = "and vm.user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
		}
	else 
		{$admin_viewable_groupsALL=1;}
	$regexLOGadmin_viewable_groups = " $LOGadmin_viewable_groups ";

	$LOGadmin_viewable_call_timesSQL='';
	$whereLOGadmin_viewable_call_timesSQL='';
	if ( (!eregi("--ALL--",$LOGadmin_viewable_call_times)) and (strlen($LOGadmin_viewable_call_times) > 3) )
		{
		$rawLOGadmin_viewable_call_timesSQL = preg_replace("/ -/",'',$LOGadmin_viewable_call_times);
		$rawLOGadmin_viewable_call_timesSQL = preg_replace("/ /","','",$rawLOGadmin_viewable_call_timesSQL);
		$LOGadmin_viewable_call_timesSQL = "and call_time_id IN('---ALL---','$rawLOGadmin_viewable_call_timesSQL')";
		$whereLOGadmin_viewable_call_timesSQL = "where call_time_id IN('---ALL---','$rawLOGadmin_viewable_call_timesSQL')";
		}
	$regexLOGadmin_viewable_call_times = " $LOGadmin_viewable_call_times ";

	$UUgroups_list='';
	if ($admin_viewable_groupsALL > 0)
		{$UUgroups_list .= "<option value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";}
	$stmt="SELECT user_group,group_name from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
	$rslt=mysql_query($stmt, $link);
	$UUgroups_to_print = mysql_num_rows($rslt);
	$o=0;
	while ($UUgroups_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$UUgroups_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}

	if ($SSwebroot_writable > 0)
		{
		fwrite ($fp, "VICIDIAL|GOOD|$date|$PHP_AUTH_USER|XXXX|$ip|$browser|$LOGfull_name|\n");
		fclose($fp);
		}

	$first_login_link=0;

	if ($LOGforce_change_password=='Y')
		{
		$ADD=999997;
		$reports_only_user=1;
		}
	if ($SSfirst_login_trigger=='Y')
		{
		
		if ($ADD==999996)
			{$reports_only_user=1;}
		else
			{
			$ADD=999995;
			$first_login_link=1;
			}
		}
	if ($ADD==999995)
		{
		$reports_only_user=1;
		}
	}
else
	{
	if ($SSwebroot_writable > 0)
		{
		fwrite ($fp, "VICIDIAL|FAIL|$date|$PHP_AUTH_USER|XXXX|$ip|$browser|\n");
		fclose($fp);
		}
	}


######################################################################################################
######################################################################################################
#######   Header settings
######################################################################################################
######################################################################################################


header ("Content-type: text/html; charset=utf-8");
if ($SSnocache_admin=='1')
	{
	header ("Cache-Control: no-cache, must-revalidate");  // HTTP/1.1
	header ("Pragma: no-cache");                          // HTTP/1.0
	}
echo "<html>\n";
echo "<head>\n";
echo "<!-- VERSION: $admin_version   CONSTRUCTION: $build   ADD: $ADD   PHP_SELF: $PHP_SELF-->\n";
echo "<META NAME=\"ROBOTS\" CONTENT=\"NONE\">\n";
echo "<META NAME=\"COPYRIGHT\" CONTENT=\"&copy; 2012 ViciDial Group\">\n";
echo "<META NAME=\"AUTHOR\" CONTENT=\"ViciDial Group\">\n";
if ($SSnocache_admin=='1')
	{
	echo "<META HTTP-EQUIV=\"Pragma\" CONTENT=\"no-cache\">\n";
	echo "<META HTTP-EQUIV=\"Expires\" CONTENT=\"-1\">\n";
	echo "<META HTTP-EQUIV=\"CACHE-CONTROL\" CONTENT=\"NO-CACHE\">\n";
	}
if ( ($SSadmin_modify_rafraîchir > 1) and (preg_match("/^3/",$ADD)) )
	{
	$modify_rafraîchir_set=1;
	if (preg_match("/^3/",$ADD)) {$modify_url = "$PHP_SELF?$QUERY_STRING";}
	echo "<META HTTP-EQUIV=\"REFRESH\" CONTENT=\"$SSadmin_modify_rafraîchir;URL=$modify_url\">\n";
	}
echo "<title>ADMINISTRATION: ";

if (!isset($ADD))   {$ADD=0;}

if ($ADD=="1")			{$hh='users';		echo "Ajouter un nouvel utilisateur";}
if ($ADD=="1A")			{$hh='users';		echo "Utilisateur De Copy";}
if ($ADD==11)			{$hh='campaigns';	$sh='basic';	echo "Ajouter une nouvelle campagne";}
if ($ADD==12)			{$hh='campaigns';	$sh='basic';	echo "Campagne De Copy";}
if ($ADD==111)			{$hh='lists';		echo "Ajouter une nouvelle liste";}
if ($ADD==121)			{$hh='lists';		echo "Ajouter un nouveau DNC";}
if ($ADD==171)			{$hh='ingroups';	echo "Filtre à Numéros de téléphone du groupe";}
if ($ADD==1111)			{$hh='ingroups';	echo "Ajouter un nouveau in-group";}
if ($ADD==1211)			{$hh='ingroups';	echo "Dans-Groupe De Copy";}
if ($ADD==1311)			{$hh='ingroups';	echo "Ajouter un nouveauDID";}
if ($ADD==1411)			{$hh='ingroups';	echo "CopieDID";}
if ($ADD==1511)			{$hh='ingroups';	echo "Ajouter un appel Menu";}
if ($ADD==1611)			{$hh='ingroups';	echo "Copiez Appel du menu";}
if ($ADD==1711)			{$hh='ingroups';	echo "Ajouter un groupe Téléphone filtre";}
if ($ADD==11111)		{$hh='remoteagent';	echo "Ajouter de nouveaux agents distants";}
if ($ADD==12111)		{$hh='remoteagent';	echo "Ajouter un groupe d'extension";}
if ($ADD==111111)		{$hh='usergroups';	echo "Ajouter de nouveaux groupes d'utilisateurs";}
if ($ADD==1111111)		{$hh='scripts';		echo "Ajouter un nouveau script";}
if ($ADD==11111111)		{$hh='filters';		echo "Ajouter un nouveau filtre";}
if ($ADD==111111111)	{$hh='admin';	$sh='times';	echo "Ajouter une nouvelle période d'appels";}
if ($ADD==131111111)	{$hh='admin';	$sh='shifts';	echo "Ajouter un nouveau Shift";}
if ($ADD==1111111111)	{$hh='admin';	$sh='times';	echo "Ajouter une nouvelle période d'appels d'état";}
if ($ADD==11111111111)	{$hh='admin';	$sh='phones';	echo "AJOUTER UN NOUVEAU TELEPEHONE";}
if ($ADD==12111111111)	{$hh='admin';	$sh='phones';	echo "AJOUTER UN NOUVEAU TELEPEHONE ALIAS";}
if ($ADD==13111111111)	{$hh='admin';	$sh='phones';	echo "ADD NEW GROUP ALIAS";}
if ($ADD==111111111111)	{$hh='admin';	$sh='server';	echo "AJOUTER UN NOUVEAU SERVEUR";}
if ($ADD==131111111111)	{$hh='admin';	$sh='templates';	echo "ADD NEW CONF TEMPLATE";}
if ($ADD==141111111111)	{$hh='admin';	$sh='carriers';	echo "ADD NEW CARRIER";}
if ($ADD==140111111111)	{$hh='admin';	$sh='carriers';	echo "Ajouter le transporteur COPIE";}
if ($ADD==151111111111)	{$hh='admin';	$sh='tts';	echo "ADD NEW ENTRY TTS";}
if ($ADD==161111111111)	{$hh='admin';	$sh='moh';	echo "ADD NEW MUSIC ON HOLD ENTRY";}
if ($ADD==171111111111)	{$hh='admin';	$sh='vm';	echo "ADD NEW messagerie vocale";}
if ($ADD==181111111111)	{$hh='admin';	$sh='label';	echo "Ajouter une étiquette ECRAN NEW";}
if ($ADD==191111111111)	{$hh='admin';	$sh='cts';	echo "Ajouter un nouveau contact";}
if ($ADD==1111111111111)	{$hh='admin';	$sh='conference';	echo "AJOUTER UNE NOUVELLE CONFERENCE";}
if ($ADD==11111111111111)	{$hh='admin';	$sh='conference';	echo "ADD NEW VICIDIAL CONFERENCE";}
if ($ADD=='2')			{$hh='users';		echo "Ajout d'un nouvel utilisateur";}
if ($ADD=='2A')			{$hh='users';		echo "Nouvelle Addition Copiée D'Utilisateur";}
if ($ADD==20)			{$hh='campaigns';	$sh='basic';	echo "Nouvelle Addition Copiée De Campagne";}
if ($ADD==21)			{$hh='campaigns';	$sh='basic';	echo "Ajout d'une nouvelle campagne";}
if ($ADD==22)			{$hh='campaigns';	$sh='status';	echo "Ajout d'un nouveau statut de campagne";}
if ($ADD==23)			{$hh='campaigns';	$sh='hotkey';	echo "New Campagne HotKey Addition";}
if ($ADD==25)			{$hh='campaigns';	$sh='recycle';	echo "New CampagneLe Fil RéutilisentAddition";}
if ($ADD==26)			{$hh='campaigns';	$sh='autoalt';	echo "Nouveau statut d'appel automatique du numéro alternatif";}
if ($ADD==27)			{$hh='campaigns';	$sh='pause';	echo "Nouveau code de pause";}
if ($ADD==28)			{$hh='campaigns';	$sh='dialstat';	echo "Statut d'appel pour la campagne ajouté";}
if ($ADD==29)			{$hh='campaigns';	$sh='listmix';	echo "Le Mélange De Liste De Campagne S'est ajouté";}
if ($ADD==201)			{$hh='campaigns';	$sh='preset';	echo "Preset Campagne Ajouté";}
if ($ADD==202)			{$hh='campaigns';	$sh='accid';	echo "Modifier le code zonal de la campagne CID";}
if ($ADD==211)			{$hh='lists';		echo "Ajout d'une nouvelle liste";}
if ($ADD==2111)			{$hh='ingroups';	echo "Ajout d'un nouvel In-Group";}
if ($ADD==2011)			{$hh='ingroups';	echo "Nouvelle Addition Copiée De Dans-Groupe";}
if ($ADD==2311)			{$hh='ingroups';	echo "A New Addition";}
if ($ADD==2411)			{$hh='ingroups';	echo "Nouvelle adjonction Copied DID";}
if ($ADD==2511)			{$hh='ingroups';	echo "Nouvel appel Menu";}
if ($ADD==2611)			{$hh='ingroups';	echo "Nouvel appel Menu";}
if ($ADD==2711)			{$hh='ingroups';	echo "Nouveau groupe Téléphone filtre";}
if ($ADD==21111)		{$hh='remoteagent';	echo "Ajout d'un nouvel agent distant";}
if ($ADD==22111)		{$hh='remoteagent';	echo "New Ajout d'extension du groupe";}
if ($ADD==211111)		{$hh='usergroups';	echo "Ajout d'un nouveau groupe d'utilisateurs";}
if ($ADD==2111111)		{$hh='scripts';		echo "Ajout d'un nouveau script";}
if ($ADD==21111111)		{$hh='filters';		echo "Ajout d'un nouveau filtre";}
if ($ADD==211111111)	{$hh='admin';	$sh='times';	echo "Ajout d'une nouvelle période d'appels";}
if ($ADD==231111111)	{$hh='admin';	$sh='shifts';	echo "New Shift adjonction";}
if ($ADD==2111111111)	{$hh='admin';	$sh='times';	echo "Ajout d'une nouvelle période d'appels d'état";}
if ($ADD==21111111111)	{$hh='admin';	$sh='phones';	echo "AJOUTER UN NOUVEAU TELEPHONE";}
if ($ADD==22111111111)	{$hh='admin';	$sh='phones';	echo "AJOUT DE NOUVEAU TÉLÉPHONE ALIAS";}
if ($ADD==23111111111)	{$hh='admin';	$sh='phones';	echo "AJOUT DE NOUVEAU GROUPE ALIAS";}
if ($ADD==211111111111)	{$hh='admin';	$sh='server';	echo "AJOUTER UN NOUVEAU SERVEUR";}
if ($ADD==221111111111)	{$hh='admin';	$sh='server';	echo "AJOUT D'UN NOUVEAU TRUNK VERS UN SERVEUR VICIDIAL";}
if ($ADD==231111111111)	{$hh='admin';	$sh='templates';	echo "AJOUT DE NOUVEAUX CONF TEMPLATE";}
if ($ADD==241111111111)	{$hh='admin';	$sh='carriers';	echo "AJOUT DE NOUVEAUX CARRIER";}
if ($ADD==240111111111)	{$hh='admin';	$sh='carriers';	echo "AJOUT CARRIER COPIE";}
if ($ADD==251111111111)	{$hh='admin';	$sh='tts';	echo "Ajout de nouveaux TTS ENTRY";}
if ($ADD==261111111111)	{$hh='admin';	$sh='moh';	echo "AJOUT DE NEW MUSIC ON HOLD ENTRY";}
if ($ADD==271111111111)	{$hh='admin';	$sh='vm';	echo "AJOUT DE NOUVEAUX la boîte vocale";}
if ($ADD==281111111111)	{$hh='admin';	$sh='label';	echo "AJOUT LABEL ECRAN NEW";}
if ($ADD==291111111111)	{$hh='admin';	$sh='cts';	echo "AJOUT NOUVEAU CONTACT";}
if ($ADD==2111111111111)	{$hh='admin';	$sh='conference';	echo "AJOUT D'UNE NOUVELLE CONFERENCE";}
if ($ADD==21111111111111)	{$hh='admin';	$sh='conference';	echo "ADDING NEW VICIDIAL CONFERENCE";}
if ($ADD==221111111111111)	{$hh='admin';	$sh='status';	echo "AJOUTER DES STATUTS DE SYSTÈME DE VICIDIAL";}
if ($ADD==231111111111111)	{$hh='admin';	$sh='status';	echo "AJOUTER LA CATÉGORIE DE STATUT DE VICIDIAL";}
if ($ADD==241111111111111)	{$hh='admin';	$sh='status';	echo "AJOUT VICIDIAL QC Code de statut";}
if ($ADD==3)			{$hh='users';		echo "Modifier un utilisateur";}
if ($ADD==30)			{$hh='campaigns';	echo "Camapagne non autorisée";}
if ($ADD==31)			
	{
	$hh='campaigns';	$sh='detail';	echo "Modifier la campagne - Détail - $campaign_id";
	if ($SUB==22)	{echo " - Statuts";}
	if ($SUB==23)	{echo " - HotKeys";}
	if ($SUB==25)	{echo " -Le Fil RéutilisentEntries";}
	if ($SUB==26)	{echo " - Auto Alt Dial Statuts";}
	if ($SUB==27)	{echo " - Agent Pause Codes";}
	if ($SUB==28)	{echo " - QC";}
	if ($SUB==29)	{echo " - Liste Mixes";}
	if ($SUB=='20A')	{echo " - Sondage";}
	if ($SUB==201)	{echo " - Presets";}
	if ($SUB==202)	{echo " - AC-CID";}
	}
if ($ADD==34)
	{
	$hh='campaigns';	$sh='basic';	echo "Modifier une Campagne - Vue Basique - $campaign_id";
	if ($SUB==22)	{echo " - Statuts";}
	if ($SUB==23)	{echo " - HotKeys";}
	if ($SUB==25)	{echo " -Le Fil RéutilisentEntries";}
	if ($SUB==26)	{echo " - Auto Alt Dial Statuts";}
	if ($SUB==27)	{echo " - Agent Pause Codes";}
	if ($SUB==28)	{echo " - QC";}
	if ($SUB==29)	{echo " - Liste Mixes";}
	if ($SUB=='20A')	{echo " - Sondage";}
	if ($SUB==201)	{echo " - Presets";}
	if ($SUB==202)	{echo " - AC-CID";}
	}
if ($ADD==32)			{$hh='campaigns';	$sh='status';	echo "Statuts De Campagne";}
if ($ADD==33)			{$hh='campaigns';	$sh='hotkey';	echo "Campagne HotKeys";}
if ($ADD==35)			{$hh='campaigns';	$sh='recycle';	echo "Le Fil De Campagne Réutilisent Des Entrées";}
if ($ADD==36)			{$hh='campaigns';	$sh='autoalt';	echo "Statuts Automatiques De Cadran De la Campagne Alt";}
if ($ADD==37)			{$hh='campaigns';	$sh='pause';	echo "Codes De Pause D'Agent De Campagne";}
if ($ADD==38)			{$hh='campaigns';	$sh='dialstat';	echo "Statuts De Cadran De Campagne";}
if ($ADD==39)			{$hh='campaigns';	$sh='listmix';	echo "Mlanges De Liste De Campagne";}
if ($ADD==301)			{$hh='campaigns';	$sh='preset';	echo "Préréglages de la campagne";}
if ($ADD==302)			{$hh='campaigns';	$sh='accid';	echo "Indicatif régional Campagne CID";}
if ($ADD==311)			{$hh='lists';		echo "Modifier la liste";}
if ($ADD==3111)			{$hh='ingroups';	echo "Modifier le In-Group";}
if ($ADD==3311)			{$hh='ingroups';	echo "ModifierDID";}
if ($ADD==3321)			{$hh='ingroups';	echo "Modifier DID RA Extension Remplace";}
if ($ADD==3511)			{$hh='ingroups';	echo "Modifier menu d-appel";}
if ($ADD==3711)			{$hh='ingroups';	echo "Modifier le groupe Téléphone filtre";}
if ($ADD==31111)		{$hh='remoteagent';	echo "Modifier les agents distants";}
if ($ADD==32111)		{$hh='remoteagent';	echo "Modifier le groupe d'extension";}
if ($ADD==311111)		{$hh='usergroups';	echo "Modifier les groupes d'utilisateurs";}
if ($ADD==3111111)		{$hh='scripts';		echo "Modifier le script";}
if ($ADD==31111111)		{$hh='filters';		echo "Modifier le filtre";}
if ($ADD==311111111)	{$hh='admin';	$sh='times';	echo "Modifier la période d'appels";}
if ($ADD==321111111)	{$hh='admin';	$sh='times';	echo "Modifier la liste des définitions des périodes d'appels d'état";}
if ($ADD==331111111)	{$hh='admin';	$sh='shifts';	echo "Modifier Shift";}
if ($ADD==3111111111)	{$hh='admin';	$sh='times';	echo "Modifier la période d'appels d'état";}
if ($ADD==31111111111)	{$hh='admin';	$sh='phones';	echo "MODIFIER LE TELEPHONE";}
if ($ADD==32111111111)	{$hh='admin';	$sh='phones';	echo "MODIFIER LE TELEPHONE ALIAS";}
if ($ADD==33111111111)	{$hh='admin';	$sh='phones';	echo "Modifier un groupe ALIAS";}
if ($ADD==311111111111)	{$hh='admin';	$sh='server';	echo "MODIFIER LE SERVEUR";}
if ($ADD==331111111111)	{$hh='admin';	$sh='templates';	echo "MODIFY CONF TEMPLATE";}
if ($ADD==341111111111)	{$hh='admin';	$sh='carriers';	echo "MODIFY CARRIER";}
if ($ADD==351111111111)	{$hh='admin';	$sh='tts';	echo "MODIFIER TTS ENTRY";}
if ($ADD==361111111111)	{$hh='admin';	$sh='moh';	echo "MODIFIER LA MUSIQUE EN ATTENTE ENTREE";}
if ($ADD==371111111111)	{$hh='admin';	$sh='vm';	echo "MODIFIER la boîte vocale";}
if ($ADD==381111111111)	{$hh='admin';	$sh='label';	echo "Modifier l'étiquette ÉCRAN";}
if ($ADD==391111111111)	{$hh='admin';	$sh='cts';	echo "Modifier un contact";}
if ($ADD==3111111111111)	{$hh='admin';	$sh='conference';	echo "MODIFIER LA CONFERENCE";}
if ($ADD==31111111111111)	{$hh='admin';	$sh='conference';	echo "MODIFY VICIDIAL CONFERENCE";}
if ($ADD==311111111111111)	{$hh='admin';	$sh='settings';	echo "MODIFIER LES REGLAGES DU SYSTEME VICIDIAL";}
if ($ADD==321111111111111)	{$hh='admin';	$sh='status';	echo "MODIFIEZ LES STATUTS DE SYSTÈME DE VICIDIAL";}
if ($ADD==331111111111111)	{$hh='admin';	$sh='status';	echo "MODIFIEZ LA CATÉGORIE DE STATUT DE VICIDIAL";}
if ($ADD==341111111111111)	{$hh='admin';	$sh='status';	echo "MODIFY VICIDIAL QC Code de statut";}
if ($ADD=="4A")			{$hh='users';		echo "Modifier un utilisateur - Admin";}
if ($ADD=="4B")			{$hh='users';		echo "Modifier un utilisateur - Admin";}
if ($ADD==4)			{$hh='users';		echo "Modifier un utilisateur";}
if ($ADD==41)			{$hh='campaigns';	$sh='detail';	echo "Modifier la campagne";}
if ($ADD==42)			{$hh='campaigns';	$sh='status';	echo "Modifier la campagne Status";}
if ($ADD==43)			{$hh='campaigns';	$sh='hotkey';	echo "Modifier la campagne HotKey";}
if ($ADD==44)			{$hh='campaigns';	$sh='basic';	echo "Modifier une Campagne - Vue Basique";}
if ($ADD==45)			{$hh='campaigns';	$sh='recycle';	echo "Modifier la campagne Recyclage Plomb";}
if ($ADD==47)			{$hh='campaigns';	$sh='pause';	echo "Modifier le code de pause";}
if ($ADD==48)			{$hh='campaigns';	$sh='qc';	echo "Modifier les paramètres de campagne QC";}
if ($ADD==49)			{$hh='campaigns';	$sh='listmix';	echo "Modifiez Le Mélange De Liste De Campagne";}
if ($ADD==401)			{$hh='campaigns';	$sh='preset';	echo "Modifier numéro de la campagne";}
if ($ADD=='40A')		{$hh='campaigns';	$sh='survey';	echo "Modifier Campagne Sondage";}
if ($ADD==411)			{$hh='lists';		echo "Modifier la liste";}
if ($ADD==4111)			{$hh='ingroups';	echo "Modifier le In-Group";}
if ($ADD==4311)			{$hh='ingroups';	echo "ModifierDID";}
if ($ADD==4511)			{$hh='ingroups';	echo "Modifier menu d-appel";}
if ($ADD==4711)			{$hh='ingroups';	echo "Modifier le groupe Téléphone filtre";}
if ($ADD==41111)		{$hh='remoteagent';	echo "Modifier les agents distants";}
if ($ADD==42111)		{$hh='remoteagent';	echo "Modifier le groupe d'extension";}
if ($ADD==411111)		{$hh='usergroups';	echo "Modifier les groupes d'utilisateurs";}
if ($ADD==4111111)		{$hh='scripts';		echo "Modifier le script";}
if ($ADD==41111111)		{$hh='filters';		echo "Modifier le filtre";}
if ($ADD==411111111)	{$hh='admin';	$sh='times';	echo "Modifier la période d'appels";}
if ($ADD==431111111)	{$hh='admin';	$sh='shifts';	echo "Modifier Shift";}
if ($ADD==4111111111)	{$hh='admin';	$sh='times';	echo "Modifier la période d'appels d'état";}
if ($ADD==41111111111)	{$hh='admin';	$sh='phones';	echo "MODIFIER LE TELEPHONE";}
if ($ADD==42111111111)	{$hh='admin';	$sh='phones';	echo "MODIFIER LE TELEPHONE ALIAS";}
if ($ADD==43111111111)	{$hh='admin';	$sh='phones';	echo "Modifier un groupe ALIAS";}
if ($ADD==411111111111)	{$hh='admin';	$sh='server';	echo "MODIFIER LE SERVEUR";}
if ($ADD==421111111111)	{$hh='admin';	$sh='server';	echo "MODIFIER LE TRUNK SERVEUR VICIDIAL";}
if ($ADD==431111111111)	{$hh='admin';	$sh='templates';	echo "MODIFY CONF TEMPLATE";}
if ($ADD==441111111111)	{$hh='admin';	$sh='carriers';	echo "MODIFY CARRIER";}
if ($ADD==451111111111)	{$hh='admin';	$sh='tts';	echo "MODIFIER TTS ENTRY";}
if ($ADD==461111111111)	{$hh='admin';	$sh='moh';	echo "MODIFIER LA MUSIQUE EN ATTENTE ENTREE";}
if ($ADD==471111111111)	{$hh='admin';	$sh='vm';	echo "MODIFIER la boîte vocale";}
if ($ADD==481111111111)	{$hh='admin';	$sh='label';	echo "Modifier l'étiquette ÉCRAN";}
if ($ADD==491111111111)	{$hh='admin';	$sh='cts';	echo "Modifier un contact";}
if ($ADD==4111111111111)	{$hh='admin';	$sh='conference';	echo "MODIFIER LA CONFERENCE";}
if ($ADD==41111111111111)	{$hh='admin';	$sh='conference';	echo "MODIFY VICIDIAL CONFERENCE";}
if ($ADD==411111111111111)	{$hh='admin';	$sh='settings';	echo "MODIFIER LES REGLAGES DU SYSTEME VICIDIAL";}
if ($ADD==421111111111111)	{$hh='admin';	$sh='status';	echo "MODIFIEZ LES STATUTS DE SYSTÈME DE VICIDIAL";}
if ($ADD==431111111111111)	{$hh='admin';	$sh='status';	echo "MODIFIEZ LES CATÉGORIES DE STATUT DE VICIDIAL";}
if ($ADD==441111111111111)	{$hh='admin';	$sh='status';	echo "MODIFY VICIDIAL QC Code de statut";}
if ($ADD==5)			{$hh='users';		echo "SupprimerUtilisateur";}
if ($ADD==51)			{$hh='campaigns';	$sh='detail';	echo "SupprimerCampagne";}
if ($ADD==52)			{$hh='campaigns';	$sh='detail';	echo "Déconnecter les agents";}
if ($ADD==53)			{$hh='campaigns';	$sh='detail';	echo "Emergency VDAC Jam Clear";}
if ($ADD==511)			{$hh='lists';		echo "SupprimerList";}
if ($ADD==5111)			{$hh='ingroups';	echo "SupprimerIn-Group";}
if ($ADD==5311)			{$hh='ingroups';	echo "SupprimerDID";}
if ($ADD==5511)			{$hh='ingroups';	echo "Supprimer menu d-appel";}
if ($ADD==5711)			{$hh='ingroups';	echo "Supprimer Téléphone Filtre Groupe";}
if ($ADD==51111)		{$hh='remoteagent';	echo "Supprimer les agents distants";}
if ($ADD==52111)		{$hh='remoteagent';	echo "Supprimer le groupe d'extension";}
if ($ADD==511111)		{$hh='usergroups';	echo "Supprimer les utilisateurs Group";}
if ($ADD==5111111)		{$hh='scripts';		echo "Supprimer les scripts";}
if ($ADD==51111111)		{$hh='filters';		echo "Supprimer le filtre";}
if ($ADD==511111111)	{$hh='admin';	$sh='times';	echo "SupprimerCall Time";}
if ($ADD==531111111)	{$hh='admin';	$sh='shifts';	echo "Maj + Suppr";}
if ($ADD==5111111111)	{$hh='admin';	$sh='times';	echo "Supprimer la période d'appels d'état";}
if ($ADD==51111111111)	{$hh='admin';	$sh='phones';	echo "DELETE PHONE";}
if ($ADD==52111111111)	{$hh='admin';	$sh='phones';	echo "DELETE PHONE ALIAS";}
if ($ADD==53111111111)	{$hh='admin';	$sh='phones';	echo "DELETE GROUP ALIAS";}
if ($ADD==511111111111)	{$hh='admin';	$sh='server';	echo "DELETE SERVER";}
if ($ADD==531111111111)	{$hh='admin';	$sh='templates';	echo "DELETE CONF TEMPLATE";}
if ($ADD==541111111111)	{$hh='admin';	$sh='carriers';	echo "DELETE CARRIER";}
if ($ADD==551111111111)	{$hh='admin';	$sh='tts';	echo "DELETE TTS ENTRY";}
if ($ADD==561111111111)	{$hh='admin';	$sh='moh';	echo "DELETE MUSIC ON HOLD ENTRY";}
if ($ADD==571111111111)	{$hh='admin';	$sh='vm';	echo "DELETE la boîte vocale";}
if ($ADD==581111111111)	{$hh='admin';	$sh='label';	echo "EFFACER ECRAN LABEL";}
if ($ADD==591111111111)	{$hh='admin';	$sh='cts';	echo "Supprimer un contact";}
if ($ADD==5111111111111)	{$hh='admin';	$sh='conference';	echo "DELETE CONFERENCE";}
if ($ADD==51111111111111)	{$hh='admin';	$sh='conference';	echo "DELETE VICIDIAL CONFERENCE";}
if ($ADD==6)			{$hh='users';		echo "SupprimerUtilisateur";}
if ($ADD==61)			{$hh='campaigns';	$sh='detail';	echo "SupprimerCampagne";}
if ($ADD==62)			{$hh='campaigns';	$sh='detail';	echo "Déconnecter les agents";}
if ($ADD==63)			{$hh='campaigns';	$sh='detail';	echo "Emergency VDAC Jam Clear";}
if ($ADD==65)			{$hh='campaigns';	$sh='recycle';	echo "Supprimer le recyclage des fiches";}
if ($ADD==66)			{$hh='campaigns';	$sh='autoalt';	echo "Supprimer ce statut d'appel automatique du numéro alternatif";}
if ($ADD==67)			{$hh='campaigns';	$sh='pause';	echo "Supprimer le code de pause";}
if ($ADD==68)			{$hh='campaigns';	$sh='dialstat';	echo "Statut d'appel pour la campagne supprimé";}
if ($ADD==69)			{$hh='campaigns';	$sh='listmix';	echo "Mélange De Liste De Campagne Enlevé";}
if ($ADD==601)			{$hh='campaigns';	$sh='preset';	echo "Preset campagne Suppression";}
if ($ADD==611)			{$hh='lists';		echo "SupprimerList";}
if ($ADD==6111)			{$hh='ingroups';	echo "SupprimerIn-Group";}
if ($ADD==6311)			{$hh='ingroups';	echo "SupprimerDID";}
if ($ADD==6511)			{$hh='ingroups';	echo "Supprimer menu d-appel";}
if ($ADD==6711)			{$hh='ingroups';	echo "Supprimer Téléphone Filtre Groupe";}
if ($ADD==61111)		{$hh='remoteagent';	echo "Supprimer les agents distants";}
if ($ADD==62111)		{$hh='remoteagent';	echo "Supprimer le groupe d'extension";}
if ($ADD==611111)		{$hh='usergroups';	echo "Supprimer les utilisateurs Group";}
if ($ADD==6111111)		{$hh='scripts';		echo "Supprimer les scripts";}
if ($ADD==61111111)		{$hh='filters';		echo "Supprimer le filtre";}
if ($ADD==611111111)	{$hh='admin';	$sh='times';	echo "SupprimerCall Time";}
if ($ADD==631111111)	{$hh='admin';	$sh='shifts';	echo "Maj + Suppr";}
if ($ADD==6111111111)	{$hh='admin';	$sh='times';	echo "Supprimer la période d'appels d'état";}
if ($ADD==61111111111)	{$hh='admin';	$sh='phones';	echo "DELETE PHONE";}
if ($ADD==62111111111)	{$hh='admin';	$sh='phones';	echo "DELETE PHONE ALIAS";}
if ($ADD==63111111111)	{$hh='admin';	$sh='phones';	echo "DELETE GROUP ALIAS";}
if ($ADD==611111111111)	{$hh='admin';	$sh='server';	echo "DELETE SERVER";}
if ($ADD==621111111111)	{$hh='admin';	$sh='server';	echo "SUPPRIMER LE TRUNK SERVEUR VICIDIAL";}
if ($ADD==631111111111)	{$hh='admin';	$sh='templates';	echo "DELETE CONF TEMPLATE";}
if ($ADD==641111111111)	{$hh='admin';	$sh='carriers';	echo "DELETE CARRIER";}
if ($ADD==651111111111)	{$hh='admin';	$sh='tts';	echo "DELETE TTS ENTRY";}
if ($ADD==661111111111)	{$hh='admin';	$sh='moh';	echo "DELETE MUSIC ON HOLD ENTRY";}
if ($ADD==671111111111)	{$hh='admin';	$sh='vm';	echo "DELETE la boîte vocale";}
if ($ADD==681111111111)	{$hh='admin';	$sh='label';	echo "EFFACER ECRAN LABEL";}
if ($ADD==691111111111)	{$hh='admin';	$sh='cts';	echo "Supprimer un contact";}
if ($ADD==6111111111111)	{$hh='admin';	$sh='conference';	echo "DELETE CONFERENCE";}
if ($ADD==61111111111111)	{$hh='admin';	$sh='conference';	echo "DELETE VICIDIAL CONFERENCE";}
if ($ADD==73)			{$hh='campaigns';	echo "Nombre de fiches désavtivées";}
if ($ADD==7111111)		{$hh='scripts';		echo "Prévisualisation du script";}
if ($ADD==700000000000000)	{$hh='reports';	echo "ADMINISTRATION DE VICIDIAL CHANGE LOG";}
if ($ADD==710000000000000)	{$hh='reports';	echo "VICIDIAL UTILISATEUR ADMIN CHANGE LOG";}
if ($ADD==720000000000000)	{$hh='reports';	echo "VICIDIAL SECTION ADMIN CHANGE LOG";}
if ($ADD==730000000000000)	{$hh='reports';	echo "VICIDIAL DETAIL ADMIN CHANGE LOG";}
if ($ADD==0)			{$hh='users';		echo "Liste des utilisateurs";}
if ($ADD==8)			{$hh='users';		echo "Rappels de l'agent";}
if ($ADD==81)			{$hh='campaigns';	$sh='list';	echo "Rappels dans la campagne ";}
if ($ADD==811)			{$hh='lists';	echo "Rappels dans la liste";}
if ($ADD==8111)			{$hh='usergroups';	echo "Rappels de service dans le groupe d'utilisateurs";}
if ($ADD==10)			{$hh='campaigns';	$sh='list';		echo "Campagnes";}
if ($ADD==100)			{$hh='lists';		echo "Listes";}
if ($ADD==1000)			{$hh='ingroups';	echo "In-Groups";}
if ($ADD==1300)			{$hh='ingroups';	echo "DIDs";}
if ($ADD==1320)			{$hh='ingroups';	echo "Modifier DID RA Extension Remplace";}
if ($ADD==1500)			{$hh='ingroups';	echo "Appel Menus";}
if ($ADD==1700)			{$hh='ingroups';	echo "Téléphone Groupes Filter";}
if ($ADD==10000)		{$hh='remoteagent';	echo "Agents distants";}
if ($ADD==12000)		{$hh='remoteagent';	echo "Groupes d'extension";}
if ($ADD==100000)		{$hh='usergroups';	echo "Groupes d'utilisateurs";}
if ($ADD==1000000)		{$hh='scripts';		echo "Scripts";}
if ($ADD==10000000)		{$hh='filters';		echo "Filtres";}
if ($ADD==100000000)	{$hh='admin';	$sh='times';	echo "Périodes d'appels";}
if ($ADD==130000000)	{$hh='admin';	$sh='shifts';	echo "Shifts";}
if ($ADD==1000000000)	{$hh='admin';	$sh='times';	echo "Périodes d'appels d'états";}
if ($ADD==10000000000)	{$hh='admin';	$sh='phones';	echo "LISTE DE TELEPHONES";}
if ($ADD==12000000000)	{$hh='admin';	$sh='phones';	echo "TÉLÉLISTE DE TELEPHONESE ALIAS";}
if ($ADD==13000000000)	{$hh='admin';	$sh='phones';	echo "GROUPE ALIAS LISTE";}
if ($ADD==100000000000)	{$hh='admin';	$sh='server';	echo "LISTE DE SERVEURS";}
if ($ADD==130000000000)	{$hh='admin';	$sh='templates';	echo "CONF TEMPLATE LISTE";}
if ($ADD==140000000000)	{$hh='admin';	$sh='carriers';	echo "CARRIER LISTE";}
if ($ADD==150000000000)	{$hh='admin';	$sh='tts';	echo "TTS Entry List";}
if ($ADD==160000000000)	{$hh='admin';	$sh='moh';	echo "MUSIC ON HOLD Entry List";}
if ($ADD==170000000000)	{$hh='admin';	$sh='vm';	echo "VOCAL encadrés Liste";}
if ($ADD==180000000000)	{$hh='admin';	$sh='label';	echo "ECRAN LISTE DES ETIQUETTES";}
if ($ADD==190000000000)	{$hh='admin';	$sh='cts';	echo "LA LISTE DES CONTACTS";}
if ($ADD==1000000000000)	{$hh='admin';	$sh='conference';	echo "LISTE DE CONFERENCES";}
if ($ADD==10000000000000)	{$hh='admin';	$sh='conference';	echo "VICIDIAL LISTE DE CONFERENCES";}
if ($ADD==550)			{$hh='users';		echo "Formulaire de recherche";}
if ($ADD==551)			{$hh='users';		echo "RECHERCHER DES TELEPHONES";}
if ($ADD==660)			{$hh='users';		echo "Résultats de la recherche";}
if ($ADD==661)			{$hh='users';		echo "RESULTATS DE LA RECHERCHE DE TELEPHONES";}
if ($ADD==99999)		{$hh='users';		echo "AIDE";}
if ($ADD==999999)		{$hh='reports';		echo "RAPPORTS";}
if ($ADD==999998)		{$hh='admin';		echo "ADMIN";}
if ($ADD==999997)		{$hh='reports';		echo "CHANGEMENT DE MOT DE PASSE";}
if ($ADD==999996)		{$hh='reports';		echo "L'installation initiale BIENVENUE";}
if ($ADD==999995)		{$hh='reports';		echo "Licence de marque déposée COPYRIGHT";}
if ($ADD==999994)		{$hh='reports';		echo "ADMIN UTILITIES";}
if ($ADD==999993)		{$hh='reports';		echo "Statistiques récapitulatives";}
if ($ADD==999992)		{$hh='reports';		echo "SYSTEM Statistiques récapitulatives";}


if ( ($ADD>9) and ($ADD < 99998) )
	{
	##### get scripts listing for dynamic pulldown
	$stmt="SELECT script_id,script_name from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
	$rslt=mysql_query($stmt, $link);
	$scripts_to_print = mysql_num_rows($rslt);
	$scripts_list="<option value=\"\">NONE</option>\n";

	$o=0;
	while ($scripts_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$scripts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$scriptname_list["$rowx[0]"] = "$rowx[1]";
		$o++;
		}

	##### get filters listing for dynamic pulldown
	$stmt="SELECT lead_filter_id,lead_filter_name,lead_filter_sql from vicidial_lead_filters $whereLOGadmin_viewable_groupsSQL order by lead_filter_id;";
	$rslt=mysql_query($stmt, $link);
	$filters_to_print = mysql_num_rows($rslt);
	$filters_list="<option value=\"\">NONE</option>\n";

	$o=0;
	while ($filters_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$filters_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$filtername_list["$rowx[0]"] = "$rowx[1]";
		$filtersql_list["$rowx[0]"] = "$rowx[2]";
		$o++;
		}

	##### get call_times listing for dynamic pulldown
	$stmt="SELECT call_time_id,call_time_name from vicidial_call_times $whereLOGadmin_viewable_call_timesSQL order by call_time_id;";
	$rslt=mysql_query($stmt, $link);
	$times_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($times_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$call_times_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$call_timename_list["$rowx[0]"] = "$rowx[1]";
		$o++;
		}
	}

if ( ( (strlen($ADD)>4) and ($ADD < 99998) ) or ($ADD==3) or (($ADD>20) and ($ADD<70)) or ($ADD=="4A")  or ($ADD=="4B") or (strlen($ADD)==12) )
	{

	##### BEGIN get campaigns listing for rankings #####

	$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);
	$campaigns_list='';
	$campaigns_value='';
	$RANKcampaigns_list="<tr><td>CAMPAIGN</td><td> &nbsp; &nbsp; RANK</td><td> &nbsp; &nbsp; GRADE</td><td> &nbsp; &nbsp; CALLS</td><td ALIGN=CENTER>WEB VARS</td></tr>\n";

	$o=0;
	while ($campaigns_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$campaign_id_values[$o] = $rowx[0];
		$campaign_name_values[$o] = $rowx[1];
		$o++;
		}

	$o=0;
	while ($campaigns_to_print > $o)
		{
		$group_web_vars='';
		$campaign_web='';
		$stmt="SELECT campaign_rank,calls_today,group_web_vars,campaign_grade from vicidial_campaign_agents where user='$user' and campaign_id='$campaign_id_values[$o]' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$ranks_to_print = mysql_num_rows($rslt);
		if ($ranks_to_print > 0)
			{
			$row=mysql_fetch_row($rslt);
			$SELECT_campaign_rank =		$row[0];
			$calls_today =				$row[1];
			$group_web_vars =			$row[2];
			$SELECT_campaign_grade =	$row[3];
			}
		else
			{$calls_today=0;   $SELECT_campaign_rank=0;   $SELECT_campaign_grade=1;   $group_web_vars='';}
		if ( ($ADD=="4A") or ($ADD=="4B") )
			{
			$stmt_grp_values='';
			if (isset($_GET["RANK_$campaign_id_values[$o]"]))			{$campaign_rank=$_GET["RANK_$campaign_id_values[$o]"];}
				elseif (isset($_POST["RANK_$campaign_id_values[$o]"]))	{$campaign_rank=$_POST["RANK_$campaign_id_values[$o]"];}
			if (isset($_GET["WEB_$campaign_id_values[$o]"]))			{$campaign_web=$_GET["WEB_$campaign_id_values[$o]"];}
				elseif (isset($_POST["WEB_$campaign_id_values[$o]"]))	{$campaign_web=$_POST["WEB_$campaign_id_values[$o]"];}
			if (isset($_GET["GRADE_$campaign_id_values[$o]"]))			{$campaign_grade=$_GET["GRADE_$campaign_id_values[$o]"];}
				elseif (isset($_POST["GRADE_$campaign_id_values[$o]"]))	{$campaign_grade=$_POST["GRADE_$campaign_id_values[$o]"];}
			if ($non_latin < 1)
				{
				$campaign_rank = ereg_replace("[^-\_0-9]","",$campaign_rank);
				$campaign_web = preg_replace("/;|\"|\'/","",$campaign_web);
				$campaign_grade = ereg_replace("[^-\_0-9]","",$campaign_grade);
				}

			if ($ranks_to_print > 0)
				{
				$stmt="UPDATE vicidial_campaign_agents set campaign_rank='$campaign_rank', campaign_weight='$campaign_rank', group_web_vars='$campaign_web',campaign_grade='$campaign_grade' where campaign_id='$campaign_id_values[$o]' and user='$user';";
				$rslt=mysql_query($stmt, $link);
				$stmt_grp_values .= "$stmt|";
				}
			else
				{
				$stmt="INSERT INTO vicidial_campaign_agents set campaign_rank='$campaign_rank', campaign_weight='$campaign_rank', campaign_id='$campaign_id_values[$o]', user='$user', group_web_vars='$campaign_web',campaign_grade='$campaign_grade';";
				$rslt=mysql_query($stmt, $link);
				$stmt_grp_values .= "$stmt|";
				}

			$stmt="UPDATE vicidial_live_agents set campaign_weight='$campaign_rank',campaign_grade='$campaign_grade' where campaign_id='$campaign_id_values[$o]' and user='$user';";
			$rslt=mysql_query($stmt, $link);
			$stmt_grp_values .= "$stmt|";
			}
		else 
			{
			$campaign_rank = $SELECT_campaign_rank;
			$campaign_grade = $SELECT_campaign_grade;
			}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}

		# disable non user-group allowable campaign ranks
		$stmt="SELECT user_group from vicidial_users where user='$user' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$Ruser_group =	$row[0];

		$stmt="SELECT allowed_campaigns from vicidial_user_groups where user_group='$Ruser_group' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$allowed_campaigns =	$row[0];
		$allowed_campaigns = preg_replace("/ -$/","",$allowed_campaigns);
		$UGcampaigns = explode(" ", $allowed_campaigns);

		$p=0;   $RANK_camp_active=0;   $GRADE_camp_active=0;   $CR_disabled = '';
		if (eregi('-ALL-CAMPAIGNS-',$allowed_campaigns))
			{$RANK_camp_active++;   $GRADE_camp_active++;}
		else
			{
			$UGcampaign_ct = count($UGcampaigns);
			while ($p < $UGcampaign_ct)
				{
				if ($campaign_id_values[$o] == $UGcampaigns[$p]) 
					{$RANK_camp_active++;   $GRADE_camp_active++;}
				$p++;
				}
			}
		if ($RANK_camp_active < 1) {$CR_disabled = 'DISABLED';}

		$RANKcampaigns_list .= "<tr $bgcolor><td>";
		$campaigns_list .= "<a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id_values[$o]\">$campaign_id_values[$o]</a> - $campaign_name_values[$o] <BR>\n";
		$RANKcampaigns_list .= "<a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id_values[$o]\">$campaign_id_values[$o]</a> - $campaign_name_values[$o] </td>";
		$RANKcampaigns_list .= "<td> &nbsp; <select size=1 name=RANK_$campaign_id_values[$o] $CR_disabled>\n";
		$h="9";
		while ($h>=-9)
			{
			$RANKcampaigns_list .= "<option value=\"$h\"";
			if ($h==$campaign_rank)
				{$RANKcampaigns_list .= " SELECTED";}
			$RANKcampaigns_list .= ">$h</option>";
			$h--;
			}
		if ( (strlen($campaign_web) < 1) and (strlen($group_web_vars) > 0) )
			{$campaign_web=$group_web_vars;}
		$RANKcampaigns_list .= "</select></td>\n";
		$RANKcampaigns_list .= "<td> &nbsp; <select size=1 name=GRADE_$campaign_id_values[$o] $CR_disabled>\n";
		$h="10";
		while ($h>=1)
			{
			$RANKcampaigns_list .= "<option value=\"$h\"";
			if ($h==$campaign_grade)
				{$RANKcampaigns_list .= " SELECTED";}
			$RANKcampaigns_list .= ">$h</option>";
			$h--;
			}
		if ( (strlen($campaign_web) < 1) and (strlen($group_web_vars) > 0) )
			{$campaign_web=$group_web_vars;}
		$RANKcampaigns_list .= "</select></td>\n";
		$RANKcampaigns_list .= "<td align=right> &nbsp; &nbsp; $calls_today</td>\n";
		$RANKcampaigns_list .= "<td> &nbsp; &nbsp; <input type=text size=25 maxlength=255 name=WEB_$campaign_id_values[$o] value=\"$campaign_web\"></td></tr>\n";
		$o++;
		}
	##### END get campaigns listing for rankings #####


	##### BEGIN get inbound groups listing for checkboxes #####
	$xfer_groupsSQL='';
	if ( (($ADD>20) and ($ADD<70)) and ($ADD!=41) or ( ($ADD==41) and (eregi('list_activation', $stage))) )
		{
		$stmt="SELECT closer_campaigns,xfer_groups from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$closer_campaigns =	$row[0];
			$closer_campaigns = preg_replace("/ -$/","",$closer_campaigns);
			$groups = explode(" ", $closer_campaigns);
		$xfer_groups =	$row[1];
			$xfer_groups = preg_replace("/ -$/","",$xfer_groups);
			$XFERgroups = explode(" ", $xfer_groups);
		$xfer_groupsSQL = preg_replace("/^ | -$/","",$xfer_groups);
		$xfer_groupsSQL = preg_replace("/ /","','",$xfer_groupsSQL);
		$xfer_groupsSQL = "WHERE group_id IN('$xfer_groupsSQL')";
		}
	if ($ADD==41)
		{
		$p=0;
		$XFERgroup_ct = count($XFERgroups);
		while ($p < $XFERgroup_ct)
			{
			$xfer_groups .= " $XFERgroups[$p]";
			$p++;
			}
		$xfer_groupsSQL = preg_replace("/^ | -$/","",$xfer_groups);
		$xfer_groupsSQL = preg_replace("/ /","','",$xfer_groupsSQL);
		$xfer_groupsSQL = "WHERE group_id IN('$xfer_groupsSQL')";
		}

	if ( (($ADD==31111) or ($ADD==31111)) and (count($groups)<1) )
		{
		$stmt="SELECT closer_campaigns from vicidial_remote_agents where remote_agent_id='$remote_agent_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$closer_campaigns =	$row[0];
		$closer_campaigns = preg_replace("/ -$/","",$closer_campaigns);
		$groups = explode(" ", $closer_campaigns);
		}

	if ($ADD==3)
		{
		$stmt="SELECT closer_campaigns from vicidial_users where user='$user' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$closer_campaigns =	$row[0];
		$closer_campaigns = preg_replace("/ -$/","",$closer_campaigns);
		$groups = explode(" ", $closer_campaigns);
		}

	$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
#	$stmt="SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') order by group_id";
	$rslt=mysql_query($stmt, $link);
	$groups_to_print = mysql_num_rows($rslt);
	$groups_list='';
	$groups_value='';
	$XFERgroups_list='';
	$RANKgroups_list="<tr><td>INBOUND GROUP</td><td> &nbsp; &nbsp; RANK</td><td> &nbsp; &nbsp; GRADE</td><td> &nbsp; &nbsp; CALLS</td><td ALIGN=CENTER>WEB VARS</td></tr>\n";

	$o=0;
	while ($groups_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$group_id_values[$o] = $rowx[0];
		$group_name_values[$o] = $rowx[1];
		$o++;
		}

	$o=0;
	while ($groups_to_print > $o)
		{
		$group_web_vars='';
		$group_web='';
		$stmt="SELECT group_rank,calls_today,group_web_vars,group_grade from vicidial_inbound_group_agents where user='$user' and group_id='$group_id_values[$o]';";
		$rslt=mysql_query($stmt, $link);
		$ranks_to_print = mysql_num_rows($rslt);
		if ($ranks_to_print > 0)
			{
			$row=mysql_fetch_row($rslt);
			$SELECT_group_rank =	$row[0];
			$calls_today =			$row[1];
			$group_web_vars =		$row[2];
			$SELECT_group_grade =	$row[3];
			}
		else
			{$calls_today=0;   $SELECT_group_rank=0;   $SELECT_group_grade=1;}
		if ( ($ADD=="4A") or ($ADD=="4B") )
			{
			if (isset($_GET["RANK_$group_id_values[$o]"]))			{$group_rank=$_GET["RANK_$group_id_values[$o]"];}
				elseif (isset($_POST["RANK_$group_id_values[$o]"]))	{$group_rank=$_POST["RANK_$group_id_values[$o]"];}
			if (isset($_GET["WEB_$group_id_values[$o]"]))			{$group_web=$_GET["WEB_$group_id_values[$o]"];}
				elseif (isset($_POST["WEB_$group_id_values[$o]"]))	{$group_web=$_POST["WEB_$group_id_values[$o]"];}
			if (isset($_GET["GRADE_$group_id_values[$o]"]))				{$group_grade=$_GET["GRADE_$group_id_values[$o]"];}
				elseif (isset($_POST["GRADE_$group_id_values[$o]"]))	{$group_grade=$_POST["GRADE_$group_id_values[$o]"];}

			if ($non_latin < 1)
				{
				$group_rank = ereg_replace("[^-\_0-9]","",$group_rank);
				$group_web = preg_replace("/;|\"|\'/","",$group_web);
				$group_grade = ereg_replace("[^-\_0-9]","",$group_grade);
				}

			if ($ranks_to_print > 0)
				{
				$stmt="UPDATE vicidial_inbound_group_agents set group_rank='$group_rank', group_weight='$group_rank', group_web_vars='$group_web', group_grade='$group_grade' where group_id='$group_id_values[$o]' and user='$user';";
				$rslt=mysql_query($stmt, $link);
				$stmt_grp_values .= "$stmt|";
				}
			else
				{
				$stmt="INSERT INTO vicidial_inbound_group_agents set group_rank='$group_rank', group_weight='$group_rank', group_id='$group_id_values[$o]', user='$user', group_web_vars='$group_web', group_grade='$group_grade';";
				$rslt=mysql_query($stmt, $link);
				$stmt_grp_values .= "$stmt|";
				}

			$stmt="UPDATE vicidial_live_inbound_agents set group_weight='$group_rank', group_grade='$group_grade' where group_id='$group_id_values[$o]' and user='$user';";
			$rslt=mysql_query($stmt, $link);
			$stmt_grp_values .= "$stmt|";
			}
		else 
			{
			$group_rank = $SELECT_group_rank;
			$group_grade = $SELECT_group_grade;
			}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}

		$groups_list .= "<input type=\"checkbox\" name=\"groups[]\" value=\"$group_id_values[$o]\"";
		$XFERgroups_list .= "<input type=\"checkbox\" name=\"XFERgroups[]\" value=\"$group_id_values[$o]\"";
		$RANKgroups_list .= "<tr $bgcolor><td><input type=\"checkbox\" name=\"groups[]\" value=\"$group_id_values[$o]\"";
		$p=0;
		$group_ct = count($groups);
		while ($p < $group_ct)
			{
			if ($group_id_values[$o] == $groups[$p]) 
				{
				$groups_list .= " CHECKED";
				$RANKgroups_list .= " CHECKED";
				$groups_value .= " $group_id_values[$o]";
				}
			$p++;
			}
		$p=0;
		$XFERgroup_ct = count($XFERgroups);
		while ($p < $XFERgroup_ct)
			{
			if ($group_id_values[$o] == $XFERgroups[$p]) 
				{
				$XFERgroups_list .= " CHECKED";
				$XFERgroups_value .= " $group_id_values[$o]";
				}
			$p++;
			}
		$stmt="SELECT queue_priority from vicidial_inbound_groups where group_id='$group_id_values[$o]' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$VIG_priority =			$row[0];

		$groups_list .= "> <a href=\"$PHP_SELF?ADD=3111&group_id=$group_id_values[$o]\">$group_id_values[$o]</a> - $group_name_values[$o] - $VIG_priority <BR>\n";
		$XFERgroups_list .= "> <a href=\"$PHP_SELF?ADD=3111&group_id=$group_id_values[$o]\">$group_id_values[$o]</a> - $group_name_values[$o] <BR>\n";
		$RANKgroups_list .= "> <a href=\"$PHP_SELF?ADD=3111&group_id=$group_id_values[$o]\">$group_id_values[$o]</a> - $group_name_values[$o] </td>";
		$RANKgroups_list .= "<td> &nbsp; <select size=1 name=RANK_$group_id_values[$o]>\n";
		$h="9";
		while ($h>=-9)
			{
			$RANKgroups_list .= "<option value=\"$h\"";
			if ($h==$group_rank)
				{$RANKgroups_list .= " SELECTED";}
			$RANKgroups_list .= ">$h</option>";
			$h--;
			}
		if ( (strlen($group_web) < 1) and (strlen($group_web_vars) > 0) )
			{$group_web=$group_web_vars;}
		$RANKgroups_list .= "</select></td>\n";
		$RANKgroups_list .= "<td> &nbsp; <select size=1 name=GRADE_$group_id_values[$o]>\n";
		$h="10";
		while ($h>=1)
			{
			$RANKgroups_list .= "<option value=\"$h\"";
			if ($h==$group_grade)
				{$RANKgroups_list .= " SELECTED";}
			$RANKgroups_list .= ">$h</option>";
			$h--;
			}
		if ( (strlen($group_web) < 1) and (strlen($group_web_vars) > 0) )
			{$group_web=$group_web_vars;}
		$RANKgroups_list .= "</select></td>\n";
		$RANKgroups_list .= "<td align=right> &nbsp; &nbsp; $calls_today</td>\n";
		$RANKgroups_list .= "<td> &nbsp; &nbsp; <input type=text size=25 maxlength=255 name=WEB_$group_id_values[$o] value=\"$group_web\"></td></tr>\n";
		$o++;
		}
	if (strlen($groups_value)>2) {$groups_value .= " -";}
	if (strlen($XFERgroups_value)>2) {$XFERgroups_value .= " -";}
	}
	##### END get inbound groups listing for checkboxes #####


##### BEGIN get campaigns listing for checkboxes #####
if ( ($ADD==211111) or ($ADD==311111) or ($ADD==411111) or ($ADD==511111) or ($ADD==611111) )
	{
	if ( ($ADD==211111) or ($ADD==311111) or ($ADD==511111) or ($ADD==611111) )
		{
		$stmt="SELECT allowed_campaigns,qc_allowed_campaigns,qc_allowed_inbound_groups from vicidial_user_groups where user_group='$user_group' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$allowed_campaigns =			$row[0];
		$qc_allowed_campaigns =			$row[1];
		$qc_allowed_inbound_groups =	$row[2];
		$allowed_campaigns = preg_replace("/ -$/","",$allowed_campaigns);
		$campaigns = explode(" ", $allowed_campaigns);
		$qc_allowed_campaigns = preg_replace("/ -$/","",$qc_allowed_campaigns);
		$qc_campaigns = explode(" ", $qc_allowed_campaigns);
		$qc_allowed_inbound_groups = preg_replace("/ -$/","",$qc_allowed_inbound_groups);
		$qc_groups = explode(" ", $qc_allowed_inbound_groups);
		}

	$campaigns_value='';
	if ( (eregi("-ALL",$LOGallowed_campaigns)) )
		{$campaigns_list='<B><input type="checkbox" name="campaigns[]" value="-ALL-CAMPAIGNS-"';}
	$qc_campaigns_value='';
	$qc_campaigns_list='<B><input type="checkbox" name="qc_campaigns[]" value="-ALL-CAMPAIGNS-"';
	$qc_groups_value='';
	$qc_groups_list='<B><input type="checkbox" name="qc_groups[]" value="-ALL-GROUPS-"';
	$p=0;
	while ($p<2000)
		{
		if (eregi('ALL-CAMPAIGNS',$campaigns[$p])) 
			{
			if ( (eregi("-ALL",$LOGallowed_campaigns)) )
				{
				$campaigns_list.=" CHECKED";
				$campaigns_value .= " -ALL-CAMPAIGNS-";
				}
			}
		if (eregi('ALL-CAMPAIGNS',$qc_campaigns[$p])) 
			{
			$qc_campaigns_list.=" CHECKED";
			$qc_campaigns_value .= " -ALL-CAMPAIGNS-";
			}
		if (eregi('ALL-GROUPS',$qc_groups[$p])) 
			{
			$qc_groups_list.=" CHECKED";
			$qc_groups_value .= " -ALL-GROUPS-";
			}
		$p++;
		}
	if ( (eregi("-ALL",$LOGallowed_campaigns)) )
		{$campaigns_list.="> ALL-CAMPAIGNS - LES UTILISATEURS PEUVENT VOIR CHAQUE CAMPAGNE</B><BR>\n";}
	$qc_campaigns_list.="> ALL-CAMPAIGNS - UTILISATEURS CAN QC TOUTE LA CAMPAGNE</B><BR>\n";
	$qc_groups_list.="> ALL-GROUPS - UTILISATEURS CAN QC ENTRANT TOUT GROUP</B><BR>\n";

	$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($campaigns_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$campaign_id_value = $rowx[0];
		$campaign_name_value = $rowx[1];
		$campaigns_list .= "<input type=\"checkbox\" name=\"campaigns[]\" value=\"$campaign_id_value\"";
		$qc_campaigns_list .= "<input type=\"checkbox\" name=\"qc_campaigns[]\" value=\"$campaign_id_value\"";
		$p=0;
		while ($p<1000)
			{
			if ( ($campaign_id_value == $campaigns[$p]) and (strlen($campaign_id_value) > 1) )
				{
			#	echo "<!--  X $p|$campaign_id_value|$campaigns[$p]| -->";
				$campaigns_list .= " CHECKED";
				$campaigns_value .= " $campaign_id_value";
				}
			if ($campaign_id_value == $qc_campaigns[$p]) 
				{
				$qc_campaigns_list .= " CHECKED";
				$qc_campaigns_value .= " $campaign_id_value";
				}
		#	echo "<!--  O $p|$campaign_id_value|$campaigns[$p]| -->";
			$p++;
			}
		$campaigns_list .= "> $campaign_id_value - $campaign_name_value<BR>\n";
		$qc_campaigns_list .= "> $campaign_id_value - $campaign_name_value<BR>\n";
		$o++;
		}

	$stmt="SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') $LOGadmin_viewable_groupsSQL order by group_id;";
	$rslt=mysql_query($stmt, $link);
	$groups_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($groups_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$group_id_value = $rowx[0];
		$group_name_value = $rowx[1];
		$qc_groups_list .= "<input type=\"checkbox\" name=\"qc_groups[]\" value=\"$group_id_value\"";
		$p=0;
		while ($p<2000)
			{
			if ( ($group_id_value == $qc_groups[$p]) and (strlen($group_id_value) > 1) )
				{
				$qc_groups_list .= " CHECKED";
				$qc_groups_value .= " $group_id_value";
				}
			$p++;
			}
		$qc_groups_list .= "> $group_id_value - $group_name_value<BR>\n";
		$o++;
		}

	if (strlen($campaigns_value)>2) {$campaigns_value .= " -";}
	if (strlen($qc_campaigns_value)>2) {$qc_campaigns_value .= " -";}
	if (strlen($qc_groups_value)>2) {$qc_groups_value .= " -";}
	}
	##### END get campaigns listing for checkboxes #####


if ( (strlen($ADD)==11) or (strlen($ADD)>12) or ( ($ADD > 1299) and ($ADD < 9999) ) or ($ADD=='141111111111') or ($ADD=='140111111111') or ($ADD=='341111111111') or ($ADD=='311111111111111') or ( (strlen($ADD)>4) and ($ADD < 99998) ) or ($ADD==3) or (($ADD>20) and ($ADD<70)) or ($ADD=="4A") or ($ADD=="4B") or (strlen($ADD)==12) )
	{
	##### get server listing for dynamic pulldown 
	$stmt="SELECT server_ip,server_description,external_server_ip from servers order by server_ip";
	$rsltx=mysql_query($stmt, $link);
	$servers_to_print = mysql_num_rows($rsltx);
	$servers_list='';

	$o=0;
	while ($servers_to_print > $o)
		{
		$rowx=mysql_fetch_row($rsltx);
		$servers_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1] - $rowx[2]</option>\n";
		$o++;
		}
	}



$NWB = " &nbsp; <a href=\"javascript:openNewWindow('$PHP_SELF?ADD=99999";
$NWE = "')\"><IMG SRC=\"help.gif\" WIDTH=20 HEIGHT=20 BORDER=0 ALT=\"AIDE\" ALIGN=TOP></A>";


######################################################################################################
######################################################################################################
#######   9 series, HELP screen
######################################################################################################
######################################################################################################


######################
# ADD=99999 display the HELP SCREENS
######################

if ($ADD==99999)
	{
	echo "</title>\n";
	echo "</head>\n";
	echo "<BODY BGCOLOR=white marginheight=0 marginwidth=0 leftmargin=0 topmargin=0>\n";
	echo "<CENTER>\n";
	echo "<TABLE WIDTH=98% BGCOLOR=#E6E6E6 cellpadding=2 cellspacing=0><TR><TD ALIGN=LEFT><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=4><B>ADMINISTRATION: AIDE<BR></B></FONT><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2><BR><BR>\n";

	?>
	<B><FONT SIZE=3>VICIDIAL_UTILISATEURS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_users-user">
	<BR>
	<B>ID Utilisateur -</B> C'est ici que vous mettez le numéro ID de l'utilisateur VICIDIAL, entre 2 et 8 caractères.

	<BR>
	<A NAME="vicidial_users-pass">
	<BR>
	<B>Mot de passe -</B> Mot de passe de l'utilisateur VICIDIAL. Doit contenir au moins 2 caractères. Un mot de passe forte de l'utilisateur doit être au moins 8 caractères de longueur et ont minuscules et majuscules, ainsi que au moins un numéro.

	<BR>
	<A NAME="vicidial_users-force_change_password">
	<BR>
	<B>Forcer Changer mot de passe -</B> Si cette option est réglée sur Y, alors l'utilisateur sera invité à modifier leur mot de passe la prochaine fois qu'ils se connectent à la page Web d'administration. Par défaut est N.

	<BR>
	<A NAME="vicidial_users-full_name">
	<BR>
	<B>Nom complet -</B> C'est dans ce champ que vous mettez le nom complet de l'utilisateur VICIDIAL. Doit contenir au moins 2 caractères.

	<BR>
	<A NAME="vicidial_users-user_level">
	<BR>
	<B>Niveau de l'utilisateur -</B> C'est ici que vous sélectionnez le niveau de l'utilisateur. Le niveau doit être de 1 pour pouvoir ce connecter à VICIDIAL, plus grand que 2 pour se connecter à une campagne de type Closer, doit être superieur ou égal à 8 pour accéder à la section web administrateur.

	<BR>
	<A NAME="vicidial_users-user_group">
	<BR>
	<B>Groupe d'utilisateur -</B> C'est dans ce menu que vous selectionnez le groupe utilisateur dans lequel sera cet utilisateur. Pour l'instant il n'y a pas de restriction, ce n'est que pour répartir les utilisateurs et autoriser les futures fonctions basées sur ceci.

	<BR>
	<A NAME="vicidial_users-phone_login">
	<BR>
	<B>Login du téléphone -</B> C'est ici que vous mettez le login par  défaut du téléphone pour quand cette utilisateur se connecte dans vicidial.php. Le champ phone_login sera automatiquement rempli par cette valeur quand l'utilisateur se connectera avec son utilisateur-mot_de_passe_passe-campagne dans l'écran de connection vicidial.php .

	<BR>
	<A NAME="vicidial_users-phone_pass">
	<BR>
	<B>Mot de passe du téléphone -</B> C'est ici que vous mettez le mot de passe par defaut du téléphone pour quand l'utisateur se connecte dans vicidial.php. Le champ phone_pass sera rempli automatiquement avec cette valeur quand l'utilisateur se connectera avec utilislateur-passe-campagne dans l'écran de conncetion vicidial.php.

	<BR>
	<A NAME="vicidial_users-active">
	<BR>
	<B>Active - </B> Ce champ détermine si l'utilisateur est actif dans le système et peuvent utiliser VICIDIAL ressources. La valeur par défaut est Y

	<BR>
	<A NAME="vicidial_users-voicemail_id">
	<BR>
	<B>ID vocale -</B> Il s'agit de la boîte vocale que les appels seront dirigés vers dans un AGENTDIRECT en groupe à la fois si la baisse en groupe a la méthode de la goutte réglé sur VOCAL et le champ de messagerie vocale mis au AGENTVMAIL.

	<BR>
	<A NAME="vicidial_users-optional">
	<BR>
	<B>Courrier électronique, code utilisateur et territoire -</B> Ce sont des champs optionnels.

	<BR>
	<A NAME="vicidial_users-hotkeys_active">
	<BR>
	<B>Raccourcis clavier actifs -</B> Si cette option est à 1 elle autorise l'utilisateur à utiliser les raccourcis clavier vicidial.php.

	<BR>
	<A NAME="vicidial_users-agent_choose_ingroups">
	<BR>
	<B>Choix des Ingroups -<\/B> Cette option, si elle est mise à 1 autorise l'utilisateur à choisir les ingroups depuis lesquels il recevra des appels quand il est connecté dans une campagne de type CLOSER ou INBOUND sinon le manager devra le définir dans l'écran de détails de l'utiliseur sur la page d'amiministration.

	<BR>
	<A NAME="vicidial_users-agent_choose_blended">
	<BR>
	<B>Agent Choisissez Blended -</B> Cette option si elle est définie à 1 permet à l'utilisateur de choisir si l'agent a son ensemble campagne pour mélangés ou non, et si non, le réglage par défaut sera utilisé mélangé. Par défaut est 1 pour activé.

	<BR>
	<A NAME="vicidial_users-agent_choose_territories">
	<BR>
	<B>Agent Choisir Territoires -</B> Cette option si la valeur 1 permet à l-utilisateur de choisir les territoires qu-ils vont recevoir des appels à partir de leur connexion à un manuel ou INBOUND_MAN campagne. Sinon, l-utilisateur sera configuré pour utiliser l-ensemble des territoires qu-ils sont définis comme appartenant à l-utilisateur dans les Territoires Section administrative.

	<BR>
	<A NAME="vicidial_users-scheduled_callbacks">
	<BR>
	<B>Scheduled Callbacks -</B> Cette option permet à un agent à disposition un appel comme CALLBK et choisir la date et l-heure à laquelle le plomb sera ré-activé.

	<BR>
	<A NAME="vicidial_users-agentonly_callbacks">
	<BR>
	<B>Rappel Agent-Seulement -</B> Cette option autorise un agent à assigner un rappel pour lequel il sera le seul a pouvoir rappeler le client. Cela autorise aussi l'agent à voir sa liste de rappel quand il le désire.

	<BR>
	<A NAME="vicidial_users-agentcall_manual">
	<BR>
	<B>Appel manuel pour l'agent-</B> Cette option autorise un agent à entrer manuellement une nouvelle fiche et à l'appeler. Elle autorise aussi l'appel de n'importe quel numéro de téléphone depuis vicidial et met cette appel dans sa session. Utilisez cette option avec précaution.

	<BR>
	<A NAME="vicidial_users-vicidial_recording">
	<BR>
	<B>Enregistrement vicidial -</B> Cette otpion peut empêcher un agent de faire un enregistrement après qu'il se soit connecté à vicidial. Cette option doit être activée pour que vicidial suive la session d'enregistrement de la campagne.

	<BR>
	<A NAME="vicidial_users-vicidial_transfers">
	<BR>
	<B>Transferts Vicidial  -</B> Cette option peut empêcher un agent d'ouvrir un transfert - conférence dans vicidial. Si c'est desactivé, l'agent ne pourra pas appeler une tierce personne ou transferer l'appel.

	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_users-closer_default_blended">
		<BR>
		<B>Closer Default Blended -<\/B> Cette option coche simplement par défaut la checbox Blended sur un écran de connection d'une campagne de type CLOSER.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_users-vicidial_recording_override">
	<BR>
	<B>Ecrasement de l'enregistrement de VICIDIAL -</B> Cette option va écraser l'option d'enregistrement de la campagne quelle qu'elle soit. DISABLED n'écrasera pas les réglages d'enregistrement de la campagne. NEVER désactivera l'enregistrement sur le client. ONDEMAND est la valeur par défaut et autorise l'agent à démarrer ou arrêter l'enregistrement si nécessaire. ALLCALLS démarrera l'enregistrment à chaque fois qu'un appel est passé à un agent. ALLFORCE démarrera l'enregistrement à chaque fois qu'un appel à un agent est passé sans permettre à l'agent d'arrêter l'enregistrement. Pour les valeurs ALLCALLS et ALLFORCE il possible d'utiliser l'option 'Délai d'enregistrement' pour réduire la taille des enregistrments et la charge du système.

	<BR>
	<A NAME="vicidial_users-agent_shift_enforcement_override">
	<BR>
	<B>Agent de l'exécution Shift Override -</B> Ce paramètre remplace les utilisateurs quel que soit le groupe d'utilisateurs a mis en application de la loi pour Maj. HANDICAPES utilise l'utilisateur groupe. OFF ne fera pas appliquer à tous les changements. START ne faire respecter les temps de connexion, mais n'aura pas d'incidence sur un agent qui est en cours d'exécution sur leurs heures de travail si elles sont déjà logged in ALL appliquent passer l'heure de début et se connecter à un agent, après, ils courent sur la fin de leur quart de temps. La valeur par défaut est désactivé.

	<BR>
	<A NAME="vicidial_users-agent_call_log_view_override">
	<BR>
	<B>Agent Call Log Voir Override -</B> Ce paramètre remplace quel que soit le groupe d'utilisateurs utilisateurs s'est fixé pour View Log Agent d'appel. HANDICAPÉS utilisera le réglage du groupe utilisateur. N ne permettra pas montrer le journal des appels utilisateurs. Y permettra montrant le journal des appels de l'utilisateur. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_users-agent_lead_search_override">
	<BR>
	<B>Override Recherche Agent principal -</B> Ce paramètre remplace quelle que soit la campagne s'est fixé pour principal agent de recherche. NOT_ACTIVE utilisera le paramètre de campagne. ENABLED permettra recherche de plomb et de DISABLED ne permettra pas la recherche de plomb. Par défaut est NOT_ACTIVE.

	<BR>
	<A NAME="vicidial_users-alert_enabled">
	<BR>
	<B>Alerte Activé - </B> Ce champ indique si l'agent est le navigateur Web des alertes lorsque les appels ont permis de venir dans leur vicidial.php session. La valeur par défaut est 0 pour les NO.

	<BR>
	<A NAME="vicidial_users-allow_alerts">
	<BR>
	<B>Permettez Alertes -</B> Ce champ vous donne la possibilité de permettre navigateur agent des alertes pour être activé par l-agent pour les appels entrants sur leur session vicidial.php. Par défaut est 0 pour le NO.

	<BR>
	<A NAME="vicidial_users-preset_contact_search">
	<BR>
	<B>Contact Recherche Preset -</B> Si l'utilisateur est connecté à une campagne qui a Presets de transfert prévues à l'CONTACTS, alors ce paramètre peut désactiver la recherche de contact pour cet utilisateur uniquement. Par défaut est NOT_ACTIVE qui utilisera quelle que soit la campagne est mise en.

	<BR>
	<A NAME="vicidial_users-campaign_ranks">
	<BR>
	<B>La campagne se range - dans cette section vous pouvez définir le rangque un agent aura pour chaque campagne. Ces rangs peuvent êtreemployés pour tenir compte du cheminement préféré d'appel quand leprochain appel d'agent est placé au campaign_rank. Également dans cette section sont le WEB VAR pour chaque campagne. Il s'agit de permettre à chaque agent d'avoir une autre variable de chaîne qui peuvent être ajoutés à la fiche de Web ou SCRIPT onglet URL, simplement en mettant - A - web_vars - B - comme vous le mettre dans tout autre domaine. Un autre domaine dans cette section est de qualité, qui permet pour la campaign_grade_random agent Suivant Appelez la mise à être utilisé. Ce paramètre de qualité va augmenter ou diminuer la probabilité que l'agent recevra l'appel.

	<BR>
	<A NAME="vicidial_users-closer_campaigns">
	<BR>
	<B>Groupes entrants -</B> C'est ici que vous selectionnez les groupes entrants depuis lesquels vous voulez recevoir des appels si vous avez selectionné une campagne de type CLOSER. Vous pourrez également placer le rang, ou le niveau de compétence,dans cette section pour chacun des groupes d'arrivée aussi bien quepouvoir voir le nombre d'appels reçus de chaque groupe d'arrivéepour cet agent spécifique. En outre dans cette section est la capacité de donner à l'agent unrang pour chaque groupe d'arrivée. Ces rangs peuvent être employéspour le cheminement préféré d'appel quand cette option est choisiedans l'écran de dans-groupe. Également dans cette section sont le WEB VAR pour chaque campagne. Il s'agit de permettre à chaque agent d'avoir une autre variable de chaîne qui peuvent être ajoutés à la fiche de Web ou SCRIPT onglet URL, simplement en mettant - A - web_vars - B - comme vous le mettre dans tout autre domaine.

	<BR>
	<A NAME="vicidial_users-alter_custdata_override">
	<BR>
	<B>Modifications des données des clients pour l'agent -</B> Cette option permet de surcharger, pour un agent précis, l'option de la campagne concernant la modification des données du clients. NOT_ACTIVE utilisera la valeur présente dans l'option de la campagne. ALLOW_ALTER autorisera toujours à cet agent de modifier les données du client quelque soit la valeur de l'option dans la campagne. La valeur par défaut est NOT_ACTIVE.

	<BR>
	<A NAME="vicidial_users-alter_custphone_override">
	<BR>
	<B>Alter Agent Client Téléphone Override - </B> Cette option va remplacer ce que l'option est dans la campagne pour modifier le numéro de téléphone du client. NOT_ACTIVE va utiliser quel que soit l'établissement est présent pour la campagne. ALLOW_ALTER toujours de permettre à l'agent de modifier le numéro de téléphone des clients, quel que soit le réglage de la campagne. La valeur par défaut est NOT_ACTIVE.

	<BR>
	<A NAME="vicidial_users-custom_one">
	<BR>
	<B>Custom Utilisateur Fields -</B> Ces cinq champs peuvent être utilisés à des fins diverses, et ils peuvent être archivés dans les adresses formulaire web et des scripts comme user_custom_one et ainsi de suite. Le Custom 5 champ peut être utilisé comme un champ de définir un certain nombre dialplan d'envoyer un appel à partir d'un AGENTDIRECT en groupe si l'utilisateur n'est pas disponible, vous avez juste besoin de mettre AGENTEXT dans le champ Message ou EXTENSION dans le AGENTDIRECT en groupe et le système va chercher la coutume cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_users-alter_agent_interface_options">
	<BR>
	<B>Modifier les options de l'interface agent -</B> Cette option, si elle est à 1, autorise l'utilisateur administrateur à modifier les otpions de l'interface Agent dans admin.php.

	<BR>
	<A NAME="vicidial_users-delete_users">
	<BR>
	<B>Effacer des utilisateurs -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer d'autres utilisateurs qui ont un niveau inférieur ou égal depuis le système.

	<BR>
	<A NAME="vicidial_users-delete_user_groups">
	<BR>
	<B>Supprimer des groupes d'utilisateurs -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer les groupes d'utilisateurs depuis le système.

	<BR>
	<A NAME="vicidial_users-delete_lists">
	<BR>
	<B>Supprimer des listes -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer des listes depuis le système.

	<BR>
	<A NAME="vicidial_users-delete_campaigns">
	<BR>
	<B>Supprimer des campagnes -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer des campagnes vicidial depuis le système.

	<BR>
	<A NAME="vicidial_users-delete_ingroups">
	<BR>
	<B>Supprimer des In-groups -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer des In-groups vicidial depuis le système.

	<BR>
	<A NAME="vicidial_users-delete_remote_agents">
	<BR>
	<B>Supprimer des agents distants -</B> Cette option et mise à 1 pour autoriser l'utilisateur à effacer des agents distants vicidial depuis le système.

	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_users-load_leads">
		<BR>
		<B>Charger des fiches -</B> Cette option et mise à 1 pour autoriser l'utilisateur à charger des fiches dans la table vicidial_list en utilisant le chargeur de fiches web.
		<?php
		}
	if ($SScustom_fields_enabled > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_users-custom_fields_modify">
		<BR>
		<B>Modifier les champs personnalisés -</B> Cette option, si mis à 1 permet à l'utilisateur de modifier les champs de listes personnalisées.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_users-campaign_detail">
	<BR>
	<B>Détails de la campagne-</B> Cette option et mise à 1 pour autoriser l'utilisateur à voir et modifier les éléments de l'écran de details de la campagne.

	<BR>
	<A NAME="vicidial_users-ast_admin_access">
	<BR>
	<B>Accès administrateur AGC -</B> Cette option et mise à 1 pour autoriser l'utilisateur à se connecter aux pages d'administration de astGUIclient.

	<BR>
	<A NAME="vicidial_users-ast_delete_phones">
	<BR>
	<B>Supprimer des téléphones AGC -</B> Cette option est mise à 1 pour autoriser l'utilisateur à effacer des téléphones dans les pages d'aministration d'astGUIclient.

	<BR>
	<A NAME="vicidial_users-delete_scripts">
	<BR>
	<B>Supprimer des scripts -</B> Cette option si elle est mise à 1 autorise l'utilisateur à supprimer des scripts de campagne dans l'écran de modification du script.

	<BR>
	<A NAME="vicidial_users-modify_leads">
	<BR>
	<B>Modifier les fiches -</B> Si cette otpion est à 1 elle autorise l'utilisateur à modifier les fiches dans la page des résultats de la recherche de fiches dans la section d'administration.

	<BR>
	<A NAME="vicidial_users-change_agent_campaign">
	<BR>
	<B>Changer l'agent de campagne -</B> Cette option, si elle est mise à 1, permet à l'utilisateur de changer la campagne dans laquelle est connecté un agent alors qu'il y est connecté.

	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_users-delete_filters">
		<BR>
		<B>Supprimer des filtres -</B> Cette option autorise l'utilisateur à supprimer les filtres de fiches du système.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_users-delete_call_times">
	<BR>
	<B>Suppression des périodes d'appels -<\/B> Cette option permet à l'utilisateur de supprimer les enregistrements des périodes d'appels vicidial et les enregistrement des périodes d'appels d'état de ce système.

	<BR>
	<A NAME="vicidial_users-modify_call_times">
	<BR>
	<B>Modification des périodes d'appels -<\/B> Cette option autorise l'utilisateur à voir et modifier les périodes d'appels et les périodes d'appels d'état. Un utilisateur n'a pas besoin de cette option si il a seulement besoin de changer les options des périodes d'appels sur l'écran de campagne.

	<BR>
	<A NAME="vicidial_users-modify_sections">
	<BR>
	<B>Modifications des sections -</B> Cette option autorise l'utilisateur à voir et modifier chaque enregistrement de section. Si cette option a pour valeur 0, l'utilisateur pourra voir la liste des sections, mais pas le détail et ne pourra pas modifier les enregistrements dans cette section.

	<BR>
	<A NAME="vicidial_users-view_reports">
	<BR>
	<B>Voir les rapports -</B> Cette option autorise l'utilisateur à voir les rapports VICIDIAL.

	<?php
	if ($SSqc_features_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_users-qc_enabled">
		<BR>
		<B>QC Activé - </B> Cette option permet à l'utilisateur de se connecter à l'agent de contrôle de la qualité d'écran.

		<BR>
		<A NAME="vicidial_users-qc_user_level">
		<BR>
		<B>QC Niveau de l'utilisateur - </B> Ce paramètre définit ce que l'agent de contrôle de la qualité est au niveau utilisateur. Ce qui déterminera le niveau de fonctionnalité de l'agent dans la section QC:<BR>
		1 - Rien Modifier<BR>
		2 - Modifier Rien Sauf Etat<BR>
		3 - Modifier tous les Domaines<BR>
		4 - Vérifiez Premier Cycle de QC<BR>
		5 - Voir QC Statistiques<BR>
		6 - Possibilité de modifier fini records<BR>
		7 - Level Manager<BR>

		<BR>
		<A NAME="vicidial_users-qc_pass">
		<BR>
		<B>Record QC Pass - </B> Cette option permet à l'agent de préciser que le dossier a franchi le premier tour de Québec, après avoir examiné le dossier.

		<BR>
		<A NAME="vicidial_users-qc_finish">
		<BR>
		<B>Record QC Finish - </B> Cette option permet à l'agent de préciser que le dossier a terminé la deuxième ronde de Québec après avoir examiné le dossier transmis.

		<BR>
		<A NAME="vicidial_users-qc_commit">
		<BR>
		<B>Record QC Commit - </B> Cette option permet à l'agent de préciser que le record a été commise dans QC. Il ne peut plus être modifié par n'importe qui.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_users-add_timeclock_log">
	<BR>
	<B>Ajouter Log timeclock Record - </B> Cette option permet à l'utilisateur d'ajouter des enregistrements à l'timeclock journal.

	<BR>
	<A NAME="vicidial_users-modify_timeclock_log">
	<BR>
	<B>Modifier timeclock Connexion Record - </B> Cette option permet à l'utilisateur de modifier des enregistrements dans le journal timeclock.

	<BR>
	<A NAME="vicidial_users-delete_timeclock_log">
	<BR>
	<B>Supprimer timeclock Connexion Record - </B> Cette option permet à l'utilisateur de supprimer des enregistrements dans les journaux timeclock.

	<BR>
	<A NAME="vicidial_users-vdc_agent_api_access">
	<BR>
	<B>Agent API d'accès - </B> Cette option permet le compte à utiliser avec l'agent VICIDIAL commandes API.

	<BR>
	<A NAME="vicidial_users-manager_shift_enforcement_override">
	<BR>
	<B>Shift Manager exécution Override -</B> Ce paramètre, s'il est à 1 permettra d'entrer dans un gestionnaire d'utilisateur et leur mot de passe sur l'écran d'un agent pour l'emporter sur l'évolution des restrictions sur un agent de la session si l'agent essaie de se connecter à l'extérieur de leur quart de travail. La valeur par défaut est 0.

	<BR>
	<A NAME="vicidial_users-download_lists">
	<BR>
	<B>Download Listes -</B> Ce paramètre, s'il est à 1 permet à un gestionnaire de téléchargement, cliquez sur le lien de la liste au bas de l'écran de modification d'une liste d'exporter la totalité du contenu d'une liste de données à un fichier plat. La valeur par défaut est 0.

	<BR>
	<A NAME="vicidial_users-export_reports">
	<BR>
	<B>Rapports d'exportation -</B> Ce paramètre si elle est définie à 1, permettre à un gestionnaire d'accéder à l'appel d'exportation et les rapports de plomb sur l'écran RAPPORTS. Par défaut est 0. Pour l'exportation Appels et mène des rapports, l'ordre des champs ci-dessous est utilisé pour les exportations: <BR>call_date, phone_number_dialed, status, user, full_name, campaign_id/in-group, vendor_lead_code, source_id, list_id, gmt_offset_now, phone_code, phone_number, title, first_name, middle_initial, last_name, address1, address2, address3, city, state, province, postal_code, country_code, gender, date_of_birth, alt_phone, email, security_phrase, comments, length_in_sec, user_group, alt_dial/queue_seconds, rank, owner

	<BR>
	<A NAME="vicidial_users-delete_from_dnc">
	<BR>
	<B>Supprimer From Listes DNC -</B> Ce paramètre si la valeur 1 permettra à un manager pour supprimer des numéros de téléphone dans les listes du DNC dans le système VICIDIAL.

	<BR>
	<A NAME="vicidial_users-realtime_block_user_info">
	<BR>
	<B>En temps réel Infos Message Bloquer -</B> Ce paramètre si elle est définie à 1 permet de bloquer les informations utilisateur et de la station ne sera pas affichée dans le rapport en temps réel. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="vicidial_users-modify_same_user_level">
	<BR>
	<B>Modifier niveau de l'utilisateur même -</B> Ce paramètre s'applique uniquement au niveau 9 utilisateurs. Si elle est activée elle permet à l'utilisateur de niveau 9 à modifier leurs paramètres propres ainsi que d'autres au niveau 9 utilisateurs. Par défaut est 1 pour activé.

	<BR>
	<A NAME="vicidial_users-admin_hide_lead_data">
	<BR>
	<B>Administrateur de données masquer plomb -</B> Ce paramètre s'applique uniquement au niveau 7, 8 et 9 utilisateurs. Si elle est activée elle remplace les données de plomb clients dans les nombreux rapports et des écrans dans le système avec Xs. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="vicidial_users-admin_hide_phone_data">
	<BR>
	<B>Administrateur masquer les données du téléphone -</B> Ce paramètre s'applique uniquement au niveau 7, 8 et 9 utilisateurs. Si elle est activée elle remplace les numéros de téléphone des clients dans les nombreux rapports et des écrans dans le système avec Xs. Les paramètres chiffres seront montrent que les chiffres X derniers du numéro de téléphone. Par défaut est 0 pour les handicapés.






	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_CAMPAIGNS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_campaigns-campaign_id">
	<BR>
	<B>ID de la campagne -</B> C'est un nom court pour la campagne, il n'est pas modifiable après validation, il ne peut contenir d'espaces et doit contenir entre 2 et 8 caractèresh.

	<BR>
	<A NAME="vicidial_campaigns-campaign_name">
	<BR>
	<B>Nom de la campagne -</B> C'est la description de la campagne, elle doit contenir entre 6 et 40 caractères.

	<BR>
	<A NAME="vicidial_campaigns-campaign_description">
	<BR>
	<B>Description de la campagne -</B> C'est un champ de note pour la campagne, il est optionel et ne peut contenir plus de 255 caractères.

	<BR>
	<A NAME="vicidial_campaigns-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cette campagne, ce qui permet d'administration visualisation de cette campagne ainsi que les listes assignés à cette campagne pour être limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin avec les autorisations des utilisateurs du groupe de campagne pour voir cette campagne.

	<BR>
	<A NAME="vicidial_campaigns-campaign_changedate">
	<BR>
	<B>Date de changement de la campagne -</B> C'est la dernière fois que les réglages de la campagne ont été modifié.

	<BR>
	<A NAME="vicidial_campaigns-campaign_logindate">
	<BR>
	<B>Date de la dernière connection à la campagne -</B> C'est la dernière fois qu'un agent s'est connecté à la campagne.

	<BR>
	<A NAME="vicidial_campaigns-campaign_calldate">
	<BR>
	<B>Dernière campagne téléphonique Date -</B> Il s-agit de la dernière fois qu-un appel a été traitée par un mandataire inscrit dans cette campagne.

	<BR>
	<A NAME="vicidial_campaigns-max_stats">
	<BR>
	<B>Maximum quotidien Statistiques -</B> Ce sont des statistiques qui sont générées par le système chaque jour pendant toute la journée jusqu'à ce que la minuterie de fin de journée, car il est réglé dans les paramètres système. Ces nombres sont générés à partir des grumes dans le système pour permettre l'affichage beaucoup plus rapide. Les stats sont inclus sont - Nombre total d'appels, les agents maximum, maximum des appels entrants, appels sortants maximum.

	<BR>
	<A NAME="vicidial_campaigns-campaign_stats_rafraîchir">
	<BR>
	<B>Rafraichissement des statistiques de la campagne -</B> Cette checkbox permet de forcer un rafraichissement des statistiques de vicidial, même si la campagne n'est pas active.

	<BR>
	<A NAME="vicidial_campaigns-realtime_agent_time_stats">
	<BR>
	<B>Real-Time Temps Stats Agent -</B> Mettre cette option à quoi que ce soit, mais HANDICAPÉS permettra la collecte de statistiques en temps des agents pour aujourd'hui pour cette campagne, qui sont visibles au travers du rapport en temps réel. Les appels sont la moyenne appels traités par agent, attente est le temps moyen d'attente d'agent, le CUST est le temps moyen de clients discours, ACW est la moyenne Après le temps de travail Appel, PAUSE est le temps de pause en moyenne. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-active">
	<BR>
	<B>Active -</B> C'est ici que vous indiquez si la campagne est active ou non. Si elle est inactive personne ne peut se connecter à cette campagne.

	<BR>
	<A NAME="vicidial_campaigns-park_ext">
	<BR>
	<B>Parc de la Musique-sur-Hold -</B> C'est là que vous pouvez définir le contexte de la musique en attente pour cette campagne. Assurez-vous que vous sélectionnez une musique valable sur le contexte de maintien de la liste de sélection et que le contexte que vous avez sélectionné les fichiers valides a en elle. Par défaut est par défaut.

	<BR>
	<A NAME="vicidial_campaigns-park_file_name">
	<BR>
	<B>Park File Name -</B> NOT USED.

	<BR>
	<A NAME="vicidial_campaigns-web_form_address">
	<BR>
	<B>Formulaire Web -</B> C'est ici que que vous pouvez mettre une page web personnalisée qui sera ouverte quand l'utilisateur cliquera sur le bouton FORMULAIRE WEB. Pour personnaliser la chaîne de requête, après le formulaire Web, il suffit de commencer avec le formulaire web, VAR et puis l'URL que vous voulez utiliser, en remplaçant les variables avec les noms des variables que vous voulez utiliser - A - phone_number - B -- comme dans l'onglet SCRIPTS. Si vous voulez utiliser des champs personnalisés dans un formulaire Web l'adresse, vous devez ajouter &CF_uses_custom_fields=Y dans le cadre de votre URL.

	<BR>
	<A NAME="vicidial_campaigns-web_form_target">
	<BR>
	<B>Formulaire Web Public-</B> C'est là que vous pouvez définir la page Web personnalisée cadre que le formulaire web sera ouverte lorsque l'utilisateur clique sur le bouton de formulaire Web. La valeur par défaut est _blank.

	<BR>
	<A NAME="vicidial_campaigns-allow_closers">
	<BR>
	<B>Autoriser les Closers -</B> C'est ici que vous pouvez définir si les utilisateurs de cette campagne pouront envoyer l'appel vers une campagne de type closer.

	<BR>
	<A NAME="vicidial_campaigns-default_xfer_group">
	<BR>
	<B>Groupe de transfert de défaut - ce champ est le Dans-Groupe dedéfaut qui sera automatiquement choisi quand l'agent va à l'armaturede transférer-conférence dans leur interface d'agent.

	<BR>
	<A NAME="vicidial_campaigns-xfer_groups">
	<BR>
	<B>Groupes laissés de transfert - avec ces listes de checkbox vouspouvez choisir les groupes aux lesquels les agents dans cette campagnepeuvent transférer des appels. Permettez Closers doit être permispour que cette option révèle.

	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_campaigns-campaign_allow_inbound">
		<BR>
		<B>Permettez d'arrivée et mélangé - c'est où vous pouvez placer siles utilisateurs de cette campagne auront l'option pour prendre desappels d'arrivée avec cette campagne. Si vous voulez faire d'arrivéeet en partance mélangés puis ceci doit être placé à Y. Si vousvoulez seulement faire composer en partance sur cette campagne placiezceci à N. Default est N.

		<BR>
		<A NAME="vicidial_campaigns-dial_status">
		<BR>
		<B>Statut de l'appel -<\/B> C'est ici que vous indiquez les statuts que vous voulez appeler dans les listes actives pour la campagne suivante. Pour ajouter un autre statut d'appel, selectionnez le dans la liste déroulante et cliquez sur AJOUTER. Pour supprimer un de ces statuts, cliquez sur le lien SUPPRIMER à côté du statut que vous voulez supprimer.

		<BR>
		<A NAME="vicidial_campaigns-lead_order">
		<BR>
		<B>Ordre de la liste -</B> C'est dans ce menu que vous selectionnez comment les fiches qui correspondent aux statuts selectionnés ci-dessus seront mises dans le distributeur de fiches:
		 <BR> &nbsp; - DOWN: selectionne les premières fiches chargées dans la table vicidial_list
		 <BR> &nbsp; - UP: selectionne les dernières fiches chargées dans la table vicidial_list
		 <BR> &nbsp; - UP PHONE: selectionne le plus grand numéro de téléphone et continue vers le bas
		 <BR> &nbsp; - DOWN PHONE: selectionne le plus petit numéro de téléphone et continue vers le haut
		 <BR> &nbsp; - UP LAST NAME: commence avec les noms commençant pas Z et continue vers le bas
		 <BR> &nbsp; - DOWN LAST NAME: commence avec les noms commençant par A et continue vers le haut
		 <BR> &nbsp; - UP COUNT: commence avec les fiches les plus appelées et continue en descendant
		 <BR> &nbsp; - DOWN COUNT: commence avec les fiches les moins appelées et continue en augmentant
		 <BR> &nbsp; - DOWN COUNT 2nd NEW: commence avec les fiches les moins appelées et continue en montant en insérant une fiche NEW à chaque autre fiche - Ne doit PAS avoir NEW selectionné dans les statuts d'appel
		 <BR> &nbsp; - DOWN COUNT 3nd NEW: commence avec les fiches les moins appelées et continue en augmentant en insérant une fiche NEW toutes les 3 fiches - Ne doit PAS avoir NEW selectionné dans les statuts d'appel
		 <BR> &nbsp; - DOWN COUNT 4th NEW: commence avec les fiches les moins appelées et continue en augmentant en insérant une fiche NEW toutes les 4 fiches - Ne doit PAS avoir NEW selectionné dans les statuts d'appel
		 <BR> &nbsp; - RANDOM: Hasard s-empare de plomb dans les statuts et listes définies
		 <BR> &nbsp; - UP LAST CALL TIME: Trie par la nouvelle durée d-un appel local pour le conduit
		 <BR> &nbsp; - DOWN LAST CALL TIME: Trie par le doyen des temps d-appel local pour le conduit
		 <BR> &nbsp; - UP RANK: Commence par le plus haut rang et fait son chemin vers le bas
		 <BR> &nbsp; - DOWN RANK: Commence avec le plus bas grade et fait son chemin jusqu-à
		 <BR> &nbsp; - UP OWNER: Commence avec les propriétaires commençant par Z et fait son chemin vers le bas
		 <BR> &nbsp; - DOWN OWNER: Commence avec les propriétaires commençant par A et fait son chemin jusqu-à
		 <BR> &nbsp; - UP TIMEZONE: Commence avec les fuseaux horaires de l-Est et l-Ouest de travaux
		 <BR> &nbsp; - DOWN TIMEZONE: Commence avec les fuseaux horaires de l-Ouest et travaille Est

		<BR>
		<A NAME="vicidial_campaigns-lead_order_randomize">
		<BR>
		<B>Commandez Liste Randomize -</B> Cette option vous permet de randomiser l'ordre des pistes dans la charge trémie dans les résultats définis par les critères énoncés ci-dessus. Par exemple, la liste de commande seront préservés, mais les résultats seront randomisés dans ce tri. Mettre cette option à Y activer cette fonctionnalité. Par défaut est N pour les handicapés. REMARQUE, si vous avez un grand nombre de conducteurs de cette option peut ralentir la vitesse du script trémie de chargement.

		<BR>
		<A NAME="vicidial_campaigns-lead_order_secondary">
		<BR>
		<B>Commandez Liste secondaire -</B> Cette option vous permet de sélectionner l'ordre de tri second des fils de la charge trémie après l'Ordre et au sein de la liste des résultats définis par les critères énoncés ci-dessus. Par exemple, la liste de commande sera utilisé pour la première sorte de les fils, mais les résultats seront triés une seconde fois au sein de ce tri dans le même ensemble de l'Ordre de la première liste. Par exemple, si vous avez la liste de commandes mis à décomptage et vous avez seulement des pistes qui ont été tentées 1 et 2 fois, puis si vous avez l'ensemble de commande Liste secondaire à LEAD_ASCEND tous les fils 1 tentative sera triée par les plus anciens conducteurs premier et sera placée dans la trémie de cette façon. Par défaut est LEAD_ASCEND. REMARQUE, si vous avez un grand nombre de prospects en utilisant l'une des options CALLTIME peut ralentir la vitesse du script trémie de chargement. Si la liste de commandes Aléatoire est activée, cette option sera ignorée.

		<BR>
		<A NAME="vicidial_campaigns-hopper_level">
		<BR>
		<B>Niveau minimum Hopper -</B> C'est le nombre minimum de conduit le script VDhopper essaie de garder dans le tableau vicidial_hopper pour cette campagne. Si vous exécutez le script VDhopper chaque minute, faire ce peu supérieur au nombre de conducteurs vous passez par une minute.

		<BR>
		<A NAME="vicidial_campaigns-use_auto_hopper">
		<BR>
		<B>Niveau Hopper automatique -</B> Mettre ce paramètre à Y permettra Vicidial pour ajuster automatiquement la trémie basé sur les paramètres que vous avez dans votre campagne. La formule qu'il utilise pour ce faire est:<BR>Number of Active Agents * Niveau de l'appel automatique * ( 60 seconds / Délai de tentative d'appel ) * Auto Hopper Multiplier<BR>Default is Y.

		<BR>
		<A NAME="vicidial_campaigns-auto_hopper_multi">
		<BR>
		<B>Multiplicateur Hopper automatique -</B> C'est multiplicateur pour l'Hopper Auto. La définition de cette moins de 1 fera l'algorithme Hopper Auto à charger moins que fils il le ferait normalement. La définition de cette supérieur à 1 fera l'algorithme Hopper Auto pour charger plus de prospects que normalement. Par défaut est 1.

		<BR>
		<A NAME="vicidial_campaigns-auto_trim_hopper">
		<BR>
		<B>Auto Trim Hopper -</B> Mettre ce paramètre à Y permettra Vicidial pour supprimer automatiquement l'excès mène à partir de la trémie. Par défaut est Y.

		<BR>
		<A NAME="vicidial_campaigns-hopper_vlc_dup_check">
		<BR>
		<B>Hopper VLC Dup Vérifiez -</B> Un réglage à Y entraîne chaque piste étant insérée dans la trémie étant vérifiée par vendor_lead_code pour s'assurer qu'il n'y sont pas dupliquer conducteurs insérés avec le même vendor_lead_code. Cela est particulièrement utile lorsque la fonction Auto-Alt-numérotation avec MULTI_LEAD. Par défaut est N.

		<BR>
		<A NAME="vicidial_campaigns-lead_filter_id">
		<BR>
		<B>Filtre de fiches -</B> C'est une méthode de filtrage de vos fiches utilisant un fragment de requête SQL. Utilisez cette fonction avec précaution, il est facile de stoper une comunication accidentellement avec le plus petit changement du statement SQL. La valeur par défaut est NONE.

		<BR>
		<A NAME="vicidial_campaigns-call_count_limit">
		<BR>
		<B>Appelez le comte Limite -</B> Ceci impose une limite sur le nombre de tentatives d'appel pour les conducteurs composés dans cette campagne. Un plomb peut dépasser cette limite légèrement si le recyclage de plomb ou Auto-Alt-numérotation est activée. Par défaut est 0 pour aucune limite.

		<BR>
		<A NAME="vicidial_campaigns-call_count_target">
		<BR>
		<B>Appelez le comte cible -</B> Cette option est uniquement utilisée pour des fins de rapport et n'a aucun effet sur les pistes composés. Par défaut est 3.

		<BR>
		<A NAME="vicidial_campaigns-drop_lockout_time">
		<BR>
		<B>Drop Lockout Time -</B> Il s-agit d-un nombre d-heures que DROP abandonner les appels seront empêchés d-être composés, pour définir désactiver à 0. Ce paramètre est très utile dans des pays comme le Royaume-Uni où il existe une réglementation empêchant l-appelant a tenté de clients dans les 72 heures d-un abandon, ou DROP. Par défaut est 0.

		<BR>
		<A NAME="vicidial_campaigns-force_reset_hopper">
		<BR>
		<B>Forcer la réinitialisation du distributeur -</B> Cela vous autorise à éliminer le contenu du distributeur depuis un formulaire de validation. Il devrait être rempli une nouvelle fois quand le quand VDhopper se lance.

		<BR>
		<A NAME="vicidial_campaigns-dial_method">
		<BR>
		<B>Méthode d'appel -</B> Ce champ permet de définir la façon dont sont passés les appels. Si c'est MANUAL alors le auto_dial_level sera bloqué à 0 à moins que le méthode d'appel ne change. If RATIO then the normal dialing a number of lines for Active agents. ADAPT_HARD_LIMIT will dial predictively up to the dropped percentage and then not allow aggressive dialing once the drop limit is reached until the percentage goes down again. ADAPT_TAPERED allows for running over the dropped percentage in the first half of the shift -as defined by call_time selected for campaign- and gets more strict as the shift goes on. ADAPT_AVERAGE tries to maintain an average or the dropped percentage not imposing hard limits as aggressively as the other two methods. You cannot change the Niveau de l'appel automatique if you are in any of the ADAPT dial methods. Only the Dialer can change the dial level when in predictive dialing mode. INBOUND_MAN permet à l'agent de mise manuel composer des appels de la liste d'une campagne tout en étant en mesure de prendre des appels entrants entre le manuel de composer des appels.

		<BR>
		<A NAME="vicidial_campaigns-auto_dial_level">
		<BR>
		<B>Niveau de l'appel automatique -</B> C'est ici que vous mettez combien de lignes VICIDIAL devrait utiliser par agent. 0 veut dire que l'appel automatique est désactivé et que l'agent doit cliquer pour appeler chaque numéro. Autrement VICIDIAL maintiendra le nombre de lignes égale au nombre d'agents actifs  multiplié par le niveau de l'appel automatique pour arriver au nombres de lignes que cette campagne devrait permettre sur chaque serveur . La checkbox ADAPTER LE DEPASSEMENT vous permet de forcer un nouveau niveau d'appel même si la méthode d'appel est ADAPT. C'est utile s'il y a une variation dramatique dans la qualité des fiches et que vous voulez changer rigoureusement le dial_level manuellement. 

		<BR>
		<A NAME="vicidial_campaigns-dial_level_threshold">
		<BR>
		<B>Seuil Auto Level Dial -</B> Ce paramètre ne fonctionne qu'avec un ADAPT ou la méthode de rapport Dial, et il doit être réglé sur autre chose que HANDICAPÉS et le nombre de paramètre agents doit être supérieure à 0. Cette fonctionnalité vous permet de définir un nombre minimum d'agents que l'algorithme prédictif travailler. Si le nombre d'agents en deçà du nombre que vous avez défini, alors le niveau de numérotation ira à 1,0 jusqu'à plus d'agents connecter ou entrer dans l'état sélectionné. Logged-IN_AGENTS comptera tous les agents connectés à la campagne, NON-PAUSED_AGENTS comptera seulement les agents qui sont en attente ou en parlant, et WAITING_AGENTS comptera seulement des agents qui sont en attente d'un appel. Par défaut est DISABLED.

		<BR>
		<A NAME="vicidial_campaigns-available_only_ratio_tally">
		<BR>
		<B>Valable seulement pour les contrôles -</B> Si ce champ est à Y les agents ayant pour statut INCALL ou QUEUE seront omis pour le calcul des appels à passer quand le mode d'appel n'est pas MANUAL. La valeur par défaut est N.

		<BR>
		<A NAME="vicidial_campaigns-available_only_tally_threshold">
		<BR>
		<B>Disponible Seuil Tally seulement -</B> Ce paramètre ne fonctionne qu'avec un ADAPT ou la méthode de rapport Dial, disponible seulement Tally doit être réglé sur N, ce paramètre doit être réglé sur autre chose que HANDICAPÉS et le nombre de paramètre agents doit être supérieure à 0. Cette fonctionnalité vous permet de définir le nombre d'agents en dessous duquel Disponible Tally Seuls seront permis. Si le nombre d'agents en deçà du nombre que vous avez défini, puis la mise en Tally Disponible seulement au rendez-vous à Y temporairement jusqu'à ce que plus d'agents connecter ou entrer dans l'état sélectionné. Logged-IN_AGENTS comptera tous les agents connectés à la campagne, NON-PAUSED_AGENTS comptera seulement les agents qui sont en attente ou en parlant, et WAITING_AGENTS comptera seulement des agents qui sont en attente d'un appel. Par défaut est DISABLED.

		<BR>
		<A NAME="vicidial_campaigns-adaptive_dropped_percentage">
		<BR>
		<B>Pourcentage limite d'abandon -</B> Ce champ permet de définir le pourcentage limite d'appels abandonnés voulu lors de l'utilisation de méthode d'appel adaptive-predictive, pas MANUAL ni RATIO.

		<BR>
		<A NAME="vicidial_campaigns-adaptive_maximum_level">
		<BR>
		<B>Niveau maximum d'adaptation d'appel -</B> Ce champ permet de définir la limite du nombre de lignes que vous voulez composer par agent lors de l'utilisation d'une méthode d'appel adaptive-predictive, pas MANUAL ni RATIO. Ce nombre peut être plus grand que le Niveau de l'appel automatique de votre matériel ci celui-ci le supporte. La valeur doit être un nombre positif plus grand que 1 qui peut être décimal. La valeur par défaut est 3.0.

		<BR>
		<A NAME="vicidial_campaigns-adaptive_latest_server_time">
		<BR>
		<B>Heure maximum du serveur -</B> Ce champ est seulement utilisé par la méthode d'appel ADAPT_TAPERED. Vous devez y saisir l'heure à laquelle vous allez arrêter d'appeler pour cette campagne, 2100 veut dire que vous arrêterez d'appeler pour cette campagne à 21h00. Cela autorise l'algorithme Tapered de décider comment appeler agressivement en fonction du temps restant avant d'arrêter d'appeler.

		<BR>
		<A NAME="vicidial_campaigns-adaptive_intensity">
		<BR>
		<B>Adapter le modifieur d'intensité -<\/B> Ce champ est utilisé pour ajuster l'intensité prédictive à la fois plus haut ou plus bas. Plus vous selectionnez un nombre positif grand, plus l'appeleur augmentera considérablement l'appel quand il monte et plus l'appeleur dimunera lentement l'appel quand il descend. Plus le chiffre négatif que vous selectionnez est petit, plus l'appeleur augmentera lentement l'appel et plus l'appeleur diminuera rapidement l'appel quand il descend. La valeur par défaut est 0. Ce champ n'est pas utilisé par les méthodes d'appels MANUAL et RATIO.

		<BR>
		<A NAME="vicidial_campaigns-adaptive_dl_diff_target">
		<BR>
		<B>Différence cible du niveau d'appel -</B> Ce champ est utilisé pour définir si vous souhaitez cibler ayant un nombre précis d'agents d'attente pour les appels ou les appels en attente pour les agents. Par exemple, si vous voulez toujours avoir en moyenne un agent libre de prendre les appels immédiatement, vous devez définir cette valeur à -1, si vous souhaitez cibler avoir toujours un appel en attente en attente d'un agent, vous devez définir cette valeur à 1. Par défaut est 0. Ce champ n'est pas utilisé dans le manuel ou les méthodes de numérotation INBOUND_MAN.

		<BR>
		<A NAME="vicidial_campaigns-dl_diff_target_method">
		<BR>
		<B>Composez méthode cible de différence de niveau -</B> Cette option vous permet de définir si le niveau cible cadran différence paramètre est appliqué uniquement sur le calcul du niveau de cadran ou également à la composition réelle sur chaque serveur de numérotation. Si vous exécutez une petite campagne avec des agents connectés sur de nombreux serveurs, vous voudrez peut-être utiliser l'option ADAPT_CALC_ONLY, parce que l'option CALLS_PLACED peut entraîner une diminution des appels en cours placés que deisred. Cette option n'est active que si la cible Différence Dial Level est réglé sur autre chose que 0. Par défaut est ADAPT_CALC_ONLY.

		<BR>
		<A NAME="vicidial_campaigns-concurrent_transfers">
		<BR>
		<B>Transferts concurents -</B> Ce champ permet de définir le nombre d'appels qui peuvent être envoyés à un agent simultanément. Il est recommandé de laisser AUTO. Le champ n'est pas utilisé si la méthode est MANUAL.

		<BR>
		<A NAME="vicidial_campaigns-queue_priority">
		<BR>
		<B>File d'attente de priorité - </B> Ce paramètre est utilisé pour définir l'ordre dans lequel les appels sortants à partir de cette campagne devrait être répondu en ce qui concerne les appels entrants si cette campagne est en mode mixte. Nous ne recommandons pas la mise en appels entrants vers une plus grande priorité que les appels sortants de la campagne parce que les gens font escale dans s'attendre à attendre et les gens sont appelés attendre pour que quelqu'un soit là sur le téléphone.

		<BR>
		<A NAME="vicidial_campaigns-drop_rate_group">
		<BR>
		<B>Multiples campagne Drop Rate Group -</B> Cette fonctionnalité vous permet de définir une campagne comme un membre d-un groupe de la Campagne taux d-abandon, ou un groupe de campagnes dont l-homme appels répondus et les appels de chute pour toutes les campagnes dans le groupe seront combinés en un pourcentage partagée déposer, ou les taux d-abandon. Ceci vous permet d-exécuter plusieurs campagnes à la fois et plus facile à contrôler votre taux de chute. Ceci est particulièrement utile dans le Royaume-Uni où la réglementation permet cette méthode de calcul des taux d-abandon avec une campagne de groupement pour la même compagnie, même s-il ya plusieurs campagnes cette société est en marche pendant le jour même. Pour activer ce pour une campagne, il suffit de sélectionner un groupe de la liste. Il existe 10 groupes définis dans le système par défaut, vous pouvez contacter votre administrateur système d-ajouter d-autres. Par défaut est Disabled.

		<BR>
		<A NAME="vicidial_campaigns-inbound_queue_no_dial">
		<BR>
		<B>Pas de file d'attente entrante Composez -</B> Cette fonctionnalité, si la valeur ENABLED vous permet d'empêcher sortant numérotation automatique de cette campagne s'il ya des appels entrants en attente dans la file d'attente qui font partie des groupes entrantes autorisées fixés dans cette campagne. Mettre cette option à ALL_SERVERS va changer l'algorithme pour calculer tous les appels entrants que les appels actifs sur ce serveur, même si elles sont sur un autre serveur qui permettra de réduire le risque de placer des appels sortants inutiles si vous avez des appels arrivant sur un autre serveur. Par défaut est DISABLED.

		<BR>
		<A NAME="vicidial_campaigns-auto_alt_dial">
		<BR>
		<B>Appeler automatiquement le numéro alternatif -</B> Ce champ est utilisé pour appeler automatiquement le numéro alternatif si les méthodes d'appels RATIO ou ADAPT sont utilisées quand il n'y pas de réponse au numéro de téléphone principale d'une fiche, les statuts NA, B, DC et N. Cette option n'est pas utilisée pour la méthode d'appel MANUAL. EXTENDED suppléant nombres sont des nombres dans le système en dehors de la norme de l'écran principal de l'information. L'aide de vous pouvez avoir des centaines de numéros de téléphone pour un seul client record. Utilisation MULTI_LEAD vous permet d'utiliser un câble séparé pour chaque numéro sur un compte client qui partagent tous une vendor_lead_code commune, et le type de numéro de téléphone pour chacun d'eux est défini avec une étiquette dans le domaine du propriétaire. Cette option permet de désactiver certaines options sur l'écran de la campagne Modifier et afficher un lien vers la page Multi-Alt Paramètres qui vous permet de définir quels types de numéros de téléphone, définis par l'étiquette de chaque plomb, sera composé et dans quel ordre. Cela va créer un filtre spécial de plomb et de modifier le champ Rang de tous les fils à l'intérieur des listes établies à cette campagne afin de les appeler dans l'ordre que vous avez spécifié.

		<BR>
		<A NAME="vicidial_campaigns-dial_timeout">
		<BR>
		<B>Délai d'appel -<\/B> Si défini, les appels qui seraient normalement raccrochés après le délai défini dans extensions.conf le seront après ce nombre de secondes si c'est moins que le délai dans extensions.conf. Cela autorise des délais de changement d'appel rapide de serveur à serveur et limite les effets à une simple campagne. Si vous avez beaucoup de répondeur et de boîte vocales, vous devriez essayer de mettre une valeur entre 21 et 26 et voir si les résultats s'améliorent.

		<BR>
		<A NAME="vicidial_campaigns-campaign_vdad_exten">
		<BR>
		<B>Routage Extension -</B> Ce champ permet à une extension de routage sortant personnalisé. Cela vous permet d'utiliser différentes méthodes de traitement des appels en fonction de la façon dont vous voulez acheminer les appels sortants grâce à votre campagne. Anciennement appelée l'extension VDAD Campagne. 
		<BR>- 8364 - même 8368
		<BR>- 8365 - Enverra l'appel uniquement à un agent sur le même serveur que l'appel est placé sur
		<BR>- 8366 - Utilisé pour des campagnes de presse-1, de diffusion et d'enquête
		<BR>- 8367 - Je vais essayer d'envoyer d'abord l'appel à un agent sur le serveur local, il se penchera sur d'autres serveurs
		<BR>- 8368 - DEFAULT - Permet d'envoyer l'appel vers le prochain agent disponible, peu importe quel serveur ils sont sur
		<BR>- 8369 - Utilisé pour Détection des répondeurs après que, même comportement que 8368
		<BR>- 8373 - Utilisé pour Détection des répondeurs après cette même comportement que 8366
		<BR>- 8374 - Utilisé pour des campagnes de presse-1, de diffusion et d'enquête avec Cepstral Text-to-speech
		<BR>- 8375 - Utilisé pour Détection des répondeurs puis appuyez-1, de diffusion et d'enquête des campagnes avec Cepstral Text-to-speech

		<BR>
		<A NAME="vicidial_campaigns-am_message_exten">
		<BR>
		<B>Message de répondeur -</B> Ce champ sert à saisir l-invite à jouer lorsque l-agent est un répondeur et clique sur le bouton Répondre Message Machine dans le cadre de conférences de transfert. Vous devez définir ce soit à un fichier audio dans le magasin audio ou une invite si TTS TTS est activé sur votre système.

		<BR>
		<A NAME="vicidial_campaigns-waitforsilence_options">
		<BR>
		<B>WaitForSilence Options -</B> Si Wait For Silence est demandée sur les appels qui sont détectés comme répondeur alors ce champ possède ces options. Il ya deux paramètres séparés par une virgule, la première option est combien de temps pour détecter le silence en millisecondes et la seconde option est pour combien de fois de détecter que avant la lecture du message. Par défaut est vide pour les handicapés. Une valeur standard pour ce serait attendre 2 secondes de silence à deux reprises: 2000,2

		<BR>
		<A NAME="vicidial_campaigns-amd_send_to_vmx">
		<BR>
		<B>AMD envoyé au vm exten -<\/B> Ce menu vous permet de définir si un message est laissé sur un répondeur quand il est détecté. L'appel sera immédiatement transmis à l'extention Answering-Machine-Message si AMD est actif et si il est déterminé que l'appel est un répondeur.

		<BR>
		<A NAME="vicidial_campaigns-cpd_amd_action">
		<BR>
		<B>CPD AMD Action - </B> Si vous utilisez le Sangoma ParaXip Call Progress logiciel de détection, vous souhaitez activer ce paramètre, soit la mise à disposition DISPO qui l'appel comme AA et l'accrocher si l'appel est en cours de traitement et n'a pas été envoyée à un agent ou encore MESSAGE qui enverra l'appel à la définition Message de répondeur pour cette campagne. La valeur par défaut est DISABLED.

		<BR>
		<A NAME="vicidial_campaigns-alt_number_dialing">
		<BR>
		<B>Appel du numéro alternatif pour l'agent -</B> Cette option permet à l'agent d'appeler le numéro de téléphone alternatif ou le champ adresse3 après que le numéro de téléphone principal ait été appelé.

		<BR>
		<A NAME="vicidial_campaigns-drop_call_seconds">
		<BR>
		<B>Secondes avant abandon de l'appel -<\/B> C'est le nombre de secondes depuis le moment où la ligne du client est prise jusqu'à ce que l'appel soit considéré comme abandonné, s'applique seulement aux appels sortants.

		<BR>
		<A NAME="vicidial_campaigns-drop_action">
		<BR>
		<B>Drop Action - </B> Ce menu vous permet de choisir ce qui se passe à un appel quand il a attendu plus longtemps que ce qui est prévu dans le Temps avant abandon de l'appel domaine. Hangup simplement raccrocher l'appel, envoyer le message de l'appel Drop EXTEN que vous avez définies ci-après, à la messagerie vocale vous envoyer l'appel à la boîte vocale que vous avez définis ci-dessous et IN_GROUP envoie l'appel à la Entrant groupe qui est défini ci-dessous

		<BR>
		<A NAME="vicidial_campaigns-safe_harbor_exten">
		<BR>
		<B>Extension du port sûr -<\/B> C'est l'extension du dial plan où le fichier audio désiré est localisé sur le serveur.

		<BR>
		<A NAME="vicidial_campaigns-safe_harbor_audio">
		<BR>
		<B>Safe Harbour Audio -</B> Il s'agit du fichier audio rapide qui se joue, si l'action Drop est réglé sur AUDIO. Par défaut est buzz.

		<BR>
		<A NAME="vicidial_campaigns-safe_harbor_menu_id">
		<BR>
		<B>Coffre-fort Menu Appel port -</B> C'est le menu d'appel que l'appel est envoyé à si l'action Drop est réglé sur CALLMENU.

		<BR>
		<A NAME="vicidial_campaigns-voicemail_ext">
		<BR>
		<B>Boîte vocale -</B> Si elle est définie, les appels qui sont normalement abandonné seront redirigés vers une boîte vocale pour écouter et laisser un message.

		<BR>
		<A NAME="vicidial_campaigns-drop_inbound_group">
		<BR>
		<B>Drop de transfert Group - </B> Si Drop action est fixée à IN_GROUP, l'appel sera envoyé à ce groupe d'arrivée si elle parvient Temps avant abandon de l'appel.

		<BR>
		<A NAME="vicidial_campaigns-no_hopper_leads_logins">
		<BR>
		<B>Autoriser la connection aux distributeurs de fiches vides -</B> Si défini à Y, autorise les agents à se connecter à la campagne même si il n'y a pas de fiches chargées dans le distributeur pour cette campagne. Cette fonction est nécessaire pour les campagne de type CLOSER. La valeur par défaut est N.

		<BR>
		<A NAME="vicidial_campaigns-no_hopper_dialing">
		<BR>
		<B>N Hopper Dialing -</B> Si elle est activée, la trémie ne fonctionnera pas pour cette campagne. Cette option n-est disponible que lorsque la méthode du cadran est mis en mode manuel ou INBOUND_MAN. Il est recommandé de ne pas activer cette option si vous avez une base très large de plomb, plus de 100.000 prospects. Avec pas d-appel Hopper, les caractéristiques suivantes ne fonctionnent pas: recyclage du plomb, auto-alt-numérotation, mélanger la liste, mise en ordre avec Xème NEW. Si vous souhaitez utiliser Propriétaire composer seulement vous devez avoir pas d-appel Hopper activé. Par défaut est N pour les handicapés.

		<BR>
		<A NAME="vicidial_campaigns-agent_dial_owner_only">
		<BR>
		<B>Propriétaire composer seulement -</B> Si elle est activée, l-agent ne recevra pistes qu-ils sont dans les paramètres de propriété pour. Si cela est réglé sur Utilisateur, puis l-agent doit être définie par l-utilisateur dans la base de données en tant que propriétaire de ce plomb. Si cela est défini au territoire, le propriétaire de la direction doit correspondre au territoire énumérées dans l-écran de Modification de l-utilisateur pour cet agent. Si ce réglage est à GROUPE_UTILISATEUR le propriétaire du nom de la sonde doit correspondre au groupe d-utilisateurs que l-agent est un membre de. Pour que cette fonction soit la méthode cadran doit être réglé en mode manuel ou INBOUND_MAN Hopper et pas d-appel doit être activé. Par défaut est AUCUN pour les handicapés.

		<?php
		if ($SSuser_territories_active > 0)
			{
			?>
			<BR>
			<A NAME="vicidial_campaigns-agent_select_territories">
			<BR>
			<B>Agent de sélectionner des territoires -</B> Si cette option est activée et que l-agent appartient à au moins un territoire, l-agent aura la possibilité de choisir les territoires à composer mène de. L-agent pourrez voir une liste des territoires disponibles sur login et ils auront la possibilité de retourner à cette liste le territoire pendant la pause pour changer leurs territoires. Pour que cette fonction de travail de la propriétaire composer seulement option doit être définie sur le territoire et les territoires d-utilisateur doit être activé dans les paramètres système.
			<?php
			}
		?>

		<BR>
		<A NAME="vicidial_campaigns-list_order_mix">
		<BR>
		<B>Mélange d'ordre de liste - dépasse les champs d'ordre de fil et destatut de cadran. Emploiera les paramètres de liste et de statut pourl'entrée choisie de mélange de liste dans la section de sous-marinde mélange de liste à la place. Le défaut est HANDICAPÉ.

		<BR>
		<A NAME="vicidial_campaigns-vcl_id">
		<BR>
		<B>Identification de mélange de liste - identification du mélange deliste. Doit être de 2-20 caractères de longueur sans les espaces outoute autre ponctuation spéciale.

		<BR>
		<A NAME="vicidial_campaigns-vcl_name">
		<BR>
		<B>Nom de mélange de liste - nom descriptif du mélange de liste. Doitêtre de 2-50 caractères de longueur.

		<BR>
		<A NAME="vicidial_campaigns-list_mix_container">
		<BR>
		<B>Détail de mélange de liste - la composition de l'entrée de mélangede liste. Contient l'identification de liste, l'ordre de mélange, lespourcentages et les statuts qui composent ce mélange de liste. Lespourcentages toujours doivent additionner jusqu'à 100, et toutes leslistes doivent être en activité et réglées à la campagne pour quel'entrée de mélange d'ordre soit activée.

		<BR>
		<A NAME="vicidial_campaigns-mix_method">
		<BR>
		<B>Méthode de mélange de liste - la méthode de mélanger toutes lesparties du détail de mélange de liste ensemble. EVEN_MIX mélangerades fils de chaque partie intercalée aux autres parties, comme ces1.2.3.1.2.3.1.2.3. IN_ORDER mettra les fils dans l'ordre dans lequelils sont énumérés dans l'écran 1.1.1.2.2.2.3.3.3 de détail demélange de liste. La volonté ALÉATOIRE les a mis dans l'ordreALÉATOIRE 1.3.2.1.1.3.2.1.3. Le défaut est IN_ORDER.

		<BR>
		<A NAME="vicidial_campaigns-agent_extended_alt_dial">
		<BR>
		<B>Agent Screen Extended Alt Dial - </B> Cette fonction permet aux agents d'accéder à des numéros de téléphone suppléant étendue des pistes au-delà de l'Alt Address3 de téléphone et les champs qui peuvent être utilisés dans VICIDIAL de numéros de téléphone au-delà du numéro de téléphone principal. L'étendue des numéros de téléphone peut être composé automatiquement en utilisant la fonction Auto-Alt-Dial VICIDIAL dans les paramètres de campagne, mais l'activation de cette fonctionnalité, agent d'écran permettra également l'agent d'appeler ces numéros à partir de l'écran de leur mandataire, ainsi que de modifier leurs informations.

		<BR>
		<A NAME="vicidial_campaigns-survey_first_audio_file">
		<BR>
		<B>Première Enquête fichier audio - </B> Il s'agit du nom de fichier audio qui se joue dès que le client choisit le téléphone lors de l'exécution d'une étude campagne.

		<BR>
		<A NAME="vicidial_campaigns-survey_dtmf_digits">
		<BR>
		<B>Enquête DTMF Digits - </B> Ce domaine est l'endroit où vous définissez les chiffres que le client peut presse comme une option sur une campagne de sondage. valable chiffres DTMF sont0123456789*#. Toutes les options à l-exception des pas intéressé, troisième et quatrième options chiffre passera à la voie des appels de méthode Enquête.

		<BR>
		<A NAME="vicidial_campaigns-survey_ni_digit">
		<BR>
		<B>Enquête Non Intéressé Digit - </B> Ce domaine est l'endroit où vous définissez le client pressé chiffres qui montrent qu'ils ne sont pas intéressés.

		<BR>
		<A NAME="vicidial_campaigns-survey_ni_status">
		<BR>
		<B>Enquête Non Intéressé Etat - </B> Ce domaine est l'endroit où vous choisissez le statut d'être utilisé pour pas intéressé. S'il est utilisé DNC et la campagne est défini pour utiliser DNC ensuite le numéro de téléphone sera automatiquement ajouté à la liste DNC VICIDIAL interne.et, éventuellement, la campagne de la liste des DNC.

		<BR>
		<A NAME="vicidial_campaigns-survey_opt_in_audio_file">
		<BR>
		<B>Enquête sur Opt-in fichier audio - </B> Il s'agit du nom de fichier audio qui se joue lorsque le client a opté dans l'enquête, a choisi de ne pas-ou pas répondu si la non-réponse-action est fixé à optout. Après ce fichier audio est joué, le sondage de l'action ne soit prise.

		<BR>
		<A NAME="vicidial_campaigns-survey_ni_audio_file">
		<BR>
		<B>Enquête Non Intéressé fichier audio - </B> Il s'agit du nom de fichier audio qui se joue lorsque le client a choisi de l'enquête, a choisi de ne pas-ou pas répondu si la non-réponse-action est fixé à OptIn. Après ce fichier audio est joué, l'appel sera suspendu jusqu'à.

		<BR>
		<A NAME="vicidial_campaigns-survey_method">
		<BR>
		<B>Enquête sur la méthode - </B> Cette option permet de définir ce qui se passe à un appel après que le client a opté en. AGENT_XFER enverra l'appel à la prochaine agent. MESSAGERIE VOCALE envoie l'appel à la boîte vocale qui est spécifié dans la boîte vocale domaine. EXTENSION envoie le client à l'extension définie dans le Enquête Xfer Extension domaine. Hangup se raccrocher le client. CAMPREC_60_WAV enverra au client d'avoir un enregistrement réalisé avec leur réponse, cet enregistrement sera placé dans un dossier nommé comme la campagne de l'intérieur de l'Enquête sur la campagne d'enregistrement Directory. CALLMENU enverra au client dans le menu Appel défini dans la liste de sélection ci-dessous.

		<BR>
		<A NAME="vicidial_campaigns-survey_no_response_action">
		<BR>
		<B>Etude de non-réponse de l'action - </B> C'est là que vous définissez ce qui se passera s'il n'y a pas de réponse à la question de sondage. OptIn ne envoyer l'appel à la méthode d'enquête, si le client en pressant une chiffres DTMF. OptOut envoie le client sur la méthode d'enquête, même si elles ne sont pas sur un chiffre DTMF.

		<BR>
		<A NAME="vicidial_campaigns-survey_response_digit_map">
		<BR>
		<B>Enquête Réponse Digit Map - </B> Il s'agit de la section où vous pouvez définir une description pour aller avec chaque option DTMF chiffres que le client mai sélectionner.

		<BR>
		<A NAME="vicidial_campaigns-survey_xfer_exten">
		<BR>
		<B>Enquête Xfer Extension - </B> Si la méthode d'enquête de l'extension est sélectionné, le client appel sera dirigé vers cette extension dialplan.

		<BR>
		<A NAME="vicidial_campaigns-survey_camp_record_dir">
		<BR>
		<B>Enquête sur la campagne d'enregistrement - Annuaire </B> Si la méthode d'enquête de CAMPREC_60_WAV est sélectionné, le service à la clientèle sera enregistré et placé dans un répertoire nommé d'après la campagne de l'intérieur de ce répertoire.

		<BR>
		<A NAME="vicidial_campaigns-survey_third_digit">
		<BR>
		<B>Enquête sur le troisième chiffre -</B> Cela permet un chemin d-appel tiers si le troisième chiffre tel que défini dans ce domaine est pressé par le client.

		<BR>
		<A NAME="vicidial_campaigns-survey_fourth_digit">
		<BR>
		<B>Enquête quatrième chiffre -</B> Cela permet pour un chemin quatrième appel si la quatrième chiffres comme définis dans ce domaine est pressé par le client.

		<BR>
		<A NAME="vicidial_campaigns-survey_third_audio_file">
		<BR>
		<B>Troisième enquête sur Fichier Audio -</B> Ceci est le fichier audio troisième à être joué sur le choix par le client de l-option de troisième chiffre.

		<BR>
		<A NAME="vicidial_campaigns-survey_third_status">
		<BR>
		<B>Troisième enquête Etat -</B> C-est le statut de troisième utilisés pour l-appel lancé à la sélection par le client de l-option de troisième chiffre.

		<BR>
		<A NAME="vicidial_campaigns-survey_third_exten">
		<BR>
		<B>Enquête Troisième prorogation -</B> Il s-agit de la troisième extension utilisé pour l-appel sur le choix par le client de l-option de troisième chiffre. Par défaut est 8300, qui se bloque immédiatement à l-appel après que le message audio du fichier est joué.

		<BR>
		<A NAME="vicidial_campaigns-agent_display_dialable_leads">
		<BR>
		<B>Agent d-affichage composable Leads -</B> Cette option si elle est activée affiche le nombre de pistes d-accès automatique disponibles dans la campagne dans l-écran de l-agent. Ce numéro est mis à jour dans le système une fois par minute et sera rafraîchie à l-écran tous les agents de quelques secondes.

		<BR>
		<A NAME="vicidial_campaigns-survey_menu_id">
		<BR>
		<B>Menu Appel Enquête -</B> Si la méthode est réglé sur CALLMENU, c'est le menu Appel que le client est envoyé à si elles optent en.

		<BR>
		<A NAME="vicidial_campaigns-survey_recording">
		<BR>
		<B>Enregistrement Enquête -</B> Si elle est activée, cela va démarrer l'enregistrement lorsque l'appel est répondu. Seulement recommandé si la méthode n'est pas réglé pour le transfert à un agent. Par défaut est N pour les handicapés. S'il est défini à Y_WITH_AMD même machine à répondre aux appels de messages détectés seront enregistrées.

		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_campaigns-next_agent_call">
	<BR>
	<B>Appel de l'agent suivant -</B> Cela determine quel agent recevra l'appel suivant quand c'est possible:
	 <BR> &nbsp; - random: ordonne par la valeur aléatoire de mise à jour dans la table vicidial_live_agents
	 <BR> &nbsp; - oldest_call_start: ordonne par la dernière date à laquelle un agent a passé un appel. Résultats des agents recevant globalement un nombre à peu près identique d'appels .
	 <BR> &nbsp; - oldest_call_finish: ordonne suivant la dernière date à laquelle un agent a terminé un appel. L'agent AKA attendant le plus longtemps reçoit le premier appel.
	 <BR> &nbsp; - overall_user_level: ordonne par le user_level de l'agent comme défini dans la table vicidial_users, un user_level plus élévé recevra plus d'appels.
	 <BR> &nbsp; - campaign_rank : ordres par le rang donné à l'agent pour la campagne.Le plus haut à le plus bas.
	 <BR> &nbsp; - campaign_grade_random: donne une plus grande probabilité de recevoir un appel aux agents de rang supérieur.
	 <BR> &nbsp; - fewest_calls : ordres par le nombre d'appels reçus par un agent pource groupe d'arrivée spécifique. Moindres appels d'abord.
	 <BR> &nbsp; - longest_wait_time: commandes par la quantité de temps d-attente agent a été activement pour un appel.

	<BR>
	<A NAME="vicidial_campaigns-local_call_time">
	<BR>
	<B>Temps d'appel local -<\/B> C'est ici que vous indiquez pendant quelles heures vous voulez appeler, comme déterminé par l'heure locale dans la région dans laquelle vous voulez appeler. C'est controlé par le code de la région et est ajusté pendant le temps des Daylight Savings si c'est approprié. Les habitudes générales aux Etat-Unis, de Buisness à Buisness, sont de 9h00 à 17h00 et de Buisness à particulier de 9h00 à 21h00.

	<BR>
	<A NAME="vicidial_campaigns-dial_prefix">
	<BR>
	<B>Préfixe d'appel -</B> Ce champ autorise plus facilement à changer un chemin d'appel vers l'exterieur à travers une méthode differente sans devoir recharger Asterisk. La valeur par défaut 9 est basée sur 91NXXNXXXXXX dans le dial plan du fichier extensions.conf .

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_prefix">
	<BR>
	<B>Préfixe Manuel -</B> Ce champ optionnel vous permet de définir le préfixe doit être utilisé que lors d'un appel numérotation manuelle à partir de l'interface agent, comme l'utilisation de la fonction numérotation manuelle, ou Composez le numéro suivant dans la méthode lorsque la numérotation manuelle, ou numérotation manuelle nombre alt, ou prévue par l'utilisateur seulement rappels. Par défaut est vide pour les handicapés, qui utilisent le préfixe défini dans le champ ci-dessus. Cette option ne pas interférer avec l'option Préfixe 3way.

	<BR>
	<A NAME="vicidial_campaigns-omit_phone_code">
	<BR>
	<B>Omettre le Phone Code -</B> Ce champ permet de ne pas utiliser le champ phone_code lors d'appels passés depuis VICIDIAL. Par exemple si vous appelez de France vers la France vous devriez avoir 33 dans le champ phone_code de chaque fiche, mais vous voulez utiliser 10 chiffres dans le dial plan extensions.conf au lieu de 33 puis 10 chiffres. La valeur par défaut est N.

	<BR>
	<A NAME="vicidial_campaigns-campaign_cid">
	<BR>
	<B>CallerID de la campagne -</B> Ce champ autorise à envoyer un numéro de callerId personnalisé sur les appels sortants. C'est le numéro de callerId que vous voullez montrer à la personne que vous appellez. La valeur par défaut est UNKNOW. Si vous utilisez des T1 ou E1s pour appeler vers l'extérieur cette option est seulement valable si vous utilisez des PRIs - ISDN T1s ou E1s - qui ont la fonction CallerId personnalisable activée, cela ne fonctionne pas avec le service Robbed-bit et les circuits -RBS-. Cela fonctionne aussi avec la plupart des fournisseurs VOIP -SIP ou trunks IAX- qui autorisent un callerId de sortie dynamique. Le callerID personnalisé ne s'applique qu'aux appels passés directement depuis la campagne VICIDIAL, n'importe quel appel avec une tierce personne ou transféré n'enverra pas le callerId personnalisé. NOTE: Parfois en mettant UNKWOWN ou PRIVATE dans ce champ c'est le callerId par défaut de votre ligne qui sera transmis pour les appels. Vous pouvez tester cela et mettre 0000000000 à la place dans le champs calleID si vous ne voulez pas envoyer votre CallerID.

	<BR>
	<A NAME="vicidial_campaigns-use_custom_cid">
	<BR>
	<B>Personnalisé CallerID -</B> Lorsqu'il est réglé sur Y, cette option vous permet d'utiliser le domaine security_phrase dans le tableau vicidial_list que le CallerID d'envoyer lors de la passation pour chaque chef de file spécifique. Si ce champ n'a pas de CID en elle, puis la campagne CallerID défini ci-dessus sera utilisé à la place. Cette option permet de désactiver la liste CallerID Remplacer s'il ya un cadeau CID dans le domaine security_phrase. Par défaut est N. Lorsqu'il est réglé sur le code zonal vous avez la possibilité d'aller dans le sous-menu AC-CID et de définir plusieurs callerids être utilisés par indicatif régional.

	<BR>
	<A NAME="vicidial_campaigns-campaign_rec_exten">
	<BR>
	<B>Extention d'enregistrement -</B> Ce champs autorise à avoir une extension personnalisée d'enregistrement pour l'utiliser avec VICIDIAL. Cela autorise à utiliser différentes extensions selon le temps maximum d'enregistrement que vous voulez autoriser et le type de codec que vous voulez utiliser. L'exten par defaut est 8309 qui, si vous avez suivi les exemples de la SCRATCH_INSTALL, enregistrera dans le format WAV jusqu'à une heure. Une autre option incluse dans les exemples est 8310 qui enregistrera dans le format GSM jusqu'à une heure.

	<BR>
	<A NAME="vicidial_campaigns-campaign_recording">
	<BR>
	<B>Enregistrement de la campagne -</B> Ce menu permet de choisir le niveau d'enregistrement autorisé pour cette campagne. NEVER désactive l'enregistrement sur l'application client. ONDEMAND est la valeur par défaut et permet à l'agent de démarrer et arrêter l'enregistrement si nécessaire. ALLCALLS démarrera l'enregistrement pour tous les appels passés vers un agent. ALLFORCE démarrera l'enregistrement à chaque appel passés vers un agent sans donné la possibilité à l'agent de stopper l'enregistrement. Pour ALLCALLS et ALLFORCE il y a une option pour utiliser un délai d'enregistrement afin de réduire les enregistrements et la charge système.

	<BR>
	<A NAME="vicidial_campaigns-campaign_rec_filename">
	<BR>
	<B>Nom du fichier d'enregistrement de la campagne -</B> Ce champ vous permet de personnaliser le nom de l'enregistrement quand la campagne est ONDEMAND ou ALLCALLS. Les variables sont permis CAMPAIGN CUSTPHONE FULLDATE TINYDATE EPOCH AGENT VENDORLEADCODE LEADID. La valeur par défaut est FULLDATE_AGENT et devrait ressembler à ceci 20051020-103108_6666. Un autre exemple est CAMPAIGN_TINYDATE_CUSTPHONE qui devrait ressembler à ceci TESTCAMP_51020103108_3125551212. 50 char max.

	<BR>
	<A NAME="vicidial_campaigns-allcalls_delay">
	<BR>
	<B>Délai d'enregistrement -</B> Uniquement pour les enregistrements ALLCALLS et ALLFORCE. Cette valeur est le nombre de secondes après lesquelles commence l'enregistrement des appels. La valeur par défaut est 0.

	<BR>
	<A NAME="vicidial_campaigns-per_call_notes">
	<BR>
	<B>Appelez-notes par Appel -</B> La définition de cette option pour activer permettra aux agents d'entrer dans les notes pour chaque appel ils ont accès dans l'interface agent. Le champ de saisie des notes apparaît en dessous du champ de commentaires dans l'interface agent. En outre, si le Groupe de l'agent utilisateur est autorisé à afficher des journaux d'appels, puis l'agent sera en mesure d'afficher des notes d'appel passées pour une avance à tout moment. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-agent_lead_search">
	<BR>
	<B>Recherche de plomb Agent -</B> La définition de cette option pour activer permettra aux agents de rechercher des pistes et afficher des informations de plomb pendant la pause dans l'interface agent. En outre, si le Groupe de l'agent utilisateur est autorisé à afficher des journaux d'appels, puis l'agent sera en mesure d'afficher des notes d'appel passées pour toute avance qu'ils sont affichés sur les informations. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-agent_lead_search_method">
	<BR>
	<B>Méthode de recherche d'agent principal -</B> Si la recherche de plomb Agent est activé, ce paramètre définit l'endroit où l'agent ne sera autorisé à rechercher des pistes. Système va rechercher l'ensemble du système, sera CAMPAIGNLISTS chercher au cœur de toutes les listes actives au sein de la campagne, sera CAMPLISTS_ALL chercher au cœur de toutes les listes actives et inactives au sein de la campagne, LISTE va rechercher uniquement dans le ID de liste numérotation manuelle tel que défini dans la campagne . Par défaut est CAMPLISTS_ALL. Une de ces options avec USER_ en face ne recherche que dans les pistes qui ont le champ propriétaire correspondant de l'ID utilisateur de l'agent, les options avec GROUP_ en face ne recherche que dans les pistes qui ont le champ propriétaire correspondant au groupe d'utilisateurs que l'utilisateur est un membre de la, les options avec TERRITORY_ en face ne recherche que dans les pistes qui ont le champ propriétaire adéquation des territoires que l'agent a choisi.

	<BR>
	<A NAME="vicidial_campaigns-campaign_script">
	<BR>
	<B>Script campagne ->/B> Ce menu vous permet de choisir le script qui apparaîtra sur l'écran des agents pour cette campagne. Mettez NONE pour ne pas montrer de script pour cette campagne.

	<BR>
	<A NAME="vicidial_campaigns-get_call_launch">
	<BR>
	<B>Consigne de lancement d'appel -</B> Ce menu vous permet de choisir si vous voulez lancer automatiquement la page de web-form dans une fenêtre séparée, passer automatiquement sur l'onglet de script ou ne rien faire quand un appel est envoyé par un agent dans cette campagne. Si les champs de liste personnalisées sont activées sur votre système, formulaire s'ouvrira sur l'onglet FORMULAIRE lors de la connexion d'un appel à un agent.

	<BR>
	<A NAME="vicidial_campaigns-xferconf_a_dtmf">
	<BR>
	<B>Xfer-Conf DTMF -</B> Ces quatre domaines pour vous permettre d-avoir deux ensembles de transfert de conférence et les préréglages DTMF. Lorsque l-appel ou de la campagne est chargé, le script vicidial.php montrera deux boutons sur le transfert-cadre de conférences et automatiquement le numéro à composer et envoyer les champs DTMF lorsqu-ils sont pressés. Si vous souhaitez autoriser consultatif transferts, un fronter à un proche, que l-agent utiliser la case à cocher consultatif, qui ne fonctionne pas pour les tiers VICIDIAL demande de consultation. Pour ceux qui viennent de l-agent, cliquez le bouton de cadran avec la clientèle. Alors l-agent pouvez aussi le laisser-3way-Call et passer à leur prochain appel. Si vous souhaitez autoriser les transferts aveugles de clients à un script AGI VICIDIAL l-exploitation forestière ou un SVI, puis AXFER lieu dans le numéro à composer sur le terrain. Vous pouvez également spécifier une extension personnalisée après la AXFER, par exemple si vous voulez faire un appel vers un IVR spéciaux que vous avez défini à l-extension 83900 vous mettriez AXFER83900 dans le numéro à composer sur le terrain.

	<BR>
	<A NAME="vicidial_campaigns-quick_transfer_button">
	<BR>
	<B>Quick Transfer Button -</B> Cette option permet d-ajouter un bouton de transfert rapide à l-écran de l-agent en dessous du bouton Transfer-Conf qui permettra un clic aveugles transfert d-appels à la sélectionnés en-groupe ou un numéro. IN_GROUP va envoyer des appels au groupe par défaut Xfer pour cette campagne, ou en-groupe s-il y avait un appel entrant. Les options prédéfinies vous enverrons les appels à la preset sélectionnée. Par défaut est N pour les handicapés. Les options verrouillés sont utilisés pour verrouiller la valeur de la touche de transfert rapide, même si l'agent utilise les fonctionnalités de conférence de transfert lors d'un appel avant d'utiliser le bouton de transfert rapide.

	<BR>
	<A NAME="vicidial_campaigns-custom_3way_button_transfer">
	<BR>
	<B>Transfert personnalisé Bouton 3-voies -</B> Cette option permet d'ajouter un bouton de transfert personnalisé à l'écran ci-dessous sur le bouton d'agent de transfert-Conf qui permettra d'un clic à trois voies des appels en utilisant le préréglage sélectionné ou sur le terrain. Les options seront PRESET_ passer des appels en utilisant la valeur définie prédéfinie. Les options seront field_ passer des appels en utilisant le numéro dans le champ sélectionné à partir du plomb. HANDICAPÉS ne sera pas afficher le bouton sur l'écran l'agent. Les options seront PARK_ garer le client avant de composer. Par défaut est DISABLED. L'option sera VIEW_PRESET il suffit d'ouvrir le cadre de transfert et le cadre prédéfini. L'option VIEW_CONTACTS va ouvrir une fenêtre de recherche de contacts, cela ne fonctionnera que si Presets Activer est réglé sur CONTACTS.

	<BR>
	<A NAME="vicidial_campaigns-prepopulate_transfer_preset">
	<BR>
	<B>Préremplir Transfert Preset -</B> Cette option permet de remplir le champ Numéro de réseau commuté dans le cadre de transfert de conférence de l-écran de l-agent s-il est défini. Par défaut est N pour les handicapés.

	<BR>
	<A NAME="vicidial_campaigns-enable_xfer_presets">
	<BR>
	<B>Activer Presets de transfert -</B> Cette option permettra aux présélections de menu sous de comparaître à la partie supérieure de la page de modification de la campagne, et aussi vous aurez la possibilité de spécifier prédéfinis numéros de numérotation pour les agents à utiliser dans le cadre de transfert de la conférence de l'interface de l'agent. Par défaut est DISABLED. CONTACTS est une option seulement si Information_sur_le_contact est activé sur votre système, qui est une fonction personnalisée.

	<BR>
	<A NAME="vicidial_campaigns-enable_xfer_presets">
	<BR>
	<B>Activer Presets de transfert -</B> Cette option permettra aux présélections de menu sous de comparaître à la partie supérieure de la page de modification de la campagne, et aussi vous aurez la possibilité de spécifier prédéfinis numéros de numérotation pour les agents à utiliser dans le cadre de transfert de la conférence de l'interface de l'agent. Par défaut est DISABLED. CONTACTS est une option seulement si Information_sur_le_contact est activé sur votre système, qui est une fonction personnalisée.

	<BR>
	<A NAME="vicidial_campaigns-hide_xfer_number_to_dial">
	<BR>
	<B>Masquer le numéro de transfert à composer -</B> Cette option permet de cacher le numéro à composer le terrain dans le cadre de transfert de la conférence de l'interface de l'agent. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-ivr_park_call">
	<BR>
	<B>Parc Appel IVR -</B> Cette option permettra à un agent de parquer un appel avec un bouton séparé IVR APPEL DU PARC sur leur interface de l'agent, si cette option est activée ou ENABLED_PARK_ONLY. L'option ENABLED_PARK_ONLY permettra à l'agent d'envoyer l'appel à parc, mais ne cliquez pas sur pour récupérer l'appel, comme l'option Activé. L'option ENABLED_BUTTON_HIDDEN permet à la fonction via l'API uniquement. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-ivr_park_call_agi">
	<BR>
	<B>Parc Appel IVR AGI -</B> Si le champ Parc IVR Appel n'est pas désactivé, alors ce champ est utilisé comme la chaîne de l'application AGI que le client est envoyé. Il s'agit d'un réglage qui doit être définie par votre administrateur si possible.

	<BR>
	<A NAME="vicidial_campaigns-timer_action">
	<BR>
	<B>Minuterie d-action -</B> Cette fonctionnalité vous permet de déclencher des actions après un certain laps de temps. D1 et D2 options DIAL va lancer un appel à la presets Transfer Conference Nombre et les envoyer à la session d-agent, ce n-est généralement utilisé pour les applications IVR AGI simple validation ou tout simplement pour jouer un message pré-enregistré. WebForm ouvrira l-adresse formulaire web. MESSAGE_ONLY va simplement afficher le message qui est dans le champ ci-dessous. AUCUNE désactive cette fonctionnalité et la valeur par défaut. HANGUP raccroche l'appel lorsque la minuterie est déclenchée, CALLMENU enverra l'appel au menu Appel spécifié dans le champ Destination minuterie d'action, EXTENSION enverra l'appel à l'extension qui est spécifié dans le champ Destination minuterie d'action, IN_GROUP enverra l'appel à l'en-groupe spécifié dans le champ Destination minuterie d'action.

	<BR>
	<A NAME="vicidial_campaigns-timer_action_message">
	<BR>
	<B>Minuterie d-action Message -</B> Tel est le message qui s-affiche sur l-écran de l-agent au moment de l-action Timer est déclenché.

	<BR>
	<A NAME="vicidial_campaigns-timer_action_seconds">
	<BR>
	<B>Minuterie d-action Seconds -</B> Il s-agit de la quantité de temps après l-appel est connecté au client que l-action Timer est déclenchée. Par défaut est -1, qui est aussi inactive.

	<BR>
	<A NAME="vicidial_campaigns-timer_action_destination">
	<BR>
	<B>Destination action minuterie -</B> Ce champ est l'endroit où vous spécifiez le menu Appel, Extension ou en groupe que vous voulez que l'appel envoyé à l'action si l'heure est défini CALLMENU, EXTENSION ou IN_GROUP. Par défaut est vide.

	<BR>
	<A NAME="vicidial_campaigns-scheduled_callbacks">
	<BR>
	<B>Rappels programmés -</B> Cette option autorise un agent à statuer un appel comme CALLBK et à choisir une date et une heure à laquelle la fiche sera réactivée.

	<BR>
	<A NAME="vicidial_campaigns-scheduled_callbacks_alert">
	<BR>
	<B>Rappels réguliers d'alerte -</B> Cette option permet de la ligne d'état rappels dans l'interface agent d'être rouge, clignote ou clignote en rouge quand il ya AGENTONLY prévue rappels qui ont frappé leur temps de déclenchement et la date. Par défaut est NONE pour la ligne d'état standard. Les options reporter s'arrête de clignoter et-ou l'affichage en rouge lorsque vous vérifiez les rappels, jusqu'à ce que le nombre de rappels des changements.

	<BR>
	<A NAME="vicidial_campaigns-scheduled_callbacks_count">
	<BR>
	<B>Rappels réguliers comte -</B> Cette option vous permet de définir si seuls rappels VIVANTS, l'utilisateur seulement rappels réguliers qui ont frappé leur date de déclenchement et le temps, ou les rappels ALL_ACTIVE, l'utilisateur ne les rappels qui sont actives dans le système ainsi que les rappels vivent, doivent be3 compté, il int la section d'alerte de rappel d'agent sur l'écran l'agent. Par défaut est ALL_ACTIVE.

	<BR>
	<A NAME="vicidial_campaigns-callback_days_limit">
	<BR>
	<B>Prévu rappels Jours Limite -</B> Cette option vous permet de réduire l'agent rappels réguliers de calendrier pour un nombre sélectionnable de jours à partir d'aujourd'hui, la totalité des 12 mois civils seront toujours affichées, mais seulement le nombre de jours sera sélectionnable. Par défaut est 0 pour un nombre illimité.

	<BR>
	<A NAME="vicidial_campaigns-callback_hours_block">
	<BR>
	<B>Prévu rappels Heures Bloquer -</B> Cette option vous permet de restreindre un rappel useronly prévu d'être affiché sur la liste de rappel jusqu'à ce que l'agent X heures après qu'elle a été définie. Par défaut est 0 pour pas de bloc.

	<BR>
	<A NAME="vicidial_campaigns-callback_list_calltime">
	<BR>
	<B>Rappels réguliers bloc Calltime -</B> Cette option, si activée, permettra d'éviter le rappel prévu dans la liste de rappel d'agent d'être composé si elle est en dehors de la calltime prévue pour la campagne. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-my_callback_option">
	<BR>
	<B>Mon défaut Checkbox rappels -</B> Cette option vous permet de prédéfinir la case à cocher Mon rappel sur l'écran de rappel agent programmé. Enregistrés seront cochez la case automatiquement pour chaque appel. Par défaut est désactivé.

	<BR>
	<A NAME="vicidial_campaigns-wrapup_seconds">
	<BR>
	<B>Temps de conclusion -<\/B> Nombre de secondes pendant lesquelles l'agent est forcé à attendre avant de pouvoir recevoir ou passer un nouvel appel. Le timer commence dès que l'agent à raccrocher - ou dans le cas de l'appel du numéro alternatif quand l'agent à terminer la fiche - La valeur par défaut est 0. Si le timer se termine avant que l'agent n'ait statué l'appel, l'agent ne passera pas à l'appel suivant tant qu'il n'a pas sélectionné un statut.

	<BR>
	<A NAME="vicidial_campaigns-wrapup_message">
	<BR>
	<B>Message de conclusion -<\/B> C'est un message spécifique à la campagne à afficher si le temps de conclusion est défini.

	<BR>
	<A NAME="vicidial_campaigns-disable_dispo_screen">
	<BR>
	<B>Désactiver l'écran Dispo -</B> Cette option vous permet de désactiver l'écran de la disposition dans l'interface agent. Le champ Désactiver Statut Dispo ci-dessous doit être rempli pour que cette option fonctionne. Par défaut est DISPO_ENABLED. L'option ne sera pas DISPO_SELECT_DISABLED désactiver l'écran de dispo complètement, mais afficher l'écran de dispo sans dispositions, cette option ne doit être utilisé si vous voulez forcer vos agents à utiliser votre logiciel de CRM qui enverra le statut du système via l'API.

	<BR>
	<A NAME="vicidial_campaigns-disable_dispo_status">
	<BR>
	<B>Désactiver Statut Dispo -</B> Si l'option Désactiver l'écran est réglé sur Dispo DISPO_DISABLED, ce champ doit être rempli en jeu. Vous pouvez utiliser n'importe quel caractère que vous voulez pour ce domaine tant qu'il est de 1 à 6 caractères de longueur avec des lettres et des chiffres.

	<BR>
	<A NAME="vicidial_campaigns-screen_labels">
	<BR>
	<B>Les étiquettes de l'écran de l'agent -</B> Vous pouvez sélectionner un ensemble d'étiquettes d'écran agents à utiliser avec cette option. Par défaut est - SYSTEM-SETTINGS - pour les étiquettes par défaut.

	<BR>
	<A NAME="vicidial_campaigns-status_display_fields">
	<BR>
	<B>Les champs d'affichage d'état -</B> Vous pouvez sélectionner les variables pour les appels seront affichés dans la ligne d'état de l'écran l'agent. CALLID affiche l'ID 20 caractères appel unique, LEADID affiche l'ID de plomb du système, ListId affiche l'ID de liste. Par défaut est CALLID.

	<BR>
	<A NAME="vicidial_campaigns-use_internal_dnc">
	<BR>
	<B>Utiliser la liste DNC interne -</B> Cela défini si cette campagne doit filter les fiches par rapport à la liste DNC. Si ce champ est à Y alors le distributeur de fiches recherchera chaque numéro de téléphone dans la liste DNC avant de la placer dans le distributeur de fiches. Si il est dans la liste DNC alors le statut de la fiche sera changer en DNCL, il ne pour donc pas être appelé. La valeur par défaut est N. L-option AreaCode est comme l-option Y, sauf qu-il est utilisé pour filtrer également un code région entière en Amérique du Nord d-être appelé, dans ce cas en utilisant l-entrée 201XXXXXXX dans la liste DNC serait de bloquer tous les appels à l-indicatif régional 201 si elle est activée.

	<BR>
	<A NAME="vicidial_campaigns-use_campaign_dnc">
	<BR>
	<B>Utilisez Campagne DNC List - </B> Cela définit si cette campagne est de filtrer les mène à une liste DNC qui est spécifique à cette campagne seulement. Si elle est définie à Y, la trémie sera, pour chaque numéro de téléphone dans la campagne des DNC avant de le placer dans la trémie. Si elle est dans la campagne des DNC liste, il va changer le statut qui conduisent à DNCC il ne peut donc pas être composé. La valeur par défaut est N. L-option AreaCode est comme l-option Y, sauf qu-il est utilisé pour filtrer également un code région entière en Amérique du Nord d-être appelé, dans ce cas en utilisant l-entrée 201XXXXXXX dans la liste DNC serait de bloquer tous les appels à l-indicatif régional 201 si elle est activée.

	<BR>
	<A NAME="vicidial_campaigns-closer_campaigns">
	<BR>
	<B>Groupes entrants autorisés -</B> For CLOSER campaigns only. Here is where you select the inbound groups you want agents in this CLOSER campaign to be able to take calls from. It is important for BLENDED inbound-outbound campaigns only to select the inbound groups that are used for agents in this campaign. The calls coming into the inbound groups selected here will be counted as active calls for a blended campaign even if all agents in the campaign are not logged in to receive calls from all of those selected inbound groups.

	<BR>
	<A NAME="vicidial_campaigns-agent_pause_codes_active">
	<BR>
	<B>Activer les codes de la pause des agents -</B> Autorise les agents à sélectionner un code de pause quand il clique sur le bouton PAUSE dans vicidial.php. Les codes de pause sont définissable par campagne dans le bas de la vue détaillée de la campagne et sont stockés dans la table vicidial_agent_log. La valeur par défaut est N. Force va forcer les agents à choisir un code PAUSE si elles cliquez sur le bouton PAUSE.

	<BR>
	<A NAME="vicidial_campaigns-auto_pause_precall">
	<BR>
	<B>Auto Pause pré-Appel de travail -</B> Dans l'auto-sélecteur de mode, ce paramètre si elle est activée seront mis à l'agent de pause automatiquement lorsque l'agent clique sur l'une des fonctions suivantes, qui les oblige à être en pause-Manuel Dial, Fast Dial, Recherche de plomb, Appelez-View Log, rappels Vérifiez, Entrez le code de pause. Par défaut est N pour inactive.

	<BR>
	<A NAME="vicidial_campaigns-auto_resume_precall">
	<BR>
	<B>Auto Reprendre pré-Appel de travail -</B> Dans l'auto-sélecteur de mode, ce paramètre si elle est activée fixera l'agent à l'état actif automatiquement lorsque l'agent clique sur, ou annule, sur l'une des fonctions suivantes, qui les oblige à être en pause Dial-Manuel, Fast Dial, Recherche de plomb, Appelez Connectez-vous Voir, rappels Vérifiez, Entrez le code de pause. Par défaut est N pour inactive.

	<BR>
	<A NAME="vicidial_campaigns-auto_pause_precall_code">
	<BR>
	<B>Auto Pause pré-Appel de code -</B> Si la fonction Auto Pause de travail fonction de pré-appel ci-dessus est active, et les codes de pause Agent est actif, ce paramètre sera le code de pause qui est utilisé lorsque l'agent est en pause pour ces activités. Par défaut est PRECAL.

	<BR>
	<A NAME="vicidial_campaigns-disable_alter_custdata">
	<BR>
	<B>Désactiver la modification des données du client -</B> Si défini à Y alors les données de la fiche d'un client ne sont pas modifiées quand un agent passe l'appel. La valeur pas défaut est N.

	<BR>
	<A NAME="vicidial_campaigns-disable_alter_custphone">
	<BR>
	<B>Désactiver Alter clientèle Téléphone - </B> Si la valeur de Y, ne modifie pas le client numéro de téléphone lors d'un agent dispositions de l'appel. La valeur par défaut est Y. Utilisez l-option Masquer pour supprimer complètement le numéro de téléphone du client depuis l-écran de l-agent.

	<BR>
	<A NAME="vicidial_campaigns-display_queue_count">
	<BR>
	<B>Agent Afficher Queue Count - </B> Si la valeur de Y, lorsque le client est en attente d'un agent, la file d'attente de demande d'affichage en haut de l'agent de l'écran devient rouge et indique le nombre d'appels en attente. Le défaut est Y.

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_override">
	<BR>
	<B>Composition manuelle Override -</B> Le réglage peut l'emporter sur les utilisateurs de réglage de la capacité numérotation manuelle pour les agents quand ils sont enregistrés dans cette campagne. NONE suivra la mise en utilisateurs, ALLOW_ALL permettra à tout agent connecté dans cette campagne pour passer des appels numérotation manuelle, DISABLE_ALL ne permettra à personne connecté à cette campagne pour passer des appels numérotation manuelle. Par défaut est NONE.

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_list_id">
	<BR>
	<B>Identification manuelle de liste de cadran - le list_id de défaut àemployer quand des placces d'un agent un appel manuel et un nouveaudisque de fil est créés dans le vicidial_list. Le défaut est 999.Ce champ peut contenir des chiffres seulement.

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_filter">
	<BR>
	<B>Manuelle Filter - </B> Cela vous permet de filtrer les appels que les agents font en mode manuel composer pour cette campagne par une combinaison des éléments suivants: DNC - à coup sur, CAMPAIGNLISTS - le nombre doit être dans les listes pour la campagne, AUCUN - pas de filtre sur le cadran ou manuel rapide composer des listes. CAMPLISTS_ALL - comportera des listes inactives dans la recherche pour le nombre.

	<BR>
	<A NAME="vicidial_campaigns-manual_preview_dial">
	<BR>
	<B>Dial Aperçu Manuel -</B> Cela permet à l'agent en mode numérotation manuelle pour voir le principal de l'information quand ils cliquez Composez le numéro suivant avant de composer activement l'appel téléphonique. Il ya un lien en option pour sauter la tête et de passer à la suivante si elle est sélectionnée. Par défaut est PREVIEW_AND_SKIP.

	<BR>
	<A NAME="vicidial_campaigns-api_manual_dial">
	<BR>
	<B>Composition manuelle API -</B> Cette option vous permet de définir l'API agent de faire soit un appel à la fois, STANDARD, ou la capacité de la file d'attente des appels numérotation manuelle et de les faire composer automatiquement une fois que l'agent va le mettre en pause ou est disponible pour prendre leur prochain appel à la option pour désactiver la numérotation automatique de ces appels, file d'attente ou QUEUE_AND_AUTOCALL qui est le même que file d'attente mais sans l'option pour désactiver la numérotation automatique de ces appels. Si un agent a plus d'un appel en file d'attente pour eux, ils verront le nombre de combien d'appels numérotation manuelle sont en file d'attente juste au-dessous sur le bouton Pause, ou Composez le bouton numéro suivant. Nous suggérons que si QUEUE est utilisé que vous envoyez en utilisant l'API actions de la preview = OUI option de sorte que vous ne sont pas reprises pour composer les appels de l'agent sans préavis. En outre, si vous utilisez file d'attente et fortement en utilisant les appels de numérotation manuelle à une méthode cadran MANUEL non, nous recommandons de régler le Pause agent après chaque option Appel à Y. par défaut est Standard.

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_call_time_check">
	<BR>
	<B>Durée de l'appel Vérification manuelle -</B> Si cette option est activée, il va vérifier tous les appels numérotation manuelle pour s'assurer qu'ils sont dans les paramètres de temps d'appel fixés pour la campagne. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-manual_dial_cid">
	<BR>
	<B>Composition manuelle CID -</B> Ceci définit si un agent des appels numérotation manuelle aura les paramètres de campagne CallerID utilisé, ou de leurs agents téléphoniques paramètres CallerID utilisé. Par défaut est CAMPAGNE. Si l'option Utiliser personnalisé campagne CID est activée ou de la Campagne liste Override réglage CID est utilisé, ce paramètre sera ignoré.

	<BR>
	<A NAME="vicidial_campaigns-post_phone_time_diff_alert">
	<BR>
	<B>Message Téléphone Décalage horaire alerte -</B> Cette fonction manuelle cadran seule, si elle est activée, va afficher une alerte si le fuseau horaire pour le code postal de plomb, ou le code postal, est différente de la zone de temps de l'indicatif régional du numéro de téléphone pour le plomb. L'option OUTSIDE_CALLTIME_ONLY ne montrent l'alerte si les deux fuseaux horaires sont différents et l'un des fuseaux horaires est en dehors de la durée d'appel choisi pour la campagne. OUTSIDE_CALLTIME_PHONE ne fera que vérifier le fuseau horaire du numéro de téléphone de la tête et d'alerter si elle est en dehors du temps d'un appel local. OUTSIDE_CALLTIME_POSTAL ne fera que vérifier le fuseau horaire du code postal du plomb et d'alerter si elle est en dehors du temps d'un appel local. OUTSIDE_CALLTIME_BOTH va vérifier le code postal et le numéro de téléphone pour être dans le délai d'un appel local, même si elles sont dans le même fuseau horaire. Ces alertes seront afficher dans l'info journal des appels, Informations sur la liste des rappels, des résultats de recherche d'info, quand un chef de file est composé et quand un chef de file est visualisé. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-agent_clipboard_copy">
	<BR>
	<B>Agent de presse-papiers de copie d'écran - </B> Cette fonctionnalité est actuellement disponible que pour Internet Explorer. Cette fonctionnalité vous permet de sélectionner un domaine qui sera copiée dans le presse-papiers de l'ordinateur de l'agent sur l'ordinateur d'un appel d'être envoyées à un agent. Commune utilise pour cela sont pour faciliter le collage de numéros de compte ou des numéros de téléphone en héritage les applications client à l'agent d'ordinateur.

	<BR>
	<A NAME="vicidial_campaigns-three_way_call_cid">
	<BR>
	<B>3-Way Outbound Call CallerID - </B> Cela définit ce qui est envoyé en tant que sortant CallerID nombre de 3-way appels effectués par l'agent, la campagne utilise la campagne personnalisée CallerID, client utilise le numéro de client qui est actif sur les agents de l'écran et utilise les CallerID AGENT_PHONE le téléphone pour que l'agent est entré dans. AGENT_CHOOSE permet de choisir l'agent qui CallerID à utiliser pour les 3-way appels à partir d'une liste de choix. CUSTOM_CID utilisera le CID personnalisé qui est défini dans le champ de la table security_phrase vicidial_list pour le plomb.

	<BR>
	<A NAME="vicidial_campaigns-three_way_dial_prefix">
	<BR>
	<B>3-Way Call Préfixe de numérotation - </B> Cela définit ce qui est utilisé comme préfixe pour les 3-way appels, par défaut est vide de sorte que la campagne de préfixe est utilisé, passthru afin que vous puissiez entendre sonner est de 88.

	<BR>
	<A NAME="vicidial_campaigns-customer_3way_hangup_logging">
	<BR>
	<B>Logging Raccrocher à la clientèle 3-voies -</B> Si cette option est activée, le user_call_log se connectera quand un raccrochage à la clientèle jusqu'à s'ils raccrocher pendant un appel 3-way. En outre, cela peut permettre au Client d'action de raccrochage 3-way si l'on est defineed ci-dessous. Par défaut est Enabled.

	<BR>
	<A NAME="vicidial_campaigns-customer_3way_hangup_seconds">
	<BR>
	<B>Secondes hangup clientèle 3-voies -</B> Si le Client 3-way journalisation est activée, cette option vous permet de définir le nombre de secondes après le raccrochage client est détecté avant qu'il ne soit connecté et l'action à la clientèle en option raccrochage 3-way est exécuté. Par défaut est de 5 secondes.

	<BR>
	<A NAME="vicidial_campaigns-customer_3way_hangup_action">
	<BR>
	<B>Raccrocher à la clientèle d'action 3-voies -</B> Si le Client 3-way journalisation est activée, cette option vous permet d'avoir l'écran l'agent raccroche automatiquement sur l'appel et passer à l'écran DISPO si cette option est réglée sur DISPO. Par défaut est NONE.

	<?php
	if ($SSqc_features_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_campaigns-qc_enabled">
		<BR>
		<B>QC Activé - </B> Mise en ce domaine permet à Y pour l'agent de contrôle de la qualité caractéristiques au travail. La valeur par défaut est N.

		<BR>
		<A NAME="vicidial_campaigns-qc_statuses">
		<BR>
		<B>Statuts QC - </B> Cette zone est l'endroit où vous choisissez ce qui entraîne des statuts doit être dépassé par le système de QC. Placez un contrôle à côté de l'état que vous voulez examiner QC. 

		<BR>
		<A NAME="vicidial_campaigns-qc_shift_id">
		<BR>
		<B>QC Shift - </B> Il s'agit du changement de calendrier utilisé pour tirer QC pour une campagne. Les jours de la semaine sont ignorées pour ces fonctions.

		<BR>
		<A NAME="vicidial_campaigns-qc_get_record_launch">
		<BR>
		<B>Record QC Get lancement </B> Cela permet à l'une des actions suivantes peut être déclenché sur un agent QC recevoir un nouveau record.

		<BR>
		<A NAME="vicidial_campaigns-qc_show_recording">
		<BR>
		<B>QC Voir Recording - </B> qui permet un enregistrement qui mai être liée à la QC record à afficher dans le QC agent écran.

		<BR>
		<A NAME="vicidial_campaigns-qc_web_form_address">
		<BR>
		<B>QC WebForm Adresse - </B> Il s'agit de l'adresse du site web d'un agent QC pouvez aller à en cliquant sur le lien dans la WebForm QC écran.

		<BR>
		<A NAME="vicidial_campaigns-qc_script">
		<BR>
		<B>Script QC - </B> C'est le script qui peut être utilisé par les agents QC SCRIPT dans l'onglet de la QC écran.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_campaigns-vtiger_search_category">
	<BR>
	<B>Recherche Catégorie Vtiger - </B> Si Vtiger intégration est activé dans les paramètres du système puis de définir ce paramètre lorsque l'vtiger_search.php page de recherche pour le numéro de téléphone qui a été entré. Il ya 4 options qui peuvent être utilisés dans ce domaine: LEAD-Cette option de recherche par le biais du conduit Vtiger seulement, COMPTE-Cette option de recherche par le biais du Vtiger comptes et tous les contacts et les sous-contacts pour le numéro de téléphone, VENDOR-Cette option ne recherche que par l'intermédiaire du Vtiger fournisseurs, ACCTID-Cette option ne fonctionne que pour les comptes et il prendra les VICIDIAL vendor_lead_code terrain et essayer de chercher le numéro de compte Vtiger. En cas d'échec, il va essayer d'autres méthodes que la liste que vous avez sélectionné. Plusieurs options peuvent être utilisées pour chaque recherche, mais sur de grandes bases de données ce n'est pas recommandé. La valeur par défaut est LEAD. UNIFIED_CONTACT-Cette option utilise la version bêta 5.1.0 Vtiger fonction pour effectuer une recherche par numéro de téléphone et afficher une page de recherche dans Vtiger.

	<BR>
	<A NAME="vicidial_campaigns-vtiger_search_dead">
	<BR>
	<B>Vtiger Recherche Dead Comptes -</B> Si Vtiger intégration est activée dans les paramètres du système, puis, cette option détermine si les comptes supprimés sera recherché lorsque l-agent clics WEB forme pour chercher dans le système de Vtiger. Handicapés conduit supprimés ne seront pas cherché, ASK-deleted conduit seront recherchés et la page de recherche vtiger web demandera à l-agent si ils veulent faire le compte Vtiger active, ressusciter-rend automatiquement le compte supprimé de nouveau active et elle prendra les agent à l-écran de compte sans tarder et à cliquer sur un formulaire Web. Par défaut est Disabled.

	<BR>
	<A NAME="vicidial_campaigns-vtiger_create_call_record">
	<BR>
	<B>Vtiger Créer Call Record - </B> Si Vtiger intégration est activé dans les paramètres du système puis de définir ce paramètre est de savoir si un nouveau record d'activité Vtiger est créé pour l'appel lorsque l'agent est à la vtiger_search page. La valeur par défaut est Y. L-option DISPO créera un enregistrement d-appel pour le compte Vtiger sans que l-agent ayant besoin d-aller à la page de recherche vtiger Via le formulaire web.

	<BR>
	<A NAME="vicidial_campaigns-vtiger_create_lead_record">
	<BR>
	<B>Vtiger Créer Lead Record - </B> Si Vtiger intégration est activé dans les paramètres système et Vtiger LEAD Recherche Catégorie comprend alors ce paramètre est de déterminer si un nouveau record Vtiger plomb est créé lorsque l'agent est à la page vtiger_search et il n'est pas ont trouvé à l'appel le numéro de téléphone. La valeur par défaut est Y.

	<BR>
	<A NAME="vicidial_campaigns-vtiger_screen_login">
	<BR>
	<B>Vtiger Login Screen - </B> Si Vtiger intégration est activé dans les paramètres de ce système de réglage de définir si l'utilisateur est connecté à l'interface Vtiger automatiquement lors de leur connexion à VICIDIAL. Le défaut est Y. L-option new_window ouvrira une nouvelle fenêtre lors de sa connexion à l-écran de l-agent VICIDIAL.

	<BR>
	<A NAME="vicidial_campaigns-vtiger_status_call">
	<BR>
	<B>Vtiger état des appels -</B> Si Vtiger intégration est activée dans les paramètres du système, puis utilisez ce paramètre pour définir si la situation du compte Vtiger sera mis à jour avec le statut de l-appel VICIDIAL après qu-il a été dispositioned. Par défaut est n.

	<BR>
	<A NAME="vicidial_campaigns-queuemetrics_callstatus">
	<BR>
	<B>QM CallStatus Override -</B> Si l'intégration QueueMetrics est activée dans les paramètres du système, alors ce paramètre permet l'impérieuse des paramètres du système de réglage pour les entrées queue_log CallStatus. Par défaut est DISABLED qui utilisera le réglage du système.

	<BR>
	<A NAME="vicidial_campaigns-queuemetrics_phone_environment">
	<BR>
	<B>Environnement Téléphone QM -</B> Si l'intégration QueueMetrics est activée dans les paramètres du système, alors ce paramètre permet l'insertion de cette valeur de données dans le domaine de l'données4 queue_log pour les enregistrements d'activité des agents. Par défaut est vide pour les handicapés.

	<BR>
	<A NAME="vicidial_campaigns-extension_appended_cidname">
	<BR>
	<B>Extension Ajoutez CID -</B> Si elle est activée, les appels effectués à partir de cette campagne aura un espace et l'extension de téléphone de l'agent ajouté à la fin du nom de CallerID de l'appel avant qu'il ne soit envoyé à l'agent. Par défaut est N pour les handicapés.

	<BR>
	<A NAME="vicidial_campaigns-pllb_grouping">
	<BR>
	<B>Groupement PLLB -</B> Connexion Téléphone Load Balancing Groupement, n'est autorisée que si il ya des serveurs d'agents multiples et les alias de téléphone sont présents sur le système. S'il est défini à ONE_SERVER_ONLY il va forcer tous les agents de cette campagne pour se connecter au même serveur. S'il est défini à CASCADE il regroupera connecté agents sur le même serveur jusqu'à ce que le numéro PLLB Limite Regroupement des agents sont atteints, alors le prochain agent va se connecter au serveur suivant avec le plus petit nombre d'agents. Si elle est désactivée le téléphone comportement standard alias de chaque agent de trouver le serveur avec le moins grand nombre de non-distance des agents connectés à elle sera utilisée. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-pllb_grouping_limit">
	<BR>
	<B>Limite Groupement PLLB -</B> Connexion Charge Téléphone Groupement Limite d'équilibrage. Si Groupement PLLB est réglé sur CASCADE, alors ce paramètre détermine le nombre d'agents acceptable dans chaque serveur pour cette campagne. Par défaut est 50.

	<BR>
	<A NAME="vicidial_campaigns-crm_popup_login">
	<BR>
	<B>CRM Popup Login -</B> Si elle est égale à Y, le CRM Popup adresse est utilisée pour ouvrir une nouvelle fenêtre sur login agent pour cette campagne. Par défaut est n.

	<BR>
	<A NAME="vicidial_campaigns-crm_login_address">
	<BR>
	<B>CRM Popup Adresse -</B> L-adresse Web d-une page de connexion de CRM, il peut avoir des variables de population tout comme l-adresse sous forme d-enchaînement, avec la VaR à l-avant et à l-aide - Un user_custom_one - - B - de définir des variables.

	<BR>
	<A NAME="vicidial_campaigns-start_call_url">
	<BR>
	<B>Début de l-appel Web -</B> Cette web adresse URL n-est pas perçu par l-agent, mais elle est appelée chaque fois qu-un appel est adressé à un agent si elle est peuplée. Utilise les mêmes variables que les champs de formulaire web et des scripts. Cette URL ne peut être un chemin relatif. L-URL de début ne fonctionne pas pour les appels cadran manuel. Par défaut est vide.

	<BR>
	<A NAME="vicidial_campaigns-dispo_call_url">
	<BR>
	<B>Dispo Call Web -</B> Cette web adresse URL n-est pas perçu par l-agent, mais elle est appelée chaque fois qu-un appel est dispositioned par un mandataire si elle est peuplée. Utilise les mêmes variables que les champs de formulaire web et des scripts. DISPO et talk_time sont les variables que vous pouvez utiliser pour récupérer l-agent défini par la disposition de l-appel et le temps de parole effective en quelques secondes de l-appel. Cette URL ne peut être un chemin relatif. Par défaut est vide.

	<BR>
	<A NAME="vicidial_campaigns-na_call_url">
	<BR>
	<B>Aucune URL Appel Agent -</B> Cette adresse URL Web n'est pas vu par l'agent, mais si elle est peuplée, il est appelé à chaque fois un appel qui n'est pas gérée par un agent est suspendu ou transféré. Utilise les mêmes variables que les champs du formulaire Web et les scripts. dispo peut être utilisée pour récupérer le système défini par la disposition de l'appel. Cette URL ne peut pas être un chemin relatif. Par défaut est vide.

	<BR>
	<A NAME="vicidial_campaigns-agent_allow_group_alias">
	<BR>
	<B>Groupe Alias Admis - </B> Si vous souhaitez permettre à vos agents d'utiliser les alias de groupe, vous devez mettre à Y. alias Groupe sont expliqués plus en section administrative, ils permettent de sélectionner différents agents callerIDs manuel pour les appels sortants qu'ils mai place. La valeur par défaut est N.

	<BR>
	<A NAME="vicidial_campaigns-default_group_alias">
	<BR>
	<B>Groupe par défaut Alias - </B> Si vous avez permis à ce groupe Alias est l'alias du groupe qui est sélectionné en premier par défaut lorsque l'agent choisit d'utiliser un alias pour un groupe émetteur manuel appel. La valeur par défaut est None ou vide.

	<BR>
	<A NAME="vicidial_campaigns-view_calls_in_queue">
	<BR>
	<B>Agent Voir appels en attente -</B> Si défini à autre chose mais aucun, les agents seront en mesure de voir des détails sur les appels qui sont en attente dans la file d-attente dans leur écran de l-agent. S-il est défini à une valeur numérique, les appels affiché sera limité au nombre sélectionné. Par défaut est AUCUN.

	<BR>
	<A NAME="vicidial_campaigns-view_calls_in_queue_launch">
	<BR>
	<B>Voir les appels en attente de lancement -</B> Ce paramètre s-il est réglé sur AUTO auront la demande, dans la file d-attente apparaissent cadre moment de la connexion par l-agent dans l-écran de l-agent. Par défaut est Manuel.

	<BR>
	<A NAME="vicidial_campaigns-grab_calls_in_queue">
	<BR>
	<B>Agent Grab appels en attente -</B> Cette option s-il est réglé sur Y permet à l-agent pour sélectionner l-appel qui veulent prendre de la demande, dans la file d-attente d-affichage en cliquant sur elle pendant la pause. Agents ne seront en mesure de saisir les appels entrants ou les appels transférés, les appels sortants pas. Par défaut est n.

	<BR>
	<A NAME="vicidial_campaigns-call_requeue_button">
	<BR>
	<B>Agent d-appel Re-Queue Button -</B> Cette option s-il est réglé sur Y va ajouter un bouton Re-file d-attente des clients à l-écran de l-agent, permettant à l-agent d-envoyer l-appel dans une file d-attente AGENTDIRECT qui est réservé à l-agent seulement. Par défaut est n.

	<BR>
	<A NAME="vicidial_campaigns-pause_after_each_call">
	<BR>
	<B>Agent Pause après chaque appel -</B> Cette option s-il est réglé sur Y se mettra en pause l-agent après chaque appel automatiquement. Par défaut est n.

	<BR>
	<A NAME="vicidial_campaigns-blind_monitor_warning">
	<BR>
	<B>Attention Moniteur aveugles -</B> Cette option si elle est activée permettra à l'agent sais de diverses manières optionnelles si elles sont d'être aveugle contrôlée par quelqu'un. DISABLED signifie que cette fonction n'est pas active, alerte ne s'affiche une alerte à l'écran l'agent, AVIS publiera une note qui reste sur l'écran aussi longtemps que l'agent theyâ re objet d'un suivi, AUDIO jouera le nom de fichier défini ci-dessous lors d'un agent commence à être surveillés et les autres options sont combibnations des options susmentionnées. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_campaigns-blind_monitor_message">
	<BR>
	<B>Avis aveugles Moniteur -</B> Tel est le message qui apparaîtra sur l'écran tandis que l'agent qu'ils sont surveillés si l'option est sélectionnée AVIS. Par défaut est -Someone is blind monitoring your session-.

	<BR>
	<A NAME="vicidial_campaigns-blind_monitor_filename">
	<BR>
	<B>Nom du moniteur aveugles -</B> Il s'agit du fichier audio qui jouera lors de la session des agents au début de la surveillance quelqu'un aveugler. Cette invite sera joué pour tout le monde lors de la session, y compris le client le cas échéant est présent. Par défaut est vide.





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_LISTS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_lists-list_id">
	<BR>
	<B>ID de la liste -</B> C'est le nom numérique de la liste, il n'est pas éditable après la première validation, il ne doit contenir que des nombres et contenir entre 2 et 8 caractères. Must be a number greater than 100.

	<BR>
	<A NAME="vicidial_lists-list_name">
	<BR>
	<B>Nom de la liste -</B> C'est la description de la liste, elle doit contenir entre 2 et 20 caractères.

	<BR>
	<A NAME="vicidial_lists-list_description">
	<BR>
	<B>Description de la liste -</B> C'est un champ de note pour la liste, il est optionnel.

	<BR>
	<A NAME="vicidial_lists-list_changedate">
	<BR>
	<B>Dernier changement de la liste -</B> C'est la dernière fois que les réglages de la liste ont été modifié.

	<BR>
	<A NAME="vicidial_lists-list_lastcalldate">
	<BR>
	<B>Date du dernier appel de la liste -</B> C'est la dernière fois qu'une fiche de cette liste a été appelée.

	<BR>
	<A NAME="vicidial_lists-campaign_id">
	<BR>
	<B>Campagne -</B> C'est la campagne à laquelle cette liste appartient. Une liste ne peut etre appelée que depuis une seule campagne à la fois.

	<BR>
	<A NAME="vicidial_lists-active">
	<BR>
	<B>Active -</B> Cela définie si la liste peut etre appelée ou non.

	<BR>
	<A NAME="vicidial_lists-reset_list">
	<BR>
	<B>Réinisialiser le Lead-Called-Status pour cette liste -</B> Cela réinitialise les fiches dans cette liste à N pour "not called since last reset" et signifie que n'importe quelle fiche peut maintenant être appelée si ce statut est défini dans l'écran de campagne.

	<BR>
	<A NAME="vicidial_lists-reset_time">
	<BR>
	<B>Reset Times -</B> Ce champ vous permet de mettre fois, séparées par un tiret, que cette liste sera automatiquement remis à zéro par le système. Les heures doivent être au format 24 heures sans ponctuation, par exemple 0800-1700 serait rétablir la liste à 8 h et 5pm tous les jours. Par défaut est vide.

	<BR>
	<A NAME="vicidial_lists-agent_script_override">
	<BR>
	<B>Agent Script Override -</B> Si ce champ est défini, ce sera le script que l-agent voit sur son écran au lieu du script campagne lorsque le plomb est de cette liste. Défaut n-est pas réglé.

	<BR>
	<A NAME="vicidial_lists-campaign_cid_override">
	<BR>
	<B>Campagne CID Override -</B> Si ce champ est définie, elle aura préséance sur la campagne CallerID qui est défini pour les appels qui sont placés devant une piste dans cette liste. Défaut n-est pas réglé.

	<BR>
	<A NAME="vicidial_lists-am_message_exten_override">
	<BR>
	<B>Message de répondeur Override -</B> Si ce champ est définie, elle aura préséance sur le message répondeur mis dans la campagne pour les clients de cette liste. Défaut n-est pas réglé. 
	<BR>
	<A NAME="vicidial_lists-drop_inbound_group_override">
	<BR>
	<B>Drop Entrant Groupe Override -</B> Si ce champ est défini, dans ce groupe seront utilisées pour les appels sortants de cette liste de cette goutte de la campagne à l-étranger au lieu de la baisse du groupe fixé dans l-écran de détail de la campagne. Défaut n-est pas réglé.

	<BR>
	<A NAME="vicidial_lists-web_form_address">
	<BR>
	<B>Override formulaire Web - </ B> C'est l'adresse personnalisée que cliquant sur le bouton Formulaire Web dans Vicidial vous amène à des appels qui viennent sur cette liste. Si vous voulez utiliser des champs personnalisés dans un formulaire Web l'adresse, vous devez ajouter &CF_uses_custom_fields=Y dans le cadre de votre URL.

	<BR>
	<A NAME="vicidial_lists-xferconf_a_dtmf">
	<BR>
	<B>Xfer-Conf Nombre Override -</B> Ces cinq domaines pour vous permettre d-emporter les préréglages numéro de la conférence de transfert lorsque le plomb est de cette liste. Par défaut est vide.

	<BR>
	<A NAME="vicidial_lists-inventory_report">
	<BR>
	<B>Rapport d'inventaire -</B> Si le Rapport d'inventaire est activé sur votre système, cette option permettra de déterminer si cette liste est inclus dans le rapport ou non. Par défaut est O pour oui.

	<BR>
	<A NAME="vicidial_lists-time_zone_setting">
	<BR>
	<B>Réglage du fuseau horaire -</B> Cette option vous permet de définir la méthode de maintien de la recherche fuseau horaire actuel pour les fils de cette liste. Ce processus se fait uniquement la nuit de sorte que toute modification apportée ne sera pas immédiate. COUNTRY_AND_AREA_CODE est la valeur par défaut, et utiliser le code pays et l'indicatif régional du numéro de téléphone afin de déterminer le fuseau horaire de la tête. Postal_code utilisera le code postal si disponible afin de déterminer le fuseau horaire de la tête. NANPA_PREFIX ne fonctionne que dans les Etats-Unis et utiliser le code régional et le préfixe du numéro de téléphone afin de déterminer le fuseau horaire de la tête, mais ce n'est pas activée par défaut dans le système, donc s'il vous plaît assurez-vous que vous avez les données chargées sur le préfixe NANPA votre système avant de sélectionner cette option. OWNER_TIME_ZONE_CODE utilisera le abbraviation fuseau horaire standard chargé dans le domaine propriétaire du plomb afin de déterminer le fuseau horaire, dans les exemples USA sont AST, HNE, CST, MST, PST, AKST, TVH. Cette fonction doit être activée par votre administrateur système pour entrer en vigueur.


	<BR>
	<A NAME="vicidial_list-dnc">
	<BR>
	<B>DNC VICIDIAL List - </B> Do Not Call Cette liste contient tous les conduire qui a été fixé à un statut de DCN dans le système. Dans les listes - ADD NOMBRE DE DNC page que vous êtes en mesure d'ajouter manuellement les numéros de cette liste afin de ne pas être appelé par des campagnes qui utilisent la liste interne DNC. Il ya aussi la possibilité d'ajouter conduit à la campagne des listes DNC et pour les campagnes qui ont les. Si vous avez l-option active DNC réglé sur AreaCode alors vous pouvez également utiliser les entrées génériques indicatif régional comme celui-ci 201XXXXXXX de bloquer tous les appels au 201 lorsque AreaCode permis.



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_INBOUND_GROUPS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_inbound_groups-group_id">
	<BR>
	<B>ID du groupe -</B> C'est le nom court du group entrant, il n'est pas éditable après la première initialisation, il doit contenir entre 2 est 20 caractères.

	<BR>
	<A NAME="vicidial_inbound_groups-group_name">
	<BR>
	<B>Nom du groupe -</B> C'est la déscription du groupe, il doit contenir entre 2 et 30 caractères et ne doit pas contenir de tirets, de plus ou d'espaces .

	<BR>
	<A NAME="vicidial_inbound_groups-group_color">
	<BR>
	<B>Couleur du groupe </B> C'est la couleur que est affichée dans l'application cliente VICIDIAL quand un appel arrive dans ce groupe. Il doit contenir entre 2 et 7 caractères. Si c'est une couleur en hexadecimal vous devez mettre un # au début de la chaîne de caractères ou VICIDIAL ne fonctionnera pas proprement.

	<BR>
	<A NAME="vicidial_inbound_groups-active">
	<BR>
	<B>Active -</B> Cela détermine si ce groupe sera visible dans la boîte de sélection quand un agent se connecte à VICIDIAL.

	<BR>
	<A NAME="vicidial_inbound_groups-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour ce groupe entrant, ce qui permet la visualisation de cette administration en groupe restreint par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce groupe en.

	<BR>
	<A NAME="vicidial_inbound_groups-group_calldate">
	<BR>
	<B>En-Groupe Calldate -</B> Il s'agit de la dernière date et l'heure qu'un appel a été orientée vers ce groupe entrant.

	<BR>
	<A NAME="vicidial_inbound_groups-web_form_address">
	<BR>
	<B>Formulaire Web -</B> C'est l'adresse personnalisée qui, en cliquant sur le boutton WEB FORM dans VICIDIAL, sera prise pour les appels qui arrivent dans ce groupe. Si vous voulez utiliser des champs personnalisés dans un formulaire Web l'adresse, vous devez ajouter &CF_uses_custom_fields=Y dans le cadre de votre URL.

	<BR>
	<A NAME="vicidial_inbound_groups-next_agent_call">
	<BR>
	<B>Appel de l'agent suivant -</B> Cela determine quel agent recevra l'appel suivant quand c'est possible:
	 <BR> &nbsp; - random: ordonne par la valeur aléatoire de mise à jour dans la table vicidial_live_agents
	 <BR> &nbsp; - oldest_call_start: ordonne par la dernière date à laquelle un agent a passé un appel. Résultats des agents recevant globalement un nombre à peu près identique d'appels .
	 <BR> &nbsp; - oldest_call_finish: ordonne suivant la dernière date à laquelle un agent a terminé un appel. L'agent AKA attendant le plus longtemps reçoit le premier appel.
	 <BR> &nbsp; - oldest_inbound_call_start: les commandes par la dernière fois qu'un agent a été envoyé un appel entrant. Résultats dans les agents recevant environ le même nombre d'appels globale.
	 <BR> &nbsp; - oldest_inbound_call_finish: les commandes par la dernière fois un agent de terminer un appel entrant. Agent de AKA attente plus longue reçoit d'abord appeler.
	 <BR> &nbsp; - overall_user_level: ordonne par le user_level de l'agent comme défini dans la table vicidial_users, un user_level plus élévé recevra plus d'appels.
	 <BR> &nbsp; - inbound_group_rank : ordres par le rang donné à l'agent pour legroupe d'arrivée spécifique. Le plus haut à le plus bas.
	 <BR> &nbsp; - campaign_rank : ordres par le rang donné à l'agent pour la campagne.Le plus haut à le plus bas.
	 <BR> &nbsp; - ingroup_grade_random: donne une plus grande probabilité de recevoir un appel aux agents de rang supérieur par l'intérieur du groupe.
	 <BR> &nbsp; - campaign_grade_random: donne une plus grande probabilité de recevoir un appel aux agents de rang supérieur par la campagne.
	 <BR> &nbsp; - fewest_calls : ordres par le nombre d'appels reçus par un agent pource groupe d'arrivée spécifique. Moindres appels d'abord.
	 <BR> &nbsp; - fewest_calls_campaign: orders by the number of calls received by an agent for the campaign. Least calls first.
	 <BR> &nbsp; - longest_wait_time: commandes par la quantité de temps d-attente agent a été activement pour un appel.
	 <BR> &nbsp; - ring_all: rings all available agents until one picks up the phone.
	 <BR> NOTES: Pour ring_all, les agents qui utilisent les téléphones qui ont permis d'agent Le crochet auront leur téléphone sonne et le premier à répondre recevront l'appel et les informations sur l'écran l'agent. Depuis ring_all ignore le temps d'attente d'agent et le classement et fera appel à tout agent qui est disponible pour la file d'attente, nous ne recommandons pas d'utiliser cette méthode pour grandes files d'attente. Lorsque vous utilisez ring_all, agents connectés avec les téléphones qui ont de l'agent Crochet Sur désactivé devrez utiliser les appels en file d'attente et panneau de cliquer sur le lien APPEL TAKE pour prendre des appels en file d'attente. La quantité de temps au téléphone sonnera pour les agents ring_all est réglé sur le réglage On-Hook durée de sonnerie ou le temps le plus court anneau des téléphones qui seront appelés. Nous ne recommandons pas d'utiliser ring_all sur les files d'attente de haute volume d'appels, ou les files d'attente avec de nombreux agents. Procédé ring_all est destiné à être utilisé avec seulement quelques agents et le volume d'appels à faible dans les groupes.
	<BR>

	<BR>
	<A NAME="vicidial_inbound_groups-on_hook_ring_time">
	<BR>
	<B>Temps Ring On-Hook -</B> Cette option n'est utilisée que pour les agents qui sont connectés avec des téléphones qui ont la fonction d'agent-sur-crochet activé. C'est le nombre de secondes que chaque tentative d'appel à l'agent se fera entendre pendant que le système va attendre une seconde et se mettent à sonner les téléphones des agents disponibles à nouveau. Ce champ peut être modifié si les téléphones des agents sont fixés à un moment anneau inférieur qui peut être nécessaire pour empêcher les appels d'être envoyé un message vocal téléphones. Par défaut est 15.

	<BR>
	<A NAME="vicidial_inbound_groups-on_hook_cid">
	<BR>
	<B>On-Hook CID -</B> Cette option n'est utilisée que pour les agents qui sont connectés avec des téléphones qui ont la fonction d'agent-sur-crochet activé. Il s'agit de la identification de l'appelant qui s'affichera sur leurs téléphones agent lorsque les appels sonnent. GENERIC est un générique RINGAGENT00000000001 type de notification. Endogroupe montrera que l'en-groupe de l'appel est venu. CUSTOMER_PHONE n'affiche que le numéro de téléphone du client. CUSTOMER_PHONE_RINGAGENT montrera RINGAGENT_3125551212 avec le RINGAGENT dans le cadre du CID avec le numéro de téléphone du client. CUSTOMER_PHONE_INGROUP montrera les 10 premiers caractères de l'en-groupe suivi par le numéro de téléphone à la clientèle. Default is GENERIC.

	<BR>
	<A NAME="vicidial_inbound_groups-queue_priority">
	<BR>
	<B>Queue Priority -</B> This setting is used to define the order in which the calls from this inbound group should be answered in relation to calls from other inbound groups.

	<A NAME="vicidial_inbound_groups-fronter_display">
	<BR>
	<B>Affichage de l'enseigne -<\/B> Ce champ détermine si l'agent VICIDIAL sortant doit avoir l'enseigne - si il y en a une - affichée dans le champ Statut quand l'appel est passé à l'agent.

	<BR>
	<A NAME="vicidial_inbound_groups-ingroup_script">
	<BR>
	<B>Script campagne ->/B> Ce menu vous permet de choisir le script qui apparaîtra sur l'écran des agents pour cette campagne. Mettez NONE pour ne pas montrer de script pour cette campagne.

	<BR>
	<A NAME="vicidial_inbound_groups-ignore_list_script_override">
	<BR>
	<B>Ignorer Override Script Liste-</B> Cette option vous permet d'ignorer l'ID de liste Override Script l'option pour les appels à venir dans ce groupe-En. Mettre ce paramètre à Y ignorera tous les paramètres de la liste ID du script. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-get_call_launch">
	<BR>
	<B>Consigne de lancement d'appel -</B> Ce menu vous permet de choisir si vous voulez lancer automatiquement la page de web-form dans une fenêtre séparée, passer automatiquement sur l'onglet de script ou ne rien faire quand un appel est envoyé par un agent dans cette campagne. Si les champs de liste personnalisées sont activées sur votre système, formulaire s'ouvrira sur l'onglet FORMULAIRE lors de la connexion d'un appel à un agent.

	<BR>
	<A NAME="vicidial_inbound_groups-xferconf_a_dtmf">
	<BR>
	<B>Xfer-Conf DTMF -</B> Ces quatre domaines pour vous permettre d-avoir deux ensembles de transfert de conférence et les préréglages DTMF. Lorsque l-appel ou de la campagne est chargé, le script vicidial.php montrera deux boutons sur le transfert-cadre de conférences et automatiquement le numéro à composer et envoyer les champs DTMF lorsqu-ils sont pressés. Si vous souhaitez autoriser consultatif transferts, un fronter à un proche, que l-agent utiliser la case à cocher consultatif, qui ne fonctionne pas pour les tiers VICIDIAL demande de consultation. Pour ceux qui viennent de l-agent, cliquez le bouton de cadran avec la clientèle. Alors l-agent pouvez aussi le laisser-3way-Call et passer à leur prochain appel. Si vous souhaitez autoriser les transferts aveugles de clients à un script AGI VICIDIAL l-exploitation forestière ou un SVI, puis AXFER lieu dans le numéro à composer sur le terrain. Vous pouvez également spécifier une extension personnalisée après la AXFER, par exemple si vous voulez faire un appel vers un IVR spéciaux que vous avez défini à l-extension 83900 vous mettriez AXFER83900 dans le numéro à composer sur le terrain.

	<BR>
	<A NAME="vicidial_inbound_groups-timer_action">
	<BR>
	<B>Minuterie d-action -</B> Cette fonctionnalité vous permet de déclencher des actions après un certain laps de temps. D1 et D2 options DIAL va lancer un appel à la presets Transfer Conference Nombre et les envoyer à la session d-agent, ce n-est généralement utilisé pour les applications IVR AGI simple validation ou tout simplement pour jouer un message pré-enregistré. WebForm ouvrira l-adresse formulaire web. MESSAGE_ONLY va simplement afficher le message qui est dans le champ ci-dessous. AUCUNE désactive cette fonctionnalité et la valeur par défaut. Ce paramètre remplace les paramètres de campagne. HANGUP raccroche l'appel lorsque la minuterie est déclenchée, CALLMENU enverra l'appel au menu Appel spécifié dans le champ Destination minuterie d'action, EXTENSION enverra l'appel à l'extension qui est spécifié dans le champ Destination minuterie d'action, IN_GROUP enverra l'appel à l'en-groupe spécifié dans le champ Destination minuterie d'action.

	<BR>
	<A NAME="vicidial_inbound_groups-timer_action_message">
	<BR>
	<B>Minuterie d-action Message -</B> Tel est le message qui s-affiche sur l-écran de l-agent au moment de l-action Timer est déclenché.

	<BR>
	<A NAME="vicidial_inbound_groups-timer_action_seconds">
	<BR>
	<B>Minuterie d-action Seconds -</B> Il s-agit de la quantité de temps après l-appel est connecté au client que l-action Timer est déclenchée. Par défaut est -1, qui est aussi inactive.

	<BR>
	<A NAME="vicidial_inbound_groups-timer_action_destination">
	<BR>
	<B>Destination action minuterie -</B> Ce champ est l'endroit où vous spécifiez le menu Appel, Extension ou en groupe que vous voulez que l'appel envoyé à l'action si l'heure est défini CALLMENU, EXTENSION ou IN_GROUP. Par défaut est vide.

	<BR>
	<A NAME="vicidial_inbound_groups-drop_call_seconds">
	<BR>
	<B>Temps avant abandon de l'appel - </B> Le nombre de secondes d'un appel restera dans la file d'attente avant d'être considéré comme un DROP.

	<BR>
	<A NAME="vicidial_inbound_groups-drop_action">
	<BR>
	<B>Drop Action - </B> Ce menu vous permet de choisir ce qui se passe à un appel quand il a attendu plus longtemps que ce qui est prévu dans le Temps avant abandon de l'appel domaine. Hangup simplement raccrocher l'appel, envoyer le message de l'appel Drop EXTEN que vous avez définies ci-après, à la messagerie vocale vous envoyer l'appel à la boîte vocale que vous avez définis ci-dessous et IN_GROUP envoie l'appel à la Entrant groupe qui est défini ci-dessous.

	<BR>
	<A NAME="vicidial_inbound_groups-drop_exten">
	<BR>
	<B>Drop EXTEN - </B> Si l'action est goutte d'MESSAGE, c'est le cadran plan d'extension que l'appel sera envoyée si elle parvient à Temps avant abandon de l'appel. Pour AGENTDIRECT dans les groupes, si l'utilisateur n'est pas disponible, vous pouvez mettre AGENTEXT dans ce domaine et le système va chercher l'utilisateur personnalisée cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_inbound_groups-voicemail_ext">
	<BR>
	<B>Boîte vocale -</B> If Drop Action is set to VOICEMAIL, the call DROP would instead be directed to this voicemail box to hear and leave a message. Dans un AGENTDIRECT en groupe, le réglage à AGENTVMAIL sera sélectionnez l'ID utilisateur à utiliser la messagerie vocale.

	<BR>
	<A NAME="vicidial_inbound_groups-drop_inbound_group">
	<BR>
	<B>Drop de transfert Group - </B> Si Drop action est fixée à IN_GROUP, l'appel sera envoyé à ce groupe d'arrivée si elle parvient Temps avant abandon de l'appel.

	<BR>
	<A NAME="vicidial_inbound_groups-drop_callmenu">
	<BR>
	<B>Menu déroulant Appel -</B> Si l'action chute est fixé à CALLMENU, l'appel sera envoyé à ce menu d'appel si elle atteint secondes de chute d'appels.

	<BR>
	<A NAME="vicidial_inbound_groups-action_xfer_cid">
	<BR>
	<B>Transfert d'action CID -</B> Utilisé pour Drop, après les heures et les Non-agent-pas-de file d'attente des actions. C'est le numéro de l'appelant que l'appel utilise avant qu'il ne soit transféré à des extensions, des messages, la messagerie vocale ou des menus d'appel. Vous pouvez utiliser CLIENT dans ce domaine à utiliser le numéro de téléphone du client, ou CAMPAGNE à utiliser le premier numéro de permis Identifiant campagne appelant. Par défaut est CLIENT.

	<BR>
	<A NAME="vicidial_inbound_groups-call_time_id">
	<BR>
	<B>Temps d'appel - c'est l'arrangement de temps d'appel à employer pource groupe d'arrivée. Maintenez dans l'esprit que le temps est basésur le temps de serveur. Le défaut est 24hours.

	<BR>
	<A NAME="vicidial_inbound_groups-after_hours_action">
	<BR>
	<B>Après les heures d'ouverture d'action - </B> L'action à effectuer si c'est après les heures de travail tels que définis dans le temps de l'arrivée pour ce groupe. Hangup hangup immédiatement à l'appel, MESSASGE va jouer le fichier dans le message après les heures de Filenam domaine, EXTENSION envoie l'appel à la fois la durée d'extension de la dialplan et de la messagerie vocale vous envoyer l'appel à la boîte vocale figurant dans la boîte vocale après les heures de domaine , IN_GROUP enverra l'appel à l'arrivée du groupe sélectionné dans le groupe après les heures de sélectionner la liste de transfert. La valeur par défaut est MESSAGE.

	<BR>
	<A NAME="vicidial_inbound_groups-after_hours_message_filename">
	<BR>
	<B>Après nom de fichier de message d'heures - le dossier audio localisésur le serveur à jouer si l'action est placée au MESSAGE. Le défautest VM-AU revoir

	<BR>
	<A NAME="vicidial_inbound_groups-after_hours_exten">
	<BR>
	<B>Après prolongation d'heures - la prolongation dialplan pour envoyerl'appel si l'action est placée à la PROLONGATION. Le défaut est8300. Pour AGENTDIRECT dans les groupes, vous pouvez mettre AGENTEXT dans ce domaine et le système va chercher l'utilisateur personnalisée cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_inbound_groups-after_hours_voicemail">
	<BR>
	<B>Après des heures Boîte vocale - la boîte de voicemail pour envoyerl'appel si l'action est placée à VOICEMAIL. Dans un AGENTDIRECT en groupe, le réglage à AGENTVMAIL sera sélectionnez l'ID utilisateur à utiliser la messagerie vocale.

	<BR>
	<A NAME="vicidial_inbound_groups-afterhours_xfer_group">
	<BR>
	<B>Après les heures d'ouverture de transfert Group - </B> Si l'action Après les heures d'ouverture est fixée à IN_GROUP, l'appel sera envoyé à cette arrivée du groupe si celui-ci entre dans le groupe en dehors de l'appel de temps défini pour le régime de groupe.

	<BR>
	<A NAME="vicidial_inbound_groups-after_hours_callmenu">
	<BR>
	<B>After Hours Appel du menu -</B> Si après action Heures est réglé sur CALLMENU, l'appel sera envoyé à cette Menu Appel si elle pénètre à l'extérieur en groupe du régime du temps d'appel définie pour l'en-groupe.

	<BR>
	<A NAME="vicidial_inbound_groups-no_agent_no_queue">
	<BR>
	<B>Agents n Queueing -</B> Si ce champ est réglé sur Y ou NO_PAUSED alors aucun appel ne sera mis dans la file d-attente pour cet en-groupe, si il n-ya pas d-agents connectés et les appels ira à l-agent Non Non action Queue. L-option NO_PAUSED enverra également pas les appelants en file d-attente s-il ya seulement une pause des agents dans l-en-groupe. Par défaut est n. Dans un AGENTDIRECT en groupe, le réglage à AGENTVMAIL sera sélectionnez l'ID utilisateur à utiliser la messagerie vocale. Vous pouvez aussi mettre AGENTEXT dans ce domaine si elle est définie à l'extension et le système va chercher l'utilisateur personnalisée cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_inbound_groups-no_agent_action">
	<BR>
	<B>Non Non Queue action de l-agent -</B> Si aucun agent Aucune file d-attente est activé, ce champ définit l-endroit où l-appel sera acheminé en l-absence des agents dans l-en-groupe. Par défaut est le message, celui-ci joue les fichiers audio dans le champ Valeur d-action, puis raccroche.

	<BR>
	<A NAME="vicidial_inbound_groups-no_agent_action_value">
	<BR>
	<B>Non Non Queue action de l-agent Valeur -</B> C-est la valeur pour l-action ci-dessus. Par défaut est nbdy-avail-to-take-call|vm-goodbye.

	<BR>
	<A NAME="vicidial_inbound_groups-max_calls_method">
	<BR>
	<B>Max Appelle la méthode -</B> Cette option peut permettre le maximum fonction simultanée des appels pour ce en groupe. S'il est défini à TOTAL, alors le nombre total d'appels étant traités par des agents et en file d'attente dans cet en-groupe ne sera pas autorisé à dépasser le nombre maximum Appels comte de lignes tel que défini ci-dessous. S'il est défini à IN_QUEUE, alors si le nombre d'appels en file d'attente pour les agents ne seront pas autorisés à dépasser le maximum Appels comte, peu importe combien d'appels sont des agents à cet effet dans-groupe. Par défaut est DISABLED.

	<BR>
	<A NAME="vicidial_inbound_groups-max_calls_count">
	<BR>
	<B>Max appelle le comte -</B> Cette option doit être supérieure à 0 si vous souhaitez utiliser le Max Appels fonction Méthode. Par défaut est 0.

	<BR>
	<A NAME="vicidial_inbound_groups-max_calls_action">
	<BR>
	<B>Max Appels d'action -</B> C'est l'action à prendre si le Max Appelle la méthode est activée et que le nombre d'appels dépasse ce qui est prévu ci-dessus dans le Max Appels Comptez réglage. Les appels au-dessus de ce montant sera envoyé à l'action, soit DROP, l'action ou l'action AFTERHOURS NO_AGENT_NO_QUEUE et sera enregistré comme un statut MAXCAL une raison raccrochage MaxCalls. Par défaut est NO_AGENT_NO_QUEUE.

	<BR>
	<A NAME="vicidial_inbound_groups-welcome_message_filename">
	<BR>
	<B>Nom de fichier bienvenu de message - le dossier audio localisé sur leserveur à jouer quand l'appel entre. Si ensemble à ---NONE --- alorsaucun message ne sera joué. Le défaut est ---NONE ---. Ce domaine, comme avec les autres champs audio en groupes, à l-exception du nom de fichier d-alerte agent, peut avoir plusieurs fichiers audio joué seulement si vous mettez un tuyau d-une liste séparée par des fichiers audio dans le domaine.

	<BR>
	<A NAME="vicidial_inbound_groups-play_welcome_message">
	<BR>
	<B>Message de bienvenue Play - </B> Ces réglages choisir le moment de jouer le message de bienvenue défini, TOUJOURS jouera à chaque fois, JAMAIS il ne pourra jamais jouer, IF_WAIT_ONLY seulement jouer le message de bienvenue si l'appel n'est pas immédiatement à un agent , et YES_UNLESS_NODELAY toujours jouer le message de bienvenue NO_DELAY à moins que le paramètre est activé. La valeur par défaut est TOUJOURS.

	<BR>
	<A NAME="vicidial_inbound_groups-moh_context">
	<BR>
	<B>Musique sur le contexte de prise - la musique sur le contexte de prisepour employer quand le client est placé sur la prise. Le défaut estdéfaut.

	<BR>
	<A NAME="vicidial_inbound_groups-onhold_prompt_filename">
	<BR>
	<B>Sur le nom de fichier de message de sollicitation de prise - ledossier audio localisé sur le serveur à jouer à un intervallerégulier quand le client est sur la prise. Le défaut estgeneric_hold. Ce dossier audio DOIT être de 9 secondes ou moins dansla longueur.

	<BR>
	<A NAME="vicidial_inbound_groups-prompt_interval">
	<BR>
	<B>Sur l'intervalle de message de sollicitation de prise - la durée ensecondes d'attendre avant de jouer dessus le message de sollicitationde tenir. Le défaut est 60. Pour désactiver l'invite en attente, réglez l'intervalle de 0.

	<BR>
	<A NAME="vicidial_inbound_groups-onhold_prompt_no_block">
	<BR>
	<B>En attente Demander Non Bloquer -</B> La définition de cette option à Y permettra appels en ligne derrière un appel en attente, où l'invite à jouer est d'aller à un agent si l'on devient disponible pendant la lecture du message. Alors que le message d'attente Nom Prompt joue à un client, ils ne peuvent pas être envoyé à un agent. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-onhold_prompt_seconds">
	<BR>
	<B>En attente secondes Prompt -</B> Ce champ doit être réglé sur le nombre de secondes que le nom de fichier en attente d'invite joue pour. Par défaut est 10.

	<BR>
	<A NAME="vicidial_inbound_groups-play_place_in_line">
	<BR>
	<B>Jouer en ligne Place - </B> Cela définit si l'appelant entendra leur place dans la ligne quand ils entrent dans la file d'attente, ainsi que quand ils entendent le announcemend. La valeur par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-play_estimate_hold_time">
	<BR>
	<B>Hold estimée Play Time - </B> Cela définit si l'appelant entend tenir les prévisions de temps avant qu'ils ne soient transférés à un agent. La valeur par défaut est N. Si le client est en attente et entend ce message d-estime détenir le temps, le temps minimum qui sera jouée est de 15 secondes.

	<BR>
	<A NAME="vicidial_inbound_groups-calculate_estimated_hold_seconds">
	<BR>
	<B>Calculer secondes Attente Estimation -</B> Ceci définit le nombre de secondes dans la file d'attente que le client doit attendre avant de le temps de maintien estimée sera calculée et éventuellement joué. Minimum est de 3 secondes, même s'il est réglé inférieur à 3. Par défaut est 0.

	<BR>
	<A NAME="vicidial_inbound_groups-eht_minimum_prompt_filename">
	<BR>
	<B>Estimation Tenez Nom minimum de temps -</B> Si le temps de maintien estimée est actif et il est calculé pour être égal ou inférieur au minimum de 15 secondes, alors ce fichier sera joué invite au lieu de l'annonce par défaut. Par défaut est vide pour inactive.

	<BR>
	<A NAME="vicidial_inbound_groups-eht_minimum_prompt_no_block">
	<BR>
	<B>Estimation minimale Hold Time Demander Non Bloquer -</B> Si Hold Time estimée est actif et l'heure estimée de maintien Nom minimum champ ci-dessus est remplie, alors cette option pour autoriser les appels en file derrière un appel où l'invite à jouer est d'aller à un agent si l'on devient disponible pendant la lecture du message . Alors que l'invite est de jouer pour un client, ils ne peuvent pas être envoyé à un agent. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-eht_minimum_prompt_seconds">
	<BR>
	<B>Estimation secondes Hold Time minimum Prompt -</B> Ce champ doit être réglé sur le nombre de secondes que le nom de fichier en attente estimée Temps minimum invite joue pour. Par défaut est 10.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option">
	<BR>
	<B>Attendre Option Temps -</B> Cela vous permet de donner aux clients des options pour sortir de la file d'attente si leur temps d'attente est plus le nombre de secondes indiquées ci-dessous. Par défaut est NONE. Si l'une des options PRESS_ est sélectionné, il jouera le nom de fichier de presse défini ci-dessous et donner au client l'option d'appuyer sur 1 sur leur téléphone à quitter la file d'attente et d'exécuter l'option sélectionnée. L'option PRESS_STAY enverra le client vers la file d'attente sans pour autant perdre leur place dans la ligne.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_second_option">
	<BR>
	<B>Attendre Option Second Time -</B> Même que le champ Option temps d'attente ci-dessus, sauf celle-ci va vérifier pour le client en appuyant sur la touche 2. Par défaut est NONE. Si aucune option d'attente première fois est sélectionné, cette option ne sera pas offert.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_third_option">
	<BR>
	<B>Attendre Option troisième fois -</B> Même que le champ Option temps d'attente ci-dessus, sauf celle-ci va vérifier pour le client en appuyant sur la touche 3. Par défaut est NONE. Si aucune option d'attente Deuxième temps est sélectionné, cette option ne sera pas offert.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_seconds">
	<BR>
	<B>Attendez quelques secondes Option Temps -</B> Si l'option temps d'attente est fixé à quelque chose, mais AUCUN, c'est le nombre de secondes que le client a été en attente dans la file d'attente qui va déclencher les options de temps d'attente. Par défaut est 120 secondes.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_exten">
	<BR>
	<B>Attendre Extension Option Temps -</B> Si l'option temps d'attente est fixé à PRESS_EXTEN, c'est l'extension que le plan de numérotation téléphonique sera envoyé à si le client appuie sur la touche option lorsque présentés avec l'option. Pour AGENTDIRECT dans les groupes, vous pouvez mettre AGENTEXT dans ce domaine et le système va chercher l'utilisateur personnalisée cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_callmenu">
	<BR>
	<B>Attendre Callmenu Option Temps -</B> Si l'option temps d'attente est fixé à PRESS_CALLMENU, c'est le menu Appel que l'appel sera envoyé à si le client appuie sur la touche option lorsque présentés avec l'option.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_voicemail">
	<BR>
	<B>Attendre la messagerie vocale Option Temps -</B> Si l'option temps d'attente est fixé à PRESS_VMAIL, c'est la boîte vocale que l'appel sera envoyé à si le client appuie sur la touche option lorsque présentés avec l'option. Dans un AGENTDIRECT en groupe, le réglage à AGENTVMAIL sera sélectionnez l'ID utilisateur à utiliser la messagerie vocale.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_xfer_group">
	<BR>
	<B>Attendre transfert Option Temps En-Groupe -</B> Si l'option temps d'attente est fixé à PRESS_INGROUP, c'est le groupe entrant que l'appel sera envoyé à si le client appuie sur la touche option lorsque présentés avec l'option.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_press_filename">
	<BR>
	<B>Attendre Nom de presse Heure Option -</B> Si l'option temps d'attente est fixé à l'une des options PRESS_, c'est le nom de fichier rapide qui se joue, si le temps d'attente des clients dépasse les secondes des temps d'attente Option de donner au client l'option d'appuyer sur 1, 2 ou 3 sur leur téléphone afin de fonctionner les options choisies temps d'attente de presse. Il est très important que vous inclure des options dans le fichier audio pour l'ensemble de vos options sélectionnées les temps d'attente, et que la longueur du fichier audio en quelques secondes est bien définie dans le domaine du fichier secondes ci-dessous ou il y aura des problèmes. Par défaut est à-être-appelé-back.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_no_block">
	<BR>
	<B>Attendre Appuyez sur Option No Time Bloquer -</B> La définition de cette option à Y permettra appels en ligne derrière un appel où l'attente Option Temps de presse Nom invite joue pour aller à un agent si l'on devient disponible pendant la lecture du message. Alors que le temps d'attente Option Nom message Appuyez sur la lecture à un client, ils ne peuvent pas être envoyé à un agent. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_prompt_seconds">
	<BR>
	<B>Les temps d'attente secondes Appuyez sur Option Nom de fichier -</B> Ce champ doit être réglé sur le nombre de secondes que le temps d'attente Appuyez sur Option Nom joue pour. Par défaut est 10.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_callback_filename">
	<BR>
	<B>Attendre Option Time After Nom de presse -</B> Si l'option temps d'attente est fixé à l'une des options PRESS_, c'est le nom de fichier rapide qui se joue après que le client a appuyé sur 1, 2 ou 3.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_time_option_callback_list_id">
	<BR>
	<B>Attendre Option Temps liste de rappel ID -</B> Si l'option temps d'attente est fixé à PRESS_CID_CALLBACK, c'est l'ID de la liste de l'appel est ajouté à un nouveau chef de file si le client appuie sur la touche option lorsque présentés avec l'option.

	<BR>
	<A NAME="vicidial_inbound_groups-wait_hold_option_priority">
	<BR>
	<B>Attendre Tenez priorité Option -</B> Si les deux options de temps estimé le protéger et attendre les options de temps sont actifs, ce paramètre sera de définir si un, l'autre ou les deux de ces fonctions sont actives. Par exemple, si l'option de maintien Durée estimée est fixé à 360, l'option temps d'attente est fixé à 120 et le client a été en attente pendant 120 secondes et il ya encore 400 secondes estimé la durée de rétention, puis ils sont tous deux actifs en même temps et ce paramètre sera vérifié pour voir quelles options seront offertes. Par défaut, c'est d'attendre que.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option">
	<BR>
	<B>Estimation Option Temps de maintien - </B> Cela vous permet de spécifier le routage de l'appel, si les prévisions de tenir le temps est sur le montant de la seconde précisés ci-dessous. La valeur par défaut est NON. Si l'une des options PRESS_ est sélectionné, il jouera le nom de fichier de presse défini ci-dessous et donner au client l'option d'appuyer sur 1 sur leur téléphone à quitter la file d'attente et d'exécuter l'option sélectionnée.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_second_option">
	<BR>
	<B>Tenez Option Second Time -</B> Même que le champ Option temps de maintien ci-dessus, sauf celle-ci va vérifier pour le client en appuyant sur la touche 2. Par défaut est NONE. Si aucune option de maintien première fois est sélectionné, cette option ne sera pas offert.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_third_option">
	<BR>
	<B>Tenez Option troisième fois -</B> Même que le champ Option temps de maintien ci-dessus, sauf celle-ci va vérifier pour le client en appuyant sur la touche 3. Par défaut est NONE. Si aucune option Mise en attente Deuxième temps est sélectionné, cette option ne sera pas offert.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_seconds">
	<BR>
	<B>Hold Time Option secondes - </B> Si Hold Time Option est fixé à rien, mais AUCUNE, c'est le nombre de secondes de l'estimation du temps que vous maintenez le déclencheur tenir option. La valeur par défaut est 360 secondes.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_minimum">
	<BR>
	<B>Tenez minimum Option Temps -</B> Si l'option Hold Time est activé, c'est le nombre minimum de secondes de l'appel doit être en attente avant d'être présenté avec l'option temps de maintien. L'option temps de maintien sera immédiatement présenté à ce moment si le temps de maintien estimée est supérieure à la touche Option secondes la valeur temps. Par défaut est 0 secondes.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_exten">
	<BR>
	<B>Hold Time Option Extension - </B> Si Hold Time Option est fixé à l'extension, c'est l'extension dialplan que l'appel sera envoyé à tenir si l'estimation dépasse le temps Hold Time Option Seconds. Pour AGENTDIRECT dans les groupes, vous pouvez mettre AGENTEXT dans ce domaine et le système va chercher l'utilisateur personnalisée cinq sur le terrain et envoyer l'appel vers ce numéro dialplan.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_callmenu">
	<BR>
	<B>Tenez Callmenu Option Temps -</B> Si l'option Hold Time est réglé sur CALL_MENU, c'est le menu Appel que l'appel sera envoyé à si le temps de maintien estimée dépasse les secondes touche Option Temps.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_voicemail">
	<BR>
	<B>Hold Time Option Boîte vocale - </B> Si Hold Time Option est fixé à la boîte vocale, il s'agit de la boîte vocale que l'appel sera envoyé à tenir si l'estimation dépasse le temps Hold Time Option Seconds. Dans un AGENTDIRECT en groupe, le réglage à AGENTVMAIL sera sélectionnez l'ID utilisateur à utiliser la messagerie vocale.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_xfer_group">
	<BR>
	<B>Hold Time Option de transfert In-Group - </B> Si Hold Time Option est fixé à IN_GROUP, c'est l'arrivée du groupe que l'appel sera envoyé à tenir si l'estimation dépasse le temps Hold Time Option Seconds.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_press_filename">
	<BR>
	<B>Tenez Nom de presse Heure Option -</B> Si l'option Hold Time est réglé sur l'une des options PRESS_, c'est le nom de fichier rapide qui se joue, si le temps de maintien estimée dépasse les secondes touche Option Temps de donner au client l'option d'appuyer sur 1 sur leur téléphone afin de fonctionner le temps de maintien sélectionné Appuyez sur Option. Il est très important que ce fichier audio est de 10 secondes ou moins, ou il y aura des problèmes. Par défaut est à-être-appelé-back.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_no_block">
	<BR>
	<B>Maintenez Appuyez sur Option No Time Bloquer -</B> La définition de cette option à Y permettra appels en ligne derrière un appel où la touche Option Temps de presse Nom invite joue pour aller à un agent si l'on devient disponible pendant la lecture du message. Alors que le temps de maintien Option Nom message Appuyez sur la lecture à un client, ils ne peuvent pas être envoyé à un agent. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_prompt_seconds">
	<BR>
	<B>Hold Time Seconds Appuyez sur Option Nom de fichier -</B> Ce champ doit être réglé sur le nombre de secondes que le temps de maintien de presse Option Nom joue pour. Par défaut est 10.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_callback_filename">
	<BR>
	<B>Tenez Option Time After Nom de presse -</B> Si l'option Hold Time est réglé sur l'une des options PRESS_ ou CALLERID_CALLBACK, c'est le nom de fichier rapide qui se joue après que le client a appuyé sur 1 ou l'appel a été ajouté à la liste de rappel.

	<BR>
	<A NAME="vicidial_inbound_groups-hold_time_option_callback_list_id">
	<BR>
	<B>Hold Time Option Rappel Liste ID - </B> Si Hold Time Option est fixé à CALLERID_CALLBACK, il s'agit de la liste de ID de l'appel est ajouté à un nouveau chef de file, si les prévisions de tenir le temps dépasse le Hold Time Option Seconds.

	<BR>
	<A NAME="vicidial_inbound_groups-agent_alert_exten">
	<BR>
	<B>Agent d-alerte Filename -</B> Le fichier audio à lire à un agent d-annoncer qu-un appel arrive à l-agent. Pour ne pas utiliser cette fonction pour définir cette valeur par défaut est X. Ding.

	<BR>
	<A NAME="vicidial_inbound_groups-agent_alert_delay">
	<BR>
	<B>L'alerte d'agent Retardent - la durée en millisecondesd'attendre avant d'envoyer l'appel à l'agent après avoir jouédessus la prolongation alerte d'agent. Le défaut est 1000.

	<BR>
	<A NAME="vicidial_inbound_groups-default_xfer_group">
	<BR>
	<B>Groupe de transfert de défaut - ce champ est le Dans-Groupe dedéfaut qui sera automatiquement choisi quand l'agent va à l'armaturede transférer-conférence dans leur interface d'agent.

	<BR>
	<A NAME="vicidial_inbound_groups-ingroup_recording_override">
	<BR>
	<B>En groupe enregistrement Override - </B> Ce champ permet d'primordial de la campagne d'appel enregistrement. Ce réglage peut être modifié par l'enregistrement de l'emporter sur la mise en vicidial_user. HANDICAPES ne remplacent pas la campagne de l'enregistrement programmé. JAMAIS désactive l'enregistrement sur le client. OnDemand est l'option par défaut et permet à l'agent de début et de fin d'enregistrement en tant que de besoin. ALLCALLS va commencer l'enregistrement sur le client chaque fois qu'un appel est adressé à un agent. ALLFORCE va commencer l'enregistrement sur le client chaque fois qu'un appel est adressé à un agent qui l'agent aucune option pour arrêter l'enregistrement.

	<BR>
	<A NAME="vicidial_inbound_groups-ingroup_rec_filename">
	<BR>
	<B>In-Group Recording Filename -</B> This field will override the Enregistrement de la campagne Filenaming Scheme unless it is set to NONE. The allowed variables are CAMPAIGN CUSTPHONE FULLDATE TINYDATE EPOCH AGENT VENDORLEADCODE LEADID. La valeur par défaut est FULLDATE_AGENT et devrait ressembler à ceci 20051020-103108_6666. Un autre exemple est CAMPAIGN_TINYDATE_CUSTPHONE qui devrait ressembler à ceci TESTCAMP_51020103108_3125551212. 50 char max. Default is NONE.

	<?php
	if ($SSqc_features_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_inbound_groups-qc_enabled">
		<BR>
		<B>QC Activé - </B> Mise en ce domaine permet à Y pour l'agent de contrôle de la qualité caractéristiques au travail. La valeur par défaut est N.

		<BR>
		<A NAME="vicidial_inbound_groups-qc_statuses">
		<BR>
		<B>Statuts QC - </B> Cette zone est l'endroit où vous choisissez ce qui entraîne des statuts doit être dépassé par le système de QC. Placez un contrôle à côté de l'état que vous voulez examiner QC. 

		<BR>
		<A NAME="vicidial_inbound_groups-qc_shift_id">
		<BR>
		<B>QC Shift - </B> Il s'agit du changement de calendrier servant à tirer d'un QC inbound_group. Les jours de la semaine sont ignorées pour ces fonctions.

		<BR>
		<A NAME="vicidial_inbound_groups-qc_get_record_launch">
		<BR>
		<B>Record QC Get lancement </B> Cela permet à l'une des actions suivantes peut être déclenché sur un agent QC recevoir un nouveau record.

		<BR>
		<A NAME="vicidial_inbound_groups-qc_show_recording">
		<BR>
		<B>QC Voir Recording - </B> qui permet un enregistrement qui mai être liée à la QC record à afficher dans le QC agent écran.

		<BR>
		<A NAME="vicidial_inbound_groups-qc_web_form_address">
		<BR>
		<B>QC WebForm Adresse - </B> Il s'agit de l'adresse du site web d'un agent QC pouvez aller à en cliquant sur le lien dans la WebForm QC écran.

		<BR>
		<A NAME="vicidial_inbound_groups-qc_script">
		<BR>
		<B>Script QC - </B> C'est le script qui peut être utilisé par les agents QC SCRIPT dans l'onglet de la QC écran.
		<?php
		}
	?>

	<BR>
	<A NAME="vicidial_inbound_groups-hold_recall_xfer_group">
	<BR>
	<B>Hold Recall transfert In-Group - </B> Si un client demande à ce groupe en plus d'une fois et cela n'est pas mis à AUCUNE, puis l'appel sera automatiquement envoyé à l'En-groupe sélectionné dans ce domaine . La valeur par défaut est NON.

	<BR>
	<A NAME="vicidial_inbound_groups-no_delay_call_route">
	<BR>
	<B>Appel Route n ° Delay - </B> Mettre ce paramètre à Y va effacer tous les temps d'attente et audio et de tenter d'envoyer l'appel droit à un agent. T-elle pas sur le message d'accueil ou en attente rapide des paramètres. La valeur par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_groups-answer_sec_pct_rt_stat_one">
	<BR>
	<B>Stats Pourcentage des appels dans les X secondes - </B> Ce domaine vous permet de définir le nombre de secondes que le tenir en temps réel des statistiques d'affichage à utiliser pour calculer le pourcentage d'appels qui ont répondu ont répondu dans X le nombre de secondes en attente.

	<BR>
	<A NAME="vicidial_inbound_groups-start_call_url">
	<BR>
	<B>Début de l-appel Web -</B> This web URL address is not seen by the agent, but it is called every time a call is sent to an agent if it is populated. Uses the same variables as the web form fields and scripts. Default is blank.

	<BR>
	<A NAME="vicidial_inbound_groups-dispo_call_url">
	<BR>
	<B>Dispo Call Web -</B> This web URL address is not seen by the agent, but it is called every time a call is dispositioned by an agent if it is populated. Uses the same variables as the web form fields and scripts. dispo and talk_time are the variables you can use to retrieve the agent-defined disposition for the call and the actual talk time in seconds of the call. Default is blank.

	<BR>
	<A NAME="vicidial_inbound_groups-add_lead_url">
	<BR>
	<B>Ajouter plomb URL -</B> Cette adresse URL Web n'est pas vu par l'agent, mais il est appelé chaque fois qu'un chef de file est ajouté au système par le biais du processus de rapprochement. Par défaut est vide. Vous devez commencer cette URL avec VAR si vous voulez utiliser des variables, et bien sûr - A - et - B - autour de la variable réelle dans l'URL où vous souhaitez l'utiliser. Voici la liste des variables qui sont disponibles pour cette fonction. lead_id, vendor_lead_code, list_id, phone_number, phone_code, did_id, did_extension, did_pattern, did_description, uniqueid

	<BR>
	<A NAME="vicidial_inbound_groups-na_call_url">
	<BR>
	<B>Aucune URL Appel Agent -</B> Cette adresse URL Web n'est pas vu par l'agent, mais si elle est peuplée, il est appelé à chaque fois un appel qui n'est pas gérée par un agent est suspendu ou transféré. Utilise les mêmes variables que les champs du formulaire Web et les scripts. dispo peut être utilisée pour récupérer le système défini par la disposition de l'appel. Cette URL ne peut pas être un chemin relatif. Par défaut est vide.

	<BR>
	<A NAME="vicidial_inbound_groups-default_group_alias">
	<BR>
	<B>Groupe par défaut Alias - </B> Si vous avez permis à Groupe Alias pour la campagne que l'agent est entré dans ce groupe est l'alias qui est sélectionnée par défaut sur la première d'un appel provenant de l'arrivée de ce groupe quand l'agent choisit de utiliser un alias pour un groupe émetteur manuel appel. La valeur par défaut est None ou vide.

	<BR>
	<A NAME="vicidial_inbound_groups-extension_appended_cidname">
	<BR>
	<B>Extension Ajoutez CID -</B> Si elle est activée, les appels à venir à partir de cet en-groupe disposera d'un espace et l'extension de téléphone de l'agent ajouté à la fin du nom de CallerID de l'appel avant qu'il ne soit envoyé à l'agent. Par défaut est N pour les handicapés.

	<BR>
	<A NAME="vicidial_inbound_groups-uniqueid_status_display">
	<BR>
	<B>Affichage de l'état uniqueid -</B> Si elle est activée, lorsqu'un agent reçoit un appel à travers ce en groupe, ils verront le uniqueid de l'appel a ajouté à la ligne d'état dans leur interface de l'agent. L'option PREFIX va ajouter le préfixe défini coup au début de l'uniqueid à l'écran. Défaut est Disabled. Si il y avait déjà un UniqueId définie sur un appel entrant ce en groupe, puis le uniqueid original sera affiché. Si l'option PRESERVE est utilisé et l'appel est envoyé à un second agent, le préfixe uniqueid et affiché au premier agent sera également affiché au second agent.

	<BR>
	<A NAME="vicidial_inbound_groups-uniqueid_status_prefix">
	<BR>
	<B>Préfixe Statut uniqueid -</B> Si l'option PREFIX est sélectionné ci-dessus, alors c'est la valeur de ce préfixe. Par défaut est vide.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_INBOUND_DIDS TABLE</FONT></B><BR><BR>
	<BR>
	<A NAME="vicidial_inbound_dids-did_pattern">
	<BR>
	<B>DID Extension - </B> C'est le nombre, d'extension ou de DID qui déclenchent cette entrée et que vous la route à l'intérieur du système en utilisant cette fonction. Il est réservé par défaut DID que vous pouvez utiliser ce qui est juste le mot-par défaut, sans les tirets, qui allos d'envoyer tout appel qui ne correspond pas à tout les autres modèles de la valeur par défaut de DID.

	<BR>
	<A NAME="vicidial_inbound_dids-did_description">
	<BR>
	<B>Description DID - </B> Il s'agit de la description de l'entrée de routage DID.

	<BR>
	<A NAME="vicidial_inbound_dids-did_active">
	<BR>
	<B>DID Active - </B> C'est le domaine où vous définissez la DID à l'entrée active ou non. La valeur par défaut est Y.

	<BR>
	<A NAME="vicidial_inbound_dids-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour ce n'a, ce qui permet d'administration de visualisation de ce ne restreint par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce fait.

	<BR>
	<A NAME="vicidial_inbound_dids-did_route">
	<BR>
	<B>Route DID - </B> Ce type de route que vous avez mis le DID à utiliser. EXTEN va envoyer des appels à l'extension en dessous, à la messagerie vocale vous envoyer des appels directement à la boîte vocale en dessous, AGENT envoie les appels vers un agent VICIDIAL s'ils sont identifiés, PHONE enverra l'appel d'un téléphone d'entrée, sélectionnez ci-dessous, vous IN_GROUP envoyer des appels directement à l'arrivée du groupe spécifié. La valeur par défaut est EXTEN. CALLMENU allez envoyer l-appel vers le menu Appel définie.

	<BR>
	<A NAME="vicidial_inbound_dids-record_call">
	<BR>
	<B>Enregistrement de l'appel -</B> Cette option vous permet de définir les appels à venir dans ce fait pour être enregistrées. Y va enregistrer tout l'appel, Y_QUEUESTOP enregistrera l'appel jusqu'à ce que l'appel est hungup ou pénètre dans une file d'attente en groupe N ne sera pas enregistrer l'appel. Par défaut est N.

	<BR>
	<A NAME="vicidial_inbound_dids-extension">
	<BR>
	<B>Extension - </B> Si EXTEN est sélectionné en tant que DID route, alors c'est le dialplan extension qui appelle sera envoyée. La valeur par défaut est 9998811112, pas de service.

	<BR>
	<A NAME="vicidial_inbound_dids-exten_context">
	<BR>
	<B>Extension Contexte - </B> Si EXTEN est sélectionné en tant que DID route, alors c'est le contexte qui dialplan demande sera envoyée. Par défaut est la valeur par défaut.

	<BR>
	<A NAME="vicidial_inbound_dids-voicemail_ext">
	<BR>
	<B>Boite vocale - </B> Si messagerie vocale est sélectionné en tant que DID Route, c'est la boîte vocale qui demande sera envoyée. La valeur par défaut est vide.

	<BR>
	<A NAME="vicidial_inbound_dids-phone">
	<BR>
	<B>Téléphone Extension - </B> si le téléphone est sélectionné comme DID Route, cette extension est le téléphone que les appels seront envoyées.

	<BR>
	<A NAME="vicidial_inbound_dids-server_ip">
	<BR>
	<B>Téléphone IP du serveur - </B> si le téléphone est sélectionné comme DID route, alors c'est l'IP du serveur pour le téléphone d'extension que les appels seront envoyés à.

	<BR>
	<A NAME="vicidial_inbound_dids-menu_id">
	<BR>
	<B>Appel du menu -</B> Si CALLMENU est sélectionné comme la Route de DID, alors c-est le menu d-appel que les appels seront envoyés aux.

	<BR>
	<A NAME="vicidial_inbound_dids-user">
	<BR>
	<B>Utilisateur Agent - </B> si l'agent est sélectionné en tant que DID route, alors c'est le VICIDIAL l'agent qui demande sera envoyée à.

	<BR>
	<A NAME="vicidial_inbound_dids-user_unavailable_action">
	<BR>
	<B>Utilisateur Unavailable Action - </B> si l'agent est sélectionné en tant que DID route, et l'utilisateur n'est pas connecté ou disponible, c'est la route que les appels se.

	<BR>
	<A NAME="vicidial_inbound_dids-user_route_settings_ingroup">
	<BR>
	<B>Utilisateur Settings En Route-Group - </B> si l'agent est sélectionné en tant que DID route, alors c'est le groupe In-qui sera utilisé pour la file d'attente de paramètres que l'appelant est en attente d'être envoyé à l'agent. La valeur par défaut est AGENTDIRECT.

	<BR>
	<A NAME="vicidial_inbound_dids-group_id">
	<BR>
	<B>In-Groupe ID - </B> Si IN_GROUP est sélectionné en tant que DID route, alors c'est le groupe qui en demande sera envoyée à.

	<BR>
	<A NAME="vicidial_inbound_dids-call_handle_method">
	<BR>
	<B>In-Group Call Manipuler Méthode -</B> Si IN_GROUP est sélectionné comme la Route de DID, alors c-est la gestion des appels de méthode utilisée pour ces appels. CID va ajouter un enregistrement nouveau chef de file à chaque appel en utilisant le CallerID que le numéro de téléphone, CIDLOOKUP va tenter de rechercher le numéro de téléphone par le CallerID dans l-ensemble du système, CIDLOOKUPRL va tenter de rechercher le numéro de téléphone par le CallerID dans une seule liste spécifiée , CIDLOOKUPRC va tenter de rechercher le numéro de téléphone par le CallerID dans toutes les listes qui appartiennent à la campagne déterminée, CLOSER est spécifié pour VICIDIAL Closer appels, ANI ajouter un enregistrement nouveau chef de file à chaque appel en utilisant l-ANI que le numéro de téléphone, ANILOOKUP va tenter de rechercher le numéro de téléphone par l-ANI dans le système tout entier, ANILOOKUPRL va tenter de rechercher le numéro de téléphone par l-ANI dans une seule liste spécifiée, XDIGITID va demander à l-appelant d-un code à quatre chiffres X avant l-appel sera mis en la file d-attente, VIDPROMPT va demander à l-appelant pour leur numéro d-identification et permettra de créer un dossier avec le nouveau chef de file CallerID que le numéro de téléphone et l-identifiant comme l-ID du vendeur, VIDPROMPTLOOKUP va tenter de rechercher l-ID dans l-ensemble du système, VIDPROMPTLOOKUPRL va tenter de rechercher l-ID de fournisseur par l-ID dans une seule liste spécifiée, VIDPROMPTLOOKUPRC va tenter de rechercher l-ID de fournisseur par l-ID dans l-ensemble des listes qui appartiennent à la campagne spécifié. Par défaut est CID. Si une méthode est utilisée avec CIDLOOKUP ALT, il va rechercher le domaine alt_phone pour le numéro de téléphone si aucune correspondance n'est trouvée pour le numéro de téléphone principal. Si une méthode est utilisée avec CIDLOOKUP ADDR3, il va rechercher le domaine address3 pour le numéro de téléphone si aucune correspondance n'est trouvée pour le numéro de téléphone principal et éventuellement le domaine alt_phone.

	<BR>
	<A NAME="vicidial_inbound_dids-agent_search_method">
	<BR>
	<B>In-Groupe Agent Méthode de recherche - </B> Si IN_GROUP est sélectionné en tant que DID route, alors c'est l'agent de recherche à la méthode de l'arrivée du groupe, LO est à équilibrage de charge-débordement et d'essayer d'envoyer l'appel à un agent sur le serveur local avant d'essayer de l'envoyer à un agent sur un autre serveur, LB est à équilibrage de charge et de tenter d'envoyer l'appel à l'agent, quel que soit elles sont sur le serveur, le serveur SO est seulement et que d'essayer d'envoyer des appels vers les agents sur le serveur que l'appel est venu dans le. La valeur par défaut est LB.

	<BR>
	<A NAME="vicidial_inbound_dids-list_id">
	<BR>
	<B>Dans la liste Groupe ID - </B> Si IN_GROUP est sélectionné en tant que DID Route, c'est la liste qui mène mai ID être recherchées à travers et que le conduit sera inséré dans le cas échéant.

	<BR>
	<A NAME="vicidial_inbound_dids-campaign_id">
	<BR>
	<B>En-groupe ID de la campagne - </B> Si IN_GROUP est sélectionné en tant que DID route, alors c'est le ID de la campagne que mène mai être recherchée dans le cas de la méthode est de faire appel CIDLOOKUPRC.

	<BR>
	<A NAME="vicidial_inbound_dids-phone_code">
	<BR>
	<B>En-groupe Téléphone Code - </B> Si IN_GROUP est sélectionné en tant que DID route, alors ce téléphone est le code utilisé si un nouveau chef de file est créé.

	<BR>
	<A NAME="vicidial_inbound_dids-filter_clean_cid_number">
	<BR>
	<B>Nettoyez Nombre CID -</B> Ce champ vous permet de spécifier un certain nombre de chiffres à limiter le nombre d'appel entrant ID en mettant un R en face de le nombre de chiffres, par exemple pour limiter les 10 chiffres de droite, vous devez entrer dans R10. Vous pouvez également utiliser cette fonctionnalité pour supprimer seulement un chiffre de premier plan ou de chiffres en mettant un L devant les chiffres spécifiques que vous souhaitez supprimer, par exemple pour enlever un 1 comme le premier chiffre que vous entrez en L1. Par défaut est vide. Si plus d'une règle est prévue assurez-vous de les séparer par un espace et du R sera exécuté avant la L.

	<BR>
	<A NAME="vicidial_inbound_dids-filter_inbound_number">
	<BR>
	<B>Filtre Nombre entrants -</B> Cette option, si activée, vous permet de filtrer les appels à venir dans ce DID et les envoyer à une autre action si elles correspondent à un numéro de téléphone qui se trouve dans le groupe téléphone filtre ou une réponse URL si vous avez configuré un. Défaut est Disabled. GROUPE va chercher dans un groupe Téléphone filtre. URL enverra une URL et correspondra si un 1 est renvoyé.

	<BR>
	<A NAME="vicidial_inbound_dids-filter_phone_group_id">
	<BR>
	<B>Filtre ID Groupe Téléphone -</B> Si le champ Numéro de filtre entrant est réglé sur GROUPE, alors c'est l'ID du groupe Téléphone filtre qui aura ses numéros de recherche à la recherche d'un match à l'identification de l'appelant le numéro de l'appel entrant.

	<BR>
	<A NAME="vicidial_inbound_dids-filter_url">
	<BR>
	<B>URL Filter -</B> Si le champ Numéro de filtre entrant est réglé à l'URL, alors c'est l'adresse Web d'un script qui va chercher un système distant et retourner un 1 pour un match et un 0 pour aucun match. Seuls les deux variables sont disponibles à l'adresse si vous utilisez le préfixe VAR comme avec des adresses formulaire en ligne dans les campagnes, - A - phone_number - B - et - A - did_pattern - B - peut être utilisé dans l'URL pour indiquer l'ID de l'appelant de l'appelant et l'a fait que le client a appelé dans le.

	<BR>
	<A NAME="vicidial_inbound_dids-filter_action">
	<BR>
	<B>Action de filtrage -</B> Si le filtre est activé Nombre entrants et une correspondance est trouvée, alors c'est l'action qui doit être prise. C'est la même chose que la route que vous sélectionnez pour un SDA, et les réglages ci-dessous fonctionnent comme ils le font pour une norme de routage.

	<BR>
	<A NAME="vicidial_inbound_dids-custom_one">
	<BR>
	<B>La coutume voulait Champs - </ B> Ces cinq champs peuvent être utilisés à des fins diverses, la plupart ayant trait à la programmation personnalisée et des rapports.




	<BR>
	<A NAME="vicidial_did_ra_extensions">
	<BR>
	<B>DID télécommande remplace extension de l'agent -</B><BR>Cette section vous permet d'activer DID d'avoir des remplacements de vulgarisation pour l'agent à distance acheminés par le biais de demande-groupes. Le début d'utilisateur doit être valide démarrage à distance de l'agent utilisateur ou si vous voulez l'extension Remplacer l'entrée de travailler pour tous les appels, vous pouvez utiliser --- Tous --- dans le champ Début de l'utilisateur. S'il ya des entrées multiples pour le même DID et l'utilisateur sur Démarrer, puis les entrées actives sera utilisé dans un procédé à la ronde.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_CALL MENU TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_call_menu-menu_id">
	<BR>
	<B>Menu ID -</B> Ceci est l-ID pour cette étape du menu d-appel. Ce sera également visible selon le contexte qui est utilisée dans le plan de numérotation pour cet appel menu. Voici une liste de phrases réservés qui ne peuvent pas être utilisés en tant que menu ID: vicidial, vicidial-auto, general, globals, default, trunkinbound, loopback-no-log, monitor_exit, monitor.

	<BR>
	<A NAME="vicidial_call_menu-menu_name">
	<BR>
	<B>Nom du menu -</B> Ce champ est le nom descriptif pour le menu d-appel.

	<BR>
	<A NAME="vicidial_call_menu-menu_prompt">
	<BR>
	<B>Menu rapide -</B> Ce champ contient le nom du fichier audio de l-invite à jouer au début de ce menu. Vous pouvez entrer propmts multiples dans ce domaine et invite les autres champs en les séparant par un caractère pipe.

	<BR>
	<A NAME="vicidial_call_menu-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_call_menu-menu_timeout">
	<BR>
	<B>Menu Timeout -</B> Ce champ est l-endroit où vous définissez le délai en secondes que le menu va attendre que l-appelant à entrer dans un choix DTMF. Fixation de ce champ à zéro 0 signifie qu-il n-y aura pas de temps d-attente après le prompt est joué.

	<BR>
	<A NAME="vicidial_call_menu-menu_timeout_prompt">
	<BR>
	<B>Menu prompt timeout -</B> Ce champ contient le nom du fichier audio de l-invite à jouer lorsque le délai d-attente a été atteint. AUCUNE par défaut est de ne jouer aucune audio à temporisation.

	<BR>
	<A NAME="vicidial_call_menu-menu_invalid_prompt">
	<BR>
	<B>Menu Blancs Prompt -</B> Ce champ contient le nom du fichier audio de l-invite à jouer lorsque l-appelant a choisi une option non valide. AUCUNE par défaut est de ne jouer aucune audio à invalide.

	<BR>
	<A NAME="vicidial_call_menu-menu_repeat">
	<BR>
	<B>Menu Répétez -</B> Ce champ est l-endroit où vous définissez le nombre de fois que le menu sera joué après la première fois si aucun choix valide est faite par l-appelant. Par défaut est de 1 à répéter le menu une fois.

	<BR>
	<A NAME="vicidial_call_menu-menu_time_check">
	<BR>
	<B>Menu Heure Départ -</B> Ce champ est l-endroit où vous pouvez choisir de restreindre l-accès au menu d-appel des heures spécifiques mis en place à l-heure choisie Call. Si le temps d-appel est vide, ce paramètre sera ignoré. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="vicidial_call_menu-call_time_id">
	<BR>
	<B>Identifiant de la période d'appels -</B> C-est l-appel Heure ID qui sera utilisé pour restreindre fois appelant si le menu Heure option Vérifier est activée.

	<BR>
	<A NAME="vicidial_call_menu-track_in_vdac">
	<BR>
	<B>Le suivi des appels dans Real-Time Report -</B> Ce champ est l-endroit où vous pouvez choisir si vous voulez l-appel à être suivis dans l-écran en temps réel comme un appel entrant RVI type. Par défaut est 1 pour actifs.

	<BR>
	<A NAME="vicidial_call_menu-tracking_group">
	<BR>
	<B>Groupe de suivi -</B> Ceci est l-ID que vous pouvez utiliser pour suivre les appels vers ce menu d-appel lorsque l-on examine le Rapport IVR. La liste comprend CALLMENU par défaut ainsi que l-ensemble de l-En-Groupes.

	<BR>
	<A NAME="vicidial_call_menu-dtmf_log">
	<BR>
	<B>Connectez-vous Appuyer sur la touche -</B> Cette option si elle est activée vous connecterez la presse DTMF clé par l'appelant dans ce menu Appel. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="vicidial_call_menu-dtmf_field">
	<BR>
	<B>Connectez-vous Champ -</B> Si l'option de presse Key Log est activé, ce paramètre optionnel peut permettre à la réponse aussi être stocké dans ce champ la liste. vendor_lead_code, source_id, phone_code, title, first_name, middle_initial, last_name, address1, address2, address3, city, state, province, postal_code, country_code, alt_phone, email, security_phrase, comments, rank, owner, status, user. Par défaut est NONE pour personnes à mobilité réduite.

	<BR>
	<A NAME="vicidial_call_menu-option_value">
	<BR>
	<B>Valeur d-option -</B> Ce champ est l-endroit où vous définissez l-option de menu, les choix possibles sont: 0,1,2,3,4,5,6,7,8,9,*,#,A,B,C,D,TIMECHECK. Le timecheck option spéciale peut être utilisée que si vous avez menu Heure Départ activé et il ya un temps d-appel définis pour le menu. Pour supprimer une option, vient de mettre la route pour supprimer et l-option sera supprimée lorsque vous cliquez sur le bouton ENVOYER. TIMEOUT vous permettra de mettre ce qui se passe à l'appel quand il arrive à expiration sans la participation de l'appelant. INVALID vous permettra de définir ce qui se passe lorsque l'appelant entre une option non valide. INVALID_2ND et 3e ne peut être active que si INVALID n'est pas utilisé, il faudra patienter jusqu'à l'entrée deuxième ou troisième invalide par l'appelant avant d'exécuter l'option.

	<BR>
	<A NAME="vicidial_call_menu-option_description">
	<BR>
	<B>Option Description -</B> Ce champ est l-endroit où vous pouvez décrire l-option, cette description sera mis dans le plan de numérotation en tant que commentaire dessus de l-option.

	<BR>
	<A NAME="vicidial_call_menu-option_route">
	<BR>
	<B>Option Itinéraire -</B> Ce menu contient les options pour savoir où envoyer l-appel si cette option est sélectionnée: CALLMENU, endogroupe, DID, HANGUP, EXTENSION, téléphone. Pour CALLMENU, la valeur de marche doit être l-ID du menu d-appel que vous voulez que l-appel adressé à. Pour endogroupe, l-en-groupe que vous voulez que l-appel doit être envoyé aux besoins d-être sélectionnée ainsi que les 5 autres options qui restent à être mis à bien acheminer un appel à un groupe d-entrants. Pour DID, la valeur de route doit être le modèle de DID que vous voulez envoyer l-appel. Pour HANGUP, la valeur de la Route peut être le nom d-un fichier audio à jouer avant de raccrocher l-appel. Par extension, la qualité route doit être l-extension plan de numérotation que vous souhaitez envoyer l-appel à, et la route de valeur de contexte est le contexte que l-extension est situé dans, s-il est laissé en blanc le contexte par défaut par défaut. Pour le téléphone, la valeur de route doit être la valeur de connexion de téléphone pour les téléphones d-entrée que vous voulez envoyer l-appel. Pour la messagerie vocale, la Value itinéraire doit être le numéro de boîte vocale, le mesage non disponible sera joué. Pour AGI, la valeur de route doit être le script AGI et toutes les valeurs qui doivent être transmis à elle.

	<BR>
	<A NAME="vicidial_call_menu-option_route_value">
	<BR>
	<B>Valeur option Itinéraire -</B> Ce champ est l-endroit où vous entrez la valeur qui désigne l-endroit du choisis option de route que l-appel doit être dirigé vers.

	<BR>
	<A NAME="vicidial_call_menu-option_route_value_context">
	<BR>
	<B>Option Itinéraire valeur de contexte -</B> Ce champ est optionnel et utilisé uniquement pour l-option Itinéraires EXTENSION.

	<BR>
	<A NAME="vicidial_call_menu-ingroup_settings">
	<BR>
	<B>Appelez le menu Réglages En-Groupe -</B> Si l'itinéraire est défini à l'endogroupe puis, il ya de nombreuses options que vous pouvez utiliser pour définir la manière dont l'appel est envoyé à la file d'attente en. En-Group est le groupe entrant que vous voulez l'appel à aller. Méthode La poignée est la façon dont vous voulez que l'appel à être manipulés, <a href="#vicidial_inbound_dids-call_handle_method">Cliquez ici pour voir une liste des méthodes disponibles poignée</a>. Méthode de recherche définit la manière dont la file d'attente se trouve le prochain agent, de recommander le laisser sur LB. ID de liste est la liste que le nouveau chef de file est inséré, même si la méthode n'est pas une méthode LOOKUP et le plomb ne se trouve pas. ID de la campagne est la campagne pour chercher des listes par le biais si l'un des méthodes RC est utilisé. Code de téléphone est l'entrée du champ phone_code pour le plomb qui est insérée avec. VID Entrez nom de fichier est utilisé si la méthode est définie à l'une des méthodes VIDPROMPT, il est l'invite audio joué de demander au client d'entrer son identifiant. Nom du fichier VID Numéro d'identification est utilisée si la méthode est définie à l'une des méthodes VIDPROMPT, il est l'invite audio jouée après la clientèle entre leur carte d'identité, quelque chose comme vous avez saisies. VID Confirmer nom de fichier est utilisé si la méthode est définie à l'une des méthodes VIDPROMPT, il est l'invite audio joué afin de confirmer leur identité, quelque chose comme 1 COMMUNIQUÉ DE PRESSE POUR CONFIRMER ET 2 DE RETOURNER. Chiffres VID est utilisée si la méthode est définie à l'une des méthodes VIDPROMPT, si elle est définie à un certain nombre, c'est le nombre de chiffres qui doivent être saisies par le client lorsque vous êtes invité pour leur identité, s'il est réglé à vide ou X puis le client devra appuyer sur la livre ou le hachage pour terminer leur entrée sur leur carte d'identité.

	<BR>
	<A NAME="vicidial_call_menu-custom_dialplan_entry">
	<BR>
	<B>Entrée personnalisée Dialplan -</B> Ce champ vous permet d-entrer dans tous les éléments de plan de numérotation que vous souhaitez pour le menu d-appel.





	<BR><BR><BR><BR>

	<BR>
	<A NAME="vicidial_filter_phone_groups-filter_phone_group_id">
	<BR>
	<B>Filtre ID Groupe Téléphone -</B> C'est l'ID du groupe Téléphone filtre qui est le conteneur pour un groupe de numéros de téléphone que vous pouvez avoir automatiquement fouillé quand un appel arrive dans un fichier. DID et l'envoyer à un autre itinéraire si il ya un match Ce champ doit être comprise entre 2 et 20 caractères et n'ont pas de ponctuation à l'exception de soulignement.

	<BR>
	<A NAME="vicidial_filter_phone_groups-filter_phone_group_name">
	<BR>
	<B>Filtre Nom du groupe Téléphone -</B> This is the name of the Filter Phone Group and is displayed with the ID in select lists where this feature is used. This field should be between 2 and 40 characters.

	<BR>
	<A NAME="vicidial_filter_phone_groups-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_filter_phone_groups-filter_phone_group_description">
	<BR>
	<B>Filtre Description du groupe Téléphone -</B> Ceci est la description du groupe Téléphone filtre, il est purement à des fins de notation et n'est pas un champ obligatoire.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_REMOTE_AGENTS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_remote_agents-user_start">
	<BR>
	<B>ID utilisateur de départ -</B> C'est l'ID utilisateur de départ qui est utilisé quand un entrée d'agent distant est inserée dans le système. Si le nombre de lignes est plus grand que 1, ce nombre est incrementé de un pour chaque ligne qui a une entrée. Assurez vous d'avoir créer un nouveau compte utilisateur VICIDIAL avec un niveau de 4 ou plus si vous voulez qu'il puisse utiliser la page vdremote.php pour pour un accès web distant pour ce compte.

	<BR>
	<A NAME="vicidial_remote_agents-number_of_lines">
	<BR>
	<B>Numéro de lignes -</B> Cela définie combien d'entrées d'agent distants le système crée, et détermine combien de lignes peuvent être envoyées sans soucis au numéro ci-dessus.

	<BR>
	<A NAME="vicidial_remote_agents-server_ip">
	<BR>
	<B>IP du serveur -</B> Une entrée d'agent distant est seulement valide pour un serveur spécifique, c'est ici que vous sélectionnez quel serveur vous voulez.

	<BR>
	<A NAME="vicidial_remote_agents-conf_exten">
	<BR>
	<B>Extension externe -</B> C'est le numéro vers lequel vous voulez faire suivre l'appel. Assurez vous que c'est un numéro du dial plan et si vous avez besoin d'un 9 au début mettez le ici. Testez en appelant ce numéro depuis un téléphone du système.

	<BR>
	<A NAME="vicidial_remote_agents-extension_group">
	<BR>
	<B>Groupe d'extension -</B> Si réglé sur autre chose que NONE ou vide cela surcharger le champ d'extension externe et d'utiliser les entrées de groupe de vulgarisation qui ont la même extension ID groupe. Par défaut est NONE pour désactiver.

	<BR>
	<A NAME="vicidial_remote_agents-status">
	<BR>
	<B>Etat -</B> C'est ici que vous activez ou desacivez l'agent distant. Dès que l'agent est actif le systeme permet que des appels puissent lui être envoyés. Cela peu prendre plus de 30 secondes à partir du moment où vous avez desactivé l'agent jusqu'à l'arrêt de la réception des appels.

	<BR>
	<A NAME="vicidial_remote_agents-campaign_id">
	<BR>
	<B>Campagne -</B> C'est ici que vous choisissez la campagne dans laquelle ces agents distants ce connecteront. Les appels entrants ont besoin d'une campagne de type CLOSER et de selectionner les campagnes entrantes ci-dessus dans laquelle vous voulez recevoir des appels.

	<BR>
	<A NAME="vicidial_remote_agents-on_hook_agent">
	<BR>
	<B>On-Hook Agent -</B> Cette option est utilisée uniquement pour les appels entrants vont à cet agent à distance. Cette fonctionnalité sera appeler l'agent à distance et ne pas envoyer le client à l'agent à distance jusqu'à ce que la ligne est répondu. Par défaut est N pour les handicapés.

	<BR>
	<A NAME="vicidial_remote_agents-on_hook_ring_time">
	<BR>
	<B>Temps Ring On-Hook -</B> Cette option n'est utilisée que lorsque le champ Agent Sur-crochet ci-dessus est fixé à Y et alors seulement pour les appels entrants à venir à cet agent à distance. C'est le nombre de secondes que chaque tentative d'appel sonne pour essayer d'obtenir une réponse. Il est recommandé que vous définissez cette option sur quelques secondes inférieur à ce qu'il prend pour un appel à être envoyé vers la messagerie vocale. Par défaut est 15.

	<BR>
	<A NAME="vicidial_remote_agents-closer_campaigns">
	<BR>
	<B>Groupes entrants -</B> C'est ici que vous selectionnez les groupes entrants depuis lesquels vous voulez recevoir des appels si vous avez selectionné une campagne de type CLOSER.


	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_EXTENSION_GROUPS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_extension_groups-extension_group_id">
	<BR>
	<B>Groupe d'extension -</B> Ce champ est requis lorsque vous entrez l'ID du groupe que vous voulez cette extension pour être mis en. Pas d'espaces ni de caractères spéciaux à l'exception des lettres et des chiffres soulignent.

	<BR>
	<A NAME="vicidial_extension_groups-extension">
	<BR>
	<B>Extension -</B> Ce champ doit là où vous mettez l'extension que vous souhaitez plan de numérotation de l'agent à distance appelle à être envoyé à cette entrée du groupe d'extension.

	<BR>
	<A NAME="vicidial_extension_groups-rank">
	<BR>
	<B>Rank -</B> Ce champ vous permet de classer les entrées de groupe de vulgarisation qui partagent le groupe même extension. Par défaut est 0.

	<BR>
	<A NAME="vicidial_extension_groups-campaign_groups">
	<BR>
	<B>Groupes Campagnes -</B> Dans ce domaine, vous pouvez mettre une liste d'ID de campagne et ou ID de groupe entrants que vous souhaitez restreindre l'utilisation du groupe d'extension pour. Liste doivent être séparés par des tuyaux et un tuyau au début et à la fin de la chaîne.


	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_CAMPAIGN_LISTS</FONT></B><BR><BR>
	<A NAME="vicidial_campaign_lists">
	<BR>
	<B>Les listes de cette campagne sont énumérées ici, leur activité est dénotée par le Y ou N et vous pouvez aller à l'écran de la liste en cliquant sur l'ID de la liste dans la première colonne.</B>


	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_CAMPAIGN_STATUSES TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_campaign_statuses">
	<BR>
	<B>En utilisant des statuts de campagne personnalisés, vous pouvez utiliser des statuts qui n'existent que pour une campagne spécifique. Le statut doit contenir entre 1 et 8 caractères , la description entre 2 et 30 et Selectionnable définit si il apparaît dans VICIDIAL comme disposition. Human_answered le champ est employé en calculant le pourcentage debaisse, ou le taux d'abandon. L'arrangement human_answered à Yemploiera ce statut en comptant les appels humain-répondus. L'option de catégorie vous permet de grouper plusieurs statuts dansun catogy qui peut être employé pour l'analyse statistique.</B>



	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR><BR><BR><BR>

		<B><FONT SIZE=3>VICIDIAL_CAMPAIGN_HOTKEYS TABLE</FONT></B><BR><BR>
		<A NAME="vicidial_campaign_hotkeys">
		<BR>
		<B>En utilisant des raccourcis clavier personnalisés, les agents utilisant le client web VICIDIAL peuvent raccrocher et statuer les appels juste en pressant une seule touche du clavier.</B> Il y a deux raccourcis claviers que vous pouvez utiliser en même temps que l'appel du numéro alternatif, ALTPH2 - Alternate Phone Hot Dial et ADDR3 - Adresse3 qui permet à un agent d'utiliser un raccourci pour raccocher l'appel, rester sur la fiche et appeler un autre numéro de la fiche. 





		<BR><BR><BR><BR>

		<B><FONT SIZE=3>VICIDIAL_LEAD_RECYCLE TABLE</FONT></B><BR><BR>
		<A NAME="vicidial_lead_recycle">
		<BR>
		<B>Through the use of lead recycling, you can call specific statuses of leads again at a specified interval without resetting the entire list. Lead recycling is campaign-specific and does not have to be a selected dialable status in your campaign. The attempt delay field is the number of seconds until the lead can be placed back in the hopper, this number must be at least 120 seconds. The attempt maximum field is the maximum number of times that a lead of this status can be attempted before the list needs to be reset, this number can be from 1 to 10. You can activate and deactivate a lead recycle entry with the provided links.</B>





		<BR><BR><BR><BR>

		<B><FONT SIZE=3>STATUTS VICIDIAL DE L'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF</FONT></B><BR><BR>
		<A NAME="vicidial_auto_alt_dial_statuses">
		<BR>
		<B>Si le champ Appel automatique du numéro alternatif est défini, alors les fiches diposées sous ces statuts d'appels automatiques du numéro alternatif auront leurs champs numéro alternatif et/ou adresse3 appelés après n'importe quel statut de non-réponse.</B>

		<?php
		}
	?>



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL CODES PAUSE DES AGENTS</FONT></B><BR><BR>
	<A NAME="vicidial_pause_codes">
	<BR>
	<B>Si les codes de pause des agents sont activés alors les agents pourront en selectionner un parmi ces codes quand ils cliquent sur le bouton PAUSE. Cette donnée est ensuite stockée dans les log sur les agents vicidial. Un code de pause doit contenir uniquement des lettres et des chiffres et doit contenir moins de 7 caractères. Le nom du code ne doit pas contenir plus de 30 caractères.</B>





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL CAMPAIGN PRESETS</FONT></B><BR><BR>
	<A NAME="vicidial_xfer_presets">
	<BR>
	<B>Si le réglage de la campagne pour les presets est ENABLED alors vous avez la possibilité de définir le transfert à la Conférence des préréglages qui seront disponibles à l'agent qui leur permet de 3-way appeler ces préréglages ou transférer des appels aveugles à ces numéros de présélection. Ces presets ont également une option pour cacher le numéro associé à chaque préréglage de l'agent.</B>





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL CAMPAIGN CID Indicatif régionalS</FONT></B><BR><BR>
	<A NAME="vicidial_campaign_cid_areacodes">
	<BR>
	<B>Si le réglage du système pour le code zonal CID est activée et la mise en campagne pour une utilisation personnalisée CallerID est réglé sur le code zonal alors vous avez la possibilité de définir CID indicatif régional qui seront utilisés lors d'appels sortants à des fils dans cette campagne spécifique. Vous pouvez ajouter plusieurs callerIDs par indicatif régional et vous pouvez activer et désactiver à chacun en temps réel. Si plus d'un callerID est actif pour un indicatif régional spécifique, le système utilisera la callerid qui a été utilisé le moins de fois aujourd'hui. Si aucun callerIDs sont actifs pour le code zonal alors le CallerID campagne ou la liste prioritaire CallerID sera utilisé.</B>





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_USER_GROUPS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_user_groups-user_group">
	<BR>
	<B>Groupe d'utilisateurs -</B> C'est le nom court d'un groupe d'utilisateurs Vicidial, n'utilisez ni espaces ni ponctuation pour ce champ. Max 20 caractère min 2.

	<BR>
	<A NAME="vicidial_user_groups-group_name">
	<BR>
	<B>Nom du Groupe -</B> C'est la description du groupe d'utilisateurs vicidial. Max 40 caractères.

	<BR>
	<A NAME="vicidial_user_groups-forced_timeclock_login">
	<BR>
	<B>Force timeclock Login - </B> Cette option vous permet de ne pas laisser un agent vous connecter à l'interface agent VICIDIAL si elles ne sont pas enregistrés dans le timeclock. La valeur par défaut est N. Il est possible d'exonérer les utilisateurs admin, le niveau 8 et 9.

	<BR>
	<A NAME="vicidial_user_groups-shift_enforcement">
	<BR>
	<B>Shift exécution -</B> Ce paramètre vous permet de restreindre l'agent de connexion sur la base des changements qui ont été sélectionnés ci-dessous. OFF ne fera pas appliquer à tous les changements. START ne faire respecter les temps de connexion, mais n'aura pas d'incidence sur un agent qui est en cours d'exécution sur leurs heures de travail si elles sont déjà logged in ALL appliquent passer l'heure de début et se connecter à un agent, après, ils courent sur la fin de leur quart de temps. La valeur par défaut est OFF.

	<BR>
	<A NAME="vicidial_user_groups-group_shifts">
	<BR>
	<B>Groupe changements - </B> Il s'agit d'un choix de la liste des changements qui peuvent restreindre l'accès des agents à temps sur le système.

	<BR>
	<A NAME="vicidial_user_groups-allowed_campaigns">
	<BR>
	<B>Campagnes autorisés -</B> C'est une liste de campagnes dans lesquelles les utilisateurs de ce groupes pourront se connecter. L'option TOUTES LES CAMPAGNES autorise les utilisateurs de ce groupe à voir et se connecter à toutes les campagnes sur le système.

	<BR>
	<A NAME="vicidial_user_groups-agent_status_viewable_groups">
	<BR>
	<B>Le statut de mandataire Viewable Groupes -</B> Ceci est une liste sélectionnable de groupes d-utilisateurs et les fonctions utilisateur pour lequel les membres de ce groupe d-utilisateurs peuvent visualiser l-état des appels ainsi que le transfert vers l-intérieur de l-écran de l-agent. The All-GROUPES option permet aux utilisateurs de ce groupe à voir et à transférer des appels vers n-importe quel utilisateur sur le système. La CAMPAGNE AGENTS option permet aux utilisateurs de ce groupe à voir et à transférer des appels vers n-importe quel utilisateur dans la campagne à laquelle ils sont connectés à. L'option non-logé-IN-AGENTS permet à tous les utilisateurs dans le système pour être affiché, même si elles ne sont pas enregistrés curently.

	<BR>
	<A NAME="vicidial_user_groups-agent_status_view_time">
	<BR>
	<B>Le statut de mandataire Afficher Time -</B> Cette option définit si l-agent va voir la quantité de temps que les utilisateurs dans leur encadré agent ont été dans leur état actuel. Par défaut est N pour non ou handicapés.

	<BR>
	<A NAME="vicidial_user_groups-agent_call_log_view">
	<BR>
	<B>Voir le journal de l'Agent d'appel -</B> Cette option définit si l'agent sera en mesure de voir leur journal d'appels pour les appels traités par le biais de l'écran l'agent Vicidial. Par défaut est N pour non ou désactivé.

	<BR>
	<A NAME="vicidial_user_groups-agent_xfer_options">
	<BR>
	<B>Options de transfert de l'agent -</B> Ces options permettent la désactivation des boutons spécifiques dans la section Transfert Conférence de l'interface de l'agent. Par défaut est O pour oui ou permis.

	<BR>
	<A NAME="vicidial_user_groups-agent_fullscreen">
	<BR>
	<B>Agent plein écran -</B> Cette option si elle est définie à Y définir la hauteur et la largeur de l'écran l'agent Vicidial à la taille de la fenêtre du navigateur web sans aucune indemnité pour la vue d 'agents, Appels en file d'attente ou de demande en vue de la session. Par défaut est N pour non ou désactivé.

	<BR>
	<A NAME="vicidial_user_groups-allowed_reports">
	<BR>
	<B>Rapports admis -</B> Si un utilisateur dans ce groupe est fixé à 7 niveau de l'utilisateur ou plus, cette fonction peut être utilisée pour restreindre les rapports que les utilisateurs peuvent visualiser. Par défaut est ALL. Si vous voulez sélectionner plus d'un rapport, puis appuyez sur la touche Ctrl de votre clavier pendant que vous sélectionnez les rapports.

	<BR>
	<A NAME="vicidial_user_groups-admin_viewable_groups">
	<BR>
	<B>Groupes d'utilisateurs autorisés -</B> Ceci est une liste sélectionnable de groupes d'utilisateurs à laquelle les membres de ce groupe d'utilisateurs peuvent visualiser et éventuellement modifier. Groupes d'utilisateurs peuvent restreindre l'accès à presque tous les aspects du système, à partir de DID entrants vers des téléphones à des boîtes vocales. Le - ALL - option permet aux utilisateurs de ce groupe à voir et à connecter à n'importe quel dossier sur le système si leurs autorisations d'utilisateur le permettent.

	<BR>
	<A NAME="vicidial_user_groups-admin_viewable_call_times">
	<BR>
	<B>Durée des appels autorisés -</B> Ceci est une liste sélectionnable Durée des appels à laquelle les membres de ce groupe d'utilisateurs peuvent utiliser dans les campagnes, dans les groupes et les menus d'appel. Le - ALL - option permet aux utilisateurs de ce groupe à utiliser tous les temps d'appel dans le système.


	<?php
	if (strlen($SSwebphone_url) > 5)
		{
		?>
		<BR>
		<A NAME="vicidial_user_groups-webphone_url_override">
		<BR>
		<B>Remplacer URL Webphone -</B> Ce paramètre vous permet de définir une URL webphone autre seulement pour les membres d'un groupe d'utilisateurs. Par défaut est vide.

		<BR>
		<A NAME="vicidial_user_groups-webphone_systemkey_override">
		<BR>
		<B>Webphone Key System Override -</B> Ce paramètre vous permet de définir une clé de remplacement webphone système juste pour les membres d'un groupe d'utilisateurs. Par défaut est vide.

		<BR>
		<A NAME="vicidial_user_groups-webphone_dialpad_override">
		<BR>
		<B>Webphone Dialpad Override -</B> Ce paramètre vous permet d'activer ou de désactiver le clavier sur le webphone seulement pour les membres d'un groupe d'utilisateurs. Défaut est Disabled. Toggle va permettre à l'utilisateur de visualiser et de cacher le clavier en cliquant sur un lien. TOGGLE_OFF par défaut pour ne pas montrer le clavier sur la première charge, mais permettra à l'utilisateur d'afficher le clavier en cliquant sur le lien clavier.

		<?php
		}

	if ($SSqc_features_active > 0)
		{
		?>
		<BR>
		<A NAME="vicidial_user_groups-qc_allowed_campaigns">
		<BR>
		<B>QC permis Campagnes - </B> Il s'agit d'un choix de la liste des campagnes où les membres de ce groupe d'utilisateurs seront en mesure de QC. Le ALL-CAMPAGNES option permet aux utilisateurs de ce groupe de Québec une campagne sur le système.

		<BR>
		<A NAME="vicidial_user_groups-qc_allowed_inbound_groups">
		<BR>
		<B>QC permis l'arrivée des groupes - </B> Il s'agit d'un choix de la liste des groupes dont l'arrivée des membres de ce groupe d'utilisateurs seront en mesure de QC. Le ALL-GROUPES option permet aux utilisateurs dans ce groupe d'utilisateurs QC arrivée du groupe sur tout le système.
		<?php
		}
	?>




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_SCRIPTS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_scripts-script_id">
	<BR>
	<B>Id du script -</B> C'est le nom court d'un Script Vicidal. Il doit être unique. Ne pas utiliser d'espace ni de ponctuation pour ce champ. Doit être composé de 2 à 10 caractères.

	<BR>
	<A NAME="vicidial_scripts-script_name">
	<B>Nom du ccript -</B> C'est le titre du script Vicidial. C'est une courte description du script. Maximum 50 caractères, minimum 2. Il ne doit pas avoir d'espace ou de ponctuation de quelque sorte dans ce champ.

	<BR>
	<A NAME="vicidial_scripts-script_comments">
	<B>Commentaires du script  -</B> C'est ici que vous entrez un commentaire pour le script Vicidial comme -changed to free upgrade on Sept 23- Max 255 caractères , min 2 caractères.

	<BR>
	<A NAME="vicidial_scripts-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_scripts-script_text">
	<B>Texte du script -</B> This is where you place the content of a Vicidial Script. Minimum of 2 characters. You can have customer information be auto-populated in this script using "--A--field--B--" where field is one of the following fieldnames: vendor_lead_code, source_id, list_id, gmt_offset_now, called_since_last_reset, phone_code, phone_number, title, first_name, middle_initial, last_name, address1, address2, address3, city, state, province, postal_code, country_code, gender, date_of_birth, alt_phone, email, security_phrase, comments, lead_id, campaign, phone_login, group, channel_group, SQLdate, epoch, uniqueid, customer_zap_channel, server_ip, SIPexten, session_id, dialed_number, dialed_label, rank, owner, camp_script, in_script, script_width, script_height, recording_filename, recording_id, user_custom_one, user_custom_two, user_custom_three, user_custom_four, user_custom_five, preset_number_a, preset_number_b, preset_number_c, preset_number_d, preset_number_e, preset_number_f, preset_dtmf_a, preset_dtmf_b, did_id, did_extension, did_pattern, did_description, closecallid, xfercallid, agent_log_id, entry_list_id, call_id. For example, this sentence would print the persons name in it----<BR><BR>  Hello, can I speak with --A--first_name--B-- --A--last_name--B-- please? Well hello --A--title--B-- --A--last_name--B-- how are you today?<BR><BR> This would read----<BR><BR>Hello, can I speak with John Doe please? Well hello Mr. Doe how are you today?<BR><BR> You can also use an iframe to load a separate window within the SCRIPT tab, here is an example with prepopulated variables:

	<DIV style="height:200px;width:400px;background:white;overflow:scroll;font-size:12px;font-family:sans-serif;" id=iframe_example>
	&#60;iframe src="http://astguiclient.sf.net/test_VICIDIAL_output.php?lead_id=--A--lead_id--B--&#38;vendor_id=--A--vendor_lead_code--B--&#38;list_id=--A--list_id--B--&#38;gmt_offset_now=--A--gmt_offset_now--B--&#38;phone_code=--A--phone_code--B--&#38;phone_number=--A--phone_number--B--&#38;title=--A--title--B--&#38;first_name=--A--first_name--B--&#38;middle_initial=--A--middle_initial--B--&#38;last_name=--A--last_name--B--&#38;address1=--A--address1--B--&#38;address2=--A--address2--B--&#38;address3=--A--address3--B--&#38;city=--A--city--B--&#38;state=--A--state--B--&#38;province=--A--province--B--&#38;postal_code=--A--postal_code--B--&#38;country_code=--A--country_code--B--&#38;gender=--A--gender--B--&#38;date_of_birth=--A--date_of_birth--B--&#38;alt_phone=--A--alt_phone--B--&#38;email=--A--email--B--&#38;security_phrase=--A--security_phrase--B--&#38;comments=--A--comments--B--&#38;user=--A--user--B--&#38;campaign=--A--campaign--B--&#38;phone_login=--A--phone_login--B--&#38;fronter=--A--fronter--B--&#38;closer=--A--user--B--&#38;group=--A--group--B--&#38;channel_group=--A--group--B--&#38;SQLdate=--A--SQLdate--B--&#38;epoch=--A--epoch--B--&#38;uniqueid=--A--uniqueid--B--&#38;customer_zap_channel=--A--customer_zap_channel--B--&#38;server_ip=--A--server_ip--B--&#38;SIPexten=--A--SIPexten--B--&#38;session_id=--A--session_id--B--&#38;dialed_number=--A--dialed_number--B--&#38;dialed_label=--A--dialed_label--B--&#38;rank=--A--rank--B--&#38;owner=--A--owner--B--&#38;phone=--A--phone--B--&#38;camp_script=--A--camp_script--B--&#38;in_script=--A--in_script--B--&#38;script_width=--A--script_width--B--&#38;script_height=--A--script_height--B--&#38;recording_filename=--A--recording_filename--B--&#38;recording_id=--A--recording_id--B--&#38;user_custom_one=--A--user_custom_one--B--&#38;user_custom_two=--A--user_custom_two--B--&#38;user_custom_three=--A--user_custom_three--B--&#38;user_custom_four=--A--user_custom_four--B--&#38;user_custom_five=--A--user_custom_five--B--&#38;preset_number_a=--A--preset_number_a--B--&#38;preset_number_b=--A--preset_number_b--B--&#38;preset_number_c=--A--preset_number_c--B--&#38;preset_number_d=--A--preset_number_d--B--&#38;preset_number_e=--A--preset_number_e--B--&#38;preset_number_f=--A--preset_number_f--B--&#38;preset_dtmf_a=--A--preset_dtmf_a--B--&#38;preset_dtmf_b=--A--preset_dtmf_b--B--&#38;did_id=--A--did_id--B--&#38;did_extension=--A--did_extension--B--&#38;did_pattern=--A--did_pattern--B--&#38;did_description=--A--did_description--B--&#38;closecallid=--A--closecallid--B--&#38;xfercallid=--A--xfercallid--B--&#38;agent_log_id=--A--agent_log_id--B--&#38;entry_list_id=--A--entry_list_id--B--&#38;call_id=--A--call_id--B--&&#38;" style="width:580;height:290;background-color:transparent;" scrolling="auto" frameborder="0" allowtransparency="true" id="popupFrame" name="popupFrame" width="460" height="290" STYLE="z-index:17"&#62;
	&#60;/iframe&#62;
	</DIV>
	<BR>
	Vous pouvez également utiliser un IGNORENOSCROLL variable spéciale pour forcer les barres de défilement sur l'onglet script même si vous utilisez une iframe en son sein.

	<BR>
	<A NAME="vicidial_scripts-active">
	<BR>
	<B>Activé -</B> Cela determine si ce script peut être selectionné pour être utilisé dans une campagne.





	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR><BR><BR><BR>

		<B><FONT SIZE=3>VICIDIAL_LEAD_FILTRES TABLE</FONT></B><BR><BR>
		<A NAME="vicidial_lead_filters-lead_filter_id">
		<BR>
		<B>ID du Filtre -</B> C'est le nom court du filtre de fiches Vicidial. Il doit être unique. N'utilisez ni espace ni ponctuation. Max 10 caractères min 2.

		<BR>
		<A NAME="vicidial_lead_filters-lead_filter_name">
		<B>Nom du Filtre -</B> C'est un nom plus descrtiptif du filtre. C'est un court resumé du filtre. Max 30 caractères Min 2.

		<BR>
		<A NAME="vicidial_lead_filters-lead_filter_comments">
		<B>Commentaire du filtre -</B> C'est ici que vous placez les commmentaire du filtre vicidial comme -Appel toutes les fiches de Californie- max 255 characters, min 2.

		<BR>
		<A NAME="vicidial_lead_filters-user_group">
		<BR>
		<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

		<BR>
		<A NAME="vicidial_lead_filters-lead_filter_sql">
		<B>Filtre SQL -</B> C'est ici que vous mettez le fragment de requête SQL que vous voulez utiliser pour filtrer. Ne commencez pas ni ne finissez pas par AND, cela est automatiquement ajouté par le script cron. Exemple : called_count > 4 and called_count < 8 .
		<?php
		}
	?>




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_PERIODES D'APPELS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_call_times-call_time_id">
	<BR>
	<B>Identifiant de la période d'appel -</B> C'est le nom court de la période d'appel de VICIDIAL. Il doit être unique. N'utilisez pas d'espace ou de ponctuation. 10 caractères maximum et 2 minimum.

	<BR>
	<A NAME="vicidial_call_times-call_time_name">
	<B>Nom de la période d'appel -</B> C'est un nom plus descriptif de la période d'appel. Une courte description. 30 caractères maximum et 2 minimum.

	<BR>
	<A NAME="vicidial_call_times-call_time_comments">
	<B>Commentaires de la période d'appel -</B> Vous pouvez y placer des commentaires sur la période d'appel de Vicidial comme-de 10h00 à 16h00 avec des restrictions-. Max 255 caractères.

	<BR>
	<A NAME="vicidial_call_times-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_call_times-ct_default_start">
	<B>Heures de début et de fin par défaut -</B> Ce sont les heures par défaut pendant lesquelles un appel est autorisé si l'heure de début de day-of-the-week n'est pas définie. 0 est minuit. Pour interdir complétement les appels mettez 2400 et mettez 2400 à l'heure de fin par défaut. Pour autoriser les appels 24h/24, remplissez les champs avec 0 pour le début et 2400 pour la fin. Pour entrant seulement, vous pouvez également définir la durée d'appel d'arrêt supérieur à 2400 si vous voulez que le temps appel à aller au-delà de minuit. Donc, si vous voulez que votre temps d'appel à courir à partir de 6 h jusqu'à 2 h du matin le lendemain, vous mettriez 0600 que l'heure de début et 2600 que le temps d'arrêt.

	<BR>
	<A NAME="vicidial_call_times-ct_sunday_start">
	<B>Heures de début et de fin pour un jour -</B> Ce sont les heures de début et de fin personnalisés pour un jour. Les mêmes règles s'appliquent qu'aux heures de début et de fin par défaut.

	<BR>
	<A NAME="vicidial_call_times-default_afterhours_filename_override">
	<B>Après Nom Heures Override -</B> Ces champs vous permettent de remplacer le message après les heures pour les groupes entrants si elle est définie à quelque chose. Par défaut est vide.

	<BR>
	<A NAME="vicidial_call_times-ct_state_call_times">
	<B>Définitions des états des périodes d'appel -<\/B> C'est la liste des définitions spécifiques des périodes d'appels des états qui sont suivies dans cette définition de période d'appels.

	<BR>
	<A NAME="vicidial_call_times-state_call_time_state">
	<B>State Call Time State -<\/B> Ce sont les deux lettres code pour l'état auquel cette définition de période d'appels correspond. Pour que cela prenne effet, la période d'appel locale qui est définie dans la campagne doit avoir cette enregistrement d'état de période d'appel aussi bien que toutes les fiches ayant ces deux lettre codes d'état.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_SHIFTS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_shifts-shift_id">
	<BR>
	<B>Shift ID - </B> Il s'agit du nom court d'un VICIDIAL Shift Définition. Cela doit être un identifiant unique. Ne pas utiliser les espaces ou la ponctuation dans ce champ. max 20 caractères, un minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_shifts-shift_name">
	<B>Nom Shift - </B> Il s'agit d'un nom descriptif de la Maj Définition. Ceci est un bref résumé de la définition Maj. max 50 caractères, un minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_shifts-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_shifts-shift_start_time">
	<B>Start Time Shift - </B> Il est temps que la campagne commence à passer. Ne doivent être des chiffres, 9:30 AM serait 0930 et 5:00 PM serait 1700.

	<BR>
	<A NAME="vicidial_shifts-shift_length">
	<B>Longueur Shift - </B> Il est temps en heures et minutes que dure la campagne de changement. 8 heures seraient 08h00 et 7 heures et 30 minutes serait 07:30.

	<BR>
	<A NAME="vicidial_shifts-shift_weekdays">
	<B>Shift Weekdays - </B> Dans cette section, vous devriez choisir le jour de la semaine que ce changement est active.

	<BR>
	<A NAME="vicidial_shifts-report_option">
	<B>Option Report -</B> Cette option permet ce changement spécifique à apparaître dans les rapports sélectionnés qui soutiennent cette option.

	<BR>
	<A NAME="vicidial_shifts-report_rank">
	<B>Rapport Rang -</B> Cette option vous permet de classer les changements dans les rapports sélectionnés qui soutiennent cette option.




	<BR><BR><BR><BR>
	<A NAME="audio_store">
	<B>Audio Store -</B> Cet utilitaire vous permet de télécharger des fichiers audio vers le serveur Web de sorte qu'ils puissent être distribués à tous les serveurs Vicidial dans un cluster multi-serveur. Une remarque importante, seuls deux types de fichiers audio fonctionne, les fichiers. Wav qui sont PCM Mono 16 bits et 8k. Fichiers gsm qui sont 8k 8bit. S'il vous plaît vérifier que vos fichiers sont correctement mis en forme avant de les télécharger ici.



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_MUSIC_ON_HOLD TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_music_on_hold-moh_id">
	<BR>
	<B>Musique en attente d-identification -</B> Ceci est le nom court d-une musique d-attente d-entrée. Cela doit être un identifiant unique. N-utilisez pas d-espaces ou de ponctuation dans ce champ. max 100 caractères, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_music_on_hold-moh_name">
	<B>Musique d-attente Nom -</B> Il s-agit d-un nom plus descriptif de la Musique en attente d-entrée. Ceci est un bref résumé de la Musique en attente contexte et s-affiche comme un commentaire dans le musiconhold-file vicidial.conf. 255 caractères max, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_music_on_hold-active">
	<B>Active -</B> Cette option vous permet de définir la musique d-attente à l-entrée active ou inactive. Inactifs va supprimer l-entrée à partir des fichiers conf.

	<BR>
	<A NAME="vicidial_music_on_hold-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_music_on_hold-random">
	<B>Random Order -</B> Cette option vous permet de définir la lecture des fichiers audio dans un ordre aléatoire. Si elle est égale à N, alors l-ordre défini sera utilisé.

	<BR>
	<A NAME="vicidial_music_on_hold-filename">
	<B>Filename -</B> Pour ajouter un nouveau fichier audio à une musique d-attente d-entrée, le fichier doit d-abord être dans le magasin de l-audio, alors vous pouvez sélectionner le fichier et cliquez sur Soumettre pour l-ajouter à la liste des fichiers. Musique d-attente est mis à jour une fois par minute s-il ya eu des modifications apportées. Tous les fichiers qui ne figurent pas dans une musique à l-entrée détiennent qui sont présents dans la musique sur le dossier de détention seront supprimés.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_TTS_PROMPTS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_tts_prompts-tts_id">
	<BR>
	<B>TTS ID -</B> Ceci est le nom court d-une entrée de TTS. Cela doit être un identifiant unique. N-utilisez pas d-espaces ou de ponctuation dans ce champ. max 50 caractères, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_tts_prompts-tts_name">
	<B>TTS Nom -</B> Il s-agit d-un nom plus descriptif de l-entrée TTS. Ceci est un bref résumé de la définition de TTS. max 100 caractères, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_tts_prompts-active">
	<B>Active -</B> Cette option vous permet de définir l-entrée de TTS à l-état actif ou inactif.

	<BR>
	<A NAME="vicidial_tts_prompts-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_tts_prompts-tts_voice">
	<B>TTS Voix -</B> C'est là que vous définissez la voix pour être utilisé dans la génération TTS. Par défaut est Allison-8kHz.

	<BR>
	<A NAME="vicidial_tts_prompts-tts_text">
	<B>TTS Text -</B> Il s-agit du texte à la parole champ de données qui est envoyé à Cepstral pour la création du fichier audio à lire pour le client. vous pouvez utiliser Speech Synthesis Markup Language-SSML, dans ce domaine, par exemple, &lt;break time='1000ms'/&gt; pour une pause de 1 seconde. Vous pouvez également utiliser plusieurs variables telles que le nom, prénom et titre en tant que variables Vicidial comme vous le faites dans un script: - A - prenom - B -. Si vous avez statiques fichiers audio que vous souhaitez utiliser en fonction de la valeur de l'un des domaines que vous pouvez utiliser aussi bien avec ceux C et D balises. Les noms de fichiers doivent être en minuscules et ils doivent être 8k 16bit pcm wav. Le nom de domaine doit être le même, mais sans le wav. Dans le nom du fichier. Par exemple - C ---- A - address3 - B ---- D - tout d'abord trouver la valeur pour address3, alors il serait tenter de trouver un fichier audio correspondant à celle de la valeur à mettre dans l'invite. Voici une liste des variables disponibles: lead_id, entry_date, modify_date, status, user, vendor_lead_code, source_id, list_id, phone_number, title, first_name, middle_initial, last_name, address1, address2, address3, city, state, province, postal_code, country_code, gender, date_of_birth, alt_phone, email, security_phrase, comments, called_count, last_local_call_time, rank, owner




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_VOICEMAIL TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_voicemail-voicemail_id">
	<BR>
	<B>ID vocale -</B> Il s-agit de la identifiant nombres de cette boîte aux lettres. Cela ne doit pas être un doublon d-un répondeur d-identification existant ou la boîte vocale d-ID d-un téléphone sur le système, au moins 2 caractères.

	<BR>
	<A NAME="vicidial_voicemail-fullname">
	<B>Name -</B> Ce nom est associé à cette boîte vocale. max 100 caractères, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_voicemail-pass">
	<B>Password -</B> C-est le mot de passe utilisés pour accéder à la boîte vocale lors de la numérotation pour vérifier ses messages max 10 caractères, minimum de 2 caractères.

	<BR>
	<A NAME="vicidial_voicemail-active">
	<B>Active -</B> Cette option vous permet de configurer la boîte vocale à l-état actif ou inactif. Si la case est inactive vous ne pouvez pas laisser de messages sur elle et vous ne pouvez pas vérifier les messages en elle.

	<BR>
	<A NAME="vicidial_voicemail-email">
	<B>Email -</B> Ce paramètre facultatif vous permet d-avoir les messages vocaux envoyés à un compte de messagerie, si votre système est configuré pour envoyer des email. Si ce champ est vide, alors pas de courriels seront envoyés.

	<BR>
	<A NAME="vicidial_voicemail-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_voicemail-delete_vm_after_email">
	<B>Supprimer messagerie vocale après le courrier électronique -</B> Ce paramètre facultatif vous permet d-avoir les messages vocaux supprimés du système après avoir été envoyé par courriel Out. Par défaut est n.

	<BR>
	<A NAME="vicidial_voicemail-voicemail_timezone">
	<B>Zone de messagerie vocale -</B> Ce paramètre vous permet de définir la zone que cette boîte vocale sera réglé lorsque le temps est enregistré pour un message. Par défaut est définie dans les paramètres système.

	<BR>
	<A NAME="vicidial_voicemail-voicemail_options">
	<B>Options de la messagerie vocale -</B> Ce paramètre optionnel vous permet de définir les paramètres de messagerie vocale supplémentaires. Il est recommandé que vous laissez ce champ vide si vous ne savez ce que vous faites.

	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>

		<BR><BR><BR><BR>

		<B><FONT SIZE=3>FONCTIONNALITES DU CHARGEUR DE FICHES DE VICIDIAL</FONT></B><BR><BR>
		<A NAME="vicidial_list_loader">
		<BR>
		Le chargeur enchaînement-basé de base de fil de VICIDIAL est conçusimplement pour prendre un dossier de fil - jusqu'à 8MB dans lataille qu'est l'étiquette ou la pipe délimitée et pour le chargerdans la table de vicidial_list. Le chargeur de fil tient compte duchamp choisissant et de TXT- le texte tout simplement, les valeursséparées par virgule de CSV- et les XLS- excellent des formats dedossier. Le chargeur de fil ne fait pas la validation de données,mais elle vous permet de vérifier les reproductions en soi, dans lacampagne ou dans le système entier. En outre, assurez-vous que vousavez créé la liste que ces fils doivent être dessous de sorte quevous puissiez les employer. Voici une liste des champs dans leurcommande appropriée pour les dossiers de fil :
			<OL>
			<LI>Code vendeur de la fiche - montre dans le champ dID du vendeur de l'interface graphique
			<LI>Code source - usage interne uniquement pour les administrateurs et les administrateurs de la base de données
			<LI>Identifiant de la liste - le numéro de la liste dans laquelle seront ces fiches
			<LI>Phone Code - the prefix for the phone number - 1 for US, 44 for UK, 61 for AUS, etc
			<LI>Numéro de téléphone - doit contenir au moins 8 chiffres
			<LI>Titre - titre du client - Mr. Mme. Mlle., etc...
			<LI>Nom
			<LI>Initiales
			<LI>Prénom
			<LI>Adresse Ligne 1
			<LI>Adresse Ligne 2
			<LI>Adresse Ligne 3
			<LI>Ville
			<LI>Etat - Limité à 2 caractères
			<LI>Province
			<LI>Code Postal
			<LI>Pays
			<LI>Sexe
			<LI>Date de naissance
			<LI>Numero de téléphone alternatif
			<LI>Adresse mail
			<LI>Phrase de sécurité
			<LI>Commentaires
			</OL>

		<BR>NOTES : La fonctionnalité de chargeur de fil d'exceler est permisepar une série de manuscrits de Perl et doit avoir un dossier en placecorrectement configuré de /etc/astguiclient.conf sur le web server.En outre, des modules d'un Perl de couples doivent être chargés pourelle pour travailler aussi bien - oLE-Storage_Lite-Storage_Lite et leBilan-ParseExcel. Vous pouvez vérifier les erreurs d'exécution dansces derniers en regardant votre dossier d'error_log d'apache. Enoutre, pour des contrôles de duplication contre le gampaignénumère, la liste qui a de nouveaux fils entrer dans lui doit êtrecréée dans le système avant que vous commenciez à charger lesfils.

		<BR>
		<A NAME="vicidial_list_loader-file_layout">
		<BR>
		<B>File layout - </B>The layout of the file you are loading.  "Standard Format" uses the pre-defined Vicidial standard file format.  "Disposition personnalisée" allows the user to define the layout of the file themselves.  "Custom template" is a hybrid of the previous two options, which allows the user to use a custom format they have defined previously and saved using the Custom Template Maker.

		<BR>
		<A NAME="vicidial_list_loader-template_id">
		<BR>
		<B>ID modèle -</B> If the user has selected "Disposition personnalisée" from the "File layout" options, then this the the template the lead loader will use.  It will also override the selected list ID with the list ID that was assigned to the selected template when it was created.



		<BR><BR><BR><BR>
		<?php
		}
	?>





	<B><FONT SIZE=3>TABLE DES TELEPHONES</FONT></B><BR><BR>
	<A NAME="phones-extension">
	<BR>
	<B>Extension Téléphone -</B> Ce champ est l'endroit où vous mettez le nom téléphones tel qu'il apparaît à Asterisk pas y compris le protocole ou une barre oblique au début. Par exemple: pour le téléphone SIP SIP/test101 l'extension Téléphone serait test101. En outre, pour IAX2 téléphones: IAX2/IAXphone1 @ IAXphone1 serait IAXphone1. Pour Zap et dahdi joint channelbank ou FXS téléphones assurez-vous que vous mettez le numéro de canal complète sans le préfixe: Zap/25-1 serait 25-1. Une autre note, assurez-vous que vous définissez le champ ci-dessous Protocole correctement pour votre type de téléphone.

	<BR>
	<A NAME="phones-dialplan_number">
	<BR>
	<B>Numéro dans le Dial Plan -</B> Ce champ est pour le numéro utilisé pour appeler ce téléphone. Ce numéro est défini dans le fichier extensions.conf du serveur Asterisk

	<BR>
	<A NAME="phones-voicemail_id">
	<BR>
	<B>Boîte vocale -</B> Ce champ est pour la boîte vocale vers laquelle iront les messages pour l'utilisateur de ce téléphone. Il est utilisé pour vérifier la présence de messages et pour permettre à l'utilisateur d'utiliser le bouton VOICEMAIL dans l'application astGUIclient.

	<BR>
	<A NAME="phones-voicemail_timezone">
	<B>Zone de messagerie vocale -</B> Ce paramètre vous permet de définir la zone que cette boîte vocale sera réglé lorsque le temps est enregistré pour un message. Par défaut est définie dans les paramètres système.

	<BR>
	<A NAME="phones-voicemail_options">
	<B>Options de la messagerie vocale -</B> Ce paramètre optionnel vous permet de définir les paramètres de messagerie vocale supplémentaires. Il est recommandé que vous laissez ce champ vide si vous ne savez ce que vous faites.

	<BR>
	<A NAME="phones-outbound_cid">
	<BR>
	<B>CallerID sortant -</B> Ce champ est celui dans lequel vous entrez le numéro callerID que vous souhaitez voir apparaître lors d'appels externes passés depuis le client web astguiclient. Cela ne fonctionne pas avec RBS, non-PRI, T1/E1s.

	<BR>
	<A NAME="phones-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="phones-phone_ip">
	<BR>
	<B>Adresse IP du téléphone -</B> Ce champ est pour l'adresse IP du téléphone si c'est un téléphone VOIP. Ce champ est optionnel

	<BR>
	<A NAME="phones-computer_ip">
	<BR>
	<B>Adresse IP de l'ordinateur -</B> Ce champ est pour l'adresse IP de l'ordinateur. C'est un champ optionel

	<BR>
	<A NAME="phones-server_ip">
	<BR>
	<B>IP du serveur -</B> Ce champ est celui où vous choisissez le serveur sur lequel est activé le téléphone.

	<BR>
	<A NAME="phones-login">
	<BR>
	<B>Écran de connexion Agent -</B> La connexion utilisée pour l'utilisateur du téléphone pour se connecter à des applications clientes, comme l'écran d'agent Vicidial.

	<BR>
	<A NAME="phones-pass">
	<BR>
	<B>Login Mot de passe -</B>  Le mot de passe utilisé pour l'utilisateur du téléphone pour se connecter à des applications clientes basées sur le Web. IMPORTANT, c'est le seul mot de passe pour la connexion agent web interface téléphonique, de changer le sip.conf ou mot de passe iax.conf, ou secret, pour cet appareil de téléphone dont vous avez besoin de modifier le mot de passe d'inscription dans le champ suivant.

	<BR>
	<A NAME="phones-conf_secret">
	<BR>
	<B>Inscription Mot de passe -</B> C-est le secret ou mot de passe, pour le téléphone dans le IAX ou SIP auto-généré fichier de conf pour ce téléphone. La limite est de 20 caractères alphanumériques tiret de soulignement et acceptée. Par défaut est test. Anciennement appelé secret fichier de conf. Un mot de passe d'enregistrement forte doit être au moins 8 caractères de longueur et ont minuscules et majuscules, ainsi que au moins un numéro.

	<BR>
	<A NAME="phones-is_webphone">
	<BR>
	<B>Définir en tant que Webphone -</B>  La définition de cette option à Y va tenter de charger un téléphone basé sur le Web lorsque l'agent se connecte à l'écran de leur agent. Par défaut est N.

	<BR>
	<A NAME="phones-webphone_dialpad">
	<BR>
	<B>Webphone Dialpad -</B>  Ce paramètre vous permet d'activer ou de désactiver le clavier pour cette webphone. Par défaut est Y pour activé. Toggle va permettre à l'utilisateur de visualiser et de cacher le clavier en cliquant sur un lien. Cette fonctionnalité n'est pas disponible sur toutes les versions webphone. TOGGLE_OFF par défaut pour ne pas montrer le clavier sur la première charge, mais permettra à l'utilisateur d'afficher le clavier en cliquant sur le lien clavier.

	<BR>
	<A NAME="phones-webphone_auto_answer">
	<BR>
	<B>Webphone Réponse automatique -</B>  Ce paramètre permet au téléphone Web pour être automatiquement configuré pour répondre aux appels qui entrent en en le mettant à Y, ou d'avoir anneau appels en le mettant à défaut N. Y est.

	<BR>
	<A NAME="phones-use_external_server_ip">
	<BR>
	<B>Utilisez IP du serveur externe -</B>  Si vous utilisez un téléphone Web, vous pouvez définir cette sur Y pour utiliser les serveurs IP externe pour vous inscrire à la place de l'adresse IP du serveur. Par défaut est vide.

	<BR>
	<A NAME="phones-status">
	<BR>
	<B>Statut -</B> C'est le statut du téléphone dans le système, ACTIVE et ADMIN autorisent les clients graphiques à fonctionner. ADMIN autorise l'acces à l'administration de ce site. Tous les autres statuts n'autorisent pas l'accès aux clients graphiques ou à l'administration.

	<BR>
	<A NAME="phones-active">
	<BR>
	<B>Compte actif -</B> Indique si le téléphone est actif pour le mettre dans la liste dans le client GUI.

	<BR>
	<A NAME="phones-phone_type">
	<BR>
	<B>Type de téléphone -</B> Seuelement pour les notes administratives.

	<BR>
	<A NAME="phones-fullname">
	<BR>
	<B>Nom complet -</B> Utilisé par le client GUI dans la liste des téléphones actifs.

	<BR>
	<A NAME="phones-company">
	<BR>
	<B>Compagnie -</B> Seulement pour les notes administratives.

	<BR>
	<A NAME="phones-email">
	<BR>
	<B>Téléphones Email - </B> L'adresse e-mail associée à ce téléphone d'entrée. Il est utilisé pour les paramètres de messagerie vocale.

	<BR>
	<A NAME="phones-delete_vm_after_email">
	<B>Supprimer messagerie vocale après le courrier électronique -</B> Ce paramètre facultatif vous permet d-avoir les messages vocaux supprimés du système après avoir été envoyé par courriel Out. Par défaut est n.

	<BR>
	<A NAME="phones-picture">
	<BR>
	<B>Image -</B> Pas encore implémenté.

	<BR>
	<A NAME="phones-messages">
	<BR>
	<B>Nouveaux messages -</B> Nombre de nouveaux messages vocaux pour ce téléphone sur le serveur Asterisk.

	<BR>
	<A NAME="phones-old_messages">
	<BR>
	<B>Anciens messages -</B> Nombre d'anciens messages vocaux pour ce téléphone sur le serveur Asterisk.

	<BR>
	<A NAME="phones-protocol">
	<BR>
	<B>Protocole client -</B> Le protocole que le téléphone utilise pour se connecter au serveur Asterisk: SIP, IAX2, Zap. Il y a également EXTERNAL pour les numéros distants et les numérotation rapide que vous voulez lister comme téléphone.

	<BR>
	<A NAME="phones-local_gmt">
	<BR>
	<B>GMT local -</B> La différence entre l'heure de Greenwich, ou l'heure ZULU et le fuseau horaire du téléphone. NE PAS AJUSTER POUR LES DAYLIGHT SAVINGS TIME. Ceci est utilisé par les campagnes VICIDIAL pour afficher correctement l'heure et l'heure du client.

	<BR>
	<A NAME="phones-phone_ring_timeout">
	<BR>
	<B>Phone Ring Timeout -</B> Il s-agit de la quantité de temps, en secondes, que le téléphone sonne dans le plan de numérotation avant d-envoyer l-appel vers la messagerie vocale. Par défaut est de 60 secondes.

	<BR>
	<A NAME="phones-on_hook_agent">
	<BR>
	<B>Connexion Agent Sur-Crochet -</B> Cette option est utilisée uniquement pour les appels entrants vont à un agent connecté avec ce téléphone. Cette fonctionnalité sera appeler l'agent et ne pas envoyer le client à la session des agents jusqu'à ce que la ligne est répondu. Par défaut est N pour les handicapés.

	<BR>
	<A NAME="phones-ASTmgrUSERNAME">
	<BR>
	<B>Login du manager -</B> C'est le login que les clients GUI de ce téléphones vont utiliser pour accéder à la base de données dans laquelle sont stockées les données du serveur.

	<BR>
	<A NAME="phones-ASTmgrSECRET">
	<BR>
	<B>Mot de passe du manager -</B> C'est le mot de passe que les clients GUI de ce téléphone vont utiliser pour accéder à la base de données dans laquelle sont stockées les données du serveur.

	<BR>
	<A NAME="phones-login_user">
	<BR>
	<B>Utilisateur par défaut de VICIDIAL -</B> Permet de remplir une valeur par défaut dans le champ utilisateur de VICIDIAL quand l'utilisateur de ce téléphone ouvre l'application client astVICIDIAL. Laisser vide pour ne pas l'utiliser.

	<BR>
	<A NAME="phones-login_pass">
	<BR>
	<B>Mot de passe par défaut de VICIDIAL -</B> Permet de remplir une valeur par défaut dans le champ mot de passe de VICIDIAL quand l'utilisateur de ce téléphone ouvre l'application client astVICIDIAL. Laisser vide pour ne pas l'utiliser.

	<BR>
	<A NAME="phones-login_campaign">
	<BR>
	<B>Campagne par défaut de VICIDIAL -</B> Permet de remplir une valeur par défaut dans le champ campagne de VICIDIAL quand l'utilisateur de ce téléphone ouvre l'application client astVICIDIAL. Laisser vide pour ne pas l'utiliser.

	<BR>
	<A NAME="phones-park_on_extension">
	<BR>
	<B>Exten de mise en attente -</B> C'est l'exten par défaut utilisé pour la mise en attente dans l'application client. Verifiez qu'il fonctionne avant de le changer.

	<BR>
	<A NAME="phones-conf_on_extension">
	<BR>
	<B>Exten pour mise en attente de la conférence -</B> C'est l'exten par défaut utilisé pour la mise en attente de la conférence dans l'appilcation client. Verifiez qu'il autre fonctionne avant de le changer.

	<BR>
	<A NAME="phones-VICIDIAL_park_on_extension">
	<BR>
	<B>Exten de mise en attente VICIDIAL -</B> C'est l'exten par defaut utilisé pour la mise en attente pour l'appilcation cliente VICIDIAL. Avant de changer ce champ verifiez que le nouveau fonctionne.

	<BR>
	<A NAME="phones-VICIDIAL_park_on_filename">
	<BR>
	<B>Fichier du parc VICIDIAL -</B> C'est le nom du fichier par defaut pour la mise en attente de VICIDIAL. Avant de le changer verifiez que le nouveau fonctionne. Limité a 10 caractères.

	<BR>
	<A NAME="phones-monitor_prefix">
	<BR>
	<B>Prefix de Moniteur -</B> C'est le prefix du monitoring des Channels Zap automatiquement contenu dans l'appication astguiclient. Ne changez qu'en accord avec les enregistrement des extensions ZapBarge.

	<BR>
	<A NAME="phones-recording_exten">
	<BR>
	<B>Exten d'enregistrement -</B> C'est l'extension dans le dial plan pour l'enregistrement utilisé pour enregistrer les conférences. C'est habituellement stoppé au bout d'une heure. Verifiez le fichier extentions.conf avant tout changement.

	<BR>
	<A NAME="phones-voicemail_exten">
	<BR>
	<B>Exten principal pour VMAIL -</B> C'est l'extension du dial plan utilisé pour verifier la boîte vocale. Verifiez le fichier extensions.conf avant tout changement.

	<BR>
	<A NAME="phones-voicemail_dump_exten">
	<BR>
	<B>VMAIL Dump Exten -</B> C'est le préfix du dial plan utilisé pour lancer des appels directement vers la boite vocale de l'utilisateur depuis un un appelen cours dans l'application astGUIclient app. Avant tout changement verifiez le fichier extensions.conf.

	<BR>
	<A NAME="phones-ext_context">
	<BR>
	<B>Extension du context -</B> Tel est le contexte du plan de numérotation que les demandes d-agents, comme VICIDIAL, utilisez principalement. Il est supposé que tous les numéros composés par les applications clientes utilisent ce contexte, c-est donc une bonne idée de s-assurer que cela est possible, le contexte plus large. vérifier avec le fichier extensions.conf avant de changer. par défaut est par défaut.

	<BR>
	<A NAME="phones-phone_context">
	<BR>
	<B>Téléphone Contexte -</B> Tel est le contexte du plan de numérotation que ce téléphone se servira pour composer. Si vous utilisez un centre d-appel et que vous ne voulez pas que vos agents pour être en mesure de composer un numéro hors de l-application VICIDIAL par exemple, alors vous devez définir ce domaine à un contexte de plan de numérotation qui n-existe pas, quelque chose comme agent-nodial. par défaut est par défaut.

	<BR>
	<A NAME="phones-codecs_list">
	<BR>
	<B>Codecs admis -</B> Vous pouvez définir une liste délimitée par des virgules des codecs d'être défini comme les codecs par défaut pour ce téléphone. Options pour les codecs comprennent ulaw, alaw, gsm, g729, speex, G722, G723, G726, ILBC, ... Certains de ces codecs ne sont pas disponibles sur votre système, comme g729 ou G726. Si le champ est vide, alors les codecs par défaut du système ou de l'entrée de téléphone ci-dessus celle-ci sera utilisée pour les codecs admissibles. Par défaut est vide.

	<BR>
	<A NAME="phones-codecs_with_template">
	<BR>
	<B>Codecs admis avec la matrice-</B> Mettre cette option à 1 comprendra les codecs définis ci-dessus, même si un modèle de fichier de conf est utilisé. Par défaut est 0.

	<BR>
	<A NAME="phones-dtmf_send_extension">
	<BR>
	<B>Cannal d'envoi de DTMF -</B> C'est le channel utilisé pour envoyer les sons DTMF dans les conférences meetme depuis l'application cliente. Verifiez le fichier extentions.conf avant tout changement.

	<BR>
	<A NAME="phones-call_out_number_group">
	<BR>
	<B>Groupe d'appel sortant -<\/B> C'est le groupe de canal hors duquel seront placés les appels passés depuis ce téléphone. Il y a des routines dans l'application cliente qui l'utilisent. Pour les cannal Zap vous devriez utiliser quelque chose comme Zap/g2, pour les trunks IAX vous devriez utiliser un préfixe entier IAX comme IAX2/VICItet1:secret@10.10.10.15:4569. Vérifiez les trunks dans le fichier extensions.conf, il est courant que vous avez défini comme variable globale TRUNK au début du fichier.

	<BR>
	<A NAME="phones-client_browser">
	<BR>
	<B>Emplacement du Navigateur -</B> C'est le chemin absolu pour le navigateur Mozilla ou firefox, ceci n'est applicable que pour les clients UNIX/LINUX. Vérifiez en le lançant manuellement.

	<BR>
	<A NAME="phones-install_directory">
	<BR>
	<B>Répertoire d'installation -</B> C'est l'endroit où astGUIclient et les scripts astVICUDUAL sont installés sur la machine. Pour Win32 cela doit être quelque chose comme C:\\AST_VICI and for UNIX cela doit être quelque chose comme /usr/local/perl_TK. Vérifiez cela manuellement.

	<BR>
	<A NAME="phones-local_web_callerID_URL">
	<BR>
	<B>URL du CallerID -</B> C'est l'adresse web de la page utilisée pour faire une verification personnalisée du CallerId. L'adresse des test par defaut est : http://astguiclient.sf.net/test_callerid_output.php

	<BR>
	<A NAME="phones-VICIDIAL_web_URL">
	<BR>
	<B>URL par defaut de VICIDIAL -</B> C'est l'adresse web de la page utilisée pour faire des requêtes Web VICIDIAL personnalisées. L'adresse par defaut est: http://astguiclient.sf.net/test_VICIDIAL_output.php

	<BR>
	<A NAME="phones-AGI_call_logging_enabled">
	<BR>
	<B>Log des appels -</B> Mettez à true si le fichier call_log.agi est placé dans le fichier extension.conf pour tout les appels sortants ainsi que l'extension de racrochage 'h' pour logger tout les appels. Il devrait toujours être à 1 car cela est nécessaire pour que certaines des fonctionnalités d'astGUIclient et de VICIDIAL fonctionnent proprement.

	<BR>
	<A NAME="phones-user_switching_enabled">
	<BR>
	<B>Changement d'utilisateur -</B> Mettez à true pour autoriser un utilisateur à changer pour un autre compte utilisateur. NOTE: Si l'utilisateur commute, il peut initier l'enregistrement sur la nouvelle conversation téléphonique du nouvel utilisateur

	<BR>
	<A NAME="phones-conferencing_enabled">
	<BR>
	<B>En conférence -</B> Mettez à true pour autoriser un utilisateur a démarrer une conférence avec plus de 6 lignes externs.

	<BR>
	<A NAME="phones-admin_hangup_enabled">
	<BR>
	<B>Racrochage administateur-</B> Mettre à true pour autoriser l'utilisateur à racrocher n'importe quelle ligne à travers astGUIclient. C'est une bonne idée de l'activer pour les administarteurs.

	<BR>
	<A NAME="phones-admin_hijack_enabled">
	<BR>
	<B>Détournement adminisrateur -<\/B> Mettre à true pour autoriser l'utilisateur à pouvoir intercepter et rediriger vers son extention n'importe quelle ligne à travers Astguiclient. C'est une bonne idée de l'activer pour les administrateurs. Mais c'est aussi très utile pour les managers.

	<BR>
	<A NAME="phones-admin_monitor_enabled">
	<BR>
	<B>Moniteur adminisrateur -</B> Mettre à true pour autoriser l'utilisateur à intercepter et rediriger vers son extension certaines lignes à partir de astGUIclient. C'est une bonne idée de l'activer pour les adiministrateurs.  Mais c'est aussi très utile pour les managers et comme outil d'entrainement.

	<BR>
	<A NAME="phones-call_parking_enabled">
	<BR>
	<B>Parc d'appels -<\/B> Mettez à true pour autoriser l'utilisateur à parquer des appels dans astGUIclient pour être pris par n'importe quel utilisateur astGUIcient sur le système. Les appels sont mis en attente jusqu'à 30 minutes puis sont raccrochés. Habituellement activé pour tous.

	<BR>
	<A NAME="phones-updater_check_enabled">
	<BR>
	<B>Vérification de mise à jour -</B> Mettre à true pour afficher une popup avertissant que le temps de mise à jour n'a pas changé en 20 secondes. Utile pour les administrateurs.

	<BR>
	<A NAME="phones-AFLogging_enabled">
	<BR>
	<B>Log des AF -</B> Mettre à true pour logguer les actions de astGUIclient dans un fichier texte sur l'ordinateur de l'utilisateur.

	<BR>
	<A NAME="phones-QUEUE_ACTION_enabled">
	<BR>
	<B>Activer la queue -</B> Mettre à true pour que les applications clientes utilisent le systeme central de queue d'asterisk. Requis pour VICIDIAL et recommandé pour tout les utilisateurs.

	<BR>
	<A NAME="phones-CallerID_popup_enabled">
	<BR>
	<B>Popup sur le CallerID -</B> Mettre à true pour autoriser, pour les numéros définis dans le fichier extensions.conf, à afficher des popup concernat le CallerID aux utilisateurs d'astGUIclient.

	<BR>
	<A NAME="phones-voicemail_button_enabled">
	<BR>
	<B>Bouton de boîte vocale -</B> Mettre à true pour afficher le bouton VOICEMAIL et le nombre de messages dans astGUIclient.

	<BR>
	<A NAME="phones-enable_fast_rafraîchir">
	<BR>
	<B>Rafraichissement rapide -</B> Mettre à true pour activer un nouveau taux de rafraichissement de l'information dans astGUIclient. Par défaut ce taux est de 1000ms, 1 seconde. Si vous diminuez ce taux cela peu augmenter la charge système.

	<BR>
	<A NAME="phones-fast_rafraîchir_rate">
	<BR>
	<B>Taux de rafraichissement rapide -</B> en millisecondes. Utiliser seulement si le rafraichissement rapide est activé. Par défaut le taux est de 1000ms , 1 seconde. La diminution de ce taux peux augmenter la charge système.

	<BR>
	<A NAME="phones-enable_persistant_mysql">
	<BR>
	<B>MySQL persistant -<\/B> Si activé, alors la connection à MYSQL sera maintenue au lieu d'être reconnectée chaque seconde. Utile si vous avez un taux de rafraichissement rapide. Cela va augmenter le nombre de connections au seveur MYSQL.

	<BR>
	<A NAME="phones-auto_dial_next_number">
	<BR>
	<B>Appel automatique du numéro suivant -</B> Si activé, le client VICIDIAL appelera automatiquement le numéro suivant dans la liste selon la disposition d'un appel à moins qu'ils aient choisi "Stop Dialing" sur l'écran de disposition.

	<BR>
	<A NAME="phones-VDstop_rec_after_each_call">
	<BR>
	<B>Stoper l'enregistrement après chaque appel -</B> Si activé, le client VICIDIAL stopera chaque enregistrement à la fin de l'appel. Utile si vous faites beaucoup d'enregistrements et si vous utiliser un formulaire web pour déclancher l'enregistrement.

	<BR>
	<A NAME="phones-enable_sipsak_messages">
	<BR>
	<B>Activer les messages SIPSAK -</B> Si activé alors le serveur enverra des messages au téléphone SIP à afficher sur l'écran du téléphone quand il est connecté à VICIDIAL. Cette fonction ne fonctionne seulement avec les téléphones SIP et nécessite que sipsak soit installé sur le serveur web. La valeur par défaut est 0.

	<BR>
	<A NAME="phones-DBX_server">
	<BR>
	<B>Serveur DBX -</B> Le serveur de la base de données MYSQL auquel cette utilisateur se connecte.

	<BR>
	<A NAME="phones-DBX_database">
	<BR>
	<B>Base de données DBX -</B> Base de données à laquelle cet utilisateur ce connecte. La valeur par défault est asterisk.

	<BR>
	<A NAME="phones-DBX_user">
	<BR>
	<B>Utilisateur DBX -</B> Login utilisateur de la base de données utilisé pour la connection. La valeur par défaut est cron.

	<BR>
	<A NAME="phones-DBX_pass">
	<BR>
	<B>Mot de passe DBX -</B> Mot de pass de la connetion MYSLQ. La valeur par défaut est 1234.

	<BR>
	<A NAME="phones-DBX_port">
	<BR>
	<B>Port DBX -</B> Port de la connection à la base de données. La valeur par défaut est 3306.

	<BR>
	<A NAME="phones-DBY_server">
	<BR>
	<B>Serveur DBY -</B> Le serveur de base de données auquel cet utilisateur ce connecte. Secondaireserver, pas utilisé actuellement.

	<BR>
	<A NAME="phones-DBY_database">
	<BR>
	<B>Base de données DBY -</B> La base de données MYSQL à laquelle cette utilisateur se connecte. La valeur par défaut est asterisk. Secondaireserver, pas utilisé actuellement.

	<BR>
	<A NAME="phones-DBY_user">
	<BR>
	<B>Utilisateur DBY -</B> Login utilisateur avec lequel cet utilisateur ce connecte à la base de données. La valeur par défaut est cron. Secondaireserver, pas utilisé actuellement.

	<BR>
	<A NAME="phones-DBY_pass">
	<BR>
	<B>Mot de passe DBY -</B> Mot de passe avec lequel cet utilisateur ce connecte à MYSQL. La valeur par defaut est 1234. Secondaireserver, pas utilisé actuellement.

	<BR>
	<A NAME="phones-DBY_port">
	<BR>
	<B>DBY port -</B> Port TCP de la connection MYSQL utilisée par cet utilisateur. La valeur par défaut est 3306. Secondaireserver, pas utilisé actuellement.

	<BR>
	<A NAME="phones-alias_id">
	<BR>
	<B>Alias ID - </B> L'ID de l'alias utilisé pour permettre les connexions de téléphone à équilibrage de charge. pas d'espaces ou autres caractères spéciaux autorisés. Doit être compris entre 2 et 20 caractères de longueur.

	<BR>
	<A NAME="phones-alias_name">
	<BR>
	<B>Alias Nom - </B> Le nom utilisé pour désigner un téléphone alias, doit être compris entre 2 et 50 caractères de longueur.

	<BR>
	<A NAME="phones-logins_list">
	<BR>
	<B>Téléphones Connexions List - </B> La virgule sépare la liste de téléphone de connexion utilisé lors d'un agent se connecte par téléphone pour équilibrer la charge de connexion. L'agent se trouve l'application serveur actif avec le moins d'agents et connecté à un appel à ce serveur à l'agent au moment de la connexion.

	<BR>
	<A NAME="phones-template_id">
	<BR>
	<B>ID modèle - </B> C'est le fichier de conf ID que ce modèle de téléphone utilisé pour la saisie des paramètres de son Asterisk. La valeur par défaut est - ABSENCE --.

	<BR>
	<A NAME="phones-conf_override">
	<BR>
	<B>Conf Override Settings -</B> If populated, and the ID modèle is set to --NONE-- then the contents of this field are used as the conf file entries for this phone. generate_vicidial_conf for this phones server must be set to Y for this to work. This field should NOT contain the [extension] line, that will be automatically generated.

	<BR>
	<A NAME="phones-group_alias_id">
	<BR>
	<B>Alias Groupe ID - </B> L'ID du groupe alias utilisés par les agents de composer les appels de l'agent VICIDIAL interface avec différents Caller ID. pas d'espaces ou autres caractères spéciaux autorisés. Doit être compris entre 2 et 20 caractères de longueur.

	<BR>
	<A NAME="phones-group_alias_name">
	<BR>
	<B>Nom du groupe Alias - </B> Le nom utilisé pour décrire un groupe d'emprunt, doit être compris entre 2 et 50 caractères de longueur.

	<BR>
	<A NAME="phones-caller_id_number">
	<BR>
	<B>Numéro d'identification de l'appelant - </B> Le numéro d'identification de l'appelant utilisée dans ce groupe Alias. Chiffres doivent être.

	<BR>
	<A NAME="phones-caller_id_name">
	<BR>
	<B>Nom d'identification de l'appelant - </B> Le nom d'identification de l'appelant qui peut être envoyé à ce groupe Alias. Pour autant que nous sachions ce qui ne fera que travailler au Canada sur les circuits PRI et l'utilisation d'un tronc IAX boucle par Asterisk.




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>TABLE DES SERVEURS</FONT></B><BR><BR>
	<A NAME="servers-server_id">
	<BR>
	<B>ID du Sevreur -</B> C'est ici que vous mettez le nom du serveur Asterisk, il n'est pas obligatoire de mettre le sous dommaine, juste un nom pour identifier le seveur pour les administrateurs.

	<BR>
	<A NAME="servers-server_description">
	<BR>
	<B>Descritpion du serveur -</B> Petite description du serveur asterisk.

	<BR>
	<A NAME="servers-server_ip">
	<BR>
	<B>Adresse IP du serveur -</B> Le champs dans lequel vous mettez l'adresse IP du serveur Asterisk.

	<BR>
	<A NAME="servers-active">
	<BR>
	<B>Actif -</B> Mettre si le serveur Asterisk est actif ou non.

	<BR>
	<A NAME="servers-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="servers-sysload">
	<BR>
	<B>Système de charge -</B> Ces deux statistiques montrent loadavg la fois d'un système 100 et le pourcentage d'utilisation CPU du serveur et est mis à jour chaque minute. Le loadavg devrait être en moyenne inférieure à 100 multiplié par le nombre de noyaux de CPU de votre système a, pour des performances optimales. Le pourcentage d'utilisation CPU devrait rester en dessous de 50 pour une performance optimale.

	<BR>
	<A NAME="servers-channels_total">
	<BR>
	<B>Live Chaînes -</B> Ce champ indique le nombre actuel d'Asterisk canaux qui sont en direct sur le système dès maintenant. Il est important de noter que le nombre de canaux Asterisk est habituellement beaucoup plus élevé que le nombre d'appels sur un système. Ce champ est mis à jour une fois chaque minute.

	<BR>
	<A NAME="servers-disk_usage">
	<BR>
	<B>Disk Usage -</B> Ce champ montre l'utilisation du disque pour chaque partition sur ce serveur. Ce champ est mis à jour une fois chaque minute.

	<BR>
	<A NAME="servers-asterisk_version">
	<BR>
	<B>Version d'Asterisk -</B> Mettre la version d'asterisk que vous avez installé sur ce serveur. Examples: ' 1.2 ', ' 1.0.8 ', ' 1.0.7 ', 'CVS_HEAD', 'REALLY OLD', etc... Ceci est utilisé car les versions 1.0.8 et 1.0.9 ont une methode differente pour gérer les canaux Local/, un bug qui a été fixé dans le CVS v1.0, et qui nescessite d'être traité differement quand les canaux Local/ sont manipulés. Aussi, la version courante CVS_HEAD et l'arbre 1.2 utilisent des managers et des commandes différentes, qui doivent donc être traités différemment..

	<BR>
	<A NAME="servers-max_vicidial_trunks">
	<BR>
	<B>Nombre maximum de trunks VICIDIAL -</B> Ce champ détermine le nombre maximum de lignes que l'appel automatique de VICIDIAL essayera d'appeler sur ce serveur. Si vous voulez consacrer pleinement deux PRI T1s à VICIDIAL sur un serveur vous devriez mettre ce champ à 46. La valeur par defaut est 96.

	<BR>
	<A NAME="servers-outbound_calls_per_second">
	<BR>
	<B>Max demande par seconde -</B> Ce paramètre détermine le nombre maximum d'appels qui peuvent être mis par la sortie d'auto-script d'appel sur ce serveur par seconde. Doit être de 1 à 100. La valeur par défaut est 20.

	<BR>
	<A NAME="servers-telnet_host">
	<BR>
	<B>Hôte telnet -</B> C'est l'adresse ou le nom du serveur Asterisk et c'est comme cela que les applications managers se connectent au sevreur quand elle sont lancées. Si les applications managers sont lancées sur le serveur Asterisk, alors la valeur par defaut 'localhost' fonctionne bien .

	<BR>
	<A NAME="servers-telnet_port">
	<BR>
	<B>Port telnet -</B> C'est le port de connection au manager du serveur Asterisk c'est par ceului-ci que les applications managers se connectent. La valeur par defaut '5038' fonctionne bien avec une installation standard.

	<BR>
	<A NAME="servers-ASTmgrUSERNAME">
	<BR>
	<B>Utilisateur du manager -</B> C'est l'utilisateur utilisé pour la connection au manager Asterisk. La valeur par défaut est 'cron'

	<BR>
	<A NAME="servers-ASTmgrSECRET">
	<BR>
	<B>Mot de passe du manager -</B> Le secret ou mot de passe utilisé pour ce connecter au manager Asterisk. La valeur par defaut est '1234'

	<BR>
	<A NAME="servers-ASTmgrUSERNAMEupdate">
	<BR>
	<B>Utilisateur du manager pour les mises à jour -</B> Le nom d'utilisateur ou le login utilisé pour se connecter au manager d'Asterisk, optimisé pour les scripts de mise à jour. La valeur par defaut est 'updatecron' et a le même secret que l'utilisateur générique.

	<BR>
	<A NAME="servers-ASTmgrUSERNAMElisten">
	<BR>
	<B>Utilisateur du manager pour l'écoute -</B> Le nom d'utilisateur ou le login utilisé pour se connecter au manager d'Asterisk,  optimisé pour les scripts qui écoutent la sortie seulement. La valeur par défaut est 'listencron' et a le même secret que l'utilisateur générique.

	<BR>
	<A NAME="servers-ASTmgrUSERNAMEsend">
	<BR>
	<B>Utilisateur du manager pour l'envoi -</B> Le nom d'utilisateur ou le login utilisé pour se connecter au manager d'Asterisk, optimisé pour les scripts qui envoient des actions au manager.  La valeur par défaut est 'sendcron' et a le même secret que l'utilisateur générique.

	<BR>
	<A NAME="servers-conf_secret">
	<BR>
	<B>Conf dossier secret -</B> C-est le secret ou mot de passe, pour le serveur dans l-auto-généré IAX fichier de conf pour ce serveur sur d-autres serveurs. La limite est de 20 caractères alphanumériques tiret de soulignement et acceptée. Par défaut est test. Un secret conf forte du fichier doit être au moins 8 caractères de longueur et ont minuscules et majuscules, ainsi que au moins un numéro.

	<BR>
	<A NAME="servers-local_gmt">
	<BR>
	<B>Décalage GMT du serveur -</B>La difference en heure par rapport à l'heure GMT non ajustée pour Les Daylight-Savings-Time du serveur. Par defaut '-5'

	<BR>
	<A NAME="servers-voicemail_dump_exten">
	<BR>
	<B>Exten VMail Dump -</B> Le prefix de l'extention utilisé sur ce serveur pour lancer des appels directement depuis agc vers une boite vocale spécifique. La valeur par defaut est '85026666666666'

	<BR>
	<A NAME="servers-answer_transfer_agent">
	<BR>
	<B>Extension de VICIDIAL AD -</B> L'extension par défaut si personne n'est présent dans la campagne qui permet de lancer des appels pour l'appel automatique de VICIDIAL. La valeur par defaut est '8365'

	<BR>
	<A NAME="servers-ext_context">
	<BR>
	<B>Contexte par défaut -</B> Le contexte par defaut utilisé par les scripts qui opèrent sur ce serveur. La valeur par défaut est 'default'

	<BR>
	<A NAME="servers-sys_perf_log">
	<BR>
	<B>Performances du système -</B> Mettre cette option à Y permet de loger les statistiques des performances du système, incluant la charge du système, les processus et les canaux Asterisk utilisés. La valeur par défaut est N.

	<BR>
	<A NAME="servers-vd_server_logs">
	<BR>
	<B>Logs du serveur -</B> Mettre cette option à Y permet de loger tous les scripts liés à Asterisk dans leurs fichiers textes de log. Mettre cette option à N arrête le logs dans les fichiers pour ces processus, et de ce fait désactive l'écran de log de Asterisk si cette option est à N quand Asterisk démarre. La valeur par défaut est Y.

	<BR>
	<A NAME="servers-agi_output">
	<BR>
	<B>Sortie des scripts AGI -</B> Mettre cette option à NONE désactive toutes les sorties des scripts AGI de VICIDIAL. La mettre à STDERR enverra les sorties des scripts AGI à la CLI Asterisk. Mettre cette option à FILE enverra les sorties dans un fichiers dans le répertoire des logs. Mettre cette option à BOTH enverra les sorties à la fois vers la CLI Asterisk et dans le fichier de log. La valeur par défaut est FILE.

	<BR>
	<A NAME="servers-vicidial_balance_active">
	<BR>
	<B>Appel équilibré VICIDIAL -<\/B> Définir ce champ à Y permettra au serveur de placer des appels équilibrés pour les campagnes dans VICIDIAL de sorte que le niveau d'appel défini puisse être atteint même s'il n'y a aucun agent connecté dans cette campagne sur ce serveur. La valeur par défaut est N.

	<BR>
	<A NAME="servers-vicidial_balance_rank">
	<BR>
	<B>VICIDIAL Solde Rank -</B> Ce champ vous permet de définir l-ordre dans lequel ce serveur doit être utilisé pour la composition à l-équilibre, si vous appelez l-équilibre est activé. Le serveur avec le plus haut rang sera utilisé en premier dans le placement de la balance remplir appels. Par défaut est 0.

	<BR>
	<A NAME="servers-balance_trunks_offlimits">
	<BR>
	<B>Limite de l'équilibrage VICIDIAL -<\/B> Cette option définit le nombre de trunks à ne pas utiliser pour l'équilibrage des appels VICIDIAL. Par exemple si vous avez 40 trunks vicidial et la limite d'équilibrage VICIDIAL définie à 10 vous ne pourrez utiliser que 30 trunks pour l'équilibrage VICIDIAL. La valeur par défaut est 0.

	<BR>
	<A NAME="servers-recording_web_link">
	<BR>
	<B>Enregistrement Web Link - </B> Ce paramètre permet d'outrepasser les paramètres par défaut de l'affichage de l'enregistrement de lien dans l'admin des pages web. La valeur par défaut est SERVER_IP.

	<BR>
	<A NAME="servers-alt_server_ip">
	<BR>
	<B>Autre enregistrement IP du serveur - </B> Ce paramètre est l'endroit où vous pouvez mettre une IP de serveur de nom de machine ou d'autres qui peuvent être utilisés à la place de la server_ip dans les liens d'enregistrements au sein de l'administration des pages Web. La valeur par défaut est vide.

	<BR>
	<A NAME="servers-external_server_ip">
	<BR>
	<B>IP du serveur externe -</B> Ce paramètre est l'endroit où vous pouvez mettre une adresse IP du serveur ou nom de la machine qui peut être utilisé à la place de l'server_ip lorsque vous utilisez un webphone dans l'interface agent. Pour que cela fonctionne vous devez également avoir l'entrée téléphones configuré pour utiliser l'adresse IP du serveur externe. Par défaut est vide.

	<BR>
	<A NAME="servers-active_twin_server_ip">
	<BR>
	<B>Actif IP du serveur double -</B> Certains systèmes Vicidial faudrait mettre en place des serveurs Vicidial en paires. Ce paramètre est l'endroit où vous pouvez mettre l'IP du serveur d'un autre serveur Vicidial que ce serveur est jumelée avec. Par défaut est vide pour les handicapés.

	<BR>
	<A NAME="servers-active_asterisk_server">
	<BR>
	<B>Asterisk Active Server - </B> Si Asterisk ne fonctionne pas sur ce serveur, ou si VICIDIAL ne devrait pas utiliser ce serveur, ou si seulement ce serveur en utilisant des scripts pour d'autres comme la trémie de chargement de script que vous souhaiteriez mettre à la N. La valeur par défaut est Y.

	<BR>
	<A NAME="servers-active_agent_login_server">
	<BR>
	<B>Active Server Agent -</B> La définition de cette option pour empêcher que des agents N sera d-être capable de se connecter à ce serveur à travers l-écran de l-agent VICIDIAL. Ceci est très utile lorsque vous utilisez une charge de connexion de configuration du téléphone équilibrée. Par défaut est Y..

	<BR>
	<A NAME="servers-generate_vicidial_conf">
	<BR>
	<B>Générer des fichiers de conf - </B> Si vous souhaitez que le système d'auto-générer des fichiers de conf astérisque sur la base des entrées de téléphones, le transporteur et l'équilibrage de charge des entrées de configuration dans VICIDIAL puis mettre à la valeur par défaut est Y. Y.

	<BR>
	<A NAME="servers-rebuild_conf_files">
	<BR>
	<B>Reconstruire les fichiers conf - </B> Si vous voulez forcer une reconstruction de la conf Asterisk fichiers ou si l'une des entrées de porte ou les téléphones ont changé, alors ceci doit être réglé sur Y. Après la conf des fichiers ont été générés et Asterisk a été rechargée alors ce sera changée pour N. La valeur par défaut est Y.

	<BR>
	<A NAME="servers-rebuild_music_on_hold">
	<BR>
	<B>Reconstruire la musique d-attente -</B> Si vous voulez forcer une reconstruction de la musique sur fichiers contiennent ou si la musique sur les entrées de détenir ou des entrées de serveur ont changé, alors ceci doit être réglé sur Y. Après la musique d-attente les fichiers ont été synchronisés et rechargés alors ce sera changée à N. défaut est Y..

	<BR>
	<A NAME="servers-sounds_update">
	<BR>
	<B>Mise à jour de sons -</B> Si vous voulez forcer une vérification des fichiers sonores sur ce serveur, et la banque centrale audio est activée d-un paramètre système, ce champ permettra aux sons de mise à jour à courir au début de la prochaine minute. Chaque fois qu-un fichier audio est téléchargé à partir de l-interface web de ce contrat est automatiquement réglé sur Y pour tous les serveurs qui ont activement Asterisk. Par défaut est n.

	<BR>
	<A NAME="servers-vicidial_recording_limit">
	<BR>
	<B>VICIDIAL Recording Limit -</B> Ce champ est l-endroit où vous définissez le nombre maximal de minutes durant laquelle un enregistrement d-appel lancé par VICIDIAL peut l-être. Par défaut est de 60 minutes.

	<BR>
	<A NAME="servers-carrier_logging_active">
	<BR>
	<B>Carrier Logging Active -</B> Ce paramètre vous permet d-enregistrer l-ensemble des codes de retour de raccrochage pour tout composant la liste des appels sortants que vous passez. Par défaut est N.

	<BR>
	<A NAME="servers-custom_dialplan_entry">
	<BR>
	<B>Entrée personnalisée Dialplan -</B> Ce champ vous permet d'entrer dans tous les éléments plan de numérotation que vous souhaitez pour le serveur, les lignes seront ajoutées au contexte par défaut.






	<BR><BR><BR><BR>

	<B><FONT SIZE=3>vicidial_conf_templates TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_conf_templates-template_id">
	<BR>
	<B>ID modèle - </B> Ce champ doit être d'au moins 2 caractères et pas plus de 15 caractères, sans espaces. C'est l'identifiant qui sera utilisé pour identifier le modèle de configuration à travers le système.

	<BR>
	<A NAME="vicidial_conf_templates-template_name">
	<BR>
	<B>Nom du modèle - </B> C'est le nom descriptif du modèle de fichier de configuration d'entrée.

	<BR>
	<A NAME="vicidial_conf_templates-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_conf_templates-template_contents">
	<BR>
	<B>Template Sommaire - </B> Ce domaine est l'endroit où vous pouvez entrer dans les paramètres spécifiques pour être utilisés par tous les téléphones et / ou les transporteurs qui sont mis à utiliser ce modèle de conf. Les champs qui ne doivent PAS être inclus dans cette zone sont: le secret, accountcode, compte, nom d'utilisateur et boîte aux lettres.





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>vicidial_server_carriers TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_server_carriers-carrier_id">
	<BR>
	<B>Carrier ID - </B> Ce champ doit être d'au moins 2 caractères et pas plus de 15 caractères, sans espaces. C'est l'identifiant qui sera utilisé pour identifier le transporteur pour cette entrée spécifique dans l'ensemble du système.

	<BR>
	<A NAME="vicidial_server_carriers-carrier_name">
	<BR>
	<B>Nom du transporteur - </B> C'est le nom descriptif de la porte d'entrée.

	<BR>
	<A NAME="vicidial_server_carriers-carrier_description">
	<BR>
	<B>Carrier Description -</B> Ceci est mis dans les commentaires des fichiers de conf asterisk-dessus du plan de numérotation et des entrées de compte. Maximum 255 caractères.

	<BR>
	<A NAME="vicidial_server_carriers-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_server_carriers-registration_string">
	<BR>
	<B>Inscription String - </B> Ce domaine est l'endroit où vous pouvez entrer dans la chaîne exacte nécessaire dans le IAX ou SIP pour enregistrer le fichier de configuration pour le fournisseur. Facultatif mais fortement recommandé si votre opérateur permet l'enregistrement.

	<BR>
	<A NAME="vicidial_server_carriers-template_id">
	<BR>
	<B>ID modèle - </B> Ce champ facultatif permet de choisir un modèle de fichier de conf de ce transporteur entrée.

	<BR>
	<A NAME="vicidial_server_carriers-account_entry">
	<BR>
	<B>Compte Entrée - </B> Ce champ est utilisé si vous n'avez pas choisi un modèle à utiliser, et c'est là où vous pouvez entrer dans les paramètres du compte à utiliser pour ce transporteur. Si vous prenez en appels entrants à partir de ce transporteur tronc, vous pouvez définir le contexte = trunkinbound dans ce domaine, de sorte que vous pouvez utiliser le processus de traitement des DID dans VICIDIAL.

	<BR>
	<A NAME="vicidial_server_carriers-protocol">
	<BR>
	<B>Protocole - </B> Ce domaine vous permet de définir le protocole à utiliser pour le transporteur d'entrée. Actuellement, seuls SIP et IAX sont soutenus.

	<BR>
	<A NAME="vicidial_server_carriers-globals_string">
	<BR>
	<B>Globals String - </B> Ce champ facultatif permet de définir une variable globale à utiliser pour le transporteur de la dialplan.

	<BR>
	<A NAME="vicidial_server_carriers-dialplan_entry">
	<BR>
	<B>Entrée Dialplan - </B> Ce champ facultatif permet de définir un ensemble de dialplan entrées à utiliser pour ce transporteur.

	<BR>
	<A NAME="vicidial_server_carriers-server_ip">
	<BR>
	<B>IP du serveur - </B> Il s'agit du serveur que ce support est associé à enregistrer.

	<BR>
	<A NAME="vicidial_server_carriers-active">
	<BR>
	<B>Active - </B> Cela définit si le transporteur sera inclus dans l'auto-générés ou non les fichiers conf.





	<BR><BR><BR><BR>

	<B><FONT SIZE=3>TABLE DES CONFERENCES</FONT></B><BR><BR>
	<A NAME="conferences-conf_exten">
	<BR>
	<B>Numéro de la conférence -</B> Ce champ permet de mettre le numéro du meetme pour les conférences. Il est aussi recommandé que le numéro du meetme dans meetme.conf corresponde à ce numéro pour chaque entrée. C'est pour les conférences dans astGUIclient et est utilisé pour la fonction leave-3way-call dans VICIDIAL.

	<BR>
	<A NAME="conferences-server_ip">
	<BR>
	<B>IP du serveur -</B> C'est le menu dans lequel vous choisissez le serveur Asterisk sur lequel sera cette conférence.




	<?php
	if ($SSoutbound_autodial_active > 0)
		{
		?>
		<BR><BR><BR><BR>

		<B><FONT SIZE=3>VICIDIAL_SERVER_MallesTABLE</FONT></B><BR><BR>
		<A NAME="vicidial_server_trunks">
		<BR>
		<B>Les trunks du serveur VICIDIAL vous permettent de limiter les lignes sortantes qui sont utilisées sur ce serveur sur une base par-campagne. Vous avez la possibilité de reserver un nombre spécifique de lignes à utiliser par seulement une campagne aussi bien que permettre à cette campagne d'utiliser plus de lignes que celles reservées si il en reste de libre, tant que le nombre maximum de ligne utilisées par Vicidial sur ce serveur est inférieur au nombre de trunks VICIDIAL maximum défini. Avoir aucun de ces réglages permet à la campagne qui appel en premier d'avoir autant de lignes qu'elle le peut sous le nombre max de lignes VICIDIAL défini.</B>
		<?php
		}
	?>




	<BR><BR><BR><BR>

	<B><FONT SIZE=3>SYSTEM_SETTINGS TABLE</FONT></B><BR><BR>
	<A NAME="settings-use_non_latin">
	<BR>
	<B>Utiliser Non-Latin -</B> Cette option vous permet d'utiliser les caractères UTF8 pour l'affichage web des scripts, et de ne pas utiliser des filtres d'expressions régulières latin-character-family ou de formater l'affichage. La valeur par défaut est 0.

	<BR>
	<A NAME="settings-webroot_writable">
	<BR>
	<B>Webroot éditable -</B> Cette option vous permet de définir si les fichiers temporaires et les fichiers d'authentification doivent être placés dans le webroot sur le serveur web. La valeur par défaut est 1.

	<BR>
	<A NAME="settings-vicidial_agent_disable">
	<BR>
	<B>Affichage de la désactivation d'un agent VICIDIAL -</B> Ce champ est utilisé pour selectionné quand montrer à un agent que ça session à été désactivée par le système, une action du manager ou par une mesure externe. NOT_ACTIVE désactivera l'affichage d'un message sur l'écran de l'agent. LIVE_AGENTS affichera seulement le message de désactivation quand les enregistrements vicidial_auto_calls des agents ont été modifiés, comme lors d'une déconnection forcée ou d'une déconnection de secours. 

	<BR>
	<A NAME="settings-allow_sipsak_messages">
	<BR>
	<B>Autoriser les messages SIPSAK -</B> Si défini à 1, cela permettra aux téléphones à fonctionner correctement, le serveur enverra des messages à afficher sur l'écran du téléphone quand il est connecté à VICIDIAL. Cette fonction fonctionne seulement avec des téléphones SIP et nécessite que sipsak soit installé sur le serveur web. La valeur par défaut est 0. 

	<BR>
	<A NAME="settings-vdc_agent_api_active">
	<BR>
	<B>Agent API Active - </B> Si définie à 1, cela permet à l'agent d'interface API pour fonctionner. La valeur par défaut est 0. 

	<BR>
	<A NAME="settings-admin_home_url">
	<BR>
	<B>URL de l'acceuil de l'administration -</B> C'est l'URL ou l'adresse du site web ou vous voulez aller quand vous cliquez sur le lien ACCUEIL en haut de la page admin.php.

	<BR>
	<A NAME="settings-admin_modify_rafraîchir">
	<BR>
	<B>Administrateur Modifier Auto-Refresh -</B> C'est l'intervalle de rafraîchissement en secondes des écrans modifier dans ce interface d'administration. Un réglage à 0 sera le désactiver, il la mise en-dessous de 5 sera la plupart du temps faire des écrans de forçage inutilisables car ils se rafraîchira trop vite pour changer les champs. Cette option est utile dans les situations où plus d'un gestionnaire est le contrôle des paramètres sur une campagne active ou en groupe afin que les paramètres sont rafraîchies fréquemment. Par défaut est 0.

	<BR>
	<A NAME="settings-nocache_admin">
	<BR>
	<B>Admin No-Cache -</B> Si définie à 1 permet de régler toutes les pages d'administration du navigateur internet de no-cache, de sorte que chaque écran doit être rechargé à chaque fois qu'il est considéré, même si le clic de retour sur le navigateur. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-enable_agc_xfer_log">
	<BR>
	<B>Permettez le fichier journal de transfert d'agent - cette optionnotera à un fichier journal des textes sur le webserver chaque foisqu'un appel est transféré à un agent. Le défaut est 0,neutralisé.

	<BR>
	<A NAME="settings-enable_agc_dispo_log">
	<BR>
	<B>Activer Logfile Disposition Agent -</B> Cette option se connecter à un fichier journal texte sur le serveur web à chaque fois qu'un appel est rejetées par un agent. Par défaut est 0, désactivé.

	<BR>
	<A NAME="settings-timeclock_end_of_day">
	<BR>
	<B>Horloge en temps Fin de la journée - </B> Ce paramètre définit lorsque tous les utilisateurs sont automatiquement déconnecté du système timeclock. Fonctionne uniquement une fois par jour. ne doit être que 4 chiffres et 2 chiffres heures à 2 chiffres dans les minutes de 24 heures. La valeur par défaut est 0000.

	<BR>
	<A NAME="settings-default_local_gmt">
	<BR>
	<B>Par défaut locale GMT -</B> Ce paramètre définit ce qui sera utilisé par défaut lors de nouveaux téléphones et les serveurs sont ajoutés à l'aide de cette interface web d'administration. Par défaut est de -5.

	<BR>
	<A NAME="settings-default_voicemail_timezone">
	<BR>
	<B>Zone messagerie vocale par défaut -</B> Ce paramètre définit quelle zone sera utilisé par défaut lors de nouveaux téléphones et boîtes vocales sont créées. La liste des zones disponibles est directement pris à partir du fichier voicemail.conf. Par défaut est l'Est.

	<BR>
	<A NAME="settings-agents_calls_reset">
	<BR>
	<B>Agents Appels Réinitialiser -</B> Ce paramètre définit si l'utilisateur connecté et les agents actifs des appels téléphoniques des dossiers doivent être remis à zéro à la fin de la journée minuterie. Par défaut est 1 pour activé.

	<BR>
	<A NAME="settings-timeclock_last_reset_date">
	<BR>
	<B>Dernière timeclock Auto Déconnection - </B> Ce champ affiche la date de la dernière auto-logout.

	<BR>
	<A NAME="settings-vdc_header_date_format">
	<BR>
	<B>Agent Header Screen Format Date - </B> Ce menu vous permet de choisir le format de la date qui apparaît en haut de l'écran VICIDIAL agent. Les options de ce paramètre sont les suivants: valeur par défaut est MS_DASH_24HR<BR>
	MS_DASH_24HR  2008-06-24 23:59:59 - Par défaut avec le format de la date année mois jour suivie par 24 heures,<BR>
	US_SLASH_24HR 06/24/2008 23:59:59 - Etats-Unis avec le format de la date mois jour année suivie par 24 heures,<BR>
	EU_SLASH_24HR 24/06/2008 23:59:59 - Européen de format de date avec jour mois année suivie par 24 heures,<BR>
	AL_TEXT_24HR  JUN 24 23:59:59 - Texte de format de date avec abrégée mois jour suivie par 24 heures,<BR>
	MS_DASH_AMPM  2008-06-24 11:59:59 PM - Par défaut avec le format de la date année mois jour , suivies de 12 heures<BR>
	US_SLASH_AMPM 06/24/2008 11:59:59 PM - Etats-Unis avec le format de la date mois jour année , suivies de 12 heures<BR>
	EU_SLASH_AMPM 24/06/2008 11:59:59 PM - Européen de format de date avec jour mois année , suivies de 12 heures<BR>
	AL_TEXT_AMPM  JUN 24 11:59:59 PM - Texte de format de date avec abrégée mois jour , suivies de 12 heures<BR>

	<BR>
	<A NAME="settings-vdc_customer_date_format">
	<BR>
	<B>Agent client Screen Format Date - </B> Ce menu vous permet de choisir le format de la date du fuseau horaire client qui apparaît en haut de la section d'information à la clientèle agent VICIDIAL de l'écran. Les options pour ce paramètre sont les suivants: valeur par défaut est AL_TEXT_AMPM<BR>
	MS_DASH_24HR  2008-06-24 23:59:59 - Par défaut avec le format de la date année mois jour suivie par 24 heures,<BR>
	US_SLASH_24HR 06/24/2008 23:59:59 - Etats-Unis avec le format de la date mois jour année suivie par 24 heures,<BR>
	EU_SLASH_24HR 24/06/2008 23:59:59 - Européen de format de date avec jour mois année suivie par 24 heures,<BR>
	AL_TEXT_24HR  JUN 24 23:59:59 - Texte de format de date avec abrégée mois jour suivie par 24 heures,<BR>
	MS_DASH_AMPM  2008-06-24 11:59:59 PM - Par défaut avec le format de la date année mois jour , suivies de 12 heures<BR>
	US_SLASH_AMPM 06/24/2008 11:59:59 PM - Etats-Unis avec le format de la date mois jour année , suivies de 12 heures<BR>
	EU_SLASH_AMPM 24/06/2008 11:59:59 PM - Européen de format de date avec jour mois année , suivies de 12 heures<BR>
	AL_TEXT_AMPM  JUN 24 11:59:59 PM - Texte de format de date avec abrégée mois jour , suivies de 12 heures<BR>

	<BR>
	<A NAME="settings-vdc_header_phone_format">
	<BR>
	<B>Agent Client Téléphone Screen Format - </B> Ce menu vous permet de choisir le format du client le numéro de téléphone qui apparaît dans la section du statut de la VICIDIAL agent écran. Les options pour ce paramètre sont les suivants: valeur par défaut est US_PARN<BR>
	US_DASH 000-000-0000 - USA tableau de bord séparés numéro de téléphone<BR>
	US_PARN (000)000-0000 - USA Numéro de tableau de bord séparés avec le code régional entre parenthèses<BR>
	MS_NODS 0000000000 - Pas de formatage<BR>
	UK_DASH 00 0000-0000 - UK tableau de bord séparés numéro de téléphone avec l'espace après le code de ville<BR>
	AU_SPAC 000 000 000 - Australia espace séparé numéro de téléphone<BR>
	IT_DASH 0000-000-000 - Italy tableau de bord séparés numéro de téléphone<BR>
	FR_SPAC 00 00 00 00 00 - France espace séparé numéro de téléphone<BR>

	<BR>
	<A NAME="settings-vdc_agent_api_active">
	<BR>
	<B>Agent interface API Access Active -</B> This option allows you to enable or disable the agent interface API. Default is 0.

	<BR>
	<A NAME="settings-agentonly_callback_campaign_lock">
	<BR>
	<B>Agent Only Lock Campagne de rappel -</B> Cette option définit si rappels AGENTONLY sont enfermés à la campagne que l-agent a initialement créé sous. Mettre ce paramètre à 1 signifie que l-agent ne peut les composer dans la campagne, ils ont été définies sous, 0 signifie que l-agent peut y accéder quel que campagne, ils sont connecté. Par défaut est 1.

	<BR>
	<A NAME="settings-sounds_central_control_active">
	<BR>
	<B>Central Sound Control Active -</B> Cette option définit si le système de synchronisation sonore est actif sur tous les serveurs. Par défaut est 0 pour inactif.

	<BR>
	<A NAME="settings-sounds_web_server">
	<BR>
	<B>Sounds Web Server -</B> C-est le nom du serveur ou l-adresse IP du serveur Web qui sera la manipulation des fichiers sonores sur ce système, cela doit correspondre le nom du serveur ou adresse IP de la machine que vous essayez d-accéder à la page Web audio_store.php sur ou ça ne marchera pas . Par défaut est 127.0.0.1.

	<BR>
	<A NAME="settings-sounds_web_directory">
	<BR>
	<B>Sounds Web Directory -</B> Cette auto-générés nom du répertoire est créé au hasard par le système comme étant le lieu que le magasin audio seront conservés. Tous les fichiers audio se trouver dans ce répertoire.

	<BR>
	<A NAME="settings-admin_web_directory">
	<BR>
	<B>Annuaire Web Admin -</B> Il s'agit du répertoire que votre contenu web administation, comme admin.php, sont po par défaut est Vicidial. Pour déterminer votre répertoire web d'administration, il est tout ce qui est entre le nom de domaine et le admin.php dans l'URL de cette page, sans les barres obliques de début et de fin.

	<BR>
	<A NAME="settings-active_voicemail_server">
	<BR>
	<B>Active Server Boîte vocale -</B> Dans les systèmes multi-serveur, c-est le serveur qui va gérer toutes les boîtes de messagerie vocale. Ce serveur est également lorsque le dial-in générée invites seront téléchargées à partir, le 8168 enregistrements.

	<BR>
	<A NAME="settings-outbound_autodial_active">
	<BR>
	<B>Auto-Outbound Dial Active - </B> Cette option vous permet d'activer ou désactiver la numérotation automatique sortants dans VICIDIAL, la mise en ce domaine à 0 supprime les listes et FILTRES sections et de nombreux champs de la campagne Modification écrans. Manuel de l'entrée de numérotation sera encore autorisée au sein de l'agent de l'écran, mais pas de liste d'appel ne sera possible. La valeur par défaut est 1 pour les actifs.

	<BR>
	<A NAME="settings-auto_dial_limit">
	<BR>
	<B>Ratio Dial Limit -</B> C-est la limite maximale du niveau automatique ligne dans l-écran de campagne.

	<BR>
	<A NAME="settings-outbound_calls_per_second">
	<BR>
	<B>Max REMPLISSAGE demande par seconde -</B> Ce paramètre détermine le nombre maximum d'appels qui peuvent être placés par les auto-FILL sortie d'auto-script de numérotation pour tous les serveurs, par seconde. Doit être de 1 à 200. La valeur par défaut est 40.

	<BR>
	<A NAME="settings-allow_custom_dialplan">
	<BR>
	<B>Permettant de personnaliser le plan d-appel Entrées -</B> Cette option vous permet d'entrer des lignes personnalisées plan de numérotation dans les menus d'appels, serveurs et les paramètres système. Par défaut est 0 pour inactif.

	<BR>
	<A NAME="settings-pllb_grouping_limit">
	<BR>
	<B>Limite Groupement PLLB -</B> Connexion Charge Téléphone Groupement Limite d'équilibrage. Si Groupement PLLB est réglé sur CASCADE au niveau de la campagne, alors ce paramètre détermine le nombre d'agents acceptable sur chaque serveur dans toutes les campagnes. Par défaut est 100.

	<BR>
	<A NAME="settings-generate_cross_server_exten">
	<BR>
	<B>Générer les extensions de téléphone de la Croix-Server -</B> Cette option si elle est définie à 1, générer des entrées pour chaque plan de numérotation de téléphone sur un système multi-serveur. Par défaut est 0 pour inactif.

	<BR>
	<A NAME="settings-user_territories_active">
	<BR>
	<B>Territoires utilisateur Active -</B> Ce paramètre vous permet d-activer les Territoires utilisateur setttings de l-écran de modification de l-utilisateur. Cette fonctionnalité a été ajoutée afin de permettre une plus grande intégration avec une installation personnalisée Vtiger mais peut avoir des applications dans un système VICIDIAL purs ainsi. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-enable_second_webform">
	<BR>
	<B>Activer Webform Deuxième -</B> This setting allows you to have a second web form for campaigns and in-groups in the agent interface. Default is 0 for disabled.

	<BR>
	<A NAME="settings-enable_tts_integration">
	<BR>
	<B>Activer TTS Intégration -</B> Ce paramètre vous permet d-activer l-intégration Text To Speech avec Cepstral. Ce n-est actuellement disponible pour les campagnes Enquête sortants type. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-callcard_enabled">
	<BR>
	<B>Activer CallCard -</B> Ce paramètre permet les fonctions CallCard avec Vicidial pour permettre aux appelants d'utiliser les numéros de broches et card_ids qui ont un solde de minutes et les soldes peuvent avoir temps de conversation agent sur les appels des clients vers des groupes déduits. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-custom_fields_enabled">
	<BR>
	<B>Activer les champs de liste personnalisés -</B> Ce paramètre permet la liste personnalisée fonction des champs qui permet de champs de données personnalisés à définir dans l'interface Web d'administration sur une base par liste et alors ces champs disponibles dans un onglet formulaire à l'agent dans l'interface web agent. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-test_campaign_calls">
	<BR>
	<B>Permettre des appels de test de la campagne -</B> Ce paramètre permet la possibilité d'entrer un code de téléphone et numéro de téléphone dans les champs au bas de l'écran Détail de la campagne et placer un appel téléphonique à ce numéro comme s'il s'agissait d'une avance en cours d'auto-composé dans le système. Le numéro de téléphone sera stocké en tant que nouveau chef de file dans la liste ID cadran liste manuelle. La campagne doit être activé pour que cette fonctionnalité soit activée, et il est recommandé que les listes affectés à la campagne tous être mis à l'état inactif. Le préfixe de numérotation, délai d'attente de numérotation et toutes les fonctions de numérotation autres connexes, à l'exception de la DNC et des options d'achat de temps, aura une incidence sur la numérotation du nombre d'essai. L'appel téléphonique sera placé sur le serveur sélectionné comme serveur de messagerie vocale dans les paramètres du système. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-expanded_list_stats">
	<BR>
	<B>Activer Statistiques liste élargie -</B> Ce réglage permet à deux colonnes supplémentaires pour être affichés sur la plupart des tables de la Liste des dégradation de situation sur la liste et la modification des pages de modification de la campagne. La pénétration est définie comme étant la pour cent des conducteurs qui sont au niveau ou au-dessus de la limite de comptage des appels et la campagne ou le statut est marqué comme complété. Par défaut est 1 pour activé.

	<BR>
	<A NAME="settings-campaign_cid_areacodes_enabled">
	<BR>
	<B>Activer le code zonal de la campagne CID -</B> Ce paramètre permet la possibilité de définir spécifiques sortants numéros callerid à être utilisés par campagne. Par défaut est 1 pour activé.

	<BR>
	<A NAME="settings-did_ra_extensions_enabled">
	<BR>
	<B>Activer télécommande remplace extension de l'agent -</B> Ce réglage permet d'avoir DID remplacements de vulgarisation pour l'agent à distance acheminés par le biais de demande-groupes. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="contact_information">
	<A NAME="settings-contacts_enabled">
	<BR>
	<B>Contacts Enabled -</B> Ce paramètre permet les contacts dans la sous-section Admin qui permet à un gestionnaire d'ajouter, modifier ou supprimer des contacts dans le système qui peuvent être utilisés dans le cadre d'un transfert personnalisé dans une campagne où un agent peut rechercher des contacts par Prénom Nom ou au bureau numéro, puis sélectionnez l'une des nombreux numéros associés à ce contact. Cette fonction est souvent utilisée par les opérateurs ou dans les fonctions de standard où l'utilisateur aurait besoin de transférer un appel vers un téléphone non-agent. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-first_login_trigger">
	<BR>
	<B>Trigger connecter d'abord -</B> Ce paramètre permet la configuration initiale de l'écran du serveur pour être montré à l'administrateur lors de leur première session dans le système.

	<BR>
	<A NAME="settings-default_phone_registration_password">
	<BR>
	<B>Mot de passe par défaut d'inscription Téléphone -</B> C'est le mot de passe d'enregistrement par défaut utilisée lors de nouveaux téléphones sont ajoutés au système. Par défaut est test.

	<BR>
	<A NAME="settings-default_phone_login_password">
	<BR>
	<B>Login Mot de passe par défaut Téléphone -</B> C'est le téléphone de connexion par défaut mot de passe utilisé lors web nouveaux téléphones sont ajoutés au système. Par défaut est test.

	<BR>
	<A NAME="settings-default_server_password">
	<BR>
	<B>Mot de passe par défaut du serveur -</B> C'est le mot de passe par défaut du serveur utilisé lorsque de nouveaux serveurs sont ajoutés au système. Par défaut est test.

	<BR>
	<A NAME="settings-slave_db_server">
	<BR>
	<B>Database Server esclave -</B> Si vous avez un serveur base de données MySQL esclave puis entrez l'adresse IP locale de ce serveur ici. Cette option n'est actuellement utilisé que par les rapports sélectionnés dans l'option suivante et n'a rien à voir avec la configuration automatique de MySQL réplication maître-esclave. Par défaut est vide pour les handicapés.

	<BR>
	<A NAME="settings-reports_use_slave_db">
	<BR>
	<B>Rapports d'utiliser DB Slave -</B> Cette option vous permet de sélectionner les rapports que vous souhaitez utiliser la base de données ont esclave MySQL tel que défini dans l'option ci-dessus au lieu de la base de données master que votre système en direct Vicidial est exécuté. Vous devez mettre en place la réplication MySQL esclave avant que vous pouvez activer cette option. Par défaut est vide pour les handicapés.

	<BR>
	<A NAME="settings-default_field_labels">
	<BR>
	<B>Les étiquettes de champs par défaut -</B> Ces 19 champs vous permettent de définir le nom tel qu'il apparaîtra dans l'interface agent de Vicidial ainsi que la page de modification administrative plomb. Par défaut est vide, ce qui va utiliser les valeurs par défaut codées en dur dans l'interface agent de. Vous pouvez également définir une étiquette à --- --- CACHER pour cacher l'étiquette et le champ.

	<BR>
	<A NAME="settings-label_hide_field_logs">
	<BR>
	<B>Masquer Label dans des journaux d'appels -</B> Si une étiquette est fixée à --- CACHER --- puis les journaux d'appels d'agents, si elle est activée sur la campagne, seront toujours visibles sur le terrain et des données à moins que cette option est activée par défaut est à Y. N.

	<BR>
	<A NAME="settings-qc_features_active">
	<BR>
	<B>Caractéristiques QC Active - </B> Cette option vous permet d'activer ou désactiver le contrôle de la qualité ou QC fonctionnalités. La valeur par défaut est 0 pour les inactifs.

	<BR>
	<A NAME="settings-default_webphone">
	<BR>
	<B>Webphone par défaut -</B> Si définie à 1, cette option fera tous les nouveaux téléphones ont créés Définir en tant que jeu Webphone à défaut Y. est égal à 0.

	<BR>
	<A NAME="settings-webphone_systemkey">
	<BR>
	<B>Key System Webphone -</B> Si votre système ou votre fournisseur l'exige, c'est là la clé du système pour le webphone doit être inscrit po par défaut est vide.

	<BR>
	<A NAME="settings-default_codecs">
	<BR>
	<B>Codecs par défaut -</B> Vous pouvez définir une liste délimitée par des virgules des codecs d'être défini comme les codecs par défaut pour tous les systèmes. Options pour les codecs comprennent ulaw, alaw, gsm, g729, speex, G722, G723, G726, ILBC, ... Par défaut est vide.

	<BR>
	<A NAME="settings-custom_dialplan_entry">
	<BR>
	<B>Entrée personnalisée Dialplan -</B> Ce champ vous permet d'entrer dans tous les éléments plan de numérotation que vous souhaitez pour l'ensemble des serveurs Asterisk, les lignes seront ajoutées au contexte par défaut.

	<BR>
	<A NAME="settings-reload_dialplan_on_servers">
	<BR>
	<B>Recharger Dialplan Sur les serveurs -</B> Cette option vous permet de forcer un rechargement de la dialplan sur tous les serveurs Asterisk dans le cluster. Si vous avez fait des changements dans l'entrée personnalisé Dialplan ci-dessus vous devez définir cette valeur à 1 et se soumettre à ces changements ont entrera en vigueur sur les serveurs.

	<BR>
	<A NAME="settings-noanswer_log">
	<BR>
	<B>Non-Réponse Connexion -</B> Cette option vous connecter les appels à composition automatique qui ne sont pas répondu à une table séparée. Par défaut est N.

	<BR>
	<A NAME="settings-did_agent_log">
	<BR>
	<B>DID journal de l'Agent -</B> Cette option enregistre l'arrivée des appels DID long avec un en-groupe et l'ID utilisateur, le cas échéant, à une table séparée. Par défaut est N.

	<BR>
	<A NAME="settings-alt_log_server_ip">
	<BR>
	<B>Alt-Server Log DB -</B> C'est le serveur de log alternatif base de données. Cette option est facultative, et permet à certains journaux soient écrits à une base de données distincte. Par défaut est vide.

	<BR>
	<A NAME="settings-tables_use_alt_log_db">
	<BR>
	<B>Alt-Log tableaux -</B> Ce sont les tableaux qui sont disponibles pour la connexion sur le serveur de base de données journal alternatif. Par défaut est vide.

	<BR>
	<A NAME="settings-qc_features_active">
	<BR>
	<B>IP par défaut du serveur externe -</B> Si définie à 1, cette option fera tous les nouveaux téléphones ont créés Utilisez IP du serveur externe mis à Y. par défaut est 0.

	<BR>
	<A NAME="settings-qc_features_active">
	<BR>
	<B>URL Webphone -</B> C'est l'URL de la webphone qui sera utilisé avec ce système si elle est activée dans le dossier des téléphones qui est un agent à l'aide. Par défaut est vide.

	<BR>
	<A NAME="settings-enable_queuemetrics_logging">
	<BR>
	<B>Activer le log des QueueMetrics -</B> Cette option vous permet de définir si VICIDIAL va insérer les données des logs dans la table queue_log comme le fait Asterisk. QueueMetrics est un programme d'analyse de statistiques autonome et non open-source. Vous devez avoir installé et configuré QueueMetrics pour activer cette option. La valeur par défaut est 0.

	<BR>
	<A NAME="settings-queuemetrics_server_ip">
	<BR>
	<B>IP du serveur QueueMetrics -</B> C'est l'adresse IP de la base de données pour votre installation de QueueMetrics.

	<BR>
	<A NAME="settings-queuemetrics_dbname">
	<BR>
	<B>Nom de la base de données de QueueMetrics -</B> C'est le nom de la base de données de QueueMetrics.

	<BR>
	<A NAME="settings-queuemetrics_login">
	<BR>
	<B>Login de la base de données de QueueMetrics -</B> C'est le login utilisé pour se connecter à la base de données QueueMetrics.

	<BR>
	<A NAME="settings-queuemetrics_pass">
	<BR>
	<B>Mot de passe de la base de données de QueueMetrics -</B> C'est le mot de passe utilisé pour se connecter à la base de données QueueMetrics.

	<BR>
	<A NAME="settings-queuemetrics_url">
	<BR>
	<B>URL de QueueMetrics -</B> C'est l'URL ou l'adresse du site web utilisé pour atteindre QueueMetrics.

	<BR>
	<A NAME="settings-queuemetrics_log_id">
	<BR>
	<B>Identifiant des log de QueueMetrics -</B> C'est l'identifiant du serveur que tout les logs VICIDIAL dans la base de données de QueueMetrics vont utiliser pour chaque enregistrement.

	<BR>
	<A NAME="settings-queuemetrics_eq_prepend">
	<BR>
	<B>QueueMetrics EnterQueue Prepend -<\/B> Ce champ est utilisé pour autorisé à ajouter un des champs des données de vicidial_list devant le numéro de téléphone du client pour personnaliser les rapports QueueMetrics. La valeur par défaut est NONE pour ne pas peupler n'importe quoi.

	<BR>
	<A NAME="settings-queuemetrics_loginout">
	<BR>
	<B>QueueMetrics connecter-Out -</B> Cette option affecte la manière dont Vicidial va enregistrer les connexions et déconnexions d'un agent dans le queue_log. Par défaut est la norme à utiliser la norme AGENTLOGIN AGENTLOGOFF, CALLBACK utilisera AGENTCALLBACKLOGIN et AGENTCALLBACKLOGOFF que QM va analyser différemment, AUCUN ne sera pas journaliser toutes les connexions et déconnexions dans queue_log.

	<BR>
	<A NAME="settings-queuemetrics_callstatus">
	<BR>
	<B>QueueMetrics CallStatus -</B> Cette option si elle est définie à 0 ne sera pas mis dans l'entrée en CALLSTATUS queue_log quand un agent de dispositions d'un appel. Par défaut est 1 pour activé.

	<BR>
	<A NAME="settings-queuemetrics_addmember_enabled">
	<BR>
	<B>QueueMetrics addMember Enabled -</B> Cette option si elle est définie à 1 générera ADDMEMBER2 et les entrées dans removeMember queue_log. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-queuemetrics_dispo_pause">
	<BR>
	<B>Code de QueueMetrics Pause Dispo -</B> Cette option, si peuplée, vous permet de définir si un code de pause dispo est entré en queue_log quand un agent est en état de dispo. Par défaut est vide pour les handicapés.

	<BR>
	<A NAME="settings-queuemetrics_pe_phone_append">
	<BR>
	<B>Téléphone QueueMetrics Environnement Téléphone Append -</B> Cette option, si elle est activée, va ajouter le login de téléphone d'agent à l'enregistrement données4 dans la table du journal file d'attente si le domaine de l'environnement de la campagne est peuplée Téléphone. Par défaut est 0 pour les handicapés.

	<BR>
	<A NAME="settings-enable_vtiger_integration">
	<BR>
	<B>Activer Vtiger Integration - </B> Ce paramètre vous permet d'activer l'intégration avec Vtiger VICIDIAL. Actuellement, des liens vers Vtiger admin et de recherche ainsi que l'utilisateur de réplication sont les seules fonctions d'intégration disponibles. La valeur par défaut est 0.

	<BR>
	<A NAME="settings-vtiger_server_ip">
	<BR>
	<B>Vtiger DB IP du serveur - </B> Il s'agit de l'adresse IP de la base de données de votre installation Vtiger.

	<BR>
	<A NAME="settings-vtiger_dbname">
	<BR>
	<B>Vtiger Database Name - </B> C'est le nom de base de données de votre base de données Vtiger.

	<BR>
	<A NAME="settings-vtiger_login">
	<BR>
	<B>Vtiger Database Login - </B> C'est le nom d'utilisateur utilisé pour vous connecter à votre base de données Vtiger.

	<BR>
	<A NAME="settings-vtiger_pass">
	<BR>
	<B>Vtiger Database Password - </B> Il s'agit du mot de passe utilisé pour vous connecter à votre base de données Vtiger.

	<BR>
	<A NAME="settings-vtiger_url">
	<BR>
	<B>Vtiger Web - </B> Il s'agit de l'URL ou adresse du site Web utilisé pour accéder à votre installation Vtiger.


	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_STATUSES TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_statuses">
	<BR>
	<B>Par l'utilisation des statuts de système, vous pouvez avoir desstatuts qui existent pour la campagne et le dans-groupe. Le statutdoit être 1-6 caractères de longueur, la description doit être 2-30caractères de longueur et sélectionnable définit si elle apparaîtdans VICIDIAL comme disposition d'agent. Human_answered le champ estemployé en calculant le pourcentage de baisse, ou le taux d'abandon.L'arrangement human_answered à Y emploiera ce statut en comptant lesappels humain-répondus. L'option de catégorie vous permet de grouperplusieurs statuts dans un catogy qui peut être employé pourl'analyse statistique. Il ya également 5 autres paramètres qui définiront le type de statut: vente, DNC, contact client, pas intéressé, impossible, scheduled callback.</B>



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_SCREEN_LABELS TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_screen_labels">
	<BR>
	<B>Screen labels give you the option of setting different labels for the default agent screen fields on a par campagne basis.</B>

	<A NAME="vicidial_screen_labels-label_id">
	<BR>
	<B>Label ID écran -</B> Ce champ doit être d'au moins 2 caractères et pas plus de 20 caractères de long, sans espaces ni de caractères spéciaux. Il s'agit du N qui sera utilisé pour identifier l'étiquette écran à travers le système.

	<BR>
	<A NAME="vicidial_screen_labels-label_name">
	<BR>
	<B>Nom du Label écran -</B> Il s'agit du nom descriptif de l'entrée étiquette écran.

	<BR>
	<A NAME="vicidial_screen_labels-user_group">
	<BR>
	<B>Groupe d'utilisateurs d'administration -</B> C'est le groupe d'utilisateur d'administration pour cet enregistrement, ce qui permet la visualisation de cette administration recoird limité par groupe d'utilisateurs. Par défaut est - ALL - qui permet à tout utilisateur admin pour voir ce record.

	<BR>
	<A NAME="vicidial_screen_labels-label_hide_field_logs">
	<BR>
	<B>Masquer Label dans des journaux d'appels -</B> Si une étiquette est fixée à --- CACHER --- puis les journaux d'appels d'agents, si elle est activée sur la campagne, seront toujours visibles sur le terrain et des données à moins que cette option est activée par défaut est à Y. N.

	<BR>
	<A NAME="vicidial_screen_labels-default_field_labels">
	<BR>
	<B>Les étiquettes de champs par défaut -</B> Ces 19 champs vous permettent de définir le nom tel qu'il apparaîtra dans l'interface agent de Vicidial ainsi que la page de modification administrative plomb. Par défaut est vide, ce qui va utiliser les valeurs par défaut codées en dur dans l'interface agent de. Vous pouvez également définir une étiquette à --- --- CACHER pour cacher l'étiquette et le champ.



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL_STATUS_CATEGORIES TABLE</FONT></B><BR><BR>
	<A NAME="vicidial_status_categories">
	<BR>
	<B>Par l'utilisation des catégories de statut de système, vous pouvezgrouper ensemble des statuts pour tenir compte de l'analysestatistique sur un groupe de statuts. L'identification de catégoriedoit être 2-20 caractères de longueur sans les espaces, le nom doitêtre 2-50 caractères de longueur, la description est facultative etl'affichage de TimeonVDAD définit si ce statut sera un de jusqu'à 4statuts qui peuvent être calculés et montrés le temps sur lerapport de temps réel de VDAD.</B> La vente et la catégorie Dead Lead Catégorie sont tous deux utilisés par le système de liste de suggestions lors de l'analyse de la liste des statistiques.



	<BR><BR><BR><BR>

	<B><FONT SIZE=3>VICIDIAL CUSTOM TEMPLATE MAKER</FONT></B><BR><BR>
	<A NAME="vicidial_template_maker">
	<BR>
	The Vicidial custom template maker allows you to define your own file layouts for use with the Vicidial listloader and also delete them, if necessary.  If you frequently upload files that are in a consistent layout other than the Vicidial standard layout, you may find this tool helpful.  The saved layout will work on any uploaded file it matches, regardless of file type or delimiter.

	<BR>
	<A NAME="vicidial_template_maker-create_template">
	<BR>
	<B>Créer un nouveau modèle - </B>In order to begin creating your new listloader template, you must first load a lead file that has the layout you wish to create the template for.  Click "Choose file", and open the file on your computer you wish to use.  This will upload a copy to your server and process it to determine the file type and delimiter (for TXT files).

	<BR>
	<A NAME="vicidial_template_maker-delete_template">
	<BR>
	<B>Supprimertemplate -</B> If you have a template you no longer use or you mis-entered information on it and would like to re-enter it, select the template from the drop-down menu and click "Supprimer le modèle".

	<BR>
	<A NAME="vicidial_template_maker-template_id">
	<BR>
	<B>ID modèle -</B> This field is where you enter an arbitrary ID for your new custom template.  It must be between 2 and 20 characters and consist of alphanumeric characters and underscores.

	<BR>
	<A NAME="vicidial_template_maker-template_name">
	<BR>
	<B>Nom du modèle -</B> This field is where you enter the name for your new custom template.  Can be up to 30 characters long.

	<BR>
	<A NAME="vicidial_template_maker-template_description">
	<BR>
	<B>description du modèle -</B> This field is where you enter the description for your new custom template.  It can be up to 255 characters long.

	<BR>
	<A NAME="vicidial_template_maker-list_id">
	<BR>
	<B>ID de la liste -</B> All templates must load their records into a list.  Select a list ID to load leads into from this drop-down list, which will display any lists available to you given your user settings.

	<BR>
	<A NAME="vicidial_template_maker-assign_columns">
	<BR>
	<B>Assigning columns -</B> Once you have loaded a sample file matching the layout you wish to make into a template and select a list ID to load leads into, all the available columns from the vicidial_list table and the custom table for the list you selected (if any) will be displayed here.  Colonnes highlighted in blue are standard columns from the vicidial_list table.  Colonnes highlighted in pink belong to the custom table for the selected list.  Each column listed has a drop-down menu, which should be populated with the fields from the first row of the sample file you uploaded.  Assign the appropriate fields to the appropriate columns and press "SOUMETTRE TEMPLATE" to create your template.  You do not need to assign every field to a column, and you do not need to assign every column a field.  For details on the standard vicidial_list columns, click <a href="#vicidial_list_loader">HERE</a>.


	<BR><BR><BR><BR>

	<B><FONT SIZE=3>Maximum du système des rapports statistiques</FONT></B><BR><BR>
	<A NAME="vicidial_max_stats">
	<BR>
	<B>Ces statistiques sont mises en cache totaux qui sont stockés sur chaque journée de en temps réel par le biais des processus back-end. Pour les appels entrants, les appels totaux par en-groupe sont calculés pour chaque appel qui pénètre dans le processus qui calcule. Pour les chefs d'accusation ensemble du système, les totaux sont générés à partir des entrées de journal ainsi que d'autres totaux en groupe et de la campagne. Ces totaux peuvent ne pas s'additionner à cause des paramètres que vous avez dans votre système ainsi que lorsque l'appel est raccroché.


	<?php
	if ($SSqc_features_active > 0)
		{
		?>
		<BR><BR><BR><BR>

		<B><FONT SIZE=3>VICIDIAL QC ÉTAT DES CODES</FONT></B><BR><BR>
		<A NAME="vicidial_qc_status_codes">
		<BR>
		<B>The Quality Control-QC system within VICIDIAL has its own set of status codes separate from those within the call handling functions of VICIDIAL. QC status codes must be between 2 and 8 characters in length and contain no special characters like a space or colon. The QC status code description must be between 2 and 30 characters in length.</B>
		<?php
		}
	?>



	<BR><BR><BR><BR><BR><BR><BR><BR>
	<BR><BR><BR><BR><BR><BR><BR><BR>
	LA FIN
	</TD></TR></TABLE></BODY></HTML>
	<?php
	exit;

	#### END AIDE SCREENS
	}


######################################################################################################
######################################################################################################
#######   7 series, filter count preview and script preview
######################################################################################################
######################################################################################################




######################
# ADD=73 view dialable leads from a filter and a campaign
######################

if ($ADD==73)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "</title>\n";
		echo "</head>\n";
		echo "<BODY BGCOLOR=white marginheight=0 marginwidth=0 leftmargin=0 topmargin=0>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT dial_statuses,local_call_time,lead_filter_id,drop_lockout_time,call_count_limit from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$dial_statuses =		$row[0];
		$local_call_time =		$row[1];
		$drop_lockout_time =	$row[3];
		$call_count_limit =		$row[4];
		if ($lead_filter_id=='')
			{
			$lead_filter_id =	$row[2];
			if ($lead_filter_id=='') 
				{
				$lead_filter_id='NONE';
				}
			}

		$stmt="SELECT list_id,active,list_name from vicidial_lists where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rslt);
		$camp_lists='';
		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$o++;
			if (ereg("Y", $rowx[1])) {$camp_lists .= "'$rowx[0]',";}
			}
		$camp_lists = eregi_replace(".$","",$camp_lists);

		$filterSQL = $filtersql_list[$lead_filter_id];
		$filterSQL = preg_replace("/\\\\/","",$filterSQL);
		$filterSQL = eregi_replace("^and|and$|^or|or$","",$filterSQL);
		if (strlen($filterSQL)>4)
			{$fSQL = "and $filterSQL";}
		else
			{$fSQL = '';}


		echo "<BR><BR>\n";
		echo "<B>Montrer le nombre de fiches désactivées</B> -<BR><BR>\n";
		echo "<B>CAMPAIGN:</B> $campaign_id<BR>\n";
		echo "<B>LISTS:</B> $camp_lists<BR>\n";
		echo "<B>STATUSES:</B> $dial_statuses<BR>\n";
		echo "<B>FILTER:</B> $lead_filter_id<BR>\n";
		echo "<B>CALL LIMIT:</B> $call_count_limit\n";
		echo "<B>CALL TIME:</B> $local_call_time<BR><BR>\n";

		### call function to calculate and print dialable leads
		$single_status=0;
		dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL);

		echo "<BR><BR>\n";
		echo "</BODY></HTML>\n";

		exit;
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=7111111 view sample script with test variables
######################

if ($ADD==7111111)
	{
	##### TEST VARIABLES #####
	$vendor_lead_code = 'VENDOR:LEAD;CODE';
	$list_id = 'LISTID';
	$list_name = 'LISTNAME';
	$list_description = 'LISTDESCRIPTION';
	$gmt_offset_now = 'GMTOFFSET';
	$phone_code = '1';
	$phone_number = '7275551212';
	$title = 'Mr.';
	$first_name = 'JOHN';
	$middle_initial = 'Q';
	$last_name = 'PUBLIC';
	$address1 = '1234 Main St.';
	$address2 = 'Apt. 3';
	$address3 = 'ADDRESS3';
	$city = 'CHICAGO';
	$state = 'IL';
	$province = 'PROVINCE';
	$postal_code = '33760';
	$country_code = 'USA';
	$gender = 'M';
	$date_of_birth = '1970-01-01';
	$alt_phone = '3125551111';
	$email = 'test@test.com';
	$security_phrase = 'SECUTIRY';
	$comments = 'COMMENTS FIELD';
	$RGfullname = 'JOE AGENT';
	$RGuser = '6666';
	$RGlead_id = '1234';
	$RGcampaign = 'TESTCAMP';
	$RGphone_login = 'gs102';
	$RGgroup = 'TESTCAMP';
	$RGchannel_group = 'TESTCAMP';
	$RGSQLdate = date("Y-m-d H:i:s");
	$RGepoch = date("U");
	$RGuniqueid = '1163095830.4136';
	$RGcustomer_zap_channel = 'Zap/1-1';
	$RGserver_ip = '10.10.10.15';
	$RGSIPexten = 'SIP/gs102';
	$RGsession_id = '8600051';
	$RGdialed_number = '3125551111';
	$RGdialed_label = 'ALT';
	$RGrank = '99';
	$RGowner = '6666';
	$RGcamp_script = 'TESTSCRIPT';
	$RGin_script = '';
	$script_width = '600';
	$script_height = '400';
	$recording_filename = '20091204-1639_6666_7275551212';
	$recording_id = '1235';
	$user_custom_one = 'custom one';
	$user_custom_two = 'custom two';
	$user_custom_three = 'custom three';
	$user_custom_four = 'custom four';
	$user_custom_five = 'custom five';
	$preset_number_a = 'preset_a';
	$preset_number_b = 'preset_b';
	$preset_number_c = 'preset_c';
	$preset_number_d = 'preset_d';
	$preset_number_e = 'preset_e';
	$preset_number_f = 'preset_f';
	$preset_dtmf_a = 'preset_dtmf_a';
	$preset_dtmf_b = 'preset_dtmf_b';
	$did_id = 'did_id';
	$did_extension = 'did_extension';
	$did_pattern = 'did_pattern';
	$did_description = 'did_description';
	$closecallid = 'closecallid';
	$xfercallid = 'xfercallid';
	$agent_log_id = 'agent_log_id';
	$entry_list_id = 'entry_list_id';
	$call_id = 'call_id';

	echo "</title>\n";
	echo "</head>\n";
	echo "<BODY BGCOLOR=white marginheight=0 marginwidth=0 leftmargin=0 topmargin=0>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT script_id,script_name,script_comments,script_text,active from vicidial_scripts where script_id='$script_id' $LOGadmin_viewable_groupsSQL;";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	$script_name =		$row[1];
	$script_text =		stripslashes($row[3]);

	if (eregi("iframe src",$script_text))
		{
		$vendor_lead_code = eregi_replace(' ','+',$vendor_lead_code);
		$list_id = eregi_replace(' ','+',$list_id);
		$list_name = eregi_replace(' ','+',$list_name);
		$list_description = eregi_replace(' ','+',$list_description);
		$gmt_offset_now = eregi_replace(' ','+',$gmt_offset_now);
		$phone_code = eregi_replace(' ','+',$phone_code);
		$phone_number = eregi_replace(' ','+',$phone_number);
		$title = eregi_replace(' ','+',$title);
		$first_name = eregi_replace(' ','+',$first_name);
		$middle_initial = eregi_replace(' ','+',$middle_initial);
		$last_name = eregi_replace(' ','+',$last_name);
		$address1 = eregi_replace(' ','+',$address1);
		$address2 = eregi_replace(' ','+',$address2);
		$address3 = eregi_replace(' ','+',$address2);
		$city = eregi_replace(' ','+',$city);
		$state = eregi_replace(' ','+',$state);
		$province = eregi_replace(' ','+',$province);
		$postal_code = eregi_replace(' ','+',$postal_code);
		$country_code = eregi_replace(' ','+',$country_code);
		$gender = eregi_replace(' ','+',$gender);
		$date_of_birth = eregi_replace(' ','+',$date_of_birth);
		$alt_phone = eregi_replace(' ','+',$alt_phone);
		$email = eregi_replace(' ','+',$email);
		$security_phrase = eregi_replace(' ','+',$security_phrase);
		$comments = eregi_replace(' ','+',$comments);
		$RGfullname = eregi_replace(' ','+',$RGfullname);
		$RGuser = eregi_replace(' ','+',$RGuser);
		$RGlead_id = eregi_replace(' ','+',$RGlead_id);
		$RGcampaign = eregi_replace(' ','+',$RGcampaign);
		$RGphone_login = eregi_replace(' ','+',$RGphone_login);
		$RGgroup = eregi_replace(' ','+',$RGgroup);
		$RGchannel_group = eregi_replace(' ','+',$RGchannel_group);
		$RGSQLdate = eregi_replace(' ','+',$RGSQLdate);
		$RGepoch = eregi_replace(' ','+',$RGepoch);
		$RGuniqueid = eregi_replace(' ','+',$RGuniqueid);
		$RGcustomer_zap_channel = eregi_replace(' ','+',$RGcustomer_zap_channel);
		$RGserver_ip = eregi_replace(' ','+',$RGserver_ip);
		$RGSIPexten = eregi_replace(' ','+',$RGSIPexten);
		$RGsession_id = eregi_replace(' ','+',$RGsession_id);
		$RGdialed_number = eregi_replace(' ','+',$RGdialed_number);
		$RGdialed_label = eregi_replace(' ','+',$RGdialed_label);
		$RGrank = eregi_replace(' ','+',$RGrank);
		$RGowner = eregi_replace(' ','+',$RGowner);
		$RGcamp_script = eregi_replace(' ','+',$RGcamp_script);
		$RGin_script = eregi_replace(' ','+',$RGin_script);
		$script_width = eregi_replace(' ','+',$script_width);
		$script_height = eregi_replace(' ','+',$script_height);
		$recording_filename = eregi_replace(' ','+',$recording_filename);
		$recording_id = eregi_replace(' ','+',$recording_id);
		$user_custom_one = eregi_replace(' ','+',$user_custom_one);
		$user_custom_two = eregi_replace(' ','+',$user_custom_two);
		$user_custom_three = eregi_replace(' ','+',$user_custom_three);
		$user_custom_four = eregi_replace(' ','+',$user_custom_four);
		$user_custom_five = eregi_replace(' ','+',$user_custom_five);
		$preset_number_a = eregi_replace(' ','+',$preset_number_a);
		$preset_number_b = eregi_replace(' ','+',$preset_number_b);
		$preset_number_c = eregi_replace(' ','+',$preset_number_c);
		$preset_number_d = eregi_replace(' ','+',$preset_number_d);
		$preset_number_e = eregi_replace(' ','+',$preset_number_e);
		$preset_number_f = eregi_replace(' ','+',$preset_number_f);
		$preset_dtmf_a = eregi_replace(' ','+',$preset_dtmf_a);
		$preset_dtmf_b = eregi_replace(' ','+',$preset_dtmf_b);
		$did_description = eregi_replace(' ','+',$did_description);
		}

	$script_text = eregi_replace('--A--vendor_lead_code--B--',"$vendor_lead_code",$script_text);
	$script_text = eregi_replace('--A--list_id--B--',"$list_id",$script_text);
	$script_text = eregi_replace('--A--list_name--B--',"$list_name",$script_text);
	$script_text = eregi_replace('--A--list_description--B--',"$list_description",$script_text);
	$script_text = eregi_replace('--A--gmt_offset_now--B--',"$gmt_offset_now",$script_text);
	$script_text = eregi_replace('--A--phone_code--B--',"$phone_code",$script_text);
	$script_text = eregi_replace('--A--phone_number--B--',"$phone_number",$script_text);
	$script_text = eregi_replace('--A--title--B--',"$title",$script_text);
	$script_text = eregi_replace('--A--first_name--B--',"$first_name",$script_text);
	$script_text = eregi_replace('--A--middle_initial--B--',"$middle_initial",$script_text);
	$script_text = eregi_replace('--A--last_name--B--',"$last_name",$script_text);
	$script_text = eregi_replace('--A--address1--B--',"$address1",$script_text);
	$script_text = eregi_replace('--A--address2--B--',"$address2",$script_text);
	$script_text = eregi_replace('--A--address3--B--',"$address3",$script_text);
	$script_text = eregi_replace('--A--city--B--',"$city",$script_text);
	$script_text = eregi_replace('--A--state--B--',"$state",$script_text);
	$script_text = eregi_replace('--A--province--B--',"$province",$script_text);
	$script_text = eregi_replace('--A--postal_code--B--',"$postal_code",$script_text);
	$script_text = eregi_replace('--A--country_code--B--',"$country_code",$script_text);
	$script_text = eregi_replace('--A--gender--B--',"$gender",$script_text);
	$script_text = eregi_replace('--A--date_of_birth--B--',"$date_of_birth",$script_text);
	$script_text = eregi_replace('--A--alt_phone--B--',"$alt_phone",$script_text);
	$script_text = eregi_replace('--A--email--B--',"$email",$script_text);
	$script_text = eregi_replace('--A--security_phrase--B--',"$security_phrase",$script_text);
	$script_text = eregi_replace('--A--comments--B--',"$comments",$script_text);
	$script_text = eregi_replace('--A--fullname--B--',"$RGfullname",$script_text);
	$script_text = eregi_replace('--A--fronter--B--',"$RGuser",$script_text);
	$script_text = eregi_replace('--A--user--B--',"$RGuser",$script_text);
	$script_text = eregi_replace('--A--lead_id--B--',"$RGlead_id",$script_text);
	$script_text = eregi_replace('--A--campaign--B--',"$RGcampaign",$script_text);
	$script_text = eregi_replace('--A--phone_login--B--',"$RGphone_login",$script_text);
	$script_text = eregi_replace('--A--group--B--',"$RGgroup",$script_text);
	$script_text = eregi_replace('--A--channel_group--B--',"$RGchannel_group",$script_text);
	$script_text = eregi_replace('--A--SQLdate--B--',"$RGSQLdate",$script_text);
	$script_text = eregi_replace('--A--epoch--B--',"$RGepoch",$script_text);
	$script_text = eregi_replace('--A--uniqueid--B--',"$RGuniqueid",$script_text);
	$script_text = eregi_replace('--A--customer_zap_channel--B--',"$RGcustomer_zap_channel",$script_text);
	$script_text = eregi_replace('--A--server_ip--B--',"$RGserver_ip",$script_text);
	$script_text = eregi_replace('--A--SIPexten--B--',"$RGSIPexten",$script_text);
	$script_text = eregi_replace('--A--session_id--B--',"$RGsession_id",$script_text);
	$script_text = eregi_replace('--A--dialed_number--B--',"$RGdialed_number",$script_text);
	$script_text = eregi_replace('--A--dialed_label--B--',"$RGdialed_label",$script_text);
	$script_text = eregi_replace('--A--rank--B--',"$RGrank",$script_text);
	$script_text = eregi_replace('--A--owner--B--',"$RGowner",$script_text);
	$script_text = eregi_replace('--A--camp_script--B--',"$RGcamp_script",$script_text);
	$script_text = eregi_replace('--A--in_script--B--',"$RGin_script",$script_text);
	$script_text = eregi_replace('--A--script_width--B--',"$script_width",$script_text);
	$script_text = eregi_replace('--A--script_height--B--',"$script_height",$script_text);
	$script_text = eregi_replace('--A--recording_filename--B--',"$recording_filename",$script_text);
	$script_text = eregi_replace('--A--recording_id--B--',"$recording_id",$script_text);
	$script_text = eregi_replace('--A--user_custom_one--B--',"$user_custom_one",$script_text);
	$script_text = eregi_replace('--A--user_custom_two--B--',"$user_custom_two",$script_text);
	$script_text = eregi_replace('--A--user_custom_three--B--',"$user_custom_three",$script_text);
	$script_text = eregi_replace('--A--user_custom_four--B--',"$user_custom_four",$script_text);
	$script_text = eregi_replace('--A--user_custom_five--B--',"$user_custom_five",$script_text);
	$script_text = eregi_replace('--A--preset_number_a--B--',"$preset_number_a",$script_text);
	$script_text = eregi_replace('--A--preset_number_b--B--',"$preset_number_b",$script_text);
	$script_text = eregi_replace('--A--preset_number_c--B--',"$preset_number_c",$script_text);
	$script_text = eregi_replace('--A--preset_number_d--B--',"$preset_number_d",$script_text);
	$script_text = eregi_replace('--A--preset_number_e--B--',"$preset_number_e",$script_text);
	$script_text = eregi_replace('--A--preset_number_f--B--',"$preset_number_f",$script_text);
	$script_text = eregi_replace('--A--preset_dtmf_a--B--',"$preset_dtmf_a",$script_text);
	$script_text = eregi_replace('--A--preset_dtmf_b--B--',"$preset_dtmf_b",$script_text);
	$script_text = eregi_replace('--A--did_id--B--',"$did_id",$script_text);
	$script_text = eregi_replace('--A--did_extension--B--',"$did_extension",$script_text);
	$script_text = eregi_replace('--A--did_pattern--B--',"$did_pattern",$script_text);
	$script_text = eregi_replace('--A--did_description--B--',"$did_description",$script_text);
	$script_text = eregi_replace('--A--closecallid--B--',"$closecallid",$script_text);
	$script_text = eregi_replace('--A--xfercallid--B--',"$xfercallid",$script_text);
	$script_text = eregi_replace('--A--agent_log_id--B--',"$agent_log_id",$script_text);
	$script_text = eregi_replace('--A--entry_list_id--B--',"$entry_list_id",$script_text);
	$script_text = eregi_replace('--A--call_id--B--',"$call_id",$script_text);
	$script_text = eregi_replace("\n","<BR>",$script_text);


	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "Prévisualisation du script: $script_id<BR>\n";
	echo "<TABLE WIDTH=600><TR><TD>\n";
	echo "<center><B>$script_name</B><BR></center>\n";
	echo "$script_text\n";
	echo "</TD></TR></TABLE></center>\n";

	echo "</BODY></HTML>\n";

	exit;
	}


$ADMIN=$PHP_SELF;
require("admin_header.php");

if ( ($SSadmin_modify_rafraîchir > 1) and (preg_match("/^3|^4/",$ADD)) )
	{
	echo "<span id=rafraîchir_countdown></span><BR>";
	}


######################################################################################################
######################################################################################################
#######   1 series, ADD NEW forms for inserting new records into the database
######################################################################################################
######################################################################################################


######################
# ADD=1 display the ADD NEW USER FORM SCREEN
######################

if ($ADD=="1")
	{
	if ($LOGmodify_users==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_users' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTEZ UN NOUVEL UTILISATEUR<form action=$PHP_SELF method=POST name=userform id=userform>\n";
		echo "<input type=hidden name=ADD value=2>\n";
		echo "<input type=hidden name=user_toggle id=user_toggle value=0>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left>Auto-Generated <input type=hidden name=user id=user value=\"99999\">$NWB#vicidial_users-user$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left><input type=text name=user id=user size=20 maxlength=20> <input type=button name=auto_user value=\"AUTO-GENERATE\" onClick=\"user_auto()\"> $NWB#vicidial_users-user$NWE</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe:</td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=pass size=20 maxlength=20 onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#vicidial_users-pass$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=full_name size=20 maxlength=100>$NWB#vicidial_users-full_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Niveau de l'utilisateur: </td><td align=left><select size=1 name=user_level>";
		$h=1;
		$count_user_level=$LOGuser_level;
		if ( ($LOGmodify_same_user_level < 1) and ($LOGuser_level > 8) )
			{$count_user_level=($LOGuser_level - 1);}
		while ($h<=$count_user_level)
			{
			echo "<option>$h</option>";
			$h++;
			}
		echo "</select>$NWB#vicidial_users-user_level$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe utilisateur: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<tr bgcolor=#B6D3FC><td align=right>Login du téléphone: </td><td align=left><input type=text name=phone_login size=20 maxlength=20>$NWB#vicidial_users-phone_login$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe du téléphone: </td><td align=left><input type=text name=phone_pass size=20 maxlength=20>$NWB#vicidial_users-phone_pass$NWE</td></tr>\n";
		echo "</select>$NWB#vicidial_users-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=button name=VALIDER value=VALIDER onClick=\"user_submit()\"></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1A display the COPY USER FORM SCREEN
######################

if ($ADD=="1A")
	{
	if ($LOGmodify_users==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_users' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>UTILISATEUR DE COPY<form action=$PHP_SELF method=POST name=userform id=userform>\n";
		echo "<input type=hidden name=ADD value=2A>\n";
		echo "<input type=hidden name=user_toggle id=user_toggle value=0>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left>Auto-Generated <input type=hidden name=user id=user value=\"99999\">$NWB#vicidial_users-user$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left><input type=text name=user id=user size=20 maxlength=20> <input type=button name=auto_user value=\"AUTO-GENERATE\" onClick=\"user_auto()\"> $NWB#vicidial_users-user$NWE</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe:</td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=pass size=20 maxlength=20 onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#vicidial_users-pass$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=full_name size=20 maxlength=100>$NWB#vicidial_users-full_name$NWE</td></tr>\n";

		if ($LOGuser_level==9) {$levelMAX=10;}
		else {$levelMAX=$LOGuser_level;}

		echo "<tr bgcolor=#B6D3FC><td align=right>Source Utilisateur: </td><td align=left><select size=1 name=source_user_id>\n";

		$stmt="SELECT user,full_name from vicidial_users where user_level < $levelMAX $LOGadmin_viewable_groupsSQL order by full_name;";
		$rslt=mysql_query($stmt, $link);
		$Uusers_to_print = mysql_num_rows($rslt);
		$Uusers_list='';

		$o=0;
		while ($Uusers_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Uusers_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$Uusers_list";
		echo "</select>$NWB#vicidial_users-user$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=button name=VALIDER value=VALIDER onClick=\"user_submit()\"></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=11 display the ADD NEW CAMPAIGN FORM SCREEN
######################

if ($ADD==11)
	{
	if ($LOGmodify_campaigns==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_campaigns' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UNE NOUVELLE CAMPAGNE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=21>\n";
		echo "<input type=hidden name=park_ext value=''>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left>Auto-Generated $NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left><input type=text name=campaign_id size=10 maxlength=8>$NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la campagne: </td><td align=left><input type=text name=campaign_name size=30 maxlength=30>$NWB#vicidial_campaigns-campaign_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description de la campagne: </td><td align=left><input type=text name=campaign_description size=30 maxlength=255>$NWB#vicidial_campaigns-campaign_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_campaigns-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option></select>$NWB#vicidial_campaigns-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Parc de la Musique-sur-Hold: </td><td align=left><input type=text name=park_file_name id=park_file_name size=20 maxlength=100> <a href=\"javascript:launch_moh_chooser('park_file_name','moh',200);\">moh chooser</a> $NWB#vicidial_campaigns-park_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web: </td><td align=left><input type=text name=web_form_address size=70 maxlength=9999>$NWB#vicidial_campaigns-web_form_address$NWE</td></tr>\n";
		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Autoriser les closers: </td><td align=left><select size=1 name=allow_closers><option>Y</option><option>N</option></select>$NWB#vicidial_campaigns-allow_closers$NWE</td></tr>\n";
			echo "<tr bgcolor=#8EBCFD><td align=right>Niveau minimum Hopper: </td><td align=left><select size=1 name=hopper_level><option>1</option><option>5</option><option>10</option><option>20</option><option>50</option><option>100</option><option>200</option><option>500</option><option>1000</option><option>2000</option></select>$NWB#vicidial_campaigns-hopper_level$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Niveau de l'appel automatique: </td><td align=left><select size=1 name=auto_dial_level><option selected>1</option>\n";
			$adl=0;
			while($adl <= $SSauto_dial_limit)
				{
				echo "<option>$adl</option>\n";
				if ($adl < 1)
					{$adl = ($adl + 1);}
				else
					{
					if ($adl < 3)
						{$adl = ($adl + 0.1);}
					else
						{
						if ($adl < 4)
							{$adl = ($adl + 0.25);}
						else
							{
							if ($adl < 5)
								{$adl = ($adl + 0.5);}
							else
								{
								if ($adl < 10)
									{$adl = ($adl + 1);}
								else
									{
									if ($adl < 20)
										{$adl = ($adl + 2);}
									else
										{
										if ($adl < 40)
											{$adl = ($adl + 5);}
										else
											{
											if ($adl < 200)
												{$adl = ($adl + 10);}
											else
												{
												if ($adl < 400)
													{$adl = ($adl + 50);}
												else
													{
													if ($adl < 1000)
														{$adl = ($adl + 100);}
													else
														{$adl = ($adl + 1);}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			echo "<option>$adl</option></select>(0 = off)$NWB#vicidial_campaigns-auto_dial_level$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Appeler l'agent suivant : </td><td align=left><select size=1 name=next_agent_call><option >random</option><option>oldest_call_start</option><option>oldest_call_finish</option><option>overall_user_level</option><option>campaign_rank</option><option>campaign_grade_random</option><option>fewest_calls</option><option>longest_wait_time</option></select>$NWB#vicidial_campaigns-next_agent_call$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Heure d'appel locale: </td><td align=left><select size=1 name=local_call_time>";
		echo "$call_times_list";
		echo "</select>$NWB#vicidial_campaigns-local_call_time$NWE</td></tr>\n";
		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Boîte vocale: </td><td align=left><input type=text name=voicemail_ext size=10 maxlength=10 value=\"$voicemail_ext\">$NWB#vicidial_campaigns-voicemail_ext$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Script: </td><td align=left><select size=1 name=script_id>\n";
		echo "$scripts_list";
		echo "</select>$NWB#vicidial_campaigns-campaign_script$NWE</td></tr>\n";

		$eswHTML=''; $cfwHTML='';
		if ($SSenable_second_webform > 0)
			{$eswHTML = '<option>WEBFORMTWO</option>';}
		if ($SScustom_fields_enabled > 0)
			{$cfwHTML = '<option>FORM</option>';}
		echo "<tr bgcolor=#B6D3FC><td align=right>Lancer l'appel: </td><td align=left><select size=1 name=get_call_launch><option selected>NONE</option><option>SCRIPT</option><option>WEBFORM</option>$eswHTML$cfwHTML</select>$NWB#vicidial_campaigns-get_call_launch$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=12 display the COPY CAMPAIGN FORM SCREEN
######################

if ($ADD==12)
	{
	if ($LOGmodify_campaigns==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_campaigns' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>CopieUne CAMPAGNE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=20>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left>Auto-Generated $NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left><input type=text name=campaign_id size=10 maxlength=8>$NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la campagne: </td><td align=left><input type=text name=campaign_name size=30 maxlength=30>$NWB#vicidial_campaigns-campaign_name$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne De Source :</td><td align=left><select size=1 name=source_campaign_id>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);
		$campaigns_list='';

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$campaigns_list";
		echo "</select>$NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
		
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>NOTE: Copie d'une campagne vous permettra de copier tous les paramètres de campagne, le capitaine que vous sélectionnez, mais il ne sera pas copier une campagne spécifique DNC liste s'il y en a un sur le maître, sélectionnez la campagne.</td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=111 display the ADD NEW LIST FORM SCREEN
######################

if ($ADD==111)
	{
	if ($LOGmodify_lists==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_lists' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD A NEW LIST<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=211>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la liste: </td><td align=left>Auto-Generated $NWB#vicidial_lists-list_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID de la liste: </td><td align=left><input type=text name=list_id size=8 maxlength=8> (chiffres seulement)$NWB#vicidial_lists-list_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la liste: </td><td align=left><input type=text name=list_name size=20 maxlength=20>$NWB#vicidial_lists-list_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description de la liste: </td><td align=left><input type=text name=list_description size=30 maxlength=255>$NWB#vicidial_lists-list_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne: </td><td align=left><select size=1 name=campaign_id>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);
		$campaigns_list='';

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$campaigns_list";
		echo "<option SELECTED>$campaign_id</option>\n";
		echo "</select>$NWB#vicidial_lists-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option SELECTED>N</option></select>$NWB#vicidial_lists-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=121 display the ADD NUMBER TO DNC FORM SCREEN and add a new number
######################

if ($ADD==121)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$campaigns_list = "<option SELECTED value=\"SYSTEM_INTERNAL\">SYSTEM_INTERNAL - INTERNAL VICIDIAL DNC LIST</option>\n";

	$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns where use_campaign_dnc IN('Y','AREACODE') $LOGallowed_campaignsSQL order by campaign_id;";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($campaigns_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}

	if (strlen($phone_numbers) > 2)
		{
		$PN = explode("\n",$phone_numbers);
		$PNct = count($PN);
		$p=0;
		while ($p < $PNct)
			{
			if ( (ereg('delete',$stage)) and ($LOGdelete_from_dnc > 0) )
				{
				##### BEGIN DELETE FROM DNC #####
				if (ereg('SYSTEM_INTERNAL',$campaign_id))
					{
					$stmt="SELECT count(*) from vicidial_dnc where phone_number='$PN[$p]';";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] < 1)
						{echo "<br>DNC pas supprimé - Ce numéro de téléphone n-est pas dans la Do Not Call List: $PN[$p]\n";}
					else
						{
						$stmt="DELETE FROM vicidial_dnc where phone_number='$PN[$p]';";
						$rslt=mysql_query($stmt, $link);

						echo "<br><B>DNC SUPPRIMÉ: $PN[$p]</B>\n";

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='DELETE', record_id='$PN[$p]', event_code='ADMIN DELETE NUMBER FROM DNC LIST', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}
				else
					{
					$stmt="SELECT count(*) from vicidial_campaign_dnc where phone_number='$PN[$p]' and campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] < 1)
						{echo "<br>DNC pas supprimé - Ce numéro de téléphone n-est pas dans la Do Not Call List: $PN[$p] $campaign_id\n";}
					else
						{
						$stmt="DELETE FROM vicidial_campaign_dnc where phone_number='$PN[$p]' and campaign_id='$campaign_id';";
						$rslt=mysql_query($stmt, $link);

						echo "<br><B>DNC SUPPRIMÉ: $PN[$p] $campaign_id</B>\n";

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='DELETE', record_id='$PN[$p]', event_code='ADMIN DELETE NUMBER FROM CAMPAIGN DNC LIST $campaign_id', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}
				##### END DELETE FROM DNC #####
				}
			else
				{
				##### BEGIN ADD TO DNC #####
				if (ereg('SYSTEM_INTERNAL',$campaign_id))
					{
					$stmt="SELECT count(*) from vicidial_dnc where phone_number='$PN[$p]';";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] > 0)
						{echo "<br>DNC NON AJOUTE - Ce numéro de téléphone est déjà dans la liste Do Not Call: $PN[$p]\n";}
					else
						{
						$stmt="INSERT INTO vicidial_dnc (phone_number) values('$PN[$p]');";
						$rslt=mysql_query($stmt, $link);

						echo "<br><B>DNC AJOUTE: $PN[$p]</B>\n";

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='ADD', record_id='$PN[$p]', event_code='ADMIN AJOUTER LE NUMERO A LA LISTE DNC LIST', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}
				else
					{
					$stmt="SELECT count(*) from vicidial_campaign_dnc where phone_number='$PN[$p]' and campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] > 0)
						{echo "<br>DNC NON AJOUTE - Ce numéro de téléphone est déjà dans la liste Do Not Call: $PN[$p] $campaign_id\n";}
					else
						{
						$stmt="INSERT INTO vicidial_campaign_dnc (phone_number,campaign_id) values('$PN[$p]','$campaign_id');";
						$rslt=mysql_query($stmt, $link);

						echo "<br><B>DNC AJOUTE: $PN[$p] $campaign_id</B>\n";

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='ADD', record_id='$PN[$p]', event_code='ADMIN ADD NUMBER TO CAMPAIGN DNC LIST $campaign_id', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}
				##### END ADD TO DNC #####
				}
			$p++;
			}
		}

	if ($LOGdelete_from_dnc > 0)
		{echo "<br>AJOUTER OU SUPPRIMER LES NUMEROS DE LA LISTE DNC<form action=$PHP_SELF method=POST>\n";}
	else
		{echo "<br>Ajouter des numéros dans DNC LISTE<form action=$PHP_SELF method=POST>\n";}
	echo "<input type=hidden name=ADD value=121>\n";
	echo "<center><TABLE width=$section_width cellspacing=3>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>List: </td><td align=left><select size=1 name=campaign_id>\n";
	echo "$campaigns_list";
	echo "</select></td></tr>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Numéros de téléphone:<BR><BR> (un numéro de téléphone par ligne seulement)<BR>$NWB#vicidial_list-dnc$NWE</td><td align=left><TEXTAREA name=phone_numbers ROWS=20 COLS=20></TEXTAREA></td></tr>\n";
	if ($LOGdelete_from_dnc > 0)
		{
		echo "<tr bgcolor=#B6D3FC><td align=right>Ajouter ou Supprimer: </td><td align=left><select size=1 name=stage><option SELECTED>add</option><option>delete</option></select></td></tr>\n";
		}
	echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
	echo "</FORM></TABLE></center>\n";

	if ($LOGuser_level >= 9)
		{
		echo "<br>Download numbers in this list to a file: <form action=\"list_download.php\" method=POST>\n";
		echo "<input type=hidden name=download_type value=dnc>\n";
		echo "<select size=1 name=group_id>\n";
		echo "$campaigns_list";
		echo "</select><input type=submit name=VALIDER value=VALIDER></FORM>\n";
		}
	}


######################
# ADD=171 display the ADD NUMBER TO Filter Phone Group FORM SCREEN and add a new number
######################

if ($ADD==171)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT filter_phone_group_id,filter_phone_group_name from vicidial_filter_phone_groups $whereLOGadmin_viewable_groupsSQL order by filter_phone_group_id;";
	$rslt=mysql_query($stmt, $link);
	$vfpg_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($vfpg_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$vfpg_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}

	if (strlen($phone_numbers) > 2)
		{
		$PN = explode("\n",$phone_numbers);
		$PNct = count($PN);
		$p=0;
		while ($p < $PNct)
			{
			if ( (ereg('delete',$stage)) and ($LOGdelete_from_dnc > 0) )
				{
				$stmt="SELECT count(*) from vicidial_filter_phone_numbers where phone_number='$PN[$p]' and filter_phone_group_id='$filter_phone_group_id';";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				if ($row[0] < 1)
					{echo "<br>FILTRE NUMÉRO DE TÉLÉPHONE DU GROUPE PAS SUPPRIMER - Ce numéro de téléphone n'est pas dans la liste Groupe Téléphone filtre: $PN[$p] $filter_phone_group_id\n";}
				else
					{
					$stmt="DELETE FROM vicidial_filter_phone_numbers where phone_number='$PN[$p]' and filter_phone_group_id='$filter_phone_group_id';";
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>FILTRE NUMÉRO DE TÉLÉPHONE DU GROUPE SUPPRIMÉ: $PN[$p] $filter_phone_group_id</B>\n";

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTERPHONEGROUPS', event_type='DELETE', record_id='$PN[$p]', event_code='ADMIN DELETE NUMBER FROM FILTER PHONE GROUP $filter_phone_group_id', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			else
				{
				$stmt="SELECT count(*) from vicidial_filter_phone_numbers where phone_number='$PN[$p]' and filter_phone_group_id='$filter_phone_group_id';";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				if ($row[0] > 0)
					{echo "<br>FILTRE NUMÉRO DE TÉLÉPHONE DU GROUPE PAS AJOUTÉE - Ce numéro de téléphone est déjà dans la liste Groupe Téléphone filtre: $PN[$p] $filter_phone_group_id\n";}
				else
					{
					$stmt="INSERT INTO vicidial_filter_phone_numbers (phone_number,filter_phone_group_id) values('$PN[$p]','$filter_phone_group_id');";
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>FILTRE NUMÉRO DE TÉLÉPHONE DU GROUPE AJOUTÉE: $PN[$p] $filter_phone_group_id</B>\n";

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTERPHONEGROUPS', event_type='ADD', record_id='$PN[$p]', event_code='ADMIN ADD NUMBER TO FILTER PHONE GROUP $filter_phone_group_id', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			$p++;
			}
		}

	if ($LOGdelete_from_dnc > 0)
		{echo "<br>ADD OR DELETE NUMBERS FROM THE FILTER PHONE GROUP LIST<form action=$PHP_SELF method=POST>\n";}
	else
		{echo "<br>ADD NUMBERS TO THE FILTER PHONE GROUP LIST<form action=$PHP_SELF method=POST>\n";}
	echo "<input type=hidden name=ADD value=171>\n";
	echo "<center><TABLE width=$section_width cellspacing=3>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Filter Phone Groupe: </td><td align=left><select size=1 name=filter_phone_group_id>\n";
	echo "$vfpg_list";
	echo "</select></td></tr>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Numéros de téléphone:<BR><BR> (un numéro de téléphone par ligne seulement)<BR>$NWB#vicidial_list-dnc$NWE</td><td align=left><TEXTAREA name=phone_numbers ROWS=20 COLS=20></TEXTAREA></td></tr>\n";
	if ($LOGdelete_from_dnc > 0)
		{
		echo "<tr bgcolor=#B6D3FC><td align=right>Ajouter ou Supprimer: </td><td align=left><select size=1 name=stage><option SELECTED>add</option><option>delete</option></select></td></tr>\n";
		}
	echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
	echo "</FORM></TABLE></center>\n";

	if ($LOGuser_level >= 9)
		{
		echo "<br>Download numbers in this list to a file: <form action=\"list_download.php\" method=POST>\n";
		echo "<input type=hidden name=download_type value=fpgn>\n";
		echo "<select size=1 name=group_id>\n";
		echo "$vfpg_list";
		echo "</select><input type=submit name=VALIDER value=VALIDER></FORM>\n";
		}

	}


######################
# ADD=1111 display the ADD NEW INBOUND GROUP SCREEN
######################

if ($ADD==1111)
	{
	if ($LOGmodify_ingroups==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_inbound_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU GROUPE ENTRANT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du groupe: </td><td align=left>Auto-Generated $NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du groupe: </td><td align=left><input type=text name=group_id size=20 maxlength=20> (no spaces)$NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du groupe: </td><td align=left><input type=text name=group_name size=30 maxlength=30>$NWB#vicidial_inbound_groups-group_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Couleur du groupe: </td><td align=left id=\"group_color_td\"><input type=text name=group_color size=7 maxlength=7>$NWB#vicidial_inbound_groups-group_color$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option SELECTED>Y</option><option>N</option></select>$NWB#vicidial_inbound_groups-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_inbound_groups-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web: </td><td align=left><input type=text name=web_form_address size=70 maxlength=9999 value=\"$web_form_address\">$NWB#vicidial_inbound_groups-web_form_address$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Boîte vocale: </td><td align=left><input type=text name=voicemail_ext size=10 maxlength=10 value=\"$voicemail_ext\">$NWB#vicidial_inbound_groups-voicemail_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Appeler l'agent suivant : </td><td align=left><select size=1 name=next_agent_call><option >random</option><option>oldest_call_start</option><option>oldest_call_finish</option><option>oldest_inbound_call_start</option><option>oldest_inbound_call_finish</option><option>overall_user_level</option><option>inbound_group_rank</option><option>campaign_rank</option><option>ingroup_grade_random</option><option>campaign_grade_random</option><option>fewest_calls</option><option>fewest_calls_campaign</option><option>longest_wait_time</option><option>ring_all</option></select>$NWB#vicidial_inbound_groups-next_agent_call$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Affichage de l'enseigne: </td><td align=left><select size=1 name=fronter_display><option SELECTED>Y</option><option>N</option></select>$NWB#vicidial_inbound_groups-fronter_display$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Script: </td><td align=left><select size=1 name=script_id>\n";
		echo "$scripts_list";
		echo "</select>$NWB#vicidial_inbound_groups-ingroup_script$NWE</td></tr>\n";
		$eswHTML=''; $cfwHTML='';
		if ($SSenable_second_webform > 0)
			{$eswHTML = '<option>WEBFORMTWO</option>';}
		if ($SScustom_fields_enabled > 0)
			{$cfwHTML = '<option>FORM</option>';}
		echo "<tr bgcolor=#B6D3FC><td align=right>Lancer l'appel: </td><td align=left><select size=1 name=get_call_launch><option selected>NONE</option><option>SCRIPT</option><option>WEBFORM</option>$eswHTML$cfwHTML</select>$NWB#vicidial_inbound_groups-get_call_launch$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1211 display the COPY INBOUND GROUP SCREEN
######################

if ($ADD==1211)
	{
	if ($LOGmodify_ingroups==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_inbound_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>GROUPE D'ARRIVÉE DE COPY<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2011>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du groupe: </td><td align=left>Auto-Generated $NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du groupe: </td><td align=left><input type=text name=group_id size=20 maxlength=20> (no spaces)$NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du groupe: </td><td align=left><input type=text name=group_name size=30 maxlength=30>$NWB#vicidial_inbound_groups-group_name$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Source ID du groupe: </td><td align=left><select size=1 name=source_group_id>\n";

		$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
		$rslt=mysql_query($stmt, $link);
		$groups_to_print = mysql_num_rows($rslt);
		$groups_list='';

		$o=0;
		while ($groups_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$groups_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$groups_list";
		echo "</select>$NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1311 display the ADD NEW DID SCREEN
######################

if ($ADD==1311)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU NE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2311>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DID Extension:</td><td align=left><input type=text name=did_pattern size=20 maxlength=50> (no spaces or dashes)$NWB#vicidial_inbound_dids-did_pattern$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>A Description:</td><td align=left><input type=text name=did_description size=40 maxlength=50>$NWB#vicidial_inbound_dids-did_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1411 display the COPY DID SCREEN
######################

if ($ADD==1411)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>COPY DID<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2411>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DID Extension:</td><td align=left><input type=text name=did_pattern size=20 maxlength=50> (no spaces or dashes)$NWB#vicidial_inbound_dids-did_pattern$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>A Description:</td><td align=left><input type=text name=did_description size=40 maxlength=50>$NWB#vicidial_inbound_dids-did_description$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Source DID:</td><td align=left><select size=1 name=source_did>\n";

		$stmt="SELECT did_id,did_pattern,did_description from vicidial_inbound_dids $whereLOGadmin_viewable_groupsSQL order by did_pattern;";
		$rslt=mysql_query($stmt, $link);
		$dids_to_print = mysql_num_rows($rslt);
		$dids_list='';

		$o=0;
		while ($dids_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$dids_list .= "<option value=\"$rowx[0]\">$rowx[1] - $rowx[2]</option>\n";
			$o++;
			}
		echo "$dids_list";
		echo "</select>$NWB#vicidial_inbound_dids-did_pattern$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1511 display the ADD NEW CALL MENU SCREEN
######################

if ($ADD==1511)
	{
	if ($LOGmodify_dids==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_call_menu' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>PROPOSER UN NOUVEL APPEL MENU<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2511>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Menu ID: </td><td align=left>Auto-Generated $NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Menu ID: </td><td align=left><input type=text name=menu_id size=40 maxlength=50> (no spaces or special characters)$NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du menu: </td><td align=left><input type=text name=menu_name size=50 maxlength=100>$NWB#vicidial_call_menu-menu_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_call_menu-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1611 display the COPY CALL MENU SCREEN
######################

if ($ADD==1611)
	{
	if ($LOGmodify_dids==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_call_menu' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>COPY CALL MENU<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2611>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Menu ID: </td><td align=left>Auto-Generated $NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Menu ID: </td><td align=left><input type=text name=menu_id size=40 maxlength=50> (no spaces or special characters)$NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du menu: </td><td align=left><input type=text name=menu_name size=50 maxlength=100>$NWB#vicidial_call_menu-menu_name$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Menu Source: </td><td align=left><select size=1 name=source_menu>\n";

		$stmt="SELECT menu_id,menu_name from vicidial_call_menu $whereLOGadmin_viewable_groupsSQL order by menu_id;";
		$rslt=mysql_query($stmt, $link);
		$menus_to_print = mysql_num_rows($rslt);
		$menus_list='';

		$o=0;
		while ($menus_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$menus_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$menus_list";
		echo "</select>$NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1711 display the ADD NEW FILTER PHONE GROUP SCREEN
######################

if ($ADD==1711)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter un groupe Téléphone filtre<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2711>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre ID Groupe Téléphone: </td><td align=left><input type=text name=filter_phone_group_id size=20 maxlength=20> (no spaces or special characters)$NWB#vicidial_filter_phone_groups-filter_phone_group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Nom du groupe Téléphone: </td><td align=left><input type=text name=filter_phone_group_name size=40 maxlength=40>$NWB#vicidial_filter_phone_groups-filter_phone_group_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Description du groupe Téléphone: </td><td align=left><input type=text name=filter_phone_group_description size=60 maxlength=100>$NWB#vicidial_filter_phone_groups-filter_phone_group_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_filter_phone_groups-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=11111 display the ADD NEW REMOTE AGENTS SCREEN
######################

if ($ADD==11111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEL AGENT DISTANT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=21111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début des ID utilisateurs: </td><td align=left><input type=text name=user_start size=9 maxlength=9> (nombres seulement, incremented, doit être un utilisateur existant Vicidial)$NWB#vicidial_remote_agents-user_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre de lignes: </td><td align=left><input type=text name=number_of_lines size=3 maxlength=3> (nombres seulement)$NWB#vicidial_remote_agents-number_of_lines$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#vicidial_remote_agents-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension externe: </td><td align=left><input type=text name=conf_exten size=20 maxlength=20> (numéro du dial plan pour atteindre les agents)$NWB#vicidial_remote_agents-conf_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Etat: </td><td align=left><select size=1 name=status><option>ACTIF</option><option SELECTED>INACTIVE</option></select>$NWB#vicidial_remote_agents-status$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne: </td><td align=left><select size=1 name=campaign_id>\n";
		echo "$campaigns_list";
		echo "</select>$NWB#vicidial_remote_agents-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupes entrants: </td><td align=left>\n";
		echo "$groups_list";
		echo "$NWB#vicidial_remote_agents-closer_campaigns$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		echo "NOTE: Il peut prendre jusqu'à 30 secondes pour que les chagements soumis sur cette écran soient pris en compte\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=12111 display the ADD NEW EXTENSION GROUP SCREEN
######################

if ($ADD==12111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter une entrée du groupe d'extension<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=22111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'extension: </td><td align=left><input type=text name=extension_group_id size=20 maxlength=20> (no spaces)$NWB#vicidial_extension_groups-extension_group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension:</td><td align=left><input type=text name=extension size=18 maxlength=18> (nombres seulement)$NWB#vicidial_extension_groups-extension$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rank:</td><td align=left><select size=1 name=rank>\n";
		$n=99; $rank=0;
		while ($n>=-99)
			{
			if ($n == $rank) 
				{echo "<option SELECTED value=\"$n\">$n</option>\n";}
			else
				{echo "<option value=\"$n\">$n</option>\n";}
			$n--;
			}
		echo "</select> $NWB#vicidial_extension_groups-rank$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupes Campagnes: </td><td align=left><input type=text name=campaign_groups size=50 maxlength=255> (pipe-delimited list)$NWB#vicidial_extension_groups-extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=111111 display the ADD NEW USER GROUP SCREEN
######################

if ($ADD==111111)
	{
	if ($LOGmodify_usergroups==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_user_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU GROUPE D'UTILISATEUR<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=211111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe: </td><td align=left>Auto-Generated $NWB#vicidial_user_groups-user_group$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe: </td><td align=left><input type=text name=user_group size=15 maxlength=20> (pas d'espace ni de ponctuation)$NWB#vicidial_user_groups-user_group$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Description: </td><td align=left><input type=text name=group_name size=40 maxlength=40> (Description du groupe)$NWB#vicidial_user_groups-group_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1111111 display the ADD NEW SCRIPT SCREEN
######################

if ($ADD==1111111)
	{
	if ($LOGmodify_scripts==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_scripts' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW SCRIPT<form name=scriptForm action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du script: </td><td align=left>Auto-Generated $NWB#vicidial_scripts-script_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du script: </td><td align=left><input type=text name=script_id size=12 maxlength=10> (pas d'espace ni de ponctuation)$NWB#vicidial_scripts-script_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du script: </td><td align=left><input type=text name=script_name size=40 maxlength=50> (titre du script)$NWB#vicidial_scripts-script_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires du script: </td><td align=left><input type=text name=script_comments size=50 maxlength=255> $NWB#vicidial_scripts-script_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option SELECTED>Y</option><option>N</option></select>$NWB#vicidial_scripts-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_scripts-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Texte du script: </td><td align=left>";
		# BEGIN Insert Field
		echo "<select id=\"selectedField\" name=\"selectedField\">";
		echo "<option value=\"fullname\">Agent Name</option>";
		echo "<option>vendor_lead_code</option>";
		echo "<option>source_id</option>";
		echo "<option>list_id</option>";
		echo "<option>list_name</option>";
		echo "<option>list_description</option>";
		echo "<option>gmt_offset_now</option>";
		echo "<option>called_since_last_reset</option>";
		echo "<option>phone_code</option>";
		echo "<option>phone_number</option>";
		echo "<option>title</option>";
		echo "<option>first_name</option>";
		echo "<option>middle_initial</option>";
		echo "<option>last_name</option>";
		echo "<option>address1</option>";
		echo "<option>address2</option>";
		echo "<option>address3</option>";
		echo "<option>city</option>";
		echo "<option>state</option>";
		echo "<option>province</option>";
		echo "<option>postal_code</option>";
		echo "<option>country_code</option>";
		echo "<option>gender</option>";
		echo "<option>date_of_birth</option>";
		echo "<option>alt_phone</option>";
		echo "<option>email</option>";
		echo "<option>security_phrase</option>";
		echo "<option>comments</option>";
		echo "<option>lead_id</option>";
		echo "<option>campaign</option>";
		echo "<option>phone_login</option>";
		echo "<option>group</option>";
		echo "<option>channel_group</option>";
		echo "<option>SQLdate</option>";
		echo "<option>epoch</option>";
		echo "<option>uniqueid</option>";
		echo "<option>customer_zap_channel</option>";
		echo "<option>server_ip</option>";
		echo "<option>SIPexten</option>";
		echo "<option>session_id</option>";
		echo "<option>dialed_number</option>";
		echo "<option>dialed_label</option>";
		echo "<option>rank</option>";
		echo "<option>owner</option>";
		echo "<option>camp_script</option>";
		echo "<option>in_script</option>";
		echo "<option>script_width</option>";
		echo "<option>script_height</option>";
		echo "<option>recording_filename</option>";
		echo "<option>recording_id</option>";
		echo "<option>user_custom_one</option>";
		echo "<option>user_custom_two</option>";
		echo "<option>user_custom_three</option>";
		echo "<option>user_custom_four</option>";
		echo "<option>user_custom_five</option>";
		echo "<option>preset_number_a</option>";
		echo "<option>preset_number_b</option>";
		echo "<option>preset_number_c</option>";
		echo "<option>preset_number_d</option>";
		echo "<option>preset_number_e</option>";
		echo "<option>preset_number_f</option>";
		echo "<option>preset_dtmf_a</option>";
		echo "<option>preset_dtmf_b</option>";
		echo "<option>did_id</option>";
		echo "<option>did_extension</option>";
		echo "<option>did_pattern</option>";
		echo "<option>did_description</option>";
		echo "<option>closecallid</option>";
		echo "<option>xfercallid</option>";
		echo "<option>agent_log_id</option>";
		echo "<option>entry_list_id</option>";
		echo "<option>call_id</option>";
		echo "</select>";
		echo "<input type=\"button\" name=\"insertField\" value=\"Insert\" onClick=\"scriptInsertField();\"><BR>";
		# END Insert Field
		echo "<TEXTAREA NAME=script_text ROWS=20 COLS=50 value=\"\"></TEXTAREA> $NWB#vicidial_scripts-script_text$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=11111111 display the ADD NEW FILTER SCREEN
######################

if ($ADD==11111111)
	{
	if ($LOGmodify_filters==1)
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='vicidial_lead_filters' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU FILTRE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=21111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du filtre:</td><td align=left>Auto-Generated $NWB#vicidial_lead_filters-lead_filter_id$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>ID du filtre:</td><td align=left><input type=text name=lead_filter_id size=12 maxlength=10> (pas d'espace ni de ponctuation)$NWB#vicidial_lead_filters-lead_filter_id$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du filtre:</td><td align=left><input type=text name=lead_filter_name size=30 maxlength=30> (courte description du filtre)$NWB#vicidial_lead_filters-lead_filter_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires du filtre:</td><td align=left><input type=text name=lead_filter_comments size=50 maxlength=255> $NWB#vicidial_lead_filters-lead_filter_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_lead_filters-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Sql: </td><td align=left><TEXTAREA NAME=lead_filter_sql ROWS=20 COLS=50 value=\"\"></TEXTAREA> $NWB#vicidial_lead_filters-lead_filter_sql$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=111111111 display the ADD NEW CALL TIME SCREEN
######################

if ($ADD==111111111)
	{
	if ($LOGmodify_call_times==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UNE NOUVELLE PERIODE D'APPELS<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=211111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Identifiant de la période d'appels: </td><td align=left><input type=text name=call_time_id size=12 maxlength=10> (pas d'espace ni de ponctuation)$NWB#vicidial_call_times-call_time_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la période d'appels: </td><td align=left><input type=text name=call_time_name size=30 maxlength=30> (courte description de la période d'appel)$NWB#vicidial_call_times-call_time_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires de la période d'appels: </td><td align=left><input type=text name=call_time_comments size=50 maxlength=255> $NWB#vicidial_call_times-call_time_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_call_times-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Les options pour l'heure et le jour apparaitront une fois que vous aurez créé la période d'appels</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1111111111 display the ADD NEW STATE CALL TIME SCREEN
######################

if ($ADD==1111111111)
	{
	if ($LOGmodify_call_times==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UNE NOUVELLE PERIODE D'APPELS D'ETAT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Identifiant de la période d'appels d'état: </td><td align=left><input type=text name=call_time_id size=12 maxlength=10> (pas d'espace ni de ponctuation)$NWB#vicidial_call_times-call_time_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>State Call Time State: </td><td align=left><input type=text name=state_call_time_state size=4 maxlength=2> (pas d'espace ni de ponctuation)$NWB#vicidial_call_times-state_call_time_state$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la période d'appels d'état: </td><td align=left><input type=text name=call_time_name size=30 maxlength=30> (courte description de la période d'appel)$NWB#vicidial_call_times-call_time_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires de la période d'appels d'état: </td><td align=left><input type=text name=call_time_comments size=50 maxlength=255> $NWB#vicidial_call_times-call_time_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_call_times-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Les options pour l'heure et le jour apparaitront une fois que vous aurez créé la période d'appels</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=131111111 display the ADD NEW SHIFT SCREEN
######################

if ($ADD==131111111)
	{
	if ( ($LOGmodify_call_times==1) or ($LOGmodify_shifts==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW SHIFT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=231111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift ID:</td><td align=left><input type=text name=shift_id size=22 maxlength=20> (pas d'espace ni de ponctuation)$NWB#vicidial_shifts-shift_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift Nom:</td><td align=left><input type=text name=shift_name size=50 maxlength=50> (brève description de l'évolution)$NWB#vicidial_shifts-shift_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_shifts-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Start Time Shift:</td><td align=left><input type=text name=shift_start_time size=5 maxlength=4 id=shift_start_time>\n";
		echo " &nbsp; End Time Shift:<input type=text name=shift_end_time size=5 maxlength=4 id=shift_end_time>\n";
		echo "<input type=button name=shift_calc value=\"Calculate Longueur Shift\" onClick=\"shift_time();\"> $NWB#vicidial_shifts-shift_start_time$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Longueur Shift: </td><td align=left><input type=text name=shift_length id=shift_length size=6 maxlength=5> $NWB#vicidial_shifts-shift_length$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift-Ven:<BR>$NWB#vicidial_shifts-shift_weekdays$NWE</td><td align=left>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"0\">Dimanche<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"1\">Lundi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"2\">Mardi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"3\">Mercredi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"4\">Jeudi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"5\">Vendredi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"6\">Samedi<BR>\n";
		echo "</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Option Report: </td><td align=left><select size=1 name=report_option><option>Y</option><option SELECTED>N</option></select>$NWB#vicidial_shifts-report_option$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=11111111111 display the ADD NEW PHONE SCREEN
######################

if ($ADD==11111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
		$stmt = "SELECT count(*) FROM vicidial_override_ids where id_table='phones' and active='1';";
		$rslt=mysql_query($stmt, $link);
		$voi_ct = mysql_num_rows($rslt);
		if ($voi_ct > 0)
			{
			$row=mysql_fetch_row($rslt);
			$voi_count = "$row[0]";
			}
		##### END ID override optional section #####

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU TELEPHONE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=21111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		if ($voi_count > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Extension:</td><td align=left>Auto-Generated $NWB#phones-extension$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Extension:</td><td align=left><input type=text name=extension size=20 maxlength=100 value=\"\">$NWB#phones-extension$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Nuémro dans le dial plan: </td><td align=left><input type=text name=dialplan_number size=15 maxlength=20> (chiffres seulement)$NWB#phones-dialplan_number$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Boîte vocale:</td><td align=left><input type=text name=voicemail_id size=10 maxlength=10> (chiffres seulement)$NWB#phones-voicemail_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>CallerID sortant: </td><td align=left><input type=text name=outbound_cid size=10 maxlength=20> (chiffres seulement)$NWB#phones-outbound_cid$NWE</td></tr>\n";
#		echo "<tr bgcolor=#B6D3FC><td align=right>Phone IP address: </td><td align=left><input type=text name=phone_ip size=20 maxlength=15> (optional)$NWB#phones-phone_ip$NWE</td></tr>\n";
#		echo "<tr bgcolor=#B6D3FC><td align=right>Computer IP address: </td><td align=left><input type=text name=computer_ip size=20 maxlength=15> (optional)$NWB#phones-computer_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#phones-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Écran de connexion Agent: </td><td align=left><input type=text name=login size=15 maxlength=15>$NWB#phones-login$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Login Mot de passe: </td><td align=left><input type=text name=pass size=10 maxlength=20 value=\"$SSdefault_phone_login_password\">$NWB#phones-pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Inscription Mot de passe: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=conf_secret size=20 maxlength=20 value=\"$SSdefault_phone_registration_password\" onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#phones-conf_secret$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Etat: </td><td align=left><select size=1 name=status><option SELECTED>ACTIF</option><option>SUSPENDED</option><option>CLOSED</option><option>PENDING</option><option>ADMIN</option></select>$NWB#phones-status$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Compte actif: </td><td align=left><select size=1 name=active><option SELECTED>Y</option><option>N</option></select>$NWB#phones-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Type de téléphone: </td><td align=left><input type=text name=phone_type size=20 maxlength=50>$NWB#phones-phone_type$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=fullname size=20 maxlength=50>$NWB#phones-fullname$NWE</td></tr>\n";
#		echo "<tr bgcolor=#B6D3FC><td align=right>Company: </td><td align=left><input type=text name=company size=10 maxlength=10>$NWB#phones-company$NWE</td></tr>\n";
#		echo "<tr bgcolor=#B6D3FC><td align=right>Picture: </td><td align=left><input type=text name=picture size=20 maxlength=19>$NWB#phones-picture$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Protocole client: </td><td align=left><select size=1 name=protocol><option SELECTED>SIP</option><option>Zap</option><option>IAX2</option><option>EXTERNAL</option></select>$NWB#phones-protocol$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>GMT local: </td><td align=left><select size=1 name=local_gmt><option>12.75</option><option>12.00</option><option>11.00</option><option>10.00</option><option>9.50</option><option>9.00</option><option>8.00</option><option>7.00</option><option>6.50</option><option>6.00</option><option>5.75</option><option>5.50</option><option>5.00</option><option>4.50</option><option>4.00</option><option>3.50</option><option>3.00</option><option>2.00</option><option>1.00</option><option>0.00</option><option>-1.00</option><option>-2.00</option><option>-3.00</option><option>-3.50</option><option>-4.00</option><option>-5.00</option><option>-6.00</option><option>-7.00</option><option>-8.00</option><option>-9.00</option><option>-10.00</option><option>-11.00</option><option>-12.00</option><option SELECTED>$SSdefault_local_gmt</option></select> (Ne PAS ajuster pour DST)$NWB#phones-local_gmt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=12111111111 display the ADD NEW PHONE ALIAS SCREEN
######################

if ($ADD==12111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter un nouveau téléphone ALIAS<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=22111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias ID:</td><td align=left><input type=text name=alias_id size=20 maxlength=20 value=\"\">$NWB#phones-alias_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias Nom:</td><td align=left><input type=text name=alias_name size=30 maxlength=50> $NWB#phones-alias_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Connexions List:</td><td align=left><input type=text name=logins_list size=50 maxlength=255> (comma separated)$NWB#phones-logins_list$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=13111111111 display the ADD NEW GROUP ALIAS SCREEN
######################

if ($ADD==13111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter un nouveau groupe ALIAS<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=23111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias Groupe ID: </td><td align=left><input type=text name=group_alias_id size=30 maxlength=30 value=\"\">$NWB#phones-group_alias_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du groupe Alias: </td><td align=left><input type=text name=group_alias_name size=30 maxlength=50> $NWB#phones-group_alias_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre CallerID: </td><td align=left><input type=text name=caller_id_number size=20 maxlength=20> $NWB#phones-caller_id_number$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>CallerID Nom: </td><td align=left><input type=text name=caller_id_name size=20 maxlength=20> $NWB#phones-caller_id_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option selected>N</option></select></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=111111111111 display the ADD NEW SERVER SCREEN
######################

if ($ADD==111111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UN NOUVEAU SERVEUR<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=211111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID du serveur: </td><td align=left><input type=text name=server_id size=10 maxlength=10>$NWB#servers-server_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description du serveur: </td><td align=left><input type=text name=server_description size=30 maxlength=255>$NWB#servers-server_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Adresse IP du serveur: </td><td align=left><input type=text name=server_ip size=20 maxlength=15>$NWB#servers-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option></select>$NWB#servers-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Version d'Asterisk: </td><td align=left><input type=text name=asterisk_version size=20 maxlength=20>$NWB#servers-asterisk_version$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#servers-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=131111111111 display the ADD NEW CONF TEMPLATE SCREEN
######################

if ($ADD==131111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW CONF TEMPLATE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=231111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>ID modèle: </td><td align=left><input type=text name=template_id size=15 maxlength=15>$NWB#vicidial_conf_templates-template_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du modèle: </td><td align=left><input type=text name=template_name size=40 maxlength=50>$NWB#vicidial_conf_templates-template_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_conf_templates-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Template Sommaire: </td><td align=left><TEXTAREA NAME=template_contents ROWS=10 COLS=70></TEXTAREA> $NWB#vicidial_conf_templates-template_contents$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=141111111111 display the ADD NEW CARRIER SCREEN
######################

if ($ADD==141111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_carriers==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW CARRIER<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=241111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier ID: </td><td align=left><input type=text name=carrier_id size=15 maxlength=15>$NWB#vicidial_server_carriers-carrier_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du transporteur: </td><td align=left><input type=text name=carrier_name size=40 maxlength=50>$NWB#vicidial_server_carriers-carrier_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier Description: </td><td align=left><input type=text name=carrier_description size=70 maxlength=255>$NWB#vicidial_server_carriers-carrier_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_server_carriers-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Inscription à cordes: </td><td align=left><input type=text name=registration_string size=50 maxlength=255>$NWB#vicidial_server_carriers-registration_string$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>ID modèle: </td><td align=left><select size=1 name=template_id>\n";
		$stmt="SELECT template_id,template_name from vicidial_conf_templates $LOGadmin_viewable_groupsSQL order by template_id;";
		$rslt=mysql_query($stmt, $link);
		$templates_to_print = mysql_num_rows($rslt);
		$templates_list='<option SELECTED>--NONE--</option>';
		$o=0;
		while ($templates_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$templates_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$templates_list";
		echo "</select>$NWB#vicidial_server_carriers-template_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Entrée de compte: </td><td align=left><TEXTAREA NAME=account_entry ROWS=10 COLS=70></TEXTAREA> $NWB#vicidial_server_carriers-account_entry$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Protocole: </td><td align=left><select size=1 name=protocol><option SELECTED>SIP</option><option>Zap</option><option>IAX2</option><option>EXTERNAL</option></select>$NWB#vicidial_server_carriers-protocol$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Globals String: </td><td align=left><input type=text name=globals_string size=50 maxlength=255>$NWB#vicidial_server_carriers-globals_string$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Dialplan Entrée: </td><td align=left><TEXTAREA NAME=dialplan_entry ROWS=10 COLS=70></TEXTAREA> $NWB#vicidial_server_carriers-dialplan_entry$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#vicidial_server_carriers-server_ip$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=140111111111 display the ADD COPIED CARRIER SCREEN
######################

if ($ADD==140111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_carriers==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter le transporteur COPIE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=240111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier ID: </td><td align=left><input type=text name=carrier_id size=15 maxlength=15>$NWB#vicidial_server_carriers-carrier_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du transporteur: </td><td align=left><input type=text name=carrier_name size=40 maxlength=50>$NWB#vicidial_server_carriers-carrier_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#vicidial_server_carriers-server_ip$NWE</td></tr>\n";


		echo "<tr bgcolor=#B6D3FC><td align=right>Transporteur de source: </td><td align=left><select size=1 name=source_carrier>\n";

		$stmt="SELECT carrier_id,carrier_name,server_ip from vicidial_server_carriers $LOGadmin_viewable_groupsSQL order by carrier_id;";
		$rslt=mysql_query($stmt, $link);
		$menus_to_print = mysql_num_rows($rslt);
		$menus_list='';

		$o=0;
		while ($menus_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$menus_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1] - $rowx[2]</option>\n";
			$o++;
			}
		echo "$menus_list";
		echo "</select>$NWB#vicidial_server_carriers-carrier_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################
# ADD=151111111111 display the ADD NEW TTS ENTRY SCREEN
######################

if ($ADD==151111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_tts==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW ENTRY TTS<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=251111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>TTS ID: </td><td align=left><input type=text name=tts_id size=30 maxlength=50>$NWB#vicidial_tts_prompts-tts_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>TTS Nom: </td><td align=left><input type=text name=tts_name size=50 maxlength=100>$NWB#vicidial_tts_prompts-tts_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option>$NWB#vicidial_tts_prompts-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_tts_prompts-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=161111111111 display the ADD NEW MUSIC ON HOLD ENTRY SCREEN
######################

if ($ADD==161111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_moh==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW MUSIC ON HOLD ENTRY<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=261111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Musique en attente d-identification: </td><td align=left><input type=text name=moh_id size=50 maxlength=100>$NWB#vicidial_music_on_hold-moh_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Musique d-attente Nom: </td><td align=left><input type=text name=moh_name size=70 maxlength=255>$NWB#vicidial_music_on_hold-moh_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Random Order: </td><td align=left><select size=1 name=random><option>N</option><option>Y</option>$NWB#vicidial_music_on_hold-random$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_music_on_hold-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=171111111111 display the ADD NEW VOICEMAIL BOX SCREEN
######################

if ($ADD==171111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_moh==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD NEW messagerie vocale<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=271111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>ID vocale: </td><td align=left><input type=text name=voicemail_id size=12 maxlength=10>$NWB#vicidial_voicemail-voicemail_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Pass: </td><td align=left><input type=text name=pass size=10 maxlength=10>$NWB#vicidial_voicemail-pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Name: </td><td align=left><input type=text name=fullname size=50 maxlength=100>$NWB#vicidial_voicemail-fullname$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option>$NWB#vicidial_voicemail-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Email:</td><td align=left><input type=text name=email size=50 maxlength=100>$NWB#vicidial_voicemail-email$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_voicemail-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=181111111111 display the ADD NEW SCREEN LABEL SCREEN
######################

if ($ADD==181111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_labels==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter une étiquette ECRAN NEW<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=281111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Label ID écran: </td><td align=left><input type=text name=label_id size=21 maxlength=20>$NWB#vicidial_screen_labels-label_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du Label écran: </td><td align=left><input type=text name=label_name size=70 maxlength=100>$NWB#vicidial_screen_labels-label_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"---ALL---\">Tous les groupes d'utilisateurs d'administration</option>\n";
		echo "</select>$NWB#vicidial_screen_labels-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=191111111111 display the ADD NEW CONTACT SCREEN
######################

if ($ADD==191111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_contacts==1) )
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>Ajouter une étiquette ECRAN NEW<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=291111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom: </td><td align=left><input type=text name=first_name size=50 maxlength=50>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Prénom: </td><td align=left><input type=text name=last_name size=50 maxlength=50>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre Bureau: </td><td align=left><input type=text name=office_num size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre de cellules: </td><td align=left><input type=text name=cell_num size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre d'autres 1: </td><td align=left><input type=text name=other_num1 size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre d'autres 2: </td><td align=left><input type=text name=other_num2 size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>BU Name: </td><td align=left><input type=text name=bu_name size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Department: </td><td align=left><input type=text name=department size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe: </td><td align=left><input type=text name=group_name size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Job Title: </td><td align=left><input type=text name=job_title size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Location: </td><td align=left><input type=text name=location size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=1111111111111 display the ADD NEW CONFERENCE SCREEN
######################

if ($ADD==1111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>AJOUTER UNE NOUVELLE CONFERENCE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=2111111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Numéro de la conférence: </td><td align=left><input type=text name=conf_exten size=8 maxlength=7> (chiffres seulement)$NWB#conferences-conf_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#conferences-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=11111111111111 display the ADD NEW VICIDIAL CONFERENCE SCREEN
######################

if ($ADD==11111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>ADD A NEW VICIDIAL CONFERENCE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=21111111111111>\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Numéro de la conférence: </td><td align=left><input type=text name=conf_exten size=8 maxlength=7> (chiffres seulement)$NWB#conferences-conf_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "</select>$NWB#conferences-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################################################################################################
######################################################################################################
#######   2 series, validates form data and inserts the new record into the database
######################################################################################################
######################################################################################################


######################
# ADD=2 adds the new user to the system
######################

if ($ADD=="2")
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_users' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$user = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$user' where id_table='vicidial_users' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_users where user='$user';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>UTILISATEUR NON AJOUTE - il y a déjà un utilisateur dans le système avec ce numéro d'utilisateur\n";}
	else
		{
		if (ereg('AUTOGENERA',$user))
			{
			$user = 'AUTOGENERA';
			}
		if ( (strlen($user) < 2) or (strlen($pass) < 2) or (strlen($full_name) < 2) or (strlen($user_group) < 2) or ( (strlen($user) > 20) and (!ereg('AUTOGENERA',$user)) ) )
			{
			echo "<br>UTILISATEUR NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>user id must be between 2 and 20 characters long\n";
			echo "<br>le nom et le mot de passe doivent contenir au moins 2 caractères\n";
			echo "<br>Vous devez sélectionner un groupe d-utilisateurs\n";
			}
		else
			{
			if (ereg('AUTOGENERA',$user))
				{
				$new_user=0;
				$auto_user_add_value=0;
				while ($new_user < 2)
					{
					if ($new_user < 1)
						{
						$stmt = "SELECT auto_user_add_value FROM system_settings;";
						$rslt=mysql_query($stmt, $link);
						$ss_auav_ct = mysql_num_rows($rslt);
						if ($ss_auav_ct > 0)
							{
							$row=mysql_fetch_row($rslt);
							$auto_user_add_value = $row[0];
							}
						$new_user++;
						}
					$stmt = "SELECT count(*) FROM vicidial_users where user='$auto_user_add_value';";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] < 1)
						{
						$new_user++;
						}
					else 
						{
						echo "<!-- AG: $auto_user_add_value -->\n";
						$auto_user_add_value = ($auto_user_add_value + 7);
						}
					}
				$user = $auto_user_add_value;
				echo "<br><B>user_id has been auto-generated: $user</B><br>\n";

				$stmt="UPDATE system_settings SET auto_user_add_value='$user';";
				$rslt=mysql_query($stmt, $link);
				}
			echo "<br><B>UTILISATEUR AJOUTE: $user</B>\n";

			$stmt="INSERT INTO vicidial_users (user,pass,full_name,user_level,user_group,phone_login,phone_pass) values('$user','$pass','$full_name','$user_level','$user_group','$phone_login','$phone_pass');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='ADD', record_id='$user', event_code='ADMIN ADD USER', event_sql=\"$SQL_log\", event_notes='user: $user';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				$user_name =		$user;
				$user_password =	$pass;
				$last_name =		$full_name;
				$is_admin =			'off';
				$roleid =			'H5';
				$status =			'Active';
				$groupid =			'1';
					if ($user_level >= 7) {$roleid = 'H3';}
					if ($user_level >= 8) {$roleid = 'H4';}
					if ($user_level >= 9) {$roleid = 'H2';}
					if ($user_level >= 9) {$is_admin = 'on';}
				$salt = substr($user_name, 0, 2);
				$salt = '$1$' . $salt . '$';
				$encrypted_password = crypt($user_password, $salt);
				### search for role in ViciDial
				$stmt = "SELECT vtiger_role FROM vtiger_vicidial_roles where user_level='$user_level';";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$vvr_ct = mysql_num_rows($rslt);
				if ($vvr_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$roleid =	$row[0];
					}

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################

				######################################
				##### BEGIN Add/Update user info in Vtiger
				$stmt="SELECT count(*) from vtiger_users where user_name='$user_name';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$found_count = $row[0];

				### user exists in vtiger, update it
				if ($found_count > 0)
					{
					$stmt="SELECT id from vtiger_users where user_name='$user_name';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$userid = $row[0];

					$stmt="SELECT count(*) from vtiger_users2group WHERE userid='$userid' and groupid='$groupid';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$usergroupcount = $row[0];

					$stmtA = "UPDATE vtiger_users SET user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status' where id='$userid';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtB = "UPDATE vtiger_user2role SET roleid='$roleid' where userid='$userid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					if ($usergroupcount < 1)
						{
						$stmt="SELECT user_group FROM vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "$stmt\n";}
						$VD_groups_ct = mysql_num_rows($rslt);
						$k=0;
						$VD_groups_list='';
						while ($k < $VD_groups_ct)
							{
							$row=mysql_fetch_row($rslt);
							$VD_groups_list .= "'$row[0]',";
							$k++;
							}
						$VD_groups_list = preg_replace("/.$/",'',$VD_groups_list);

						$stmtC = "DELETE FROM vtiger_users2group WHERE userid='$userid' and groupid IN(SELECT groupid from vtiger_groups where groupname IN($VD_groups_list));";
						if ($DB) {echo "|$stmtC|\n";}
						$rslt=mysql_query($stmtC, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtD = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
						if ($DB) {echo "|$stmtD|\n";}
						$rslt=mysql_query($stmtD, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW USER RECORD IN VTIGER
					$stmtA = "INSERT INTO vtiger_users SET user_name='$user_name',user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status',date_format='yyyy-mm-dd',first_name='',reports_to_id='',description='',title='',department='',phone_home='',phone_mobile='',phone_work='',phone_other='',phone_fax='',email1='',email2='',yahoo_id='',signature='',address_street='',address_city='',address_state='',address_country='',address_postalcode='',user_preferences='',imagename='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$userid = mysql_insert_id($linkV);
				
					$stmtB = "INSERT INTO vtiger_user2role SET userid='$userid',roleid='$roleid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtC = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
					if ($DB) {echo "|$stmtC|\n";}
					$rslt=mysql_query($stmtC, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtD = "UPDATE vtiger_users_seq SET id='$userid';";
					if ($DB) {echo "|$stmtD|\n";}
					$rslt=mysql_query($stmtD, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW USER RECORD IN VTIGER
					}
				##### END Add/Update user info in Vtiger
				######################################
				}
			### END vtiger integration
			}
		}

	$ADD=3;
	}

######################
# ADD=2A adds the copied new user to the system
######################

if ($ADD=="2A")
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_users' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$user = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$user' where id_table='vicidial_users' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_users where user='$user';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>UTILISATEUR NON AJOUTE - il y a déjà un utilisateur dans le système avec ce numéro d'utilisateur\n";}
	else
		{
		if ( (strlen($user) < 2) or (strlen($pass) < 2) or (strlen($full_name) < 2) or (strlen($user) > 20) )
			{
			echo "<br>UTILISATEUR NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>user id must be between 2 and 20 characters long\n";
			echo "<br>le nom et le mot de passe doivent contenir au moins 2 caractères\n";
			echo "<!-- |$user|$pass|$full_name| -->\n";
			}
		else
			{
			if (ereg('AUTOGEN',$user))
				{
				$new_user=0;
				$auto_user_add_value=0;
				while ($new_user < 2)
					{
					if ($new_user < 1)
						{
						$stmt = "SELECT auto_user_add_value FROM system_settings;";
						$rslt=mysql_query($stmt, $link);
						$ss_auav_ct = mysql_num_rows($rslt);
						if ($ss_auav_ct > 0)
							{
							$row=mysql_fetch_row($rslt);
							$auto_user_add_value = $row[0];
							}
						$new_user++;
						}
					$stmt = "SELECT count(*) FROM vicidial_users where user='$auto_user_add_value';";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					if ($row[0] < 1)
						{
						$new_user++;
						}
					else 
						{
						echo "<!-- AG: $auto_user_add_value -->\n";
						$auto_user_add_value = ($auto_user_add_value + 7);
						}
					}
				$user = $auto_user_add_value;
				echo "<br><B>user_id has been auto-generated: $user</B><br>\n";

				$stmt="UPDATE system_settings SET auto_user_add_value='$user';";
				$rslt=mysql_query($stmt, $link);
				}
			$stmt="INSERT INTO vicidial_users (user,pass,full_name,user_level,user_group,phone_login,phone_pass,delete_users,delete_user_groups,delete_lists,delete_campaigns,delete_ingroups,delete_remote_agents,load_leads,campaign_detail,ast_admin_access,ast_delete_phones,delete_scripts,modify_leads,hotkeys_active,change_agent_campaign,agent_choose_ingroups,closer_campaigns,scheduled_callbacks,agentonly_callbacks,agentcall_manual,vicidial_recording,vicidial_transfers,delete_filters,alter_agent_interface_options,closer_default_blended,delete_call_times,modify_call_times,modify_users,modify_campaigns,modify_lists,modify_scripts,modify_filters,modify_ingroups,modify_usergroups,modify_remoteagents,modify_servers,view_reports,vicidial_recording_override,alter_custdata_override,qc_enabled,qc_user_level,qc_pass,qc_finish,qc_commit,add_timeclock_log,modify_timeclock_log,delete_timeclock_log,alter_custphone_override,vdc_agent_api_access,modify_inbound_dids,delete_inbound_dids,active,alert_enabled,download_lists,agent_shift_enforcement_override,manager_shift_enforcement_override,export_reports,delete_from_dnc,email,user_code,territory,allow_alerts,agent_choose_territories,custom_one,custom_two,custom_three,custom_four,custom_five,voicemail_id,agent_call_log_view_override,callcard_admin,agent_choose_blended,realtime_block_user_info,custom_fields_modify,force_change_password,agent_lead_search_override,modify_shifts,modify_phones,modify_carriers,modify_labels,modify_statuses,modify_voicemail,modify_audiostore,modify_moh,modify_tts,preset_contact_search,modify_contacts,modify_same_user_level,admin_hide_lead_data,admin_hide_phone_data) SELECT \"$user\",\"$pass\",\"$full_name\",user_level,user_group,phone_login,phone_pass,delete_users,delete_user_groups,delete_lists,delete_campaigns,delete_ingroups,delete_remote_agents,load_leads,campaign_detail,ast_admin_access,ast_delete_phones,delete_scripts,modify_leads,hotkeys_active,change_agent_campaign,agent_choose_ingroups,closer_campaigns,scheduled_callbacks,agentonly_callbacks,agentcall_manual,vicidial_recording,vicidial_transfers,delete_filters,alter_agent_interface_options,closer_default_blended,delete_call_times,modify_call_times,modify_users,modify_campaigns,modify_lists,modify_scripts,modify_filters,modify_ingroups,modify_usergroups,modify_remoteagents,modify_servers,view_reports,vicidial_recording_override,alter_custdata_override,qc_enabled,qc_user_level,qc_pass,qc_finish,qc_commit,add_timeclock_log,modify_timeclock_log,delete_timeclock_log,alter_custphone_override,vdc_agent_api_access,modify_inbound_dids,delete_inbound_dids,active,alert_enabled,download_lists,agent_shift_enforcement_override,manager_shift_enforcement_override,export_reports,delete_from_dnc,email,user_code,territory,allow_alerts,agent_choose_territories,custom_one,custom_two,custom_three,custom_four,custom_five,voicemail_id,agent_call_log_view_override,callcard_admin,agent_choose_blended,realtime_block_user_info,custom_fields_modify,force_change_password,agent_lead_search_override,modify_shifts,modify_phones,modify_carriers,modify_labels,modify_statuses,modify_voicemail,modify_audiostore,modify_moh,modify_tts,preset_contact_search,modify_contacts,modify_same_user_level,admin_hide_lead_data,admin_hide_phone_data from vicidial_users where user=\"$source_user_id\";";
			$rslt=mysql_query($stmt, $link);

			$stmtA="INSERT INTO vicidial_inbound_group_agents (user,group_id,group_rank,group_weight,calls_today) SELECT \"$user\",group_id,group_rank,group_weight,\"0\" from vicidial_inbound_group_agents where user=\"$source_user_id\";";
			$rslt=mysql_query($stmtA, $link);

			$stmtA="INSERT INTO vicidial_campaign_agents (user,campaign_id,campaign_rank,campaign_weight,calls_today) SELECT \"$user\",campaign_id,campaign_rank,campaign_weight,\"0\" from vicidial_campaign_agents where user=\"$source_user_id\";";
			$rslt=mysql_query($stmtA, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='COPY', record_id='$user', event_code='ADMIN UTILISATEUR DE COPY', event_sql=\"$SQL_log\", event_notes='user: $user';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				$user_name =		$user;
				$user_password =	$pass;
				$last_name =		$full_name;
				$is_admin =			'off';
				$roleid =			'H5';
				$status =			'Active';
				$groupid =			'1';
					if ($user_level >= 7) {$roleid = 'H3';}
					if ($user_level >= 8) {$roleid = 'H4';}
					if ($user_level >= 9) {$roleid = 'H2';}
					if ($user_level >= 9) {$is_admin = 'on';}
				$salt = substr($user_name, 0, 2);
				$salt = '$1$' . $salt . '$';
				$encrypted_password = crypt($user_password, $salt);
				### search for role in ViciDial
				$stmt = "SELECT vtiger_role FROM vtiger_vicidial_roles where user_level='$user_level';";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$vvr_ct = mysql_num_rows($rslt);
				if ($vvr_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$roleid =	$row[0];
					}

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################

				######################################
				##### BEGIN Add/Update user info in Vtiger
				$stmt="SELECT count(*) from vtiger_users where user_name='$user_name';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$found_count = $row[0];

				### user exists in vtiger, update it
				if ($found_count > 0)
					{
					$stmt="SELECT id from vtiger_users where user_name='$user_name';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$userid = $row[0];

					$stmt="SELECT count(*) from vtiger_users2group WHERE userid='$userid' and groupid='$groupid';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$usergroupcount = $row[0];

					$stmtA = "UPDATE vtiger_users SET user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status' where id='$userid';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtB = "UPDATE vtiger_user2role SET roleid='$roleid' where userid='$userid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					if ($usergroupcount < 1)
						{
						$stmt="SELECT user_group FROM vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "$stmt\n";}
						$VD_groups_ct = mysql_num_rows($rslt);
						$k=0;
						$VD_groups_list='';
						while ($k < $VD_groups_ct)
							{
							$row=mysql_fetch_row($rslt);
							$VD_groups_list .= "'$row[0]',";
							$k++;
							}
						$VD_groups_list = preg_replace("/.$/",'',$VD_groups_list);

						$stmtC = "DELETE FROM vtiger_users2group WHERE userid='$userid' and groupid IN(SELECT groupid from vtiger_groups where groupname IN($VD_groups_list));";
						if ($DB) {echo "|$stmtC|\n";}
						$rslt=mysql_query($stmtC, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtD = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
						if ($DB) {echo "|$stmtD|\n";}
						$rslt=mysql_query($stmtD, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW USER RECORD IN VTIGER
					$stmtA = "INSERT INTO vtiger_users SET user_name='$user_name',user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status',date_format='yyyy-mm-dd',first_name='',reports_to_id='',description='',title='',department='',phone_home='',phone_mobile='',phone_work='',phone_other='',phone_fax='',email1='',email2='',yahoo_id='',signature='',address_street='',address_city='',address_state='',address_country='',address_postalcode='',user_preferences='',imagename='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$userid = mysql_insert_id($linkV);
				
					$stmtB = "INSERT INTO vtiger_user2role SET userid='$userid',roleid='$roleid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtC = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
					if ($DB) {echo "|$stmtC|\n";}
					$rslt=mysql_query($stmtC, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtD = "UPDATE vtiger_users_seq SET id='$userid';";
					if ($DB) {echo "|$stmtD|\n";}
					$rslt=mysql_query($stmtD, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW USER RECORD IN VTIGER
					}
				##### END Add/Update user info in Vtiger
				######################################
				}
			### END vtiger integration

			echo "<br><B>USER COPIED: $user copied from $source_user_id</B>\n";
			echo "<br><br>\n";
			echo "<a href=\"$PHP_SELF?ADD=3&user=$user\">Click here to go to the user record</a>\n";
			echo "<br><br>\n";

			}
		}
	exit;
	}

######################
# ADD=21 adds the new campaign to the system
######################

if ($ADD==21)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_campaigns' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$campaign_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$campaign_id' where id_table='vicidial_campaigns' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CAMPAGNE NON AJOUTEE - il existe déjà une campagne dans le système avec cet ID\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_inbound_groups where group_id='$campaign_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>CAMPAIGN NOT ADDED - there is already an inbound group in the system with this ID\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($campaign_id) > 8) or (strlen($campaign_name) < 6)  or (strlen($campaign_name) > 40) )
				{
				echo "<br>CAMPAGNE NON AJOUTEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>l'ID de la campagne doit contenir entre 2 et 8 caractères\n";
				echo "<br>le nom de la campagne doit contenir entre 6 et 40 caractères\n";
				}
			else
				{
				echo "<br><B>CAMPAGNE AJOUTEE: $campaign_id</B>\n";

				# if admin user's user group does not have -ALL-CAMPAIGNS- then add this new campaign to their user group's allowable campaigns
				if ( (!eregi("-ALL",$LOGallowed_campaigns)) )
					{
					$UPDATEallowed_campaigns =	$LOGallowed_campaigns;
					$UPDATEallowed_campaigns = preg_replace("/ -$/"," $campaign_id -",$UPDATEallowed_campaigns);
					$LOGallowed_campaigns = $UPDATEallowed_campaigns;
					$rawLOGallowed_campaignsSQL = preg_replace("/ -/",'',$LOGallowed_campaigns);
					$rawLOGallowed_campaignsSQL = preg_replace("/ /","','",$rawLOGallowed_campaignsSQL);
					$LOGallowed_campaignsSQL = "and campaign_id IN('$rawLOGallowed_campaignsSQL')";
					$whereLOGallowed_campaignsSQL = "where campaign_id IN('$rawLOGallowed_campaignsSQL')";
					$regexLOGallowed_campaigns = " $LOGallowed_campaigns ";
					$stmt="UPDATE vicidial_user_groups SET allowed_campaigns='$UPDATEallowed_campaigns' where user_group='$LOGuser_group';";
					$rslt=mysql_query($stmt, $link);
					}

				$stmt="INSERT INTO vicidial_campaigns (campaign_id,campaign_name,campaign_description,active,dial_status_a,lead_order,park_ext,park_file_name,web_form_address,allow_closers,hopper_level,auto_dial_level,next_agent_call,local_call_time,voicemail_ext,campaign_script,get_call_launch,campaign_changedate,campaign_stats_refresh,list_order_mix,web_form_address_two,start_call_url,dispo_call_url,na_call_url,user_group) values('$campaign_id','$campaign_name','$campaign_description','$active','NEW','DOWN','$park_ext','$park_file_name','" . mysql_real_escape_string($web_form_address) . "','$allow_closers','$hopper_level','$auto_dial_level','$next_agent_call','$local_call_time','$voicemail_ext','$script_id','$get_call_launch','$SQLdate','Y','DISABLED','','','','','$user_group');";
				$rslt=mysql_query($stmt, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats (campaign_id) values('$campaign_id');";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats_debug (campaign_id) values('$campaign_id');";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=31;
	}

######################
# ADD=20 adds copied new campaign to the system
######################

if ($ADD==20)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_campaigns' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$campaign_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$campaign_id' where id_table='vicidial_campaigns' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CAMPAGNE NON AJOUTEE - il existe déjà une campagne dans le système avec cet ID\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_inbound_groups where group_id='$campaign_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>CAMPAIGN NOT ADDED - there is already an inbound group in the system with this ID\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($campaign_id) > 8) or  (strlen($campaign_name) < 2) or (strlen($source_campaign_id) < 2) or (strlen($source_campaign_id) > 8) )
				{
				echo "<br>CAMPAGNE NON AJOUTEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>l'ID de la campagne doit contenir entre 2 et 8 caractères\n";
				echo "<br>source l'ID de la campagne doit contenir entre 2 et 8 caractères\n";
				}
			else
				{
				echo "<br><B>CAMPAIGN COPIED: $campaign_id copied from $source_campaign_id</B>\n";

				# if admin user's user group does not have -ALL-CAMPAIGNS- then add this new campaign to their user group's allowable campaigns
				if ( (!eregi("-ALL",$LOGallowed_campaigns)) )
					{
					$UPDATEallowed_campaigns =	$LOGallowed_campaigns;
					$UPDATEallowed_campaigns = preg_replace("/ -$/"," $campaign_id -",$UPDATEallowed_campaigns);
					$LOGallowed_campaigns = $UPDATEallowed_campaigns;
					$rawLOGallowed_campaignsSQL = preg_replace("/ -/",'',$LOGallowed_campaigns);
					$rawLOGallowed_campaignsSQL = preg_replace("/ /","','",$rawLOGallowed_campaignsSQL);
					$LOGallowed_campaignsSQL = "and campaign_id IN('$rawLOGallowed_campaignsSQL')";
					$whereLOGallowed_campaignsSQL = "where campaign_id IN('$rawLOGallowed_campaignsSQL')";
					$regexLOGallowed_campaigns = " $LOGallowed_campaigns ";
					$stmt="UPDATE vicidial_user_groups SET allowed_campaigns='$UPDATEallowed_campaigns' where user_group='$LOGuser_group';";
					$rslt=mysql_query($stmt, $link);
					}

				$stmt="INSERT INTO vicidial_campaigns (campaign_name,campaign_id,active,dial_status_a,dial_status_b,dial_status_c,dial_status_d,dial_status_e,lead_order,park_ext,park_file_name,web_form_address,allow_closers,hopper_level,auto_dial_level,next_agent_call,local_call_time,voicemail_ext,dial_timeout,dial_prefix,campaign_cid,campaign_vdad_exten,campaign_rec_exten,campaign_recording,campaign_rec_filename,campaign_script,get_call_launch,am_message_exten,amd_send_to_vmx,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,alt_number_dialing,scheduled_callbacks,lead_filter_id,drop_call_seconds,drop_action,safe_harbor_exten,display_dialable_count,wrapup_seconds,wrapup_message,closer_campaigns,use_internal_dnc,allcalls_delay,omit_phone_code,dial_method,available_only_ratio_tally,adaptive_dropped_percentage,adaptive_maximum_level,adaptive_latest_server_time,adaptive_intensity,adaptive_dl_diff_target,concurrent_transfers,auto_alt_dial,auto_alt_dial_statuses,agent_pause_codes_active,campaign_description,campaign_changedate,campaign_stats_rafraîchir,campaign_logindate,dial_statuses,disable_alter_custdata,no_hopper_leads_logins,list_order_mix,campaign_allow_inbound,manual_dial_list_id,default_xfer_group,queue_priority,drop_inbound_group,qc_enabled,qc_statuses,qc_lists,qc_web_form_address,qc_script,survey_first_audio_file,survey_dtmf_digits,survey_ni_digit,survey_opt_in_audio_file,survey_ni_audio_file,survey_method,survey_no_response_action,survey_ni_status,survey_response_digit_map,survey_xfer_exten,survey_camp_record_dir,disable_alter_custphone,display_queue_count,qc_get_record_launch,qc_show_recording,qc_shift_id,manual_dial_filter,agent_clipboard_copy,agent_extended_alt_dial,use_campaign_dnc,three_way_call_cid,three_way_dial_prefix,web_form_target,vtiger_search_category,vtiger_create_call_record,vtiger_create_lead_record,vtiger_screen_login,cpd_amd_action,agent_allow_group_alias,default_group_alias,vtiger_search_dead,vtiger_status_call,survey_third_digit,survey_fourth_digit,survey_third_audio_file,survey_fourth_audio_file,survey_third_status,survey_fourth_status,survey_third_exten,survey_fourth_exten,drop_lockout_time,quick_transfer_button,prepopulate_transfer_preset,drop_rate_group,view_calls_in_queue,view_calls_in_queue_launch,grab_calls_in_queue,call_requeue_button,pause_after_each_call,no_hopper_dialing,agent_dial_owner_only,agent_display_dialable_leads,web_form_address_two,waitforsilence_options,agent_select_territories,crm_popup_login,crm_login_address,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,use_custom_cid,scheduled_callbacks_alert,queuemetrics_callstatus_override,extension_appended_cidname,scheduled_callbacks_count,manual_dial_override,blind_monitor_warning,blind_monitor_message,blind_monitor_filename,inbound_queue_no_dial,timer_action_destination,enable_xfer_presets,hide_xfer_number_to_dial,manual_dial_prefix,customer_3way_hangup_logging,customer_3way_hangup_seconds,customer_3way_hangup_action,ivr_park_call,ivr_park_call_agi,manual_preview_dial,realtime_agent_time_stats,use_auto_hopper,auto_hopper_multi,auto_trim_hopper,api_manual_dial,manual_dial_call_time_check,display_leads_count,lead_order_randomize,lead_order_secondary,per_call_notes,my_callback_option,agent_lead_search,agent_lead_search_method,queuemetrics_phone_environment,auto_pause_precall,auto_resume_precall,auto_pause_precall_code,manual_dial_cid,post_phone_time_diff_alert,custom_3way_button_transfer,available_only_tally_threshold,available_only_tally_threshold_agents,dial_level_threshold,dial_level_threshold_agents,safe_harbor_audio,safe_harbor_menu_id,survey_menu_id,callback_days_limit,dl_diff_target_method,disable_dispo_screen,disable_dispo_status,screen_labels,status_display_fields,na_call_url,survey_recording,pllb_grouping,pllb_grouping_limit,call_count_limit,call_count_target,callback_hours_block,callback_list_calltime,user_group,hopper_vlc_dup_check) SELECT \"$campaign_name\",\"$campaign_id\",\"N\",dial_status_a,dial_status_b,dial_status_c,dial_status_d,dial_status_e,lead_order,park_ext,park_file_name,web_form_address,allow_closers,hopper_level,auto_dial_level,next_agent_call,local_call_time,voicemail_ext,dial_timeout,dial_prefix,campaign_cid,campaign_vdad_exten,campaign_rec_exten,campaign_recording,campaign_rec_filename,campaign_script,get_call_launch,am_message_exten,amd_send_to_vmx,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,alt_number_dialing,scheduled_callbacks,lead_filter_id,drop_call_seconds,drop_action,safe_harbor_exten,display_dialable_count,wrapup_seconds,wrapup_message,closer_campaigns,use_internal_dnc,allcalls_delay,omit_phone_code,dial_method,available_only_ratio_tally,adaptive_dropped_percentage,adaptive_maximum_level,adaptive_latest_server_time,adaptive_intensity,adaptive_dl_diff_target,concurrent_transfers,auto_alt_dial,auto_alt_dial_statuses,agent_pause_codes_active,campaign_description,campaign_changedate,campaign_stats_rafraîchir,campaign_logindate,dial_statuses,disable_alter_custdata,no_hopper_leads_logins,\"DISABLED\",campaign_allow_inbound,manual_dial_list_id,default_xfer_group,queue_priority,drop_inbound_group,qc_enabled,qc_statuses,qc_lists,qc_web_form_address,qc_script,survey_first_audio_file,survey_dtmf_digits,survey_ni_digit,survey_opt_in_audio_file,survey_ni_audio_file,survey_method,survey_no_response_action,survey_ni_status,survey_response_digit_map,survey_xfer_exten,survey_camp_record_dir,disable_alter_custphone,display_queue_count,qc_get_record_launch,qc_show_recording,qc_shift_id,manual_dial_filter,agent_clipboard_copy,agent_extended_alt_dial,use_campaign_dnc,three_way_call_cid,three_way_dial_prefix,web_form_target,vtiger_search_category,vtiger_create_call_record,vtiger_create_lead_record,vtiger_screen_login,cpd_amd_action,agent_allow_group_alias,default_group_alias,vtiger_search_dead,vtiger_status_call,survey_third_digit,survey_fourth_digit,survey_third_audio_file,survey_fourth_audio_file,survey_third_status,survey_fourth_status,survey_third_exten,survey_fourth_exten,drop_lockout_time,quick_transfer_button,prepopulate_transfer_preset,drop_rate_group,view_calls_in_queue,view_calls_in_queue_launch,grab_calls_in_queue,call_requeue_button,pause_after_each_call,no_hopper_dialing,agent_dial_owner_only,agent_display_dialable_leads,web_form_address_two,waitforsilence_options,agent_select_territories,crm_popup_login,crm_login_address,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,use_custom_cid,scheduled_callbacks_alert,queuemetrics_callstatus_override,extension_appended_cidname,scheduled_callbacks_count,manual_dial_override,blind_monitor_warning,blind_monitor_message,blind_monitor_filename,inbound_queue_no_dial,timer_action_destination,enable_xfer_presets,hide_xfer_number_to_dial,manual_dial_prefix,customer_3way_hangup_logging,customer_3way_hangup_seconds,customer_3way_hangup_action,ivr_park_call,ivr_park_call_agi,manual_preview_dial,realtime_agent_time_stats,use_auto_hopper,auto_hopper_multi,auto_trim_hopper,api_manual_dial,manual_dial_call_time_check,display_leads_count,lead_order_randomize,lead_order_secondary,per_call_notes,my_callback_option,agent_lead_search,agent_lead_search_method,queuemetrics_phone_environment,auto_pause_precall,auto_resume_precall,auto_pause_precall_code,manual_dial_cid,post_phone_time_diff_alert,custom_3way_button_transfer,available_only_tally_threshold,available_only_tally_threshold_agents,dial_level_threshold,dial_level_threshold_agents,safe_harbor_audio,safe_harbor_menu_id,survey_menu_id,callback_days_limit,dl_diff_target_method,disable_dispo_screen,disable_dispo_status,screen_labels,status_display_fields,na_call_url,survey_recording,pllb_grouping,pllb_grouping_limit,call_count_limit,call_count_target,callback_hours_block,callback_list_calltime,user_group,hopper_vlc_dup_check from vicidial_campaigns where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmt, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats (campaign_id) values('$campaign_id');";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats_debug (campaign_id) values('$campaign_id');";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_statuses (status,status_name,selectable,campaign_id,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed) SELECT status,status_name,selectable,\"$campaign_id\",human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_campaign_statuses where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_hotkeys (status,hotkey,status_name,selectable,campaign_id) SELECT status,hotkey,status_name,selectable,\"$campaign_id\" from vicidial_campaign_hotkeys where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_lead_recycle (status,attempt_delay,attempt_maximum,active,campaign_id) SELECT status,attempt_delay,attempt_maximum,active,\"$campaign_id\" from vicidial_lead_recycle where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_pause_codes (pause_code,pause_code_name,billable,campaign_id) SELECT pause_code,pause_code_name,billable,\"$campaign_id\" from vicidial_pause_codes where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_xfer_presets (campaign_id,preset_name,preset_number,preset_dtmf,preset_hide_number) SELECT \"$campaign_id\",preset_name,preset_number,preset_dtmf,preset_hide_number from vicidial_xfer_presets where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_xfer_stats (campaign_id,preset_name) SELECT \"$campaign_id\",preset_name from vicidial_xfer_presets where campaign_id='$source_campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='COPY', record_id='$campaign_id', event_code='ADMIN COPY CAMPAIGN', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=31;
	}

######################
# ADD=22 adds the new campaign status to the system
######################

if ($ADD==22)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaign_statuses where campaign_id='$campaign_id' and status='$status_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>STATUT DE LA CAMPAGNE NON AJOUTE - il y a déjà un statut de campagne dans le système avec ce nom\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_statuses where status='$status_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>STATUT DE LA CAMPAGNE NON AJOUTE - il y a déjà un statut global dans le système avec ce nom\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($status_id) < 1) or (strlen($status_name) < 2) )
				{
				echo "<br>STATUT DE LA CAMPAGNE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut doit contenir entre 1 et 8 caractères\n";
				echo "<br>le nom du statut doit contenir entre 2 et 30 caractères\n";
				}
			else
				{
				echo "<br><B>STATUT DE LA CAMPAGNE AJOUTE: $campaign_id - $status_id</B>\n";

				$stmt="INSERT INTO vicidial_campaign_statuses (status,status_name,selectable,campaign_id,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed) values('$status_id','$status_name','$selectable','$campaign_id','$human_answered','$category','$sale','$dnc','$customer_contact','$not_interested','$unworkable','$scheduled_callbacks','$completed');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_STATUS', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE STATUS', event_sql=\"$SQL_log\", event_notes='Etat: $status_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$SUB=22;
	$ADD=31;
	}


######################
# ADD=23 adds the new campaign hotkey to the system
######################

if ($ADD==23)
	{
	$HKstatus_data = explode('-----',$HKstatus);
	$status = $HKstatus_data[0];
	$status_name = $HKstatus_data[1];

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaign_hotkeys where campaign_id='$campaign_id' and hotkey='$hotkey' and hotkey='$hotkey';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CAMPAIGN HOT KEY NOT ADDED - there is already a campaign-hotkey in the system with this hotkey\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) or (strlen($hotkey) < 1) )
			{
			echo "<br>RACCOURCI CLAVIER DE LA CAMPAGNE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>hotkey must be a single character between 1 and 9 \n";
			echo "<br>le statut doit contenir entre 1 et 8 caractères\n";
			}
		else
			{
			echo "<br><B>RACOURCI CLAVIER DE LA CAMPAGNE AJOUTE: $campaign_id - $status - $hotkey</B>\n";

			$stmt="INSERT INTO vicidial_campaign_hotkeys values('$status','$hotkey','$status_name','$selectable','$campaign_id');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_HOTKEY', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE HOTKEY', event_sql=\"$SQL_log\", event_notes='Etat: $status|HotKey: $hotkey';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$SUB=23;
	$ADD=31;
	}


######################
# ADD=25 adds the new campaign lead recycle entry to the system
######################

if ($ADD==25)
	{
	$status = eregi_replace("-----.*",'',$status);
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_lead_recycle where campaign_id='$campaign_id' and status='$status';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>RECYCLAGE DE FICHES DE LA CAMPAGNE NON AJOUTE - il y a déjà un recyclage de fiches pour cette campagne avec ce statut\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) or ($attempt_delay < 120) or ($attempt_delay >= 43200) or ($attempt_maximum < 1) or ($attempt_maximum > 10) )
			{
			echo "<br>CAMPAIGN LEAD RECYCLE NOT ADDED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
			echo "<br>le délai d'attente doit être au moins 120 secondes et moins de 43,200 secondes ou 12 heures\n";
			echo "<br>le nombre d'essais maximum doit être compris entre 1 et 10\n";
			}
		else
			{
			echo "<br><B>RECYCLAGE DES FICHES DE LA CAMPAGNE AJOUTE: $campaign_id - $status - $attempt_delay</B>\n";

			$stmt="INSERT INTO vicidial_lead_recycle(campaign_id,status,attempt_delay,attempt_maximum,active) values('$campaign_id','$status','$attempt_delay','$attempt_maximum','$active');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_RECYCLE', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE LEAD RECYCLE', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$SUB=25;
	$ADD=31;
	}


######################
# ADD=26 adds the new auto alt dial status to the campaign
######################

if ($ADD==26)
	{
	$status = eregi_replace("-----.*",'',$status);
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id' and auto_alt_dial_statuses LIKE \"% $status %\";";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF NON AJOUTE - il y a déjà un entrée pour cette campagne avec ce statut\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
			{
			echo "<br>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
			}
		else
			{
			echo "<br><B>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF AJOUTE: $campaign_id - $status</B>\n";

			$stmt="SELECT auto_alt_dial_statuses from vicidial_campaigns where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);

			if (strlen($row[0])<2) {$row[0] = ' -';}
			$auto_alt_dial_statuses = " $status$row[0]";
			$stmt="UPDATE vicidial_campaigns set auto_alt_dial_statuses='$auto_alt_dial_statuses' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_ALTDIAL', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE ALT DIAL', event_sql=\"$SQL_log\", event_notes='Etat: $auto_alt_dial_statuses';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$SUB=26;
	$ADD=31;
	}


######################
# ADD=27 adds the new campaign agent pause code entry to the system
######################

if ($ADD==27)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_pause_codes where campaign_id='$campaign_id' and pause_code='$pause_code';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CODE DE PAUSE NON AJOUTE - hay ya una entrada para esta campaÃ±a con este code\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($pause_code) < 1) or (strlen($pause_code) > 6) or (strlen($pause_code_name) < 2) )
			{
			echo "<br>CODE DE PAUSE NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>pause code must be between 1 and 6 characters in length\n";
			echo "<br>pause nom de code doit être compris entre 2 et 30 caractères\n";
			}
		else
			{
			echo "<br><B>CODE DE PAUSE AJOUTE: $campaign_id - $pause_code - $pause_code_name</B>\n";

			$stmt="INSERT INTO vicidial_pause_codes(campaign_id,pause_code,pause_code_name,billable) values('$campaign_id','$pause_code','$pause_code_name','$billable');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PAUSECODE', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE PAUSE CODE', event_sql=\"$SQL_log\", event_notes='Code de pause: $pause_code';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$SUB=27;
	$ADD=31;
	}


######################
# ADD=28 adds new status to the campaign dial statuses
######################

if ($ADD==28)
	{
	$status = eregi_replace("-----.*",'',$status);
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id' and dial_statuses LIKE \"% $status %\";";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>STATUT D'APPEL DE LA CAMPAGNE NON AJOUTE - il y a déjà un entrée pour cette campagne avec ce statut\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
			{
			echo "<br>STATUT D'APPEL DE LA CAMPAGNE NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
			}
		else
			{
			echo "<br><B>STATUT D'APPEL POUR LA CAMPAGNE AJOUTE: $campaign_id - $status</B>\n";

			$stmt="SELECT dial_statuses from vicidial_campaigns where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);

			if (strlen($row[0])<2) {$row[0] = ' -';}
			$dial_statuses = " $status$row[0]";
			$stmt="UPDATE vicidial_campaigns set dial_statuses='$dial_statuses' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_DIALSTATUS', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE DIAL STATUS', event_sql=\"$SQL_log\", event_notes='Etat: $statuses';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	#$SUB=28;
	$ADD=31;
	}


######################
# ADD=201 adds new preset to the campaign presets
######################
if ($ADD==201)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_xfer_presets where campaign_id='$campaign_id' and preset_name='$preset_name';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>PRESET PAS AJOUTÉE - il ya déjà une entrée pour cette campagne avec ce preset\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($preset_name) < 1) or (strlen($preset_number) < 1) )
			{
			echo "<br>PRESET PAS AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>preset name must be between 1 and 40 characters in length\n";
			echo "<br>preset number must be between 2 and 50 characters in length\n";
			}
		else
			{
			echo "<br><B>PRESET ADDED: $campaign_id - $preset_name - $preset_number</B>\n";

			$stmt="INSERT INTO vicidial_xfer_presets(campaign_id,preset_name,preset_number,preset_dtmf,preset_hide_number) values('$campaign_id','$preset_name','$preset_number','$preset_dtmf','$preset_hide_number');";
			$rslt=mysql_query($stmt, $link);

			$stmt="INSERT INTO vicidial_xfer_stats(campaign_id,preset_name) values('$campaign_id','$preset_name');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PRESET', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE PRESET', event_sql=\"$SQL_log\", event_notes='Preset: $preset_name - $preset_number';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$SUB=201;
	$ADD=31;
	}


######################
# ADD=202 adds/deletes/modifies areacode cid to the campaign
######################
if ($ADD==202)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	if ($stage == 'ADD')
		{
		$stmt="SELECT count(*) from vicidial_campaign_cid_areacodes where campaign_id='$campaign_id' and areacode='$areacode' and outbound_cid='$outbound_cid';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>Indicatif régional CID PAS AJOUTÉE - il ya déjà une entrée pour cette campagne avec ce CID<br>\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($areacode) < 2) or (strlen($outbound_cid) < 6) )
				{
				echo "<br>Indicatif régional CID PAS AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
				}
			else
				{
				echo "<br><B>Indicatif régional CID AJOUTÉE: $campaign_id - $areacode - $outbound_cid</B><br>\n";

				$stmt="INSERT INTO vicidial_campaign_cid_areacodes(campaign_id,areacode,outbound_cid,cid_description) values('$campaign_id','$areacode','$outbound_cid','$cid_description');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_AC-CID', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE AC-CID', event_sql=\"$SQL_log\", event_notes='CID: $areacode - $outbound_cid';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	if ($stage == 'DELETE')
		{
		$stmt="SELECT count(*) from vicidial_campaign_cid_areacodes where campaign_id='$campaign_id' and areacode='$areacode' and outbound_cid='$outbound_cid' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] < 1)
			{echo "<br>Indicatif régional CID PAS SUPPRIMER - cette entrée n'existe pas<br>\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($areacode) < 2) or (strlen($outbound_cid) < 6) )
				{
				echo "<br>Indicatif régional CID PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
				}
			else
				{
				echo "<br><B>Indicatif régional CID Vues: $campaign_id - $areacode - $outbound_cid</B><br>\n";

				$stmt="DELETE FROM vicidial_campaign_cid_areacodes WHERE campaign_id='$campaign_id' and areacode='$areacode' and outbound_cid='$outbound_cid';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_AC-CID', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN AC-CID', event_sql=\"$SQL_log\", event_notes='CID: $areacode - $outbound_cid';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	if ($stage == 'MODIFY')
		{
		$stmt="SELECT areacode,outbound_cid,active,cid_description,call_count_today from vicidial_campaign_cid_areacodes where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by areacode,outbound_cid";
		$rslt=mysql_query($stmt, $link);
		$accids_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($accids_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xareacode[$o] =			$rowx[0];
			$Xoutbound_cid[$o] =		$rowx[1];
			$Xactive[$o] =				$rowx[2];
			$Xcid_description[$o] =		$rowx[3];
			$Xcall_count_today[$o] =	$rowx[4];
			$o++;
			}

		$o=0;
		while ($accids_to_print > $o) 
			{
			$Factive_value='';
			$Fcid_description_value='';
			$Factive = "active_$Xareacode[$o]_$Xoutbound_cid[$o]";
			$Fcid_description = "cid_description_$Xareacode[$o]_$Xoutbound_cid[$o]";

			if (isset($_GET[$Factive]))						{$Factive_value=$_GET[$Factive];}
				elseif (isset($_POST[$Factive]))			{$Factive_value=$_POST[$Factive];}
			if (isset($_GET[$Fcid_description]))			{$Fcid_description_value=$_GET[$Fcid_description];}
				elseif (isset($_POST[$Fcid_description]))	{$Fcid_description_value=$_POST[$Fcid_description];}
			$Fcid_description_value = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$Fcid_description_value);
			$Factive_value = ereg_replace("[^A-Z]","",$Factive_value);

		#	echo "$campaign_id - $Xareacode[$o] - $Xoutbound_cid[$o] - $Factive($Factive_value|$Xactive[$o]) - $Fcid_description($Fcid_description_value|$Xcid_description[$o])<BR>";

			if ( ($Factive_value == $Xactive[$o]) and ($Fcid_description_value == $Xcid_description[$o]) )
				{
			#	echo "<br>Indicatif régional CID NOT MODIFIED - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
				}
			else
				{
				echo "<B>Indicatif régional CID mise à jour: $Xareacode[$o] - $Xoutbound_cid[$o]</B><br>\n";

				$stmt="UPDATE vicidial_campaign_cid_areacodes SET active='$Factive_value',cid_description='$Fcid_description_value' WHERE campaign_id='$campaign_id' and areacode='$Xareacode[$o]' and outbound_cid='$Xoutbound_cid[$o]';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_AC-CID', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN AC-CID', event_sql=\"$SQL_log\", event_notes='CID: $Xareacode[$o] - $Xoutbound_cid[$o]';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			$o++;
			}
		}
	$SUB=202;
	$ADD=31;
	}


######################
# ADD=211 adds the new list to the system
######################

if ($ADD==211)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_lists' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$list_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$list_id' where id_table='vicidial_lists' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_lists where list_id='$list_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>LISTE NON AJOUTEE - il y a déjà une liste avec ce nom dans le système\n";}
	else
		{
		if ( (strlen($campaign_id) < 2) or (strlen($list_name) < 2)  or ($list_id < 100) or (strlen($list_id) > 8) )
			{
			echo "<br>LISTE NON AJOUTEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID de la liste doit contenir entre 2 et 8 caractères\n";
			echo "<br>Le nom de la liste doit contenir au moins 2 caractères\n";
			echo "<br>ID de la liste must be greater than 100\n";
			}
		else
			{
			echo "<br><B>LISTE AJOUTEE: $list_id</B>\n";

			$stmt="INSERT INTO vicidial_lists (list_id,list_name,campaign_id,active,list_description,list_changedate) values('$list_id','$list_name','$campaign_id','$active','$list_description','$SQLdate');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='ADD', record_id='$list_id', event_code='ADMIN ADD LIST', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=311;
	}



######################
# ADD=2111 adds the new inbound group to the system
######################

if ($ADD==2111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_inbound_groups' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$group_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$group_id' where id_table='vicidial_inbound_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_inbound_groups where group_id='$group_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>GROUPE NON AJOUTE - il y a déjà un groupe dans le système avec cet identifiant\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$group_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>GROUP NOT ADDED - there is already a campaign in the system with this ID\n";}
		else
			{
			if ( (strlen($group_id) < 2) or (strlen($group_name) < 2)  or (strlen($group_color) < 2) or (strlen($group_id) > 20) or (eregi(' ',$group_id)) or (eregi("\-",$group_id)) or (eregi("\+",$group_id)) )
				{
				echo "<br>GROUPE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>L'ID du groupe doit contenir entre 2 et 20 caractères et ne contenir aucun ' -+'.\n";
				echo "<br>Le nom et la couleur du groupe doivent contenir au moins 2 caractères\n";
				}
			else
				{
				$stmt="INSERT INTO vicidial_inbound_groups (group_id,group_name,group_color,active,web_form_address,voicemail_ext,next_agent_call,fronter_display,ingroup_script,get_call_launch,web_form_address_two,start_call_url,dispo_call_url,add_lead_url,na_call_url,user_group) values('$group_id','$group_name','$group_color','$active','" . mysql_real_escape_string($web_form_address) . "','$voicemail_ext','$next_agent_call','$fronter_display','$script_id','$get_call_launch','','','','','','$user_group');";
				$rslt=mysql_query($stmt, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats (campaign_id) values('$group_id');";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats_debug (campaign_id) values('$group_id');";
				$rslt=mysql_query($stmtA, $link);

				echo "<br><B>GROUPE AJOUTE: $group_id</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='ADD', record_id='$group_id', event_code='ADMIN ADD INBOUND GROUP', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=3111;
	}


######################
# ADD=2011 adds copied inbound group to the system
######################

if ($ADD==2011)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_inbound_groups' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$group_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$group_id' where id_table='vicidial_inbound_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_inbound_groups where group_id='$group_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>GROUPE NON AJOUTE - il y a déjà un groupe dans le système avec cet identifiant\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$group_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>GROUP NOT ADDED - there is already a campaign in the system with this ID\n";}
		else
			{
			if ( (strlen($group_id) < 2) or (strlen($group_name) < 2) or (strlen($group_id) > 20) or (eregi(' ',$group_id)) or (eregi("\-",$group_id)) or (eregi("\+",$group_id)) )
				{
				echo "<br>GROUPE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>L'ID du groupe doit contenir entre 2 et 20 caractères et ne contenir aucun ' -+'.\n";
				echo "<br>Le nom et la couleur du groupe doivent contenir au moins 2 caractères\n";
				}
			else
				{
				$stmt="INSERT INTO vicidial_inbound_groups (group_id,group_name,group_color,active,web_form_address,voicemail_ext,next_agent_call,fronter_display,ingroup_script,get_call_launch,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,drop_call_seconds,drop_action,drop_exten,call_time_id,after_hours_action,after_hours_message_filename,after_hours_exten,after_hours_voicemail,welcome_message_filename,moh_context,onhold_prompt_filename,prompt_interval,agent_alert_exten,agent_alert_delay,default_xfer_group,queue_priority,drop_inbound_group,ingroup_recording_override,ingroup_rec_filename,afterhours_xfer_group,qc_enabled,qc_statuses,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,play_place_in_line,play_estimate_hold_time,hold_time_option,hold_time_option_seconds,hold_time_option_exten,hold_time_option_voicemail,hold_time_option_xfer_group,hold_time_option_callback_filename,hold_time_option_callback_list_id,hold_recall_xfer_group,no_delay_call_route,play_welcome_message,answer_sec_pct_rt_stat_one,answer_sec_pct_rt_stat_two,default_group_alias,no_agent_no_queue,no_agent_action,no_agent_action_value,web_form_address_two,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,ignore_list_script_override,extension_appended_cidname,uniqueid_status_display,uniqueid_status_prefix,hold_time_option_minimum,hold_time_option_press_filename,hold_time_option_callmenu,onhold_prompt_no_block,onhold_prompt_seconds,hold_time_option_no_block,hold_time_option_prompt_seconds,hold_time_second_option,hold_time_third_option,wait_hold_option_priority,wait_time_option,wait_time_second_option,wait_time_third_option,wait_time_option_seconds,wait_time_option_exten,wait_time_option_voicemail,wait_time_option_xfer_group,wait_time_option_callmenu,wait_time_option_callback_filename,wait_time_option_callback_list_id,wait_time_option_press_filename,wait_time_option_no_block,wait_time_option_prompt_seconds,timer_action_destination,calculate_estimated_hold_seconds,add_lead_url,eht_minimum_prompt_filename,eht_minimum_prompt_no_block,eht_minimum_prompt_seconds,on_hook_ring_time,na_call_url,on_hook_cid,action_xfer_cid,drop_callmenu,after_hours_callmenu,user_group,max_calls_method,max_calls_count,max_calls_action) SELECT \"$group_id\",\"$group_name\",group_color,\"N\",web_form_address,voicemail_ext,next_agent_call,fronter_display,ingroup_script,get_call_launch,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,drop_call_seconds,drop_action,drop_exten,call_time_id,after_hours_action,after_hours_message_filename,after_hours_exten,after_hours_voicemail,welcome_message_filename,moh_context,onhold_prompt_filename,prompt_interval,agent_alert_exten,agent_alert_delay,default_xfer_group,queue_priority,drop_inbound_group,ingroup_recording_override,ingroup_rec_filename,afterhours_xfer_group,qc_enabled,qc_statuses,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,play_place_in_line,play_estimate_hold_time,hold_time_option,hold_time_option_seconds,hold_time_option_exten,hold_time_option_voicemail,hold_time_option_xfer_group,hold_time_option_callback_filename,hold_time_option_callback_list_id,hold_recall_xfer_group,no_delay_call_route,play_welcome_message,answer_sec_pct_rt_stat_one,answer_sec_pct_rt_stat_two,default_group_alias,no_agent_no_queue,no_agent_action,no_agent_action_value,web_form_address_two,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,ignore_list_script_override,extension_appended_cidname,uniqueid_status_display,uniqueid_status_prefix,hold_time_option_minimum,hold_time_option_press_filename,hold_time_option_callmenu,onhold_prompt_no_block,onhold_prompt_seconds,hold_time_option_no_block,hold_time_option_prompt_seconds,hold_time_second_option,hold_time_third_option,wait_hold_option_priority,wait_time_option,wait_time_second_option,wait_time_third_option,wait_time_option_seconds,wait_time_option_exten,wait_time_option_voicemail,wait_time_option_xfer_group,wait_time_option_callmenu,wait_time_option_callback_filename,wait_time_option_callback_list_id,wait_time_option_press_filename,wait_time_option_no_block,wait_time_option_prompt_seconds,timer_action_destination,calculate_estimated_hold_seconds,add_lead_url,eht_minimum_prompt_filename,eht_minimum_prompt_no_block,eht_minimum_prompt_seconds,on_hook_ring_time,na_call_url,on_hook_cid,action_xfer_cid,drop_callmenu,after_hours_callmenu,user_group,max_calls_method,max_calls_count,max_calls_action from vicidial_inbound_groups where group_id=\"$source_group_id\";";
				$rslt=mysql_query($stmt, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats (campaign_id) values('$group_id');";
				$rslt=mysql_query($stmtA, $link);

				$stmtA="INSERT INTO vicidial_campaign_stats_debug (campaign_id) values('$group_id');";
				$rslt=mysql_query($stmtA, $link);

				echo "<br><B>GROUPE AJOUTE: $group_id</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='COPY', record_id='$group_id', event_code='GROUPE ADMINE D'ARRIVÉE DE COPY', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=3111;
	}


######################
# ADD=2311 adds the new did to the system
######################

if ($ADD==2311)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_inbound_dids where did_pattern='$did_pattern';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>NE PAS AJOUTER - il ya déjà un DID dans le système avec cette ID\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_inbound_dids where did_pattern='$did_pattern';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>NE PAS AJOUTER - il ya déjà un DID dans le système avec cette extension\n";}
		else
			{
			if ( (strlen($did_pattern) < 2) or (eregi(' ',$did_pattern)) or (eregi('-',$did_pattern)) or (eregi("\+",$did_pattern)) )
				{
				echo "<br>NE PAS AJOUTER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>DID Extension must be between 2 and 20 characters in length and contain no ' -+'.\n";
				}
			else
				{
				$stmt="INSERT INTO vicidial_inbound_dids (did_pattern,did_description,user_group) values('$did_pattern','$did_description','$user_group');";
				$rslt=mysql_query($stmt, $link);

				$stmt="SELECT did_id from vicidial_inbound_dids where did_pattern='$did_pattern';";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				$did_id = $row[0];

				echo "<br><B>DID ADDED: $did_pattern $did_description    - $did_id</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DIDS', event_type='ADD', record_id='$did_id', event_code='ADMIN ADD DID', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=3311;
	}


######################
# ADD=2411 adds copied did to the system
######################

if ($ADD==2411)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_inbound_dids where did_pattern='$did_pattern';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>NE PAS AJOUTER - il ya déjà un DID dans le système avec cette extension\n";}
	else
		{
		if ( (strlen($source_did) < 1) or (strlen($did_pattern) < 1) or (eregi(' ',$source_did)) or (eregi(' ',$did_pattern)) or (eregi("\+",$source_did)) )
			{
			echo "<br>NE PAS AJOUTER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>DID Extension must be between 2 and 20 characters in length and contain no ' -+'.\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_inbound_dids (did_pattern,did_description,did_active,did_route,extension,exten_context,voicemail_ext,phone,server_ip,user,user_unavailable_action,user_route_settings_ingroup,group_id,call_handle_method,agent_search_method,list_id,campaign_id,phone_code,menu_id,record_call,filter_inbound_number,filter_phone_group_id,filter_url,filter_action,filter_extension,filter_exten_context,filter_voicemail_ext,filter_phone,filter_server_ip,filter_user,filter_user_unavailable_action,filter_user_route_settings_ingroup,filter_group_id,filter_call_handle_method,filter_agent_search_method,filter_list_id,filter_campaign_id,filter_phone_code,filter_menu_id,filter_clean_cid_number,custom_one,custom_two,custom_three,custom_four,custom_five,user_group) SELECT \"$did_pattern\",\"$did_description\",did_active,did_route,extension,exten_context,voicemail_ext,phone,server_ip,user,user_unavailable_action,user_route_settings_ingroup,group_id,call_handle_method,agent_search_method,list_id,campaign_id,phone_code,menu_id,record_call,filter_inbound_number,filter_phone_group_id,filter_url,filter_action,filter_extension,filter_exten_context,filter_voicemail_ext,filter_phone,filter_server_ip,filter_user,filter_user_unavailable_action,filter_user_route_settings_ingroup,filter_group_id,filter_call_handle_method,filter_agent_search_method,filter_list_id,filter_campaign_id,filter_phone_code,filter_menu_id,filter_clean_cid_number,custom_one,custom_two,custom_three,custom_four,custom_five,user_group from vicidial_inbound_dids where did_id=\"$source_did\";";
			$rslt=mysql_query($stmt, $link);

			$stmt="SELECT did_id from vicidial_inbound_dids where did_pattern='$did_pattern';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$did_id = $row[0];

			echo "<br><B>DID ADDED: $did_pattern     - $did_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DIDS', event_type='COPY', record_id='$did_id', event_code='ADMIN COPY DID', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=3311;
	}


######################
# ADD=2511 adds the new call menu to the system
######################

if ($ADD==2511)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_call_menu' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$menu_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$menu_id' where id_table='vicidial_call_menu' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_call_menu where menu_id='$menu_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{
		echo "<br>CALL MENU SANS ADDITION - there is already a CALL MENU in the system with this ID\n";
		$ADD=1500;
		}
	else
		{
		if ( (preg_match("/^vicidial$/i",$menu_id)) or (preg_match("/^vicidial-auto$/i",$menu_id)) or (preg_match("/^general$/i",$menu_id)) or (preg_match("/^globals$/i",$menu_id)) or (preg_match("/^default$/i",$menu_id)) or (preg_match("/^trunkinbound$/i",$menu_id)) or (preg_match("/^loopback-no-log$/i",$menu_id)) or (preg_match("/^monitor_exit$/i",$menu_id)) or (preg_match("/^monitor$/i",$menu_id)) )
			{
			echo "<br>CALL MENU SANS ADDITION - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>ID Menu Appel ne pouvez pas utiliser des mots réservés: vicidial, vicidial-auto, general, globals, default, trunkinbound, loopback-no-log, monitor_exit, monitor\n";
			$ADD=1500;
			}
		else
			{
			if ( (strlen($menu_id) < 2) or (eregi(' ',$menu_id)) )
				{
				echo "<br>CALL MENU SANS ADDITION - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>Appel menu ID doit être comprise entre 2 et 50 caractères de long et ne contiennent aucune ' '.\n";
				$ADD=1500;
				}
			else
				{
				$stmt="INSERT INTO vicidial_call_menu (menu_id,menu_name,user_group) values('$menu_id','$menu_name','$user_group');";
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>CALL MENU AJOUTEE: $menu_id $menu_name</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLMENUS', event_type='ADD', record_id='$menu_id', event_code='ADMIN ADD CALL MENU', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				$ADD=3511;
				}
			}
		}
	}


######################
# ADD=2611 adds copied call menu to the system
######################

if ($ADD==2611)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_call_menu' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$menu_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$menu_id' where id_table='vicidial_call_menu' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_call_menu where menu_id='$menu_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{
		echo "<br>CALL MENU SANS ADDITION - there is already a CALL MENU in the system with this ID\n";
		$ADD=1500;
		}
	else
		{
		if ( (preg_match("/^vicidial$/i",$menu_id)) or (preg_match("/^vicidial-auto$/i",$menu_id)) or (preg_match("/^general$/i",$menu_id)) or (preg_match("/^globals$/i",$menu_id)) or (preg_match("/^default$/i",$menu_id)) or (preg_match("/^trunkinbound$/i",$menu_id)) or (preg_match("/^loopback-no-log$/i",$menu_id)) or (preg_match("/^monitor_exit$/i",$menu_id)) or (preg_match("/^monitor$/i",$menu_id)) )
			{
			echo "<br>CALL MENU SANS ADDITION - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>ID Menu Appel ne pouvez pas utiliser des mots réservés: vicidial, vicidial-auto, general, globals, default, trunkinbound, loopback-no-log, monitor_exit, monitor\n";
			$ADD=1500;
			}
		else
			{
			if ( (strlen($menu_id) < 2) or (eregi(' ',$menu_id)) or  (strlen($source_menu) < 2) or (eregi(' ',$source_menu)) )
				{
				echo "<br>CALL MENU SANS ADDITION - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>Appel menu ID doit être comprise entre 2 et 50 caractères de long et ne contiennent aucune ' '.\n";
				$ADD=1500;
				}
			else
				{
				$stmt="INSERT INTO vicidial_call_menu (menu_id,menu_name,menu_prompt,menu_timeout,menu_timeout_prompt,menu_invalid_prompt,menu_repeat,menu_time_check,call_time_id,track_in_vdac,custom_dialplan_entry,tracking_group,dtmf_log,dtmf_field,user_group) SELECT \"$menu_id\",\"$menu_name\",menu_prompt,menu_timeout,menu_timeout_prompt,menu_invalid_prompt,menu_repeat,menu_time_check,call_time_id,track_in_vdac,custom_dialplan_entry,tracking_group,dtmf_log,dtmf_field,user_group from vicidial_call_menu where menu_id=\"$source_menu\";";
				$rslt=mysql_query($stmt, $link);

				$stmtA="INSERT INTO vicidial_call_menu_options (menu_id,option_value,option_description,option_route,option_route_value,option_route_value_context) SELECT \"$menu_id\",option_value,option_description,option_route,option_route_value,option_route_value_context from vicidial_call_menu_options where menu_id='$source_menu';";
				$rslt=mysql_query($stmtA, $link);

				echo "<br><B>CALL MENU AJOUTEE: $menu_id     - $menu_name</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|$stmtA";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLMENUS', event_type='COPY', record_id='$menu_id', event_code='ADMIN COPY MENU', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				$ADD=3511;
				}
			}
		}
	}


######################
# ADD=2711 adds the new filter phone group to the system
######################

if ($ADD==2711)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_filter_phone_groups where filter_phone_group_id='$filter_phone_group_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>TÉLÉPHONE filtre de groupe PAS AJOUTÉE - il ya déjà un groupe TÉLÉPHONE FILTRE dans le système avec cet ID\n";}
	else
		{
		if ( (strlen($filter_phone_group_id) < 2) or (strlen($filter_phone_group_id) > 20) or (eregi(' ',$filter_phone_group_id)) )
			{
			echo "<br>PHONE FILTER GROUPE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>ID Group Téléphone filtre doit être comprise entre 2 et 20 caractères de longueur et ne contiennent pas ' '.\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_filter_phone_groups (filter_phone_group_id,filter_phone_group_name,filter_phone_group_description,user_group) values('$filter_phone_group_id','$filter_phone_group_name','$filter_phone_group_description','$user_group');";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>TÉLÉPHONE filtre de groupe AJOUTÉE: $filter_phone_group_id $filter_phone_group_name</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTERPHONEGROUPS', event_type='ADD', record_id='$filter_phone_group_id', event_code='ADMIN AJOUTER LE FILTRE PHONE GROUP', event_sql=\"$SQL_log\", event_notes='$filter_phone_group_name';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=3711;
	}


######################
# ADD=21111 adds new remote agents to the system
######################

if ($ADD==21111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_remote_agents where server_ip='$server_ip' and user_start='$user_start';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>AGENT DISTANT NON AJOUTE - il y a déjà un agent distant avec cet identifiant\n";}
	else
		{
		### check for a valid user that will be associated with this account
		$stmt="SELECT count(*) from vicidial_users where user='$user_start' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] < 1)
			{echo "<br>AGENTS DISTANTS NOT ADDED - vous devez utiliser un utilisateur valide que l'user_start pour les agents à distance\n";}
		else
			{
			### check for closest remote agents to this account to ensure no overlapping
			$user_finish = ($user_start + $number_of_lines);
			$stmt="SELECT count(*) from vicidial_remote_agents where user_start >= '$user_start' and user_start < '$user_finish';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ($row[0] > 0)
				{echo "<br>AGENTS DISTANTS NOT ADDED - votre nombre de chevauchements de lignes avec un autre agent à distance\n";}
			else
				{
				if ( (strlen($server_ip) < 2) or (strlen($user_start) < 2)  or (strlen($campaign_id) < 2) or (strlen($conf_exten) < 2) )
					{
					echo "<br>AGENT DISTANT NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
					echo "<br>Le début de l'ID de l'utilisateur et l'extension externe doivent contenir au moins 2 caractères\n";
					}
				else
					{
					$stmt="INSERT INTO vicidial_remote_agents (user_start,number_of_lines,server_ip,conf_exten,status,campaign_id,closer_campaigns) values('$user_start','$number_of_lines','$server_ip','$conf_exten','$status','$campaign_id','$groups_value');";
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>AGENT DISTANT AJOUTE: $user_start</B>\n";

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='REMOTEAGENTS', event_type='ADD', record_id='$user_start', event_code='ADMIN ADD REMOTE AGENT', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		}
	$ADD=10000;
	}


######################
# ADD=22111 adds new extension group entry to the system
######################

if ($ADD==22111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_extension_groups where extension_group_id='$extension_group_id' and extension='$extension';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>ENTRÉE DU GROUPE D'EXTENSION PAS AJOUTÉE - il ya déjà une entrée de groupe d'extension avec ces valeurs\n";}
	else
		{
		if ( (strlen($extension_group_id) < 2) or (strlen($extension) < 2)  or (strlen($rank) < 1) )
			{
			echo "<br>ENTRÉE DU GROUPE D'EXTENSION PAS AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>extension group id and extension and rank must be at least 2 characters in length\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_extension_groups (extension_group_id,extension,rank,campaign_groups) values('$extension_group_id','$extension','$rank','$campaign_groups');";
			$rslt=mysql_query($stmt, $link);

			$stmt="SELECT extension_id from vicidial_extension_groups where extension_group_id='$extension_group_id' and extension='$extension';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$extension_id = $row[0];

			echo "<br><B>ENTRÉE DU GROUPE extension ajoutée: $extension_id - $extension_group_id - $extension</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='EXTENGROUP', event_type='ADD', record_id='$extension_id', event_code='ADMIN ADD EXTENSION GROUP', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=12000;
	}


######################
# ADD=211111 adds new user group to the system
######################

if ($ADD==211111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_user_groups' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$user_group = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$user_group' where id_table='vicidial_user_groups' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_user_groups where user_group='$user_group';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>GROUP D'UTILISATEURS NON AJOUTE - il y a déjà un groupe d'utilisateurs avec ce nom\n";}
	else
		{
		if ( (strlen($user_group) < 2) or (strlen($group_name) < 2) )
			{
			echo "<br>GROUPE D'UTILISATEURS NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Le nom et la description du groupe doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$allowed_user_group_insert_SQL = '---ALL---';
			$allowed_campaign_insert_SQL = '-ALL-CAMPAIGNS-';
			# if admin user's user group does not have --ALL-- then add this new user group to their user group's allowable user groups
			if ($admin_viewable_groupsALL < 1)
				{
				$UPDATEadmin_viewable_groups =	$LOGadmin_viewable_groups;
				$UPDATEadmin_viewable_groups = preg_replace("/ $/"," $user_group ",$UPDATEadmin_viewable_groups);
				$LOGadmin_viewable_groups = $UPDATEadmin_viewable_groups;

				$stmt="UPDATE vicidial_user_groups SET admin_viewable_groups='$UPDATEadmin_viewable_groups' where user_group='$LOGuser_group';";
				$rslt=mysql_query($stmt, $link);

				$allowed_user_group_insert_SQL = " $user_group -";

				$rawLOGadmin_viewable_groupsSQL = preg_replace("/ -/",'',$LOGadmin_viewable_groups);
				$rawLOGadmin_viewable_groupsSQL = preg_replace("/ /","','",$rawLOGadmin_viewable_groupsSQL);
				$LOGadmin_viewable_groupsSQL = "and user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
				$whereLOGadmin_viewable_groupsSQL = "where user_group IN('---ALL---','$rawLOGadmin_viewable_groupsSQL')";
				}
			if ( (!eregi("-ALL",$LOGallowed_campaigns)) )
				{
				$allowed_campaign_insert_SQL = $LOGallowed_campaigns;
				}

			$stmt="INSERT INTO vicidial_user_groups(user_group,group_name,allowed_campaigns,admin_viewable_groups) values('$user_group','$group_name','$allowed_campaign_insert_SQL','$allowed_user_group_insert_SQL');";
			$rslt=mysql_query($stmt, $link);


			echo "<br><B>GROUPE D'UTILISATEURS AJOUTE: $user_group</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='USERGROUPS', event_type='ADD', record_id='$user_group', event_code='ADMIN AJOUTER UN GROUPE D'UTILISATEURS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='$group_name';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################
				}
			}
		}
	$ADD=100000;
	}

######################
# ADD=2111111 adds new script to the system
######################

if ($ADD==2111111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_scripts' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$script_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$script_id' where id_table='vicidial_scripts' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_scripts where script_id='$script_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>SCRIPT NON AJOUTE - il y a déjà un script existant avec ce nom\n";}
	else
		{
		if ( (strlen($script_id) < 2) or (strlen($script_name) < 2) or (strlen($script_text) < 2) )
			{
			echo "<br>SCRIPT NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Les nom, description et texte du script doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_scripts values('$script_id','$script_name','$script_comments','" . mysql_real_escape_string($script_text) . "','$active','$user_group');";
			$rslt=mysql_query($stmt, $link);
			if ($DB > 0) {echo "|$stmt|";}
			echo "<br><B>SCRIPT AJOUTE: $script_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SCRIPTS', event_type='ADD', record_id='$script_id', event_code='ADMIN AJOUTER UN SCRIPT', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=1000000;
	}


######################
# ADD=21111111 adds new filter to the system
######################

if ($ADD==21111111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_lead_filters' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$lead_filter_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$lead_filter_id' where id_table='vicidial_lead_filters' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_lead_filters where lead_filter_id='$lead_filter_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>FILTRE NON AJOUTE - il y a déjà un filtre avec cet identifiant\n";}
	else
		{
		if ( (strlen($lead_filter_id) < 2) or (strlen($lead_filter_name) < 2) or (strlen($lead_filter_sql) < 2) )
			{
			echo "<br>FILTRE NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Identifiant du filtre, le nom et le SQL doivent au moins contenir 2 caractères\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_lead_filters SET lead_filter_id='$lead_filter_id',lead_filter_name='$lead_filter_name',user_group='$user_group',lead_filter_comments='$lead_filter_comments',lead_filter_sql='" . mysql_real_escape_string($lead_filter_sql) . "';";
			$rslt=mysql_query($stmt, $link);

			if ($DB > 0) {echo "|$stmt|";}
			echo "<br><B>FILTRE AJOUTE: $lead_filter_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTRES', event_type='ADD', record_id='$lead_filter_id', event_code='ADMIN AJOUTER LE FILTRE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=10000000;
	}


######################
# ADD=211111111 adds new call time definition to the system
######################

if ($ADD==211111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_call_times where call_time_id='$call_time_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>DEFINITION DE LA PERIODE D'APPEL NON AJOUTEE - il existe déjà une période d'appel avec cet ID\n";}
	else
		{
		if ( (strlen($call_time_id) < 2) or (strlen($call_time_name) < 2) )
			{
			echo "<br>DEFINITION DE LA PERIODE D'APPEL NON AJOUTEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID et le nom de la période d'appel doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_call_times SET call_time_id='$call_time_id',call_time_name='$call_time_name',call_time_comments='$call_time_comments',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);
			if ($DB > 0) {echo "|$stmt|";}

			echo "<br><B>PERIODE D'APPELS AJOUTEE: $call_time_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES', event_type='ADD', record_id='$call_time_id', event_code='ADMIN ADD CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=311111111;
	}


######################
# ADD=2111111111 adds new state call time definition to the system
######################

if ($ADD==2111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_state_call_times where state_call_time_id='$call_time_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>DEFINITION DE LA PERIODE D'APPELS DE L'ETAT NON AJOUTE - il existe déjà une période d'appel avec cet ID\n";}
	else
		{
		if ( (strlen($call_time_id) < 2) or (strlen($call_time_name) < 2) or (strlen($state_call_time_state) < 2) )
			{
			echo "<br>DEFINITION DE LA PERIODE D'APPELS DE L'ETAT NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID, le nom et l'état de l'appel doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$stmt="INSERT INTO vicidial_state_call_times SET state_call_time_id='$call_time_id',state_call_time_name='$call_time_name',state_call_time_comments='$call_time_comments',state_call_time_state='$state_call_time_state',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);
			if ($DB > 0) {echo "|$stmt|";}

			echo "<br><B>PERIODE D'APPELS D'ETAT AJOUTEE: $call_time_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES_STATE', event_type='ADD', record_id='$call_time_id', event_code='ADMIN ADD STATE CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=3111111111;
	}


######################
# ADD=231111111 adds new shift definition to the system
######################

if ($ADD==231111111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='vicidial_shifts' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$shift_id = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$shift_id' where id_table='vicidial_shifts' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_shifts where shift_id='$shift_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>MAJ définition pas AJOUTÉS - il ya déjà un quart d'entrée avec cette ID\n";}
	else
		{
		$shift_length_test = eregi_replace(':','',$shift_length);
		if ( (strlen($shift_id) < 2) or (strlen($shift_name) < 2) or (strlen($shift_start_time) < 4) or (strlen($shift_start_time) > 4) or (strlen($shift_length) < 5) or (strlen($shift_length) > 5) or ($shift_start_time > 2359) or ($shift_length_test > 2400) )
			{
			echo "<br>MAJ définition pas AJOUTÉS - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Shift ID et le nom doit être d'au moins 2 caractères\n";
			echo "<br>Start Time Shift 4 chiffres doit être de longueur et une heure valide\n";
			echo "<br>Shift Longueur doit être de 5 caractères de longueur et de 24 heures ou moins\n";
			}
		else
			{
			$p=0;
			$shift_weekdays_ct = count($shift_weekdays);
			while ($p <= $shift_weekdays_ct)
				{
				$SHIFT_weekdays .= "$shift_weekdays[$p]";
				$p++;
				}
			$stmt="INSERT INTO vicidial_shifts SET shift_id='$shift_id',shift_name='$shift_name',shift_start_time='$shift_start_time',shift_length='$shift_length',report_option='$report_option',shift_weekdays='$SHIFT_weekdays',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);
			if ($DB > 0) {echo "|$stmt|";}

			echo "<br><B>SHIFT AJOUTÉS:$shift_id</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SHIFTS', event_type='ADD', record_id='$shift_id', event_code='ADMIN ADD SHIFT', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=331111111;
	}


######################
# ADD=21111111111 adds new phone to the system
######################

if ($ADD==21111111111)
	{
	##### BEGIN ID override optional section, if enabled it increments user by 1 ignoring entered value #####
	$stmt = "SELECT value FROM vicidial_override_ids where id_table='phones' and active='1';";
	$rslt=mysql_query($stmt, $link);
	$voi_ct = mysql_num_rows($rslt);
	if ($voi_ct > 0)
		{
		$row=mysql_fetch_row($rslt);
		$extension = ($row[0] + 1);

		$stmt="UPDATE vicidial_override_ids SET value='$extension' where id_table='phones' and active='1';";
		$rslt=mysql_query($stmt, $link);
		}
	##### END ID override optional section #####

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from phones where extension='$extension' and server_ip='$server_ip';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>TELEPHONE NON AJOUTE - il y a déjà un téléphone dans le systéme avec cette extension/serveur\n";}
	else
		{
		$stmt="SELECT count(*) from phones where login='$login';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>PHONE NOT ADDED - il existe déjà un numéro de téléphone dans le système avec ce login\n";}
		else
			{
			$stmt="SELECT count(*) from phones_alias where alias_id='$login';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ($row[0] > 0)
				{echo "<br>PHONE NOT ADDED - il existe déjà un numéro de téléphone alias dans le système avec ce login\n";}
			else
				{
				$stmt="SELECT count(*) from vicidial_voicemail where voicemail_id='$voicemail_id';";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				if ($row[0] > 0)
					{echo "<br>PHONE NOT ADDED - there is already a ID vocale in the system with this ID\n";}
				else
					{
					if ( (strlen($extension) < 1) or (strlen($server_ip) < 7) or (strlen($dialplan_number) < 1) or (strlen($voicemail_id) < 1) or (strlen($login) < 1)  or (strlen($pass) < 1))
						{
						echo "<BR>TELEPHONE NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
						echo "<BR>Les champs suivants doivent avoir des données: extension, server_ip, dialplan_number, voicemail_id, login, pass\n";
						}
					else
						{
						echo "<br>TELEPHONE AJOUTE\n";

						$stmt="INSERT INTO phones (extension,dialplan_number,voicemail_id,phone_ip,computer_ip,server_ip,login,pass,status,active,phone_type,fullname,company,picture,protocol,local_gmt,outbound_cid,conf_secret,voicemail_timezone,user_group) values('$extension','$dialplan_number','$voicemail_id','$phone_ip','$computer_ip','$server_ip','$login','$pass','$status','$active','$phone_type','$fullname','$company','$picture','$protocol','$local_gmt','$outbound_cid','$conf_secret','$SSdefault_voicemail_timezone','$user_group');";
						$rslt=mysql_query($stmt, $link);

						$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
						$rslt=mysql_query($stmtA, $link);

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONES', event_type='ADD', record_id='$extension', event_code='ADMIN ADD PHONE', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}
				}
			}
		}
	$ADD=31111111111;
	}


######################
# ADD=22111111111 adds new phone alias to the system
######################

if ($ADD==22111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from phones_alias where alias_id='$alias_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>PAS DE TELEPHONE ALIAS AJOUTÉS - il existe déjà un numéro de téléphone Alias dans le système avec cette ID\n";}
	else
		{
		$stmt="SELECT count(*) from phones where login='$alias_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>PAS DE TELEPHONE ALIAS AJOUTÉS - il existe déjà un numéro de téléphone dans le système Connectez-vous avec cette ID\n";}
		else
			{
			if ( (strlen($alias_id) < 1) or (strlen($alias_name) < 2) )
				{echo "<br>PAS DE TELEPHONE ALIAS AJOUTÉS - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>PHONE ALIAS AJOUTÉS\n";

				$stmt="INSERT INTO phones_alias (alias_id,alias_name,logins_list,user_group) values('$alias_id','$alias_name','$logins_list','$user_group');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONEALIASES', event_type='ADD', record_id='$alias_id', event_code='ADMIN ADD PHONE ALIAS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=32111111111;
	}


######################
# ADD=23111111111 adds new group alias to the system
######################

if ($ADD==23111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from groups_alias where group_alias_id='$group_alias_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>GROUPE ALIAS pas ajouté - il existe déjà un numéro de téléphone Alias dans le système avec cette ID\n";}
	else
		{
		if (preg_match("/AGENT_PHONE|CUSTOMER|CAMPAIGN|NONE/",$group_alias_id))
			{echo "<br>GROUPE ALIAS pas ajouté - vous ne pouvez pas utiliser des mots réservés dans le groupe des alias\n";}
		else
			{
			if ( (strlen($group_alias_id) < 1) or (strlen($group_alias_name) < 2) )
				{echo "<br>GROUPE ALIAS pas ajouté - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>GROUPE ALIAS AJOUTÉS\n";

				$stmt="INSERT INTO groups_alias (group_alias_id,group_alias_name,caller_id_number,caller_id_name,active,user_group) values('$group_alias_id','$group_alias_name','$caller_id_number','$caller_id_name','$active','$user_group');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='GROUPALIASES', event_type='ADD', record_id='$group_alias_id', event_code='ADMIN ADD GROUP ALIAS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=33111111111;
	}


######################
# ADD=211111111111 adds new server to the system
######################

if ($ADD==211111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from servers where server_id='$server_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>SERVEUR NON AJOUTE - il y a déjà un serveur dans le système avec cet ID\n";}
	else
		{
		if ( (strlen($server_id) < 1) or (strlen($server_ip) < 7) )
			{echo "<br>SERVEUR NON AJOUTE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>SERVEUR AJOUTE\n";

			$stmt="INSERT INTO servers (server_id,server_description,server_ip,active,asterisk_version,conf_secret,local_gmt,user_group) values('$server_id','$server_description','$server_ip','$active','$asterisk_version','$SSdefault_server_password','$SSdefault_local_gmt','$user_group');";
			$rslt=mysql_query($stmt, $link);

			$stmtA="UPDATE servers SET rebuild_conf_files='Y',rebuild_music_on_hold='Y',sounds_update='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
			$rslt=mysql_query($stmtA, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERS', event_type='ADD', record_id='$server_id', event_code='ADMIN ADD SERVER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=311111111111;
	}


######################
# ADD=221111111111 adds the new vicidial server trunk record to the system
######################

if ($ADD==221111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT max_vicidial_trunks from servers where server_ip='$server_ip';";
	$rslt=mysql_query($stmt, $link);
	$rowx=mysql_fetch_row($rslt);
	$MAXvicidial_trunks = $rowx[0];
	
	$stmt="SELECT sum(dedicated_trunks) from vicidial_server_trunks where server_ip='$server_ip' and campaign_id !='$campaign_id';";
	$rslt=mysql_query($stmt, $link);
	$rowx=mysql_fetch_row($rslt);
	$SUMvicidial_trunks = ($rowx[0] + $dedicated_trunks);
	
	if ($SUMvicidial_trunks > $MAXvicidial_trunks)
		{
		echo "<br>TRUNK DU SERVEUR VICIDIAL NON AJOUTE - le nombre de trunks vicidial est trop important: $SUMvicidial_trunks / $MAXvicidial_trunks\n";
		}
	else
		{
		$stmt="SELECT count(*) from vicidial_server_trunks where campaign_id='$campaign_id' and server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>TRUNK DU SERVEUR VICIDIAL NON AJOUTE - il y a déjà un trunk-serveur enregistré pour cette campagne\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($server_ip) < 7) or (strlen($dedicated_trunks) < 1) or (strlen($trunk_restriction) < 1) )
				{
				echo "<br>TRUNK DU SERVEUR VICIDIAL NON AJOUTE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>la campagne doit contenir entre 3 et 8 caractères\n";
				echo "<br>le délai du server_ip doit contenir au moins 7 caractères\n";
				echo "<br>les trunks doivent être un nombre entre 0 et 9999\n";
				}
			else
				{
				echo "<br><B>TRUNK DU SERVEUR VICIDIAL AJOUTE: $campaign_id - $server_ip - $dedicated_trunks - $trunk_restriction</B>\n";

				$stmt="INSERT INTO vicidial_server_trunks(server_ip,campaign_id,dedicated_trunks,trunk_restriction) values('$server_ip','$campaign_id','$dedicated_trunks','$trunk_restriction');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERS_TRUNK', event_type='ADD', record_id='$server_ip', event_code='ADMIN ADD SERVEUR TRUNK', event_sql=\"$SQL_log\", event_notes='campaign: $campaign_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=311111111111;
	}


######################
# ADD=231111111111 adds new conf template to the system
######################

if ($ADD==231111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_conf_templates where template_id='$template_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CONF TEMPLATE pas ajouté - il existe déjà un modèle dans le système avec cette ID\n";}
	else
		{
		if (strlen($template_id) < 2)
			{echo "<br>CONF TEMPLATE pas ajouté - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>CONF TEMPLATE AJOUTÉS\n";

			$stmt="INSERT INTO vicidial_conf_templates (template_id,template_name,template_contents,user_group) values('$template_id','$template_name','$template_contents','$user_group');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONFTEMPLATES', event_type='ADD', record_id='$template_id', event_code='ADMIN ADD CONF TEMPLATE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=331111111111;
	}


######################
# ADD=241111111111 adds new server carrier to the system
######################

if ($ADD==241111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_server_carriers where carrier_id='$carrier_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CARRIER pas ajouté - il ya déjà un transporteur dans le système avec cette ID\n";}
	else
		{
		if ( (strlen($carrier_id) < 2) or (strlen($server_ip) < 7) )
			{echo "<br>CARRIER pas ajouté - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>CARRIER ADDED\n";

			$stmt="INSERT INTO vicidial_server_carriers (carrier_id,carrier_name,registration_string,template_id,account_entry,protocol,globals_string,dialplan_entry,server_ip,active,carrier_description,user_group) values('$carrier_id','$carrier_name','$registration_string','$template_id','$account_entry','$protocol','$globals_string','$dialplan_entry','$server_ip','N','$carrier_description','$user_group');";
			$rslt=mysql_query($stmt, $link);

			$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
			$rslt=mysql_query($stmtA, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CARRIERS', event_type='ADD', record_id='$carrier_id', event_code='ADMIN ADD CARRIER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=341111111111;
	}


######################
# ADD=240111111111 adds copied server carrier to the system
######################

if ($ADD==240111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_server_carriers where carrier_id='$carrier_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CARRIER pas ajouté - il ya déjà un transporteur dans le système avec cette ID\n";}
	else
		{
		if ( (strlen($carrier_id) < 2) or (strlen($server_ip) < 7) )
			{echo "<br>CARRIER pas ajouté - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>CARRIER COPIE AJOUTÉE\n";

			$stmt="INSERT INTO vicidial_server_carriers (carrier_id,carrier_name,registration_string,template_id,account_entry,protocol,globals_string,dialplan_entry,server_ip,active,carrier_description,user_group) SELECT \"$carrier_id\",\"$carrier_name\",registration_string,template_id,account_entry,protocol,globals_string,dialplan_entry,\"$server_ip\",\"N\",carrier_description,user_group from vicidial_server_carriers where carrier_id=\"$source_carrier\";";
			$rslt=mysql_query($stmt, $link);

			$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
			$rslt=mysql_query($stmtA, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CARRIERS', event_type='COPY', record_id='$carrier_id', event_code='ADMIN COPY CARRIER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=341111111111;
	}


######################
# ADD=251111111111 adds new tts entry to the system
######################

if ($ADD==251111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_tts_prompts where tts_id='$tts_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>TTS entrée non AJOUTEE - il existe déjà une entrée dans le système TTS avec cette ID\n";}
	else
		{
		if ( (strlen($tts_id) < 2) or (strlen($tts_name) < 3) )
			{echo "<br>TTS entrée non AJOUTEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>TTS Entry Ajoutée\n";

			$stmt="INSERT INTO vicidial_tts_prompts SET tts_id='$tts_id',tts_name='$tts_name',active='$active',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='TTS', event_type='ADD', record_id='$tts_id', event_code='ADMIN ADD TTS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=351111111111;
	}


######################
# ADD=261111111111 adds new music on hold entry to the system
######################

if ($ADD==261111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_music_on_hold where moh_id='$moh_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>MUSIC ON HOLD entrée non AJOUTEE - il existe déjà une entrée dans le système de moh avec cette ID\n";}
	else
		{
		if ( (strlen($moh_id) < 2) or (strlen($moh_name) < 3) or ($moh_id=='sounds') or ($moh_id=='agi-bin') or ($moh_id=='astdb') or ($moh_id=='keys') )
			{echo "<br>MUSIC ON HOLD entrée non AJOUTEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>MUSIC ON HOLD Entry Ajoutée\n";

			$stmt="INSERT INTO vicidial_music_on_hold SET moh_id='$moh_id',moh_name='$moh_name',random='$random',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='MOH', event_type='ADD', record_id='$moh_id', event_code='ADMIN ADD MOH', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=361111111111;
	}


######################
# ADD=271111111111 adds new voicemail box to the system
######################

if ($ADD==271111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_voicemail where voicemail_id='$voicemail_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>La boîte vocale PAS AJOUTEE - il existe déjà une boîte vocale dans le système avec cette ID\n";}
	else
		{
		$stmt="SELECT count(*) from phones where voicemail_id='$voicemail_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>La boîte vocale PAS AJOUTEE - il ya déjà un téléphone dans le système avec ce message vocal ID\n";}
		else
			{
			if ( (strlen($voicemail_id) < 2) or (strlen($pass) < 2) or (strlen($fullname) < 3) )
				{echo "<br>La boîte vocale PAS AJOUTEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>La boîte vocale AJOUTEE\n";

				$stmt="INSERT INTO vicidial_voicemail SET voicemail_id='$voicemail_id',pass='$pass',email='$email',fullname='$fullname',active='$active',voicemail_timezone='$SSdefault_voicemail_timezone',user_group='$user_group';";
				$rslt=mysql_query($stmt, $link);

				$stmt="SELECT active_voicemail_server from system_settings;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				$active_voicemail_server = $row[0];

				$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$active_voicemail_server';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='VOICEMAIL', event_type='ADD', record_id='$voicemail_id', event_code='ADMIN ADD VOICEMAIL', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=371111111111;
	}


######################
# ADD=281111111111 adds new screen label to the system
######################

if ($ADD==281111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_screen_labels where label_id='$label_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>LABEL ECRAN PAS AJOUTÉE - il ya déjà une étiquette dans le système avec cet ID\n";}
	else
		{
		if ( (strlen($label_id) < 2) or (strlen($label_name) < 2) )
			{echo "<br>LABEL ECRAN PAS AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>LABEL supplémentaire de l'écran\n";

			$stmt="INSERT INTO vicidial_screen_labels SET label_id='$label_id',label_name='$label_name',active='N',user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LABELS', event_type='ADD', record_id='$label_id', event_code='ADMIN ADD LABEL', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=381111111111;
	}


######################
# ADD=291111111111 adds new contact to the system
######################

if ($ADD==291111111111)
	{
	if ( (preg_match("/contact_information/",$SStables_use_alt_log_db)) and (strlen($SSalt_log_server_ip)>4) and (strlen($SSalt_log_dbname)>0) )
		{
		$linkALT=mysql_connect("$SSalt_log_server_ip", "$SSalt_log_login", "$SSalt_log_pass");
		mysql_select_db("$SSalt_log_dbname", $linkALT);
		}
	else
		{$linkALT = $link;}
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from contact_information where first_name='$first_name' and last_name='$last_name' and office_num='$office_num';";
	$rslt=mysql_query($stmt, $linkALT);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>Contact non AJOUTÉE - il ya déjà un contact dans le système avec ce nom et le numéro\n";}
	else
		{
		if (strlen($last_name) < 2)
			{echo "<br>Contact non AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>Contact ajouté\n";

			$stmt="INSERT INTO contact_information SET first_name='$first_name',last_name='$last_name',office_num='$office_num',cell_num='$cell_num',other_num1='$other_num1',other_num2='$other_num2',bu_name='$bu_name',department='$department',group_name='$group_name',job_title='$job_title',location='$location';";
			$rslt=mysql_query($stmt, $linkALT);
			$contact_id = mysql_insert_id($linkALT);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONTACTS', event_type='ADD', record_id='$contact_id', event_code='ADMIN ADD CONTACT', event_sql=\"$SQL_log\", event_notes='$first_name $last_name $office_num';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=391111111111;
	}


######################
# ADD=2111111111111 adds new conference to the system
######################

if ($ADD==2111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CONFERENCE NON AJOUTEE - il y a déjà une conférence dans le système avec cet ID\n";}
	else
		{
		if ( (strlen($conf_exten) < 1) or (strlen($server_ip) < 7) )
			{echo "<br>CONFERENCE NON AJOUTEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>CONFERENCE AJOUTEE\n";

			$stmt="INSERT INTO conferences (conf_exten,server_ip) values('$conf_exten','$server_ip');";
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=3111111111111;
	}


######################
# ADD=21111111111111 adds new vicidial conference to the system
######################

if ($ADD==21111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>VICIDIAL CONFERENCE NOT ADDED - there is already a vicidial conference in the system with this ID and server\n";}
	else
		{
		if ( (strlen($conf_exten) < 1) or (strlen($server_ip) < 7) )
			{echo "<br>VICIDIAL CONFERENCE NON AJOUTEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>VICIDIAL CONFERENCE AJOUTEE\n";

			$stmt="INSERT INTO vicidial_conferences (conf_exten,server_ip) values('$conf_exten','$server_ip');";
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=31111111111111;
	}


######################
# ADD=221111111111111 adds the new system status to the system
######################

if ($ADD==221111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_campaign_statuses where status='$status_id' $LOGallowed_campaignsSQL;";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>STATUT DE SYSTÈME NON SUPPLÉMENTAIRE - there is already a campaign-status in the system with this name: $row[0]\n";}
	else
		{
		$stmt="SELECT count(*) from vicidial_statuses where status='$status_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] > 0)
			{echo "<br>STATUT DE SYSTÈME NON SUPPLÉMENTAIRE - there is already a global-status in the system with this name\n";}
		else
			{
			if ( (strlen($status_id) < 1) or (strlen($status_name) < 2) )
				{
				echo "<br>STATUT DE SYSTÈME NON SUPPLÉMENTAIRE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut doit contenir entre 1 et 8 caractères\n";
				echo "<br>le nom du statut doit contenir entre 2 et 30 caractères\n";
				}
			else
				{
				echo "<br><B>STATUT DE SYSTÈME SUPPLÉMENTAIRE: $status_name - $status_id</B>\n";

				$stmt="INSERT INTO vicidial_statuses (status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed) values('$status_id','$status_name','$selectable','$human_answered','$category','$sale','$dnc','$customer_contact','$not_interested','$unworkable','$scheduled_callbacks','$completed');";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SYSTEMSTATUSES', event_type='ADD', record_id='$status_id', event_code='ADMIN ADD SYSTEM STATUS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	$ADD=321111111111111;
	}


######################
# ADD=231111111111111 adds the new status category to the system
######################

if ($ADD==231111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_status_categories where vsc_id='$vsc_id';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>CATÉGORIE DE STATUT NON SUPPLÉMENTAIRE - il y a déjà une catégorie de statut dans le système avec cetteidentification: $row[0]\n";}
	else
		{
		if ( (strlen($vsc_id) < 2) or (strlen($vsc_id) > 20) or (strlen($vsc_name) < 2) )
			{
			echo "<br>CATÉGORIE DE STATUT NON SUPPLÉMENTAIRE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'identification doit être entre 2 et 20 caractères de longueur\n";
			echo "<br>le nom nommé doit être entre 2 et 50 caractères de longueur\n";
			}
		else
			{
			echo "<br><B>STATUS CATÉGORIE ADDED: $vsc_id - $vsc_name</B>\n";

			$stmt="SELECT count(*) from vicidial_status_categories where tovdad_display='Y' and vsc_id NOT IN('$vsc_id');";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ( ($row[0] > 3) and (ereg('Y',$tovdad_display)) )
				{
				$tovdad_display = 'N';
				echo "<br><B>ERREUR : Il y a déjà ensemble de 4 catégories de statut àl'affichage de TimeOnVDAD</B>\n";
				}

			$stmt="INSERT INTO vicidial_status_categories (vsc_id,vsc_name,vsc_description,tovdad_display,sale_category,dead_lead_category) values('$vsc_id','$vsc_name','$vsc_description','$tovdad_display','$sale_category','$dead_lead_category');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='STATUSCATEGORIES', event_type='ADD', record_id='$vsc_id', event_code='ADMIN ADD STATUS CATÉGORIE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=331111111111111;
	}



######################
# ADD=241111111111111 adds the new qc status code to the system
######################

if ($ADD==241111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	$stmt="SELECT count(*) from vicidial_qc_codes where code='$code';";
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	if ($row[0] > 0)
		{echo "<br>QC CODE ÉTAT PAS AJOUTÉS- il existe déjà un code de statut qc dans le système avec ce nom: $row[0]\n";}
	else
		{
		if ( (strlen($code) < 1) or (strlen($code_name) < 2) )
			{
			echo "<br>QC CODE ÉTAT PAS AJOUTÉS- Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>code doit être compris entre 1 et 8 caractères\n";
			echo "<br>nom de code doit être compris entre 2 et 30 caractères\n";
			}
		else
			{
			echo "<br><B>QC ÉTAT CODE AJOUTEE:$code_name - $code</B>\n";

			$stmt="INSERT INTO vicidial_qc_codes (code,code_name) values('$code','$code_name');";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='QCSTATUSES', event_type='ADD', record_id='$code', event_code='ADMIN ADD QC STATUS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	$ADD=341111111111111;
	}



######################################################################################################
######################################################################################################
#######   4 series, record modifications submitted and DB is modified, then on to 3 series forms below
######################################################################################################
######################################################################################################



######################
# ADD=4A submit user modifications to the system - ADMIN
######################

if ($ADD=="4A")
	{
	if ($LOGmodify_users==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($pass) < 2) or (strlen($full_name) < 2) or (strlen($user_level) < 1) )
			{
			echo "<br>UTILISATEUR NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Le mot de passe et le nom complet doivent chacun contenir au moins 2 caractères\n";
			}
		else
			{
			if ($SSoutbound_autodial_active < 1)
				{
				$closer_default_blended =	'0';
				$delete_filters =			'0';
				$load_leads =				'0';
				}
			echo "<br><B>UTILISATEUR MODIFIE - ADMIN: $user</B>\n";

			$stmt="UPDATE vicidial_users set pass='$pass',full_name='$full_name',user_level='$user_level',user_group='$user_group',phone_login='$phone_login',phone_pass='$phone_pass',delete_users='$delete_users',delete_user_groups='$delete_user_groups',delete_lists='$delete_lists',delete_campaigns='$delete_campaigns',delete_ingroups='$delete_ingroups',delete_remote_agents='$delete_remote_agents',load_leads='$load_leads',campaign_detail='$campaign_detail',ast_admin_access='$ast_admin_access',ast_delete_phones='$ast_delete_phones',delete_scripts='$delete_scripts',modify_leads='$modify_leads',hotkeys_active='$hotkeys_active',change_agent_campaign='$change_agent_campaign',agent_choose_ingroups='$agent_choose_ingroups',closer_campaigns='$groups_value',scheduled_callbacks='$scheduled_callbacks',agentonly_callbacks='$agentonly_callbacks',agentcall_manual='$agentcall_manual',vicidial_recording='$vicidial_recording',vicidial_transfers='$vicidial_transfers',delete_filters='$delete_filters',alter_agent_interface_options='$alter_agent_interface_options',closer_default_blended='$closer_default_blended',delete_call_times='$delete_call_times',modify_call_times='$modify_call_times',modify_users='$modify_users',modify_campaigns='$modify_campaigns',modify_lists='$modify_lists',modify_scripts='$modify_scripts',modify_filters='$modify_filters',modify_ingroups='$modify_ingroups',modify_usergroups='$modify_usergroups',modify_remoteagents='$modify_remoteagents',modify_servers='$modify_servers',view_reports='$view_reports',vicidial_recording_override='$vicidial_recording_override',alter_custdata_override='$alter_custdata_override',qc_enabled='$qc_enabled',qc_user_level='$qc_user_level',qc_pass='$qc_pass',qc_finish='$qc_finish',qc_commit='$qc_commit',add_timeclock_log='$add_timeclock_log',modify_timeclock_log='$modify_timeclock_log',delete_timeclock_log='$delete_timeclock_log',alter_custphone_override='$alter_custphone_override',vdc_agent_api_access='$vdc_agent_api_access',modify_inbound_dids='$modify_inbound_dids',delete_inbound_dids='$delete_inbound_dids',active='$active',download_lists='$download_lists',agent_shift_enforcement_override='$agent_shift_enforcement_override',manager_shift_enforcement_override='$manager_shift_enforcement_override',export_reports='$export_reports',delete_from_dnc='$delete_from_dnc',email='$email',user_code='$user_code',territory='$territory',allow_alerts='$allow_alerts',agent_choose_territories='$agent_choose_territories',custom_one='$custom_one',custom_two='$custom_two',custom_three='$custom_three',custom_four='$custom_four',custom_five='$custom_five',voicemail_id='$voicemail_id',agent_call_log_view_override='$agent_call_log_view_override',callcard_admin='$callcard_admin',agent_choose_blended='$agent_choose_blended',realtime_block_user_info='$realtime_block_user_info',custom_fields_modify='$custom_fields_modify',force_change_password='$force_change_password',agent_lead_search_override='$agent_lead_search',modify_shifts='$modify_shifts',modify_phones='$modify_phones',modify_carriers='$modify_carriers',modify_labels='$modify_labels',modify_statuses='$modify_statuses',modify_voicemail='$modify_voicemail',modify_audiostore='$modify_audiostore',modify_moh='$modify_moh',modify_tts='$modify_tts',preset_contact_search='$preset_contact_search',modify_contacts='$modify_contacts',modify_same_user_level='$modify_same_user_level',admin_hide_lead_data='$admin_hide_lead_data',admin_hide_phone_data='$admin_hide_phone_data' where user='$user' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|$stmt_grp_values|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$user', event_code='ADMIN MODIFY USER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				$user_name =		$user;
				$user_password =	$pass;
				$last_name =		$full_name;
				$is_admin =			'off';
				$roleid =			'H5';
				$status =			'Active';
				$groupid =			'1';
					if ($user_level >= 7) {$roleid = 'H3';}
					if ($user_level >= 8) {$roleid = 'H4';}
					if ($user_level >= 9) {$roleid = 'H2';}
					if ($user_level >= 9) {$is_admin = 'on';}
				$salt = substr($user_name, 0, 2);
				$salt = '$1$' . $salt . '$';
				$encrypted_password = crypt($user_password, $salt);
				### search for role in ViciDial
				$stmt = "SELECT vtiger_role FROM vtiger_vicidial_roles where user_level='$user_level';";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$vvr_ct = mysql_num_rows($rslt);
				if ($vvr_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$roleid =	$row[0];
					}

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################

				######################################
				##### BEGIN Add/Update user info in Vtiger
				$stmt="SELECT count(*) from vtiger_users where user_name='$user_name';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$found_count = $row[0];

				### user exists in vtiger, update it
				if ($found_count > 0)
					{
					$stmt="SELECT id from vtiger_users where user_name='$user_name';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$userid = $row[0];

					$stmt="SELECT count(*) from vtiger_users2group WHERE userid='$userid' and groupid='$groupid';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$usergroupcount = $row[0];

					$stmtA = "UPDATE vtiger_users SET user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status' where id='$userid';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtB = "UPDATE vtiger_user2role SET roleid='$roleid' where userid='$userid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					if ($usergroupcount < 1)
						{
						$stmt="SELECT user_group FROM vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "$stmt\n";}
						$VD_groups_ct = mysql_num_rows($rslt);
						$k=0;
						$VD_groups_list='';
						while ($k < $VD_groups_ct)
							{
							$row=mysql_fetch_row($rslt);
							$VD_groups_list .= "'$row[0]',";
							$k++;
							}
						$VD_groups_list = preg_replace("/.$/",'',$VD_groups_list);

						$stmtC = "DELETE FROM vtiger_users2group WHERE userid='$userid' and groupid IN(SELECT groupid from vtiger_groups where groupname IN($VD_groups_list));";
						if ($DB) {echo "|$stmtC|\n";}
						$rslt=mysql_query($stmtC, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtD = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
						if ($DB) {echo "|$stmtD|\n";}
						$rslt=mysql_query($stmtD, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW USER RECORD IN VTIGER
					$stmtA = "INSERT INTO vtiger_users SET user_name='$user_name',user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status',date_format='yyyy-mm-dd',first_name='',reports_to_id='',description='',title='',department='',phone_home='',phone_mobile='',phone_work='',phone_other='',phone_fax='',email1='',email2='',yahoo_id='',signature='',address_street='',address_city='',address_state='',address_country='',address_postalcode='',user_preferences='',imagename='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$userid = mysql_insert_id($linkV);
				
					$stmtB = "INSERT INTO vtiger_user2role SET userid='$userid',roleid='$roleid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtC = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
					if ($DB) {echo "|$stmtC|\n";}
					$rslt=mysql_query($stmtC, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtD = "UPDATE vtiger_users_seq SET id='$userid';";
					if ($DB) {echo "|$stmtD|\n";}
					$rslt=mysql_query($stmtD, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW USER RECORD IN VTIGER
					}
				##### END Add/Update user info in Vtiger
				######################################
				}
			### END vtiger integration

			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3;		# go to user modification below
	}


######################
# ADD=4B submit user modifications to the system - ADMIN
######################

if ($ADD=="4B")
	{
	if ($LOGmodify_users==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($pass) < 2) or (strlen($full_name) < 2) or (strlen($user_level) < 1) )
			{
			echo "<br>UTILISATEUR NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Le mot de passe et le nom complet doivent chacun contenir au moins 2 caractères\n";
			}
		else
			{
			if ($SSoutbound_autodial_active < 1)
				{
				$closer_default_blended =	'0';
				$delete_filters =			'0';
				$load_leads =				'0';
				}
			echo "<br><B>UTILISATEUR MODIFIE - ADMIN: $user</B>\n";

			$stmt="UPDATE vicidial_users set pass='$pass',full_name='$full_name',user_level='$user_level',user_group='$user_group',phone_login='$phone_login',phone_pass='$phone_pass',hotkeys_active='$hotkeys_active',agent_choose_ingroups='$agent_choose_ingroups',closer_campaigns='$groups_value',scheduled_callbacks='$scheduled_callbacks',agentonly_callbacks='$agentonly_callbacks',agentcall_manual='$agentcall_manual',vicidial_recording='$vicidial_recording',vicidial_transfers='$vicidial_transfers',closer_default_blended='$closer_default_blended',vicidial_recording_override='$vicidial_recording_override',alter_custdata_override='$alter_custdata_override',qc_enabled='$qc_enabled',qc_user_level='$qc_user_level',qc_pass='$qc_pass',qc_finish='$qc_finish',qc_commit='$qc_commit',alter_custphone_override='$alter_custphone_override',active='$active',agent_shift_enforcement_override='$agent_shift_enforcement_override',email='$email',user_code='$user_code',territory='$territory',allow_alerts='$allow_alerts',agent_choose_territories='$agent_choose_territories',custom_one='$custom_one',custom_two='$custom_two',custom_three='$custom_three',custom_four='$custom_four',custom_five='$custom_five',voicemail_id='$voicemail_id',agent_call_log_view_override='$agent_call_log_view_override',agent_choose_blended='$agent_choose_blended',agent_lead_search_override='$agent_lead_search',preset_contact_search='$preset_contact_search' where user='$user' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$user', event_code='ADMIN MODIFY USER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				$user_name =		$user;
				$user_password =	$pass;
				$last_name =		$full_name;
				$is_admin =			'off';
				$roleid =			'H5';
				$status =			'Active';
				$groupid =			'1';
					if ($user_level >= 7) {$roleid = 'H3';}
					if ($user_level >= 8) {$roleid = 'H4';}
					if ($user_level >= 9) {$roleid = 'H2';}
					if ($user_level >= 9) {$is_admin = 'on';}
				$salt = substr($user_name, 0, 2);
				$salt = '$1$' . $salt . '$';
				$encrypted_password = crypt($user_password, $salt);
				### search for role in ViciDial
				$stmt = "SELECT vtiger_role FROM vtiger_vicidial_roles where user_level='$user_level';";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$vvr_ct = mysql_num_rows($rslt);
				if ($vvr_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$roleid =	$row[0];
					}

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################

				######################################
				##### BEGIN Add/Update user info in Vtiger
				$stmt="SELECT count(*) from vtiger_users where user_name='$user_name';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$found_count = $row[0];

				### user exists in vtiger, update it
				if ($found_count > 0)
					{
					$stmt="SELECT id from vtiger_users where user_name='$user_name';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$userid = $row[0];

					$stmt="SELECT count(*) from vtiger_users2group WHERE userid='$userid' and groupid='$groupid';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$usergroupcount = $row[0];

					$stmtA = "UPDATE vtiger_users SET user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status' where id='$userid';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtB = "UPDATE vtiger_user2role SET roleid='$roleid' where userid='$userid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					if ($usergroupcount < 1)
						{
						$stmt="SELECT user_group FROM vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "$stmt\n";}
						$VD_groups_ct = mysql_num_rows($rslt);
						$k=0;
						$VD_groups_list='';
						while ($k < $VD_groups_ct)
							{
							$row=mysql_fetch_row($rslt);
							$VD_groups_list .= "'$row[0]',";
							$k++;
							}
						$VD_groups_list = preg_replace("/.$/",'',$VD_groups_list);

						$stmtC = "DELETE FROM vtiger_users2group WHERE userid='$userid' and groupid IN(SELECT groupid from vtiger_groups where groupname IN($VD_groups_list));";
						if ($DB) {echo "|$stmtC|\n";}
						$rslt=mysql_query($stmtC, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtD = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
						if ($DB) {echo "|$stmtD|\n";}
						$rslt=mysql_query($stmtD, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW USER RECORD IN VTIGER
					$stmtA = "INSERT INTO vtiger_users SET user_name='$user_name',user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status',date_format='yyyy-mm-dd',first_name='',reports_to_id='',description='',title='',department='',phone_home='',phone_mobile='',phone_work='',phone_other='',phone_fax='',email1='',email2='',yahoo_id='',signature='',address_street='',address_city='',address_state='',address_country='',address_postalcode='',user_preferences='',imagename='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$userid = mysql_insert_id($linkV);
				
					$stmtB = "INSERT INTO vtiger_user2role SET userid='$userid',roleid='$roleid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtC = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
					if ($DB) {echo "|$stmtC|\n";}
					$rslt=mysql_query($stmtC, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtD = "UPDATE vtiger_users_seq SET id='$userid';";
					if ($DB) {echo "|$stmtD|\n";}
					$rslt=mysql_query($stmtD, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW USER RECORD IN VTIGER
					}
				##### END Add/Update user info in Vtiger
				######################################
				}
			### END vtiger integration

			}
		}
		else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3;		# go to user modification below
	}


######################
# ADD=4 submit user modifications to the system
######################

if ($ADD==4)
	{
	if ($LOGmodify_users==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($pass) < 2) or (strlen($full_name) < 2) or (strlen($user_level) < 1) )
			{
			echo "<br>UTILISATEUR NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Le mot de passe et le nom complet doivent chacun contenir au moins 2 caractères\n";
			}
		else
			{
			echo "<br><B>UTILISATEUR MODIFIE: $user</B>\n";

			$stmt="UPDATE vicidial_users set pass='$pass',full_name='$full_name',user_level='$user_level',user_group='$user_group',phone_login='$phone_login',phone_pass='$phone_pass',active='$active',email='$email',user_code='$user_code',territory='$territory' where user='$user' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$user', event_code='ADMIN MODIFY USER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			###############################################################
			##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$ss_conf_ct = mysql_num_rows($rslt);
			if ($ss_conf_ct > 0)
				{
				$row=mysql_fetch_row($rslt);
				$enable_vtiger_integration =	$row[0];
				$vtiger_server_ip	=			$row[1];
				$vtiger_dbname =				$row[2];
				$vtiger_login =					$row[3];
				$vtiger_pass =					$row[4];
				$vtiger_url =					$row[5];
				}
			##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
			#############################################################

			if ($enable_vtiger_integration > 0)
				{
				### connect to your vtiger database
				$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
				if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
				echo 'Connected successfully';
				mysql_select_db("$vtiger_dbname", $linkV);

				$user_name =		$user;
				$user_password =	$pass;
				$last_name =		$full_name;
				$is_admin =			'off';
				$roleid =			'H5';
				$status =			'Active';
				$groupid =			'1';
					if ($user_level >= 7) {$roleid = 'H3';}
					if ($user_level >= 8) {$roleid = 'H4';}
					if ($user_level >= 9) {$roleid = 'H2';}
					if ($user_level >= 9) {$is_admin = 'on';}
				$salt = substr($user_name, 0, 2);
				$salt = '$1$' . $salt . '$';
				$encrypted_password = crypt($user_password, $salt);
				### search for role in ViciDial
				$stmt = "SELECT vtiger_role FROM vtiger_vicidial_roles where user_level='$user_level';";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$vvr_ct = mysql_num_rows($rslt);
				if ($vvr_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$roleid =	$row[0];
					}

				######################################
				##### BEGIN Add/Update group info in Vtiger
				$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$group_found_count = $row[0];

				### group exists in vtiger, update it
				if ($group_found_count > 0)
					{
					$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$groupid = $row[0];
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
					# Get next available id from vtiger_users_seq to use as groupid
					$stmt="SELECT id from vtiger_users_seq;";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					$row=mysql_fetch_row($rslt);
					$groupid = ($row[0] + 1);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					# Increase next available groupid with 1 so next record gets proper id
					$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
					if ($DB) {echo "$stmt\n";}
					$rslt=mysql_query($stmt, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW GROUP RECORD IN VTIGER
					}
				##### END Add/Update group info in Vtiger
				######################################

				######################################
				##### BEGIN Add/Update user info in Vtiger
				$stmt="SELECT count(*) from vtiger_users where user_name='$user_name';";
				$rslt=mysql_query($stmt, $linkV);
				if ($DB) {echo "$stmt\n";}
				if (!$rslt) {die('Could not execute: ' . mysql_error());}
				$row=mysql_fetch_row($rslt);
				$found_count = $row[0];

				### user exists in vtiger, update it
				if ($found_count > 0)
					{
					$stmt="SELECT id from vtiger_users where user_name='$user_name';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$userid = $row[0];

					$stmt="SELECT count(*) from vtiger_users2group WHERE userid='$userid' and groupid='$groupid';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$usergroupcount = $row[0];

					$stmtA = "UPDATE vtiger_users SET user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status' where id='$userid';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtB = "UPDATE vtiger_user2role SET roleid='$roleid' where userid='$userid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					if ($usergroupcount < 1)
						{
						$stmt="SELECT user_group FROM vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "$stmt\n";}
						$VD_groups_ct = mysql_num_rows($rslt);
						$k=0;
						$VD_groups_list='';
						while ($k < $VD_groups_ct)
							{
							$row=mysql_fetch_row($rslt);
							$VD_groups_list .= "'$row[0]',";
							$k++;
							}
						$VD_groups_list = preg_replace("/.$/",'',$VD_groups_list);

						$stmtC = "DELETE FROM vtiger_users2group WHERE userid='$userid' and groupid IN(SELECT groupid from vtiger_groups where groupname IN($VD_groups_list));";
						if ($DB) {echo "|$stmtC|\n";}
						$rslt=mysql_query($stmtC, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtD = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
						if ($DB) {echo "|$stmtD|\n";}
						$rslt=mysql_query($stmtD, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}
					}

				### user doesn't exist in vtiger, insert it
				else
					{
					#### BEGIN CREATE NEW USER RECORD IN VTIGER
					$stmtA = "INSERT INTO vtiger_users SET user_name='$user_name',user_password='$encrypted_password',last_name='$last_name',is_admin='$is_admin',status='$status',date_format='yyyy-mm-dd',first_name='',reports_to_id='',description='',title='',department='',phone_home='',phone_mobile='',phone_work='',phone_other='',phone_fax='',email1='',email2='',yahoo_id='',signature='',address_street='',address_city='',address_state='',address_country='',address_postalcode='',user_preferences='',imagename='';";
					if ($DB) {echo "|$stmtA|\n";}
					$rslt=mysql_query($stmtA, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$userid = mysql_insert_id($linkV);
				
					$stmtB = "INSERT INTO vtiger_user2role SET userid='$userid',roleid='$roleid';";
					if ($DB) {echo "|$stmtB|\n";}
					$rslt=mysql_query($stmtB, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtC = "INSERT INTO vtiger_users2group SET userid='$userid',groupid='$groupid';";
					if ($DB) {echo "|$stmtC|\n";}
					$rslt=mysql_query($stmtC, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					$stmtD = "UPDATE vtiger_users_seq SET id='$userid';";
					if ($DB) {echo "|$stmtD|\n";}
					$rslt=mysql_query($stmtD, $linkV);
					if (!$rslt) {die('Could not execute: ' . mysql_error());}

					#### END CREATE NEW USER RECORD IN VTIGER
					}
				##### END Add/Update user info in Vtiger
				######################################
				}
			### END vtiger integration

			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3;		# go to user modification below
	}

######################
# ADD=41 submit campaign modifications to the system - DETAIL
######################

if ($ADD==41)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ($SSoutbound_autodial_active < 1)
			{
			$adaptive_dl_diff_target =		'0';
			$dl_diff_target_method =		'ADAPT_CALC_ONLY';
			$adaptive_dropped_percentage =	'99';
			$adaptive_intensity =			'0';
			$adaptive_latest_server_time =	'2359';
			$adaptive_maximum_level =		'1.0';
			$agent_extended_alt_dial =		'N';
			$alt_number_dialing =			'N';
			$am_message_exten =				'8320';
			$amd_send_to_vmx =				'N';
			$auto_alt_dial =				'N';
			$auto_dial_level =				'1.0';
			$available_only_ratio_tally =	'Y';
			$campaign_allow_inbound =		'Y';
			$campaign_vdad_exten =			'8368';
			$concurrent_transfers =			'AUTO';
			$dial_method =					'RATIO';
			$dial_status =					'';
			$dial_timeout =					'60';
			$drop_action =					'HANGUP';
			$drop_call_seconds =			'5';
			$drop_inbound_group =			'---NONE---';
			$force_reset_hopper =			'N';
			$hopper_level =					'5';
			$lead_filter_id =				'NONE';
			$lead_order =					'DOWN';
			$list_order_mix =				'DISABLED';
			$no_hopper_leads_logins =		'Y';
			$queue_priority =				'50';
			$safe_harbor_exten =			'8300';
			$safe_harbor_audio =			'buzz';
			$safe_harbor_menu_id =			'';
			$survey_camp_record_dir =		'/home/survey';
			$survey_dtmf_digits =			'1238';
			$survey_first_audio_file =		'US_pol_survey_hello';
			$survey_method =				'AGENT_XFER';
			$survey_ni_audio_file =			'';
			$survey_ni_digit =				'8';
			$survey_ni_status =				'NI';
			$survey_no_response_action =	'OPTIN';
			$survey_opt_in_audio_file =		'US_pol_survey_transfer';
			$survey_response_digit_map =	'1-DEMOCRAT|2-REPUBLICAN|3-INDEPENDANT|8-OPTOUT|X-NO RESPONSE|';
			$survey_xfer_exten =			'8300';
			$voicemail_ext =				'';
			$cpd_amd_action =				'DISABLED';
			$drop_lockout_time =			'0';
			$call_count_limit =				'0';
			$call_count_target =			'0';
			$lead_order_randomize =			'N';
			$lead_order_secondary =			'LEAD_ASCEND';
			}
		if ( (ereg('list_activation',$stage)) or (ereg('test_call',$stage)) )
			{
			if (ereg('test_call',$stage))
				{
				$p=0;
				echo "<BR>TEST CALL:";

				if (strlen($phone_number)<6)
					{
					echo " NOT PLACED, number too small - $phone_number";
					}
				else
					{
					### insert a new lead in the system with this phone number
					$stmtA = "INSERT INTO vicidial_list SET phone_code='$phone_code',phone_number='$phone_number',list_id='$manual_dial_list_id',status='CTCALL',user='VDAD',called_since_last_reset='Y',entry_date='$SQLdate',last_local_call_time='$SQLdate',called_count='1',first_name='Test',last_name='Call',address1='Test Call',city='Springfield',state='IL',vendor_lead_code='999999',comments='$campaign_id test call placed $SQLdate',rank='99',owner='Testez des appels sortants';";
					if ($DB) {echo "$stmtA\n";}
					$rslt=mysql_query($stmtA, $link);
					$affected_rows = mysql_affected_rows($link);
					$lead_id = mysql_insert_id($link);

					### LOG INSERTION Admin Log Table, for lead ###
					$SQL_log = "$stmtA|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$NOW_TIME', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LEADS', event_type='ADD', record_id='$lead_id', event_code='ADMIN ADD TEST LEAD', event_sql=\"$SQL_log\", event_notes='';";
					$rslt=mysql_query($stmt, $link);

					### gather list_id overrides
					$stmt="SELECT campaign_cid_override FROM vicidial_lists where list_id='$manual_dial_list_id' $LOGallowed_campaignsSQL;";
					$rslt=mysql_query($stmt, $link);
					if ($DB) {echo "$stmt\n";}
					$CIDor_ct = mysql_num_rows($rslt);
					$campaign_cid_override='';
					if ($CIDor_ct > 0)
						{
						$row=mysql_fetch_row($rslt);
						$campaign_cid_override = $row[0];
						}

					$CCID_on=0;   $CCID='';
					$local_DEF = 'Local/';
					$local_AMP = '@';
					$Local_out_prefix = '9';
					$Local_dial_timeout = '60';
					if ($dial_timeout > 4) {$Local_dial_timeout = $dial_timeout;}
					$Local_dial_timeout = ($Local_dial_timeout * 1000);
					if (strlen($dial_prefix) > 0) {$Local_out_prefix = "$dial_prefix";}
					if (strlen($campaign_vdad_exten) > 0) {$VDAD_dial_exten = "$campaign_vdad_exten";}
					else {$VDAD_dial_exten = "$SSanswer_transfer_agent";}
					if (strlen($campaign_cid) > 6) {$CCID = "$campaign_cid";   $CCID_on++;}
					if (strlen($campaign_cid_override) > 6) {$CCID = "$campaign_cid_override";   $CCID_on++;}
					if (preg_match("/x/",$dial_prefix)) {$Local_out_prefix = '';}
					if (strlen($ext_context) < 1) {$ext_context='default';}
					if ($omit_phone_code > 0) {$Ndialstring = "$Local_out_prefix$phone_number";}
					else {$Ndialstring = "$Local_out_prefix$phone_code$phone_number";}

					# generate callerID for unique identifier in xfer_log file
					$PADlead_id = sprintf("%010s", $lead_id);	while (strlen($PADlead_id) > 10) {$PADlead_id = substr("$PADlead_id", 1);}
					# Create unique calleridname to track the call: VmddhhmmssLLLLLLLLLL
					$VqueryCID = "V$CIDdate$PADlead_id";

					if ($CCID_on) {$CIDstring = "\"$VqueryCID\" <$CCID>";}
					else {$CIDstring = "$VqueryCID";}

					### insert a NEW record to the vicidial_manager table to be processed
					$stmtB = "INSERT INTO vicidial_manager values('','','$SQLdate','NEW','N','$SSactive_voicemail_server','','Originate','$VqueryCID','Exten: $VDAD_dial_exten','Context: $ext_context','Channel: $local_DEF$Ndialstring$local_AMP$ext_context','Priority: 1','Callerid: $CIDstring','Timeout: $Local_dial_timeout','','','','VDACnote: $campaign_id|$lead_id|$phone_code|$phone_number|OUT|MAIN|99')";
					$rslt=mysql_query($stmtB, $link);

					### insert a SENT record to the vicidial_auto_calls table 
					$stmtC = "INSERT INTO vicidial_auto_calls (server_ip,campaign_id,status,lead_id,callerid,phone_code,phone_number,call_time,call_type,alt_dial,queue_priority) values('$SSactive_voicemail_server','$campaign_id','SENT','$lead_id','$VqueryCID','$phone_code','$phone_number','$SQLdate','OUT','MAIN','99')";
					$rslt=mysql_query($stmtC, $link);

					### LOG INSERTION Admin Log Table, for campaign ###
					$SQL_log = "$stmtA|$stmtB|$stmtC|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='OTHER', record_id='$campaign_id', event_code='ADMIN CAMPAIGN TEST CALL', event_sql=\"$SQL_log\", event_notes='';";
					$rslt=mysql_query($stmt, $link);

					if ($DB > 0) {echo "|$stmtA|\n|$stmtB|\n|$stmtC|\n";}
					echo " PLACED TO $phone_code $phone_number\n<BR>";
					}
				}

			if (ereg('list_activation',$stage))
				{
				$p=0;
				echo "<BR>LISTES D'ACTIFS MODIFIES";
				$list_active_change_ct = count($list_active_change);
				while ($p < $list_active_change_ct)
					{
					$LIST_ACTIVATE .= "'$list_active_change[$p]',";
					$p++;
					}
				
				$stmt = "UPDATE vicidial_lists SET active='Y' where list_id IN($LIST_ACTIVATE'') and campaign_id='$campaign_id';";
				$stmtB = "UPDATE vicidial_lists SET active='N' where list_id NOT IN($LIST_ACTIVATE'') and campaign_id='$campaign_id';";
				$rslt=mysql_query($stmt, $link);
				$rslt=mysql_query($stmtB, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|$stmtB|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN ACTIVE LISTS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				if ($DB > 0) {echo "|$stmt|\n|$stmtB|\n";}
				}
			}
		else
			{
			if ( (strlen($campaign_name) < 6) or (strlen($active) < 1) )
				{
				echo "<br>CAMPAGNE NON MODIFIEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le nom de la campagne doit contenir au moins 6 caractères\n";
				echo "<br>|$campaign_name|$active|\n";
				}
			else
				{
				if ($form_end != 'END')
					{
					echo "<br>CAMPAIGN NOT MODIFIED - S'il vous plaît attendre la page entière à se charger avant de soumettre le formulaire\n";
					}
				else
					{
					echo "<br><B>CAMPAGNE MODIFIEE: $campaign_id</B>\n";

					if ( ($dial_method != 'MANUAL') and ($dial_method != 'INBOUND_MAN') )
						{
						$no_hopper_dialing='N';
						$agent_dial_owner_only='NONE';
						}
					if ($no_hopper_dialing == 'Y')
						{
						$use_auto_hopper='N';
						$auto_alt_dial='NONE';
						$list_order_mix='DISABLED';
						}
					if ($dial_method == 'MANUAL') 
						{
						$auto_dial_level='0';
						$use_auto_hopper='N';
						$adlSQL = "auto_dial_level='0',";
						$campaign_allow_inbound='N';
						}
					else
						{
						if ($dial_level_override > 0)
							{
							$adlSQL = "auto_dial_level='$auto_dial_level',";
							}
						else
							{
							if ($dial_method == 'RATIO')
								{
								if ($auto_dial_level < 1) {$auto_dial_level = "1.0";}
								$adlSQL = "auto_dial_level='$auto_dial_level',";
								}
							else
								{
								$adlSQL = "";
								if ($auto_dial_level < 1) 
									{
									$auto_dial_level = "1.0";
									$adlSQL = "auto_dial_level='$auto_dial_level',";
									}
								}
							}
						}
					if ( (!ereg("DISABLED",$list_order_mix)) and ($hopper_level < 100) )
						{$hopper_level='100';}
					$closer_campaignsSQL = "'$groups_value'";
					if ( ($campaign_allow_inbound == 'N') or ($old_campaign_allow_inbound == 'N') )
						{
						$closer_campaignsSQL = 'closer_campaigns';
						$groups_list='';

						$stmt="SELECT closer_campaigns from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
						$rslt=mysql_query($stmt, $link);
						$row=mysql_fetch_row($rslt);
						$Mcloser_campaigns =	$row[0];
						$Mcloser_campaigns = preg_replace("/ -$/","",$Mcloser_campaigns);
						$groups = explode(" ", $Mcloser_campaigns);

						$o=0;
						while ($groups_to_print > $o)
							{
							$groups_list .= "<input type=\"checkbox\" name=\"groups[]\" value=\"$group_id_values[$o]\"";
							$p=0;
							$group_ct = count($groups);
							while ($p < $group_ct)
								{
								if ($group_id_values[$o] == $groups[$p]) 
									{
									$groups_list .= " CHECKED";
									$groups_value .= " $group_id_values[$o]";
									}
								$p++;
								}
							$stmt="SELECT queue_priority from vicidial_inbound_groups where group_id='$group_id_values[$o]' $LOGadmin_viewable_groupsSQL;";
							$rslt=mysql_query($stmt, $link);
							$row=mysql_fetch_row($rslt);
							$VIG_priority =			$row[0];
							$groups_list .= "> <a href=\"$PHP_SELF?ADD=3111&group_id=$group_id_values[$o]\">$group_id_values[$o]</a> - $group_name_values[$o] - $VIG_priority <BR>\n";

							$o++;
							}
						if (strlen($groups_value)>2) {$groups_value .= " -";}
						}

					$stmtA="UPDATE vicidial_campaigns set campaign_name='$campaign_name',active='$active',dial_status_a='$dial_status_a',dial_status_b='$dial_status_b',dial_status_c='$dial_status_c',dial_status_d='$dial_status_d',dial_status_e='$dial_status_e',lead_order='$lead_order',allow_closers='$allow_closers',hopper_level='$hopper_level', auto_trim_hopper='$auto_trim_hopper', use_auto_hopper='$use_auto_hopper', auto_hopper_multi='$auto_hopper_multi', $adlSQL next_agent_call='$next_agent_call', local_call_time='$local_call_time', voicemail_ext='$voicemail_ext', dial_timeout='$dial_timeout', dial_prefix='$dial_prefix', campaign_cid='$campaign_cid', campaign_vdad_exten='$campaign_vdad_exten', web_form_address='" . mysql_real_escape_string($web_form_address) . "', park_ext='$park_ext', park_file_name='$park_file_name', campaign_rec_exten='$campaign_rec_exten', campaign_recording='$campaign_recording', campaign_rec_filename='$campaign_rec_filename', campaign_script='$script_id', get_call_launch='$get_call_launch', am_message_exten='$am_message_exten', amd_send_to_vmx='$amd_send_to_vmx', xferconf_a_dtmf='$xferconf_a_dtmf',xferconf_a_number='$xferconf_a_number',xferconf_b_dtmf='$xferconf_b_dtmf',xferconf_b_number='$xferconf_b_number',lead_filter_id='$lead_filter_id',alt_number_dialing='$alt_number_dialing',scheduled_callbacks='$scheduled_callbacks',drop_action='$drop_action',drop_call_seconds='$drop_call_seconds',safe_harbor_exten='$safe_harbor_exten',wrapup_seconds='$wrapup_seconds',wrapup_message='$wrapup_message',closer_campaigns=$closer_campaignsSQL,use_internal_dnc='$use_internal_dnc',allcalls_delay='$allcalls_delay',omit_phone_code='$omit_phone_code',dial_method='$dial_method',available_only_ratio_tally='$available_only_ratio_tally',adaptive_dropped_percentage='$adaptive_dropped_percentage',adaptive_maximum_level='$adaptive_maximum_level',adaptive_latest_server_time='$adaptive_latest_server_time',adaptive_intensity='$adaptive_intensity',adaptive_dl_diff_target='$adaptive_dl_diff_target',concurrent_transfers='$concurrent_transfers',auto_alt_dial='$auto_alt_dial',agent_pause_codes_active='$agent_pause_codes_active',campaign_description='$campaign_description',campaign_changedate='$SQLdate',campaign_stats_rafraîchir='$campaign_stats_rafraîchir',disable_alter_custdata='$disable_alter_custdata',no_hopper_leads_logins='$no_hopper_leads_logins',list_order_mix='$list_order_mix',campaign_allow_inbound='$campaign_allow_inbound',manual_dial_list_id='$manual_dial_list_id',default_xfer_group='$default_xfer_group',xfer_groups='$XFERgroups_value',queue_priority='$queue_priority',drop_inbound_group='$drop_inbound_group',disable_alter_custphone='$disable_alter_custphone',display_queue_count='$display_queue_count',manual_dial_filter='$manual_dial_filter',agent_clipboard_copy='$agent_clipboard_copy',agent_extended_alt_dial='$agent_extended_alt_dial',use_campaign_dnc='$use_campaign_dnc',three_way_call_cid='$three_way_call_cid',three_way_dial_prefix='$three_way_dial_prefix',web_form_target='$web_form_target',vtiger_search_category='$vtiger_search_category',vtiger_create_call_record='$vtiger_create_call_record',vtiger_create_lead_record='$vtiger_create_lead_record',vtiger_screen_login='$vtiger_screen_login',cpd_amd_action='$cpd_amd_action',agent_allow_group_alias='$agent_allow_group_alias',default_group_alias='$default_group_alias',vtiger_search_dead='$vtiger_search_dead',vtiger_status_call='$vtiger_status_call',drop_lockout_time='$drop_lockout_time',quick_transfer_button='$quick_transfer_button',prepopulate_transfer_preset='$prepopulate_transfer_preset',drop_rate_group='$drop_rate_group',view_calls_in_queue='$view_calls_in_queue',view_calls_in_queue_launch='$view_calls_in_queue_launch',grab_calls_in_queue='$grab_calls_in_queue',call_requeue_button='$call_requeue_button',pause_after_each_call='$pause_after_each_call',no_hopper_dialing='$no_hopper_dialing',agent_dial_owner_only='$agent_dial_owner_only',agent_display_dialable_leads='$agent_display_dialable_leads',web_form_address_two='" . mysql_real_escape_string($web_form_address_two) . "',waitforsilence_options='$waitforsilence_options',agent_select_territories='$agent_select_territories',crm_popup_login='$crm_popup_login',crm_login_address='" . mysql_real_escape_string($crm_login_address) . "',timer_action='$timer_action',timer_action_message='$timer_action_message',timer_action_seconds='$timer_action_seconds',start_call_url='" . mysql_real_escape_string($start_call_url) . "',dispo_call_url='" . mysql_real_escape_string($dispo_call_url) . "',xferconf_c_number='$xferconf_c_number',xferconf_d_number='$xferconf_d_number',xferconf_e_number='$xferconf_e_number',use_custom_cid='$use_custom_cid',scheduled_callbacks_alert='$scheduled_callbacks_alert',queuemetrics_callstatus_override='$queuemetrics_callstatus',extension_appended_cidname='$extension_appended_cidname',scheduled_callbacks_count='$scheduled_callbacks_count',manual_dial_override='$manual_dial_override',blind_monitor_warning='$blind_monitor_warning',blind_monitor_message='" . mysql_real_escape_string($blind_monitor_message) . "',blind_monitor_filename='$blind_monitor_filename',inbound_queue_no_dial='$inbound_queue_no_dial',timer_action_destination='$timer_action_destination',enable_xfer_presets='$enable_xfer_presets',hide_xfer_number_to_dial='$hide_xfer_number_to_dial',manual_dial_prefix='$manual_dial_prefix',customer_3way_hangup_logging='$customer_3way_hangup_logging',customer_3way_hangup_seconds='$customer_3way_hangup_seconds',customer_3way_hangup_action='$customer_3way_hangup_action',ivr_park_call='$ivr_park_call',ivr_park_call_agi='$ivr_park_call_agi',manual_preview_dial='$manual_preview_dial',realtime_agent_time_stats='$realtime_agent_time_stats',api_manual_dial='$api_manual_dial',manual_dial_call_time_check='$manual_dial_call_time_check',lead_order_randomize='$lead_order_randomize',lead_order_secondary='$lead_order_secondary',per_call_notes='$per_call_notes',my_callback_option='$my_callback_option',agent_lead_search='$agent_lead_search',agent_lead_search_method='$agent_lead_search_method',queuemetrics_phone_environment='$queuemetrics_phone_environment',auto_pause_precall='$auto_pause_precall',auto_resume_precall='$auto_resume_precall',auto_pause_precall_code='$auto_pause_precall_code',manual_dial_cid='$manual_dial_cid',post_phone_time_diff_alert='$post_phone_time_diff_alert',custom_3way_button_transfer='$custom_3way_button_transfer',available_only_tally_threshold='$available_only_tally_threshold',available_only_tally_threshold_agents='$available_only_tally_threshold_agents',dial_level_threshold='$dial_level_threshold',dial_level_threshold_agents='$dial_level_threshold_agents',safe_harbor_audio='$safe_harbor_audio',safe_harbor_menu_id='$safe_harbor_menu_id',callback_days_limit='$callback_days_limit',dl_diff_target_method='$dl_diff_target_method',disable_dispo_screen='$disable_dispo_screen',disable_dispo_status='$disable_dispo_status',screen_labels='$screen_labels',status_display_fields='$status_display_fields',na_call_url='" . mysql_real_escape_string($na_call_url) . "',pllb_grouping='$pllb_grouping',pllb_grouping_limit='$pllb_grouping_limit',call_count_limit='$call_count_limit',call_count_target='$call_count_target',callback_hours_block='$callback_hours_block',callback_list_calltime='$callback_list_calltime',user_group='$user_group',hopper_vlc_dup_check='$hopper_vlc_dup_check' where campaign_id='$campaign_id';";
					$rslt=mysql_query($stmtA, $link);

					if ($reset_hopper == 'Y')
						{
						echo "<br>REINITIALISATION DU DISTRIBUTEUR DE FICHES DE LA CAMPAGNE\n";
						echo "<br> - Attendre 1 minute avant l'appel du numéro suivant\n";
						$stmt="DELETE from vicidial_hopper where campaign_id='$campaign_id' and status IN('READY','QUEUE','DONE');";
						$rslt=mysql_query($stmt, $link);

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='RESET', record_id='$campaign_id', event_code='ADMIN RESET CAMPAIGN LEAD HOPPER', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmtA|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN DETAIL', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=42 modify/delete campaign status in the system
######################

if ($ADD==42)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
			{
			echo "<br>STAUT DE LA CAMPAGNE NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID de la campagne doit contenir au moins 2 caractères\n";
			echo "<br>Le statut de la campagne doit contenir au moins 1 caractère\n";
			}
		else
			{
			if (ereg('delete',$stage))
				{
				echo "<br><B>STATUT PERSONNALISE DE LA CAMPAGNE SUPPRIME: $campaign_id - $status</B>\n";

				$stmt="DELETE FROM vicidial_campaign_statuses where campaign_id='$campaign_id' and status='$status';";
				$rslt=mysql_query($stmt, $link);

				$stmtA="DELETE FROM vicidial_campaign_hotkeys where campaign_id='$campaign_id' and status='$status';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_STATUS', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN STATUS', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			if (ereg('modify',$stage))
				{
				echo "<br><B>LE STATUT FAIT SUR COMMANDE DE CAMPAGNE A MODIFIÉ: $campaign_id - $status</B>\n";

				$stmt="UPDATE vicidial_campaign_statuses SET status_name='$status_name',selectable='$selectable',human_answered='$human_answered',category='$category',sale='$sale',dnc='$dnc',customer_contact='$customer_contact',not_interested='$not_interested',unworkable='$unworkable',scheduled_callback='$scheduled_callbacks',completed='$completed' where campaign_id='$campaign_id' and status='$status';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_STATUS', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN STATUS', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=22;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=43 delete campaign hotkey in the system
######################

if ($ADD==43)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) or (strlen($hotkey) < 1) )
			{
			echo "<br>RACCOURCI CLAVIER DE LA CAMPAGNE NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID de la campagne doit contenir au moins 2 caractères\n";
			echo "<br>Le statut de la campagne doit contenir au moins 1 caractère\n";
			echo "<br>the campaign hotkey needs to be at least 1 characters in length\n";
			}
		else
			{
			echo "<br><B>RACCOURCI CLAVIER PERSONNALISE DE LA CAMPAGNE SUPPRIME: $campaign_id - $status - $hotkey</B>\n";

			$stmt="DELETE FROM vicidial_campaign_hotkeys where campaign_id='$campaign_id' and status='$status' and hotkey='$hotkey';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_HOTKEY', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN HOTKEY', event_sql=\"$SQL_log\", event_notes='Etat: $status|HotKey: $hotkey';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=23;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=44 submit campaign modifications to the system - Basic View
######################

if ($ADD==44)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ($SSoutbound_autodial_active < 1)
			{
			$adaptive_dl_diff_target =		'0';
			$adaptive_dropped_percentage =	'99';
			$adaptive_intensity =			'0';
			$adaptive_latest_server_time =	'2359';
			$adaptive_maximum_level =		'1.0';
			$agent_extended_alt_dial =		'N';
			$alt_number_dialing =			'N';
			$am_message_exten =				'8320';
			$amd_send_to_vmx =				'N';
			$auto_alt_dial =				'N';
			$auto_dial_level =				'1.0';
			$available_only_ratio_tally =	'Y';
			$campaign_allow_inbound =		'Y';
			$campaign_vdad_exten =			'8368';
			$concurrent_transfers =			'AUTO';
			$dial_method =					'RATIO';
			$dial_status =					'';
			$dial_timeout =					'60';
			$drop_action =					'HANGUP';
			$drop_call_seconds =			'5';
			$drop_inbound_group =			'---NONE---';
			$force_reset_hopper =			'N';
			$hopper_level =					'5';
			$lead_filter_id =				'NONE';
			$lead_order =					'DOWN';
			$list_order_mix =				'DISABLED';
			$no_hopper_leads_logins =		'Y';
			$queue_priority =				'50';
			$safe_harbor_exten =			'8300';
			$safe_harbor_audio =			'buzz';
			$safe_harbor_menu_id =			'';
			$voicemail_ext =				'';
			}
		if (ereg('list_activation',$stage))
			{
			$p=0;
			echo "<BR>LISTES D'ACTIFS MODIFIES";
			$list_active_change_ct = count($list_active_change);
			while ($p < $list_active_change_ct)
				{
				$LIST_ACTIVATE .= "'$list_active_change[$p]',";
				$p++;
				}
			
			$stmt = "UPDATE vicidial_lists SET active='Y' where list_id IN($LIST_ACTIVATE'') and campaign_id='$campaign_id';";
			$stmtB = "UPDATE vicidial_lists SET active='N' where list_id NOT IN($LIST_ACTIVATE'') and campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			$rslt=mysql_query($stmtB, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|$stmtB|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN ACTIVE LISTS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			if ($DB > 0) {echo "|$stmt|\n|$stmtB|\n";}
			}
		else
			{
			if ( (strlen($campaign_name) < 6) or (strlen($active) < 1) )
				{
				echo "<br>CAMPAGNE NON MODIFIEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le nom de la campagne doit contenir au moins 6 caractères\n";
				}
			else
				{
				echo "<br><B>CAMPAGNE MODIFIEE: $campaign_id</B>\n";

				if ($dial_method == 'RATIO')
					{
					if ($auto_dial_level < 1) {$auto_dial_level = "1.0";}
					$adlSQL = "auto_dial_level='$auto_dial_level',";
					}
				else
					{
					if ($dial_method == 'MANUAL') 
						{
						$auto_dial_level='0';
						$adlSQL = "auto_dial_level='0',";
						}
					else
						{
						$adlSQL = "";
						if ($auto_dial_level < 1) 
							{
							$auto_dial_level = "1.0";
							$adlSQL = "auto_dial_level='$auto_dial_level',";
							}
						}
					}
				if ( (!ereg("DISABLED",$list_order_mix)) and ($hopper_level < 100) )
					{$hopper_level='100';}

				$stmtA="UPDATE vicidial_campaigns set campaign_name='$campaign_name',active='$active',dial_status_a='$dial_status_a',dial_status_b='$dial_status_b',dial_status_c='$dial_status_c',dial_status_d='$dial_status_d',dial_status_e='$dial_status_e',lead_order='$lead_order',hopper_level='$hopper_level', $adlSQL lead_filter_id='$lead_filter_id',dial_method='$dial_method',adaptive_intensity='$adaptive_intensity',campaign_changedate='$SQLdate',list_order_mix='$list_order_mix' where campaign_id='$campaign_id';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmtA|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN BASIC', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				if ($reset_hopper == 'Y')
					{
					echo "<br>REINITIALISATION DU DISTRIBUTEUR DE FICHES DE LA CAMPAGNE\n";
					echo "<br> - Attendre 1 minute avant l'appel du numéro suivant\n";
					$stmt="DELETE from vicidial_hopper where campaign_id='$campaign_id' and status IN('READY','QUEUE','DONE');;";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='RESET', record_id='$campaign_id', event_code='ADMIN RESET CAMPAIGN LEAD HOPPER', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=34;	# go to campaign modification form below
	}


######################
# ADD=45 modify campaign lead recycle in the system
######################

if ($ADD==45)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) or ($attempt_delay < 120) or ($attempt_delay >= 43200) or ($attempt_maximum < 1) or ($attempt_maximum > 10) )
			{
			echo "<br>CAMPAIGN LEAD RECYCLE NOT MODIFIED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
			echo "<br>le délai d'attente doit être au moins 120 secondes et moins de 43,200 secondes ou 12 heures\n";
			echo "<br>le nombre d'essais maximum doit être compris entre 1 et 10\n";
			}
		else
			{
			echo "<br><B>CAMPAIGN LEAD MODIFIED: $campaign_id - $status - $attempt_delay</B>\n";

			$stmt="UPDATE vicidial_lead_recycle SET attempt_delay='$attempt_delay',attempt_maximum='$attempt_maximum',active='$active' where campaign_id='$campaign_id' and status='$status';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_RECYCLE', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN LEAD RECYCLE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=25;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=47 modify agent pause code in the system
######################

if ($ADD==47)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($pause_code) < 1) or (strlen($pause_code) > 6) or (strlen($pause_code_name) < 2) )
			{
			echo "<br>CODE DE PAUSE NON MODIFIE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>pause_code must be between 1 and 6 characters in length\n";
			echo "<br>pause_nom de code doit être compris entre 2 et 30 caractères\n";
			}
		else
			{
			echo "<br><B>AGENT PAUSE CODE MODIFIED: $campaign_id - $pause_code - $pause_code_name</B>\n";

			$stmt="UPDATE vicidial_pause_codes SET pause_code_name='$pause_code_name',billable='$billable' where campaign_id='$campaign_id' and pause_code='$pause_code';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PAUSECODE', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN PAUSE CODE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=27;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=48 modify campaign QC settings in the system
######################
if ($ADD==48)
	{
	if ( ($LOGmodify_campaigns==1) and ($SSqc_features_active) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($campaign_id) < 2)
			{
			echo "<br>QC SETTINGS PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			}
		else
			{
			$p=0;
			$qc_statuses_ct = count($qc_statuses);
			while ($p < $qc_statuses_ct)
				{
				$QC_statuses .= " $qc_statuses[$p]";
				$p++;
				}
			$p=0;
			$qc_lists_ct = count($qc_lists);
			while ($p < $qc_lists_ct)
				{
				$QC_lists .= " $qc_lists[$p]";
				$p++;
				}
			
			if (strlen($QC_statuses)>0) {$QC_statuses .= " -";}
			if (strlen($QC_lists)>0) {$QC_lists .= " -";}

			echo "<br><B>QC SETTINGS mise à jour: $campaign_id</B>\n";

			$stmt="UPDATE vicidial_campaigns SET qc_enabled='$qc_enabled',qc_statuses='$QC_statuses',qc_lists='$QC_lists',qc_web_form_address='$qc_web_form_address',qc_script='$qc_script',qc_get_record_launch='$qc_get_record_launch',qc_show_recording='$qc_show_recording',qc_shift_id='$qc_shift_id' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_QC', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN QC SETTINGS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=28;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=40A modify campaign survey settings in the system
######################

if ($ADD=='40A')
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($campaign_id) < 2)
			{
			echo "<br>SONDAGE SETTINGS PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			}
		else
			{
			echo "<br><B>SONDAGE SETTINGS mise à jour: $campaign_id</B>\n";

			$stmt="UPDATE vicidial_campaigns SET survey_first_audio_file='$survey_first_audio_file',survey_dtmf_digits='$survey_dtmf_digits',survey_ni_digit='$survey_ni_digit',survey_opt_in_audio_file='$survey_opt_in_audio_file',survey_ni_audio_file='$survey_ni_audio_file',survey_method='$survey_method',survey_no_response_action='$survey_no_response_action',survey_ni_status='$survey_ni_status',survey_response_digit_map='$survey_response_digit_map',survey_xfer_exten='$survey_xfer_exten',survey_camp_record_dir='$survey_camp_record_dir',voicemail_ext='$voicemail_ext',survey_third_digit='$survey_third_digit',survey_fourth_digit='$survey_fourth_digit',survey_third_audio_file='$survey_third_audio_file',survey_fourth_audio_file='$survey_fourth_audio_file',survey_third_status='$survey_third_status',survey_fourth_status='$survey_fourth_status',survey_third_exten='$survey_third_exten',survey_fourth_exten='$survey_fourth_exten',survey_menu_id='$survey_menu_id',survey_recording='$survey_recording' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_SURVEY', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN SURVEY', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB='20A';
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=49 modify campaign list mix in the system
######################

if ($ADD==49)
	{
	if ($LOGmodify_campaigns==1)
		{
		##### MODIFY a list mix container entry #####
		if ($stage=='MODIFY')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			$Flist_mix_container = "list_mix_container_$vcl_id";
			$Fmix_method = "mix_method_$vcl_id";
			$Fstatus = "status_$vcl_id";
			$Fvcl_name = "vcl_name_$vcl_id";

			if (isset($_GET[$Flist_mix_container]))				{$list_mix_container=$_GET[$Flist_mix_container];}
				elseif (isset($_POST[$Flist_mix_container]))	{$list_mix_container=$_POST[$Flist_mix_container];}
			if (isset($_GET[$Fmix_method]))						{$mix_method=$_GET[$Fmix_method];}
				elseif (isset($_POST[$Fmix_method]))			{$mix_method=$_POST[$Fmix_method];}
			if (isset($_GET[$Fstatus]))							{$status=$_GET[$Fstatus];}
				elseif (isset($_POST[$Fstatus]))				{$status=$_POST[$Fstatus];}
			if (isset($_GET[$Fvcl_name]))						{$vcl_name=$_GET[$Fvcl_name];}
				elseif (isset($_POST[$Fvcl_name]))				{$vcl_name=$_POST[$Fvcl_name];}
			$list_mix_container = preg_replace("/:$/","",$list_mix_container);

			 if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) or (strlen($list_mix_container) < 6) or (strlen($vcl_name) < 2) )
				{
				echo "<br>MÉLANGE DE LISTE NON MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				echo "<br>vcl_name name must be between 2 and 30 characters in length\n";
				}
			 else
				{
				$stmt="UPDATE vicidial_campaigns_list_mix SET vcl_name='$vcl_name',mix_method='$mix_method',list_mix_container='$list_mix_container' where campaign_id='$campaign_id' and vcl_id='$vcl_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN LIST MIX', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>LE MÉLANGE DE LISTE A MODIFIÉ: $campaign_id - $vcl_id - $vcl_name</B>\n";
				}
			}

		##### ADD a list mix container entry #####
			if ($stage=='ADD')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) or (strlen($list_id) < 1) )
				{
				echo "<br>MÉLANGE DE LISTE NON MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				echo "<br>list_id must be at least 2 characters in length\n";
				}
			else
				{
				$stmt="SELECT list_mix_container from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and vcl_id='$vcl_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				$OLDlist_mix_container =	$row[0];
				$NEWlist_mix_container = "$OLDlist_mix_container:$list_id|10|0| -|";

				$stmt="UPDATE vicidial_campaigns_list_mix SET list_mix_container='$NEWlist_mix_container' where campaign_id='$campaign_id' and vcl_id='$vcl_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN LIST MIX', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>LE MÉLANGE DE LISTE A MODIFIÉ: $campaign_id - $vcl_id - $list_id</B>\n";
				}
			}

		##### REMOVE a list mix container entry #####
			if ($stage=='REMOVE')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) or (strlen($list_id) < 1) )
				{
				echo "<br>MÉLANGE DE LISTE NON MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				echo "<br>list_id must be at least 2 characters in length\n";
				}
			else
				{
				$stmt="SELECT list_mix_container from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and vcl_id='$vcl_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				$MIXentries = $MT;
				$MIXentries = explode(":", $row[0]);
				$Ms_to_print = (count($MIXentries) - 0);

				if ($Ms_to_print < 2)
					{
					echo "<br><B>MÉLANGE DE LISTE NON MODIFIÉ: Vous ne pouvez pas supprimer la dernière entrée de list_id d'unmélange de liste</B>\n";
					}
				else
					{
					$MIXdetailsPCT = explode('|', $MIXentries[$mix_container_item]);
					$MIXpercentPCT = $MIXdetailsPCT[2];

					$q=0;
					while ($Ms_to_print > $q) 
						{
						if ( ($mix_container_item > $q) or ($mix_container_item < $q) )
							{
							if ( ($q==0) and ($mix_container_item > 0) )
								{
								$MIXdetailsONE = explode('|', $MIXentries[$q]);
								$MIXpercentONE = ($MIXdetailsONE[2] + $MIXpercentPCT);
								$NEWlist_mix_container .= "$MIXdetailsONE[0]|$MIXdetailsONE[1]|$MIXpercentONE|$MIXdetailsONE[3]|:";
								}
							else
								{
								if ( ($q==1) and ($mix_container_item < 1) )
									{
									$MIXdetailsONE = explode('|', $MIXentries[$q]);
									$MIXpercentONE = ($MIXdetailsONE[2] + $MIXpercentPCT);
									$NEWlist_mix_container .= "$MIXdetailsONE[0]|$MIXdetailsONE[1]|$MIXpercentONE|$MIXdetailsONE[3]|:";
									}
								else
									{
									$NEWlist_mix_container .= "$MIXentries[$q]:";
									}
								}
							}
						$q++;
						}
					$NEWlist_mix_container = preg_replace("/.$/",'',$NEWlist_mix_container);

					$stmt="UPDATE vicidial_campaigns_list_mix SET list_mix_container='$NEWlist_mix_container' where campaign_id='$campaign_id' and vcl_id='$vcl_id';";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN LIST MIX', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>LE MÉLANGE DE LISTE A MODIFIÉ: $campaign_id - $vcl_id - $list_id - $mix_container_item</B>\n";
					}
				}
			}

		##### ADD a NEW list mix #####
			if ($stage=='NEWMIX')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) or (strlen($vcl_name) < 2) )
				{
				echo "<br>MÉLANGE DE LISTE NON SUPPLÉMENTAIRE- Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				echo "<br>vcl_name must be at least 2 characters in length\n";
				}
			else
				{
				$stmt="SELECT count(*) from vicidial_campaigns_list_mix where vcl_id='$vcl_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				if ($row[0] > 0)
					{
					echo "<br>MÉLANGE DE LISTE NON SUPPLÉMENTAIRE- Il y a déjà un mélange de liste avec cette identification dans lesystème\n";
					}
				else
					{
					$stmt="INSERT INTO vicidial_campaigns_list_mix SET list_mix_container='$list_id|1|100| $status -|',campaign_id='$campaign_id',vcl_id='$vcl_id',vcl_name='$vcl_name',mix_method='$mix_method',status='INACTIVE';";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='ADD', record_id='$campaign_id', event_code='ADMIN AJOUTER UNE CAMPAGNE LIST MIX', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>MÉLANGE DE LISTE SUPPLÉMENTAIRE :$campaign_id - $vcl_id - $vcl_name</B>\n";
					}
				}
			}

		##### DELETE an existing list mix #####
			if ($stage=='DELMIX')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) )
				{
				echo "<br>MÉLANGE DE LISTE NON SUPPRIMÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				}
			else
				{
				$stmt="DELETE from vicidial_campaigns_list_mix where vcl_id='$vcl_id' and campaign_id='$campaign_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN LIST MIX', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>LE MÉLANGE DE LISTE A SUPPRIMÉ :$campaign_id - $vcl_id - $vcl_name</B>\n";
				}
			}

		##### Set list mix entry to active #####
			if ($stage=='SETACTIVE')
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($campaign_id) < 2) or (strlen($vcl_id) < 1) )
				{
				echo "<br>MÉLANGE DE LISTE NON ACTIVÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>vcl_id must be between 1 and 20 characters in length\n";
				}
			else
				{
				$stmt="UPDATE vicidial_campaigns_list_mix SET status='INACTIVE' where campaign_id='$campaign_id';";
				$rslt=mysql_query($stmt, $link);

				$stmt="UPDATE vicidial_campaigns_list_mix SET status='ACTIVE' where vcl_id='$vcl_id' and campaign_id='$campaign_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_LISTMIX', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN LIST MIX ACTIVE', event_sql=\"$SQL_log\", event_notes='Liste Mix: $vcl_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>MÉLANGE DE LISTE ACTIVÉ: $campaign_id - $vcl_id - $vcl_name</B>\n";
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=29;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=401 modify campaign preset in the system
######################

if ($ADD==401)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($preset_name) < 1) or (strlen($preset_number) < 1) )
			{
			echo "<br>PRESET PAS MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>preset name must be between 1 and 40 characters in length\n";
			echo "<br>preset number must be between 2 and 50 characters in length\n";
			}
		else
			{
			echo "<br><B>PRESET MODIFIED: $campaign_id - $preset_name - $preset_number</B>\n";

			$stmt="UPDATE vicidial_xfer_presets SET preset_dtmf='$preset_dtmf',preset_number='$preset_number',preset_hide_number='$preset_hide_number' where campaign_id='$campaign_id' and preset_name='$preset_name';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PRESET', event_type='MODIFY', record_id='$campaign_id', event_code='ADMIN MODIFY CAMPAIGN PRESET', event_sql=\"$SQL_log\", event_notes='Preset: $preset_name - $preset_number';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=201;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=411 submit list modifications to the system
######################

if ($ADD==411)
	{
	if ( ($LOGmodify_lists==1) and (strlen($list_id) > 1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ($stage == 'territory_reset')
			{
			$p=0;
			echo "<BR>TERRITORIES RESET";
			$territory_reset_ct = count($territory_reset);
			while ($p < $territory_reset_ct)
				{
				$TERR_RESET .= "'$territory_reset[$p]',";
				$p++;
				}
			$TERR_RESET = preg_replace("/,$/",'',$TERR_RESET);
			if (strlen($TERR_RESET) > 1)
				{
				$stmt = "UPDATE vicidial_list SET called_since_last_reset='N' where list_id='$list_id' and owner IN($TERR_RESET);";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='MODIFY', record_id='$list_id', event_code='ADMIN MODIFY LIST TERRITORY RESET', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				if ($DB > 0) {echo "|$stmt|\n";}
				}
			}
		else
			{
			if ( (strlen($list_name) < 2) or (strlen($campaign_id) < 2) )
				{
				echo "<br>LISTE NON MODIFIEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le nom de la liste doit contenir au moins 2 caractères\n";
				}
			else
				{
				if (strlen($reset_time) < 4) {$reset_time='';}

				echo "<br><B>LISTE MODIFIEE: $list_id</B>\n";

				$stmt="UPDATE vicidial_lists set list_name='$list_name',campaign_id='$campaign_id',active='$active',list_description='$list_description',list_changedate='$SQLdate',reset_time='$reset_time',agent_script_override='$agent_script_override',campaign_cid_override='$campaign_cid_override',am_message_exten_override='$am_message_exten_override',drop_inbound_group_override='$drop_inbound_group_override',xferconf_a_number='$xferconf_a_number',xferconf_b_number='$xferconf_b_number',xferconf_c_number='$xferconf_c_number',xferconf_d_number='$xferconf_d_number',xferconf_e_number='$xferconf_e_number',web_form_address='" . mysql_real_escape_string($web_form_address) . "',web_form_address_two='" . mysql_real_escape_string($web_form_address_two) . "',time_zone_setting='$time_zone_setting',inventory_report='$inventory_report' where list_id='$list_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='MODIFY', record_id='$list_id', event_code='ADMIN MODIFY LIST', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				if ($reset_list == 'Y')
					{
					echo "<br>REINITIALISATION LIST-CALLED-STATUS\n";
					$stmtB="UPDATE vicidial_list set called_since_last_reset='N' where list_id='$list_id';";
					$rslt=mysql_query($stmtB, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='RESET', record_id='$list_id', event_code='ADMIN RESET LIST', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				if ($campaign_id != "$old_campaign_id")
					{
					echo "<br>ENLEVER LES FICHES DU VIEUX DISTRIBUTEUR DE FICHES DE LA CAMAPGNE ($old_campaign_id)\n";
					$stmtC="DELETE from vicidial_hopper where list_id='$list_id' and campaign_id='$old_campaign_id';";
					$rslt=mysql_query($stmtC, $link);
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311;	# go to list modification form below
	}


######################
# ADD=4111 modify in-group info in the system
######################

if ($ADD==4111)
	{
	if ($SUB=='agents_select')
		{
		if ($LOGmodify_users==1)
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($OLDuser_group) < 2) or (strlen($group_id) < 2) )
				{
				echo "<br>UTILISATEURS NOT MODIFIED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>group id and user group must be at least 2 characters in length\n";
				}
			else
				{
				$stmt="SELECT user,closer_campaigns from vicidial_users where active='Y' and user_group='$OLDuser_group' $LOGadmin_viewable_groupsSQL order by user;";
				$rsltx=mysql_query($stmt, $link);
				$users_to_print = mysql_num_rows($rsltx);
				$ARIUG_changenotes='';
				$o=0;
				while ($users_to_print > $o) 
					{
					$rowx=mysql_fetch_row($rsltx);
					$ARIUG_user[$o] =	$rowx[0];
					$ARIUG_close[$o] =	$rowx[1];
					$ARIUG_check[$o] =	'';
					if (preg_match("/ $group_id /",$ARIUG_close[$o]))
						{$ARIUG_check[$o] = 'CHECKED';}
					if ( ($ARIUG_check[$o]=='') and ($stage=='add') )
						{
						if (strlen($ARIUG_close[$o]) < 4) {$ARIUG_close[$o]=' - ';}
						$stmtA="UPDATE vicidial_users set closer_campaigns=' $group_id$ARIUG_close[$o]' where user='$ARIUG_user[$o]';";
						$rslt=mysql_query($stmtA, $link);
						if ($DB > 0) {echo "|$stmtA|";}
						$ARIUG_changenotes .= "added $group_id to selected in-groups|";
						$ARIUG_code = "USER INGROUP VIGA ADD";
						}
					if ( ($ARIUG_check[$o]=='CHECKED') and ($stage=='remove') )
						{
						$ARIUG_close[$o] = preg_replace("/ $group_id /",' ',$ARIUG_close[$o]);
						$stmtB="UPDATE vicidial_users set closer_campaigns='$ARIUG_close[$o]' where user='$ARIUG_user[$o]';";
						$rslt=mysql_query($stmtB, $link);
						if ($DB > 0) {echo "|$stmtB|";}
						$ARIUG_changenotes .= "removed $group_id from selected in-groups|";
						$ARIUG_code = "USER INGROUP VIGA REMOVE";
						}
					if (strlen($ARIUG_changenotes) > 10)
						{
						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmtDlog|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$ARIUG_user[$o]', event_code='$ARIUG_code', event_sql=\"$SQL_log\", event_notes='$ARIUG_changenotes';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);
						}
					$o++;
					}
				}
			}
		else
			{
			echo "Vous n'avez pas la permission de voir cette page\n";
			exit;
			}
		}
	else
		{
		if ($LOGmodify_ingroups==1)
			{
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			if ( (strlen($group_name) < 2) or (strlen($group_color) < 2) )
				{
				echo "<br>GROUPE NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le nom et la couleur du groupe doivent contenir au moins 2 caractères\n";
				}
			else
				{
				if ($form_end != 'END')
					{
					echo "<br>GROUP NOT MODIFIED - S'il vous plaît attendre la page entière à se charger avant de soumettre le formulaire\n";
					}
				else
					{
					$p=0;
					$qc_statuses_ct = count($qc_statuses);
					while ($p < $qc_statuses_ct)
						{
						$QC_statuses .= " $qc_statuses[$p]";
						$p++;
						}
					$p=0;
					$qc_lists_ct = count($qc_lists);
					while ($p < $qc_lists_ct)
						{
						$QC_lists .= " $qc_lists[$p]";
						$p++;
						}
					
					if (strlen($QC_statuses)>0) {$QC_statuses .= " -";}
					if (strlen($QC_lists)>0) {$QC_lists .= " -";}


					if ($no_agent_action == "INGROUP")
						{
						if (isset($_GET["IGgroup_id_no_agent_action"]))					{$IGgroup_id=$_GET["IGgroup_id_no_agent_action"];}
							elseif (isset($_POST["IGgroup_id_no_agent_action"]))		{$IGgroup_id=$_POST["IGgroup_id_no_agent_action"];}
						if (isset($_GET["IGhandle_method_no_agent_action"]))			{$IGhandle_method=$_GET["IGhandle_method_no_agent_action"];}
							elseif (isset($_POST["IGhandle_method_no_agent_action"]))	{$IGhandle_method=$_POST["IGhandle_method_no_agent_action"];}
						if (isset($_GET["IGsearch_method_no_agent_action"]))			{$IGsearch_method=$_GET["IGsearch_method_no_agent_action"];}
							elseif (isset($_POST["IGsearch_method_no_agent_action"]))	{$IGsearch_method=$_POST["IGsearch_method_no_agent_action"];}
						if (isset($_GET["IGlist_id_no_agent_action"]))					{$IGlist_id=$_GET["IGlist_id_no_agent_action"];}
							elseif (isset($_POST["IGlist_id_no_agent_action"]))			{$IGlist_id=$_POST["IGlist_id_no_agent_action"];}
						if (isset($_GET["IGcampaign_id_no_agent_action"]))				{$IGcampaign_id=$_GET["IGcampaign_id_no_agent_action"];}
							elseif (isset($_POST["IGcampaign_id_no_agent_action"]))		{$IGcampaign_id=$_POST["IGcampaign_id_no_agent_action"];}
						if (isset($_GET["IGphone_code_no_agent_action"]))				{$IGphone_code=$_GET["IGphone_code_no_agent_action"];}
							elseif (isset($_POST["IGphone_code_no_agent_action"]))		{$IGphone_code=$_POST["IGphone_code_no_agent_action"];}
						if (strlen($IGhandle_method)<1)
							{
							if (isset($_GET["IGhandle_method_"]))			{$IGhandle_method=$_GET["IGhandle_method_"];}
								elseif (isset($_POST["IGhandle_method_"]))	{$IGhandle_method=$_POST["IGhandle_method_"];}
							}
						if (strlen($IGsearch_method)<1)
							{
							if (isset($_GET["IGsearch_method_"]))			{$IGsearch_method=$_GET["IGsearch_method_"];}
								elseif (isset($_POST["IGsearch_method_"]))	{$IGsearch_method=$_POST["IGsearch_method_"];}
							}
						if (strlen($IGlist_id)<1)
							{
							if (isset($_GET["IGlist_id_"]))				{$IGlist_id=$_GET["IGlist_id_"];}
								elseif (isset($_POST["IGlist_id_"]))	{$IGlist_id=$_POST["IGlist_id_"];}
							}
						if (strlen($IGcampaign_id)<1)
							{
							if (isset($_GET["IGcampaign_id_"]))				{$IGcampaign_id=$_GET["IGcampaign_id_"];}
								elseif (isset($_POST["IGcampaign_id_"]))	{$IGcampaign_id=$_POST["IGcampaign_id_"];}
							}
						if (strlen($IGphone_code)<1)
							{
							if (isset($_GET["IGphone_code_"]))			{$IGphone_code=$_GET["IGphone_code_"];}
								elseif (isset($_POST["IGphone_code_"]))	{$IGphone_code=$_POST["IGphone_code_"];}
							}

						$no_agent_action_value = "$IGgroup_id,$IGhandle_method,$IGsearch_method,$IGlist_id,$IGcampaign_id,$IGphone_code";
						if ($DB) {echo "\nNANQUE:     |$no_agent_action_value|$no_agent_action|\n";}
						}

					if ($no_agent_action == "EXTENSION")
						{
						if (isset($_GET["EXextension_no_agent_action"]))			{$EXextension=$_GET["EXextension_no_agent_action"];}
							elseif (isset($_POST["EXextension_no_agent_action"]))	{$EXextension=$_POST["EXextension_no_agent_action"];}
						if (isset($_GET["EXcontext_no_agent_action"]))				{$EXcontext=$_GET["EXcontext_no_agent_action"];}
							elseif (isset($_POST["EXcontext_no_agent_action"]))		{$EXcontext=$_POST["EXcontext_no_agent_action"];}

						$no_agent_action_value = "$EXextension,$EXcontext";
						}

					$no_agent_action_value = ereg_replace("[^-\/\|\_\#\*\,\.\_0-9a-zA-Z]","",$no_agent_action_value);

					echo "<br><B>GROUPE MODIFIE: $group_id</B>\n";

					$stmt="UPDATE vicidial_inbound_groups set group_name='$group_name', group_color='$group_color', active='$active', web_form_address='" . mysql_real_escape_string($web_form_address) . "', voicemail_ext='$voicemail_ext', next_agent_call='$next_agent_call', fronter_display='$fronter_display', ingroup_script='$script_id', get_call_launch='$get_call_launch', xferconf_a_dtmf='$xferconf_a_dtmf',xferconf_a_number='$xferconf_a_number', xferconf_b_dtmf='$xferconf_b_dtmf',xferconf_b_number='$xferconf_b_number',drop_action='$drop_action',drop_call_seconds='$drop_call_seconds',drop_exten='$drop_exten',call_time_id='$call_time_id',after_hours_action='$after_hours_action',after_hours_message_filename='$after_hours_message_filename',after_hours_exten='$after_hours_exten',after_hours_voicemail='$after_hours_voicemail',welcome_message_filename='$welcome_message_filename',moh_context='$moh_context',onhold_prompt_filename='$onhold_prompt_filename',prompt_interval='$prompt_interval',agent_alert_exten='$agent_alert_exten',agent_alert_delay='$agent_alert_delay',default_xfer_group='$default_xfer_group',queue_priority='$queue_priority',drop_inbound_group='$drop_inbound_group',ingroup_recording_override='$ingroup_recording_override',ingroup_rec_filename='$ingroup_rec_filename',afterhours_xfer_group='$afterhours_xfer_group',qc_enabled='$qc_enabled',qc_statuses='$QC_statuses',qc_shift_id='$qc_shift_id',qc_get_record_launch='$qc_get_record_launch',qc_show_recording='$qc_show_recording',qc_web_form_address='$qc_web_form_address',qc_script='$qc_script',play_place_in_line='$play_place_in_line',play_estimate_hold_time='$play_estimate_hold_time',hold_time_option='$hold_time_option',hold_time_option_seconds='$hold_time_option_seconds',hold_time_option_exten='$hold_time_option_exten',hold_time_option_voicemail='$hold_time_option_voicemail',hold_time_option_xfer_group='$hold_time_option_xfer_group',hold_time_option_callback_filename='$hold_time_option_callback_filename',hold_time_option_callback_list_id='$hold_time_option_callback_list_id',hold_recall_xfer_group='$hold_recall_xfer_group',no_delay_call_route='$no_delay_call_route',play_welcome_message='$play_welcome_message',answer_sec_pct_rt_stat_one='$answer_sec_pct_rt_stat_one',answer_sec_pct_rt_stat_two='$answer_sec_pct_rt_stat_two',default_group_alias='$default_group_alias',no_agent_no_queue='$no_agent_no_queue',no_agent_action='$no_agent_action',no_agent_action_value='$no_agent_action_value',web_form_address_two='" . mysql_real_escape_string($web_form_address_two) . "',timer_action='$timer_action',timer_action_message='$timer_action_message',timer_action_seconds='$timer_action_seconds',start_call_url='" . mysql_real_escape_string($start_call_url) . "',dispo_call_url='" . mysql_real_escape_string($dispo_call_url) . "',xferconf_c_number='$xferconf_c_number',xferconf_d_number='$xferconf_d_number',xferconf_e_number='$xferconf_e_number',ignore_list_script_override='$ignore_list_script_override',extension_appended_cidname='$extension_appended_cidname',uniqueid_status_display='$uniqueid_status_display',uniqueid_status_prefix='$uniqueid_status_prefix',hold_time_option_minimum='$hold_time_option_minimum',hold_time_option_press_filename='$hold_time_option_press_filename',hold_time_option_callmenu='$hold_time_option_callmenu',onhold_prompt_no_block='$onhold_prompt_no_block',onhold_prompt_seconds='$onhold_prompt_seconds',hold_time_option_no_block='$hold_time_option_no_block',hold_time_option_prompt_seconds='$hold_time_option_prompt_seconds',hold_time_second_option='$hold_time_second_option',hold_time_third_option='$hold_time_third_option',wait_hold_option_priority='$wait_hold_option_priority',wait_time_option='$wait_time_option',wait_time_second_option='$wait_time_second_option',wait_time_third_option='$wait_time_third_option',wait_time_option_seconds='$wait_time_option_seconds',wait_time_option_exten='$wait_time_option_exten',wait_time_option_voicemail='$wait_time_option_voicemail',wait_time_option_xfer_group='$wait_time_option_xfer_group',wait_time_option_callmenu='$wait_time_option_callmenu',wait_time_option_callback_filename='$wait_time_option_callback_filename',wait_time_option_callback_list_id='$wait_time_option_callback_list_id',wait_time_option_press_filename='$wait_time_option_press_filename',wait_time_option_no_block='$wait_time_option_no_block',wait_time_option_prompt_seconds='$wait_time_option_prompt_seconds',timer_action_destination='$timer_action_destination',calculate_estimated_hold_seconds='$calculate_estimated_hold_seconds',add_lead_url='" . mysql_real_escape_string($add_lead_url) . "',eht_minimum_prompt_filename='$eht_minimum_prompt_filename',eht_minimum_prompt_no_block='$eht_minimum_prompt_no_block',eht_minimum_prompt_seconds='$eht_minimum_prompt_seconds',on_hook_ring_time='$on_hook_ring_time',na_call_url='" . mysql_real_escape_string($na_call_url) . "',on_hook_cid='$on_hook_cid',action_xfer_cid='$action_xfer_cid',drop_callmenu='$drop_callmenu',after_hours_callmenu='$after_hours_callmenu',user_group='$user_group',max_calls_method='$max_calls_method',max_calls_count='$max_calls_count',max_calls_action='$max_calls_action' where group_id='$group_id';";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='MODIFY', record_id='$group_id', event_code='ADMIN MODIFY INGROUP', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		else
			{
			echo "Vous n'avez pas la permission de voir cette page\n";
			exit;
			}
		}
	$ADD=3111;	# go to in-group modification form below
	}


######################
# ADD=4311 modify did info in the system
######################

if ($ADD==4311)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($did_id) < 1) or (strlen($did_pattern) < 1) )
			{
			echo "<br>NE MODIFIE PAS - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>did_extension must be at least 1 character in length\n";
			}
		else
			{
			echo "<br><B>DID mise à jour: $did_pattern</B>\n";

			$stmt="UPDATE vicidial_inbound_dids set did_pattern='$did_pattern',did_description='$did_description',did_active='$did_active',did_route='$did_route',extension='$extension',exten_context='$exten_context',voicemail_ext='$voicemail_ext',phone='$phone',server_ip='$server_ip',user='$user',user_unavailable_action='$user_unavailable_action',user_route_settings_ingroup='$user_route_settings_ingroup',group_id='$group_id',call_handle_method='$call_handle_method',agent_search_method='$agent_search_method',list_id='$list_id',campaign_id='$campaign_id',phone_code='$phone_code',menu_id='$menu_id',record_call='$record_call',filter_inbound_number='$filter_inbound_number',filter_phone_group_id='$filter_phone_group_id',filter_url='$filter_url',filter_action='$filter_action',filter_extension='$filter_extension',filter_exten_context='$filter_exten_context',filter_voicemail_ext='$filter_voicemail_ext',filter_phone='$filter_phone',filter_server_ip='$filter_server_ip',filter_user='$filter_user',filter_user_unavailable_action='$filter_user_unavailable_action',filter_user_route_settings_ingroup='$filter_user_route_settings_ingroup',filter_group_id='$filter_group_id',filter_call_handle_method='$filter_call_handle_method',filter_agent_search_method='$filter_agent_search_method',filter_list_id='$filter_list_id',filter_campaign_id='$filter_campaign_id',filter_phone_code='$filter_phone_code',filter_menu_id='$filter_menu_id',filter_clean_cid_number='$filter_clean_cid_number',custom_one='$custom_one',custom_two='$custom_two',custom_three='$custom_three',custom_four='$custom_four',custom_five='$custom_five',user_group='$user_group' where did_id='$did_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DIDS', event_type='MODIFY', record_id='$did_id', event_code='ADMIN MODIFY DID', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3311;	# go to did modification form below
	}


######################
# ADD=4511 modify call menu info in the system
######################

if ($ADD==4511)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($menu_id) < 1)
			{
			echo "<br>CALL MENU PAS MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>menu_id must be at least 1 character in length\n";
			}
		else
			{
			echo "<br><B>CALL MENU mise à jour: $menu_id</B>\n";

			$stmt="UPDATE vicidial_call_menu set menu_name='$menu_name',menu_prompt='$menu_prompt',menu_timeout='$menu_timeout',menu_timeout_prompt='$menu_timeout_prompt',menu_invalid_prompt='$menu_invalid_prompt',menu_repeat='$menu_repeat',menu_time_check='$menu_time_check',call_time_id='$call_time_id',track_in_vdac='$track_in_vdac',custom_dialplan_entry='$custom_dialplan_entry',tracking_group='$tracking_group',dtmf_log='$dtmf_log',dtmf_field='$dtmf_field',user_group='$user_group' where menu_id='$menu_id';";
			$rslt=mysql_query($stmt, $link);

			$h=0;
			$option_value_list='|';
			while ($h <= 20)
				{
				$option_value=''; $option_description=''; $option_route=''; $option_route_value=''; $option_route_value_context='';

				if (isset($_GET["option_value_$h"]))				{$option_value=$_GET["option_value_$h"];}
					elseif (isset($_POST["option_value_$h"]))		{$option_value=$_POST["option_value_$h"];}
				if (isset($_GET["option_description_$h"]))			{$option_description=$_GET["option_description_$h"];}
					elseif (isset($_POST["option_description_$h"]))	{$option_description=$_POST["option_description_$h"];}
				if (isset($_GET["option_route_$h"]))				{$option_route=$_GET["option_route_$h"];}
					elseif (isset($_POST["option_route_$h"]))		{$option_route=$_POST["option_route_$h"];}
				if (isset($_GET["option_route_value_$h"]))			{$option_route_value=$_GET["option_route_value_$h"];}
					elseif (isset($_POST["option_route_value_$h"]))	{$option_route_value=$_POST["option_route_value_$h"];}
				if (isset($_GET["option_route_value_context_$h"]))	{$option_route_value_context=$_GET["option_route_value_context_$h"];}
					elseif (isset($_POST["option_route_value_context_$h"]))	{$option_route_value_context=$_POST["option_route_value_context_$h"];}

				if ($option_route == "INGROUP")
					{
					if (isset($_GET["IGhandle_method_$h"]))						{$IGhandle_method=$_GET["IGhandle_method_$h"];}
						elseif (isset($_POST["IGhandle_method_$h"]))			{$IGhandle_method=$_POST["IGhandle_method_$h"];}
					if (isset($_GET["IGsearch_method_$h"]))						{$IGsearch_method=$_GET["IGsearch_method_$h"];}
						elseif (isset($_POST["IGsearch_method_$h"]))			{$IGsearch_method=$_POST["IGsearch_method_$h"];}
					if (isset($_GET["IGlist_id_$h"]))							{$IGlist_id=$_GET["IGlist_id_$h"];}
						elseif (isset($_POST["IGlist_id_$h"]))					{$IGlist_id=$_POST["IGlist_id_$h"];}
					if (isset($_GET["IGcampaign_id_$h"]))						{$IGcampaign_id=$_GET["IGcampaign_id_$h"];}
						elseif (isset($_POST["IGcampaign_id_$h"]))				{$IGcampaign_id=$_POST["IGcampaign_id_$h"];}
					if (isset($_GET["IGphone_code_$h"]))						{$IGphone_code=$_GET["IGphone_code_$h"];}
						elseif (isset($_POST["IGphone_code_$h"]))				{$IGphone_code=$_POST["IGphone_code_$h"];}
					if (isset($_GET["IGvid_enter_filename_$h"]))				{$IGvid_enter_filename=$_GET["IGvid_enter_filename_$h"];}
						elseif (isset($_POST["IGvid_enter_filename_$h"]))		{$IGvid_enter_filename=$_POST["IGvid_enter_filename_$h"];}
					if (isset($_GET["IGvid_id_number_filename_$h"]))			{$IGvid_id_number_filename=$_GET["IGvid_id_number_filename_$h"];}
						elseif (isset($_POST["IGvid_id_number_filename_$h"]))	{$IGvid_id_number_filename=$_POST["IGvid_id_number_filename_$h"];}
					if (isset($_GET["IGvid_confirm_filename_$h"]))				{$IGvid_confirm_filename=$_GET["IGvid_confirm_filename_$h"];}
						elseif (isset($_POST["IGvid_confirm_filename_$h"]))		{$IGvid_confirm_filename=$_POST["IGvid_confirm_filename_$h"];}
					if (isset($_GET["IGvid_validate_digits_$h"]))				{$IGvid_validate_digits=$_GET["IGvid_validate_digits_$h"];}
						elseif (isset($_POST["IGvid_validate_digits_$h"]))		{$IGvid_validate_digits=$_POST["IGvid_validate_digits_$h"];}

					$option_route_value_context = "$IGhandle_method,$IGsearch_method,$IGlist_id,$IGcampaign_id,$IGphone_code,$IGvid_enter_filename,$IGvid_id_number_filename,$IGvid_confirm_filename,$IGvid_validate_digits";
					}

				if ($non_latin < 1)
					{
					$option_value = ereg_replace("[^-\_0-9A-Z]","",$option_value);
					$option_description = ereg_replace("[^- \:\/\_0-9a-zA-Z]","",$option_description);
					$option_route = ereg_replace("[^-\_0-9a-zA-Z]","",$option_route);
					$option_route_value = ereg_replace("[^-\/\|\_\#\*\,\.\_0-9a-zA-Z]","",$option_route_value);
					$option_route_value_context = ereg_replace("[^-\,\_0-9a-zA-Z]","",$option_route_value_context);
					}

				if (strlen($option_route) > 0)
					{
					$stmtA="SELECT count(*) from vicidial_call_menu_options where menu_id='$menu_id' and option_value='$option_value';";
					$rslt=mysql_query($stmtA, $link);
					$row=mysql_fetch_row($rslt);
					$option_exists = $row[0];

					if ($option_exists > 0)
						{
						$stmtA="UPDATE vicidial_call_menu_options SET option_description='$option_description',option_route='$option_route',option_route_value='$option_route_value',option_route_value_context='$option_route_value_context' where menu_id='$menu_id' and option_value='$option_value';";
						$rslt=mysql_query($stmtA, $link);
						$stmtAX .= "$stmtA|";
						}
					else
						{
						$stmtA="INSERT INTO vicidial_call_menu_options SET menu_id='$menu_id',option_value='$option_value',option_description='$option_description',option_route='$option_route',option_route_value='$option_route_value',option_route_value_context='$option_route_value_context';";
						$rslt=mysql_query($stmtA, $link);
						$stmtAX .= "$stmtA|";
						}
					}
				else
					{
					$stmtA="SELECT count(*) from vicidial_call_menu_options where menu_id='$menu_id' and option_value='$option_value';";
					$rslt=mysql_query($stmtA, $link);
					$row=mysql_fetch_row($rslt);
					$option_exists_db = $row[0];

					if ($option_exists_db > 0)
						{
						$stmtA="DELETE FROM vicidial_call_menu_options where menu_id='$menu_id' and option_value='$option_value';";
						$rslt=mysql_query($stmtA, $link);
						$stmtAX .= "$stmtA|";
						}
					}
				$option_value_list .= "$option_value|";
				$h++;
				}
			## delete existing database records that were not in the submit
			while ($h <= 20)
				{
				if (!preg_match("/\|$dtmf[$h]\|/i",$option_value_list))
					{
					$stmtA="SELECT count(*) from vicidial_call_menu_options where menu_id='$menu_id' and option_value='$dtmf[$h]';";
					$rslt=mysql_query($stmtA, $link);
					$row=mysql_fetch_row($rslt);
					$option_exists_db = $row[0];

					if ($option_exists_db > 0)
						{
						$stmtA="DELETE FROM vicidial_call_menu_options where menu_id='$menu_id' and option_value='$dtmf[$h]';";
						$rslt=mysql_query($stmtA, $link);
						$stmtAX .= "$stmtA|";
						}
					}
				$h++;
				}

			$stmtA="UPDATE servers set rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y';";
			$rslt=mysql_query($stmtA, $link);
			$stmtAX .= "$stmtA|";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|$stmtAX";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLMENUS', event_type='MODIFY', record_id='$menu_id', event_code='ADMIN MODIFY CALL MENU', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3511;	# go to call menu modification form below
	}


######################
# ADD=4711 modify filter phone group info in the system
######################

if ($ADD==4711)
	{
	if ($LOGmodify_dids==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($filter_phone_group_id) < 2) or (strlen($filter_phone_group_name) < 2) or (strlen($filter_phone_group_name) > 40) )
			{
			echo "<br>FILTER PHONE GROUPE NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Filtre Nom du groupe Téléphone and ID must be at least 2 characters in length\n";
			}
		else
			{
			$stmt="UPDATE vicidial_filter_phone_groups set filter_phone_group_name='$filter_phone_group_name', filter_phone_group_description='$filter_phone_group_description',user_group='$user_group' where filter_phone_group_id='$filter_phone_group_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>GROUPE DE TÉLÉPHONE filtre modifié</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTERPHONEGROUPS', event_type='MODIFY', record_id='$filter_phone_group_id', event_code='ADMIN FILTER PHONE GROUP', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3711;	# go to filter phone group modification form below
	}


######################
# ADD=41111 modify remote agents info in the system
######################

if ($ADD==41111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from vicidial_users where user='$user_start' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] < 1)
			{echo "<br>AGENTS DISTANTS NOT MODIFIED - vous devez utiliser un utilisateur valide que l'user_start pour les agents à distance\n";}
		else
			{
			### check for closest remote agents to this account to ensure no overlapping
			$user_finish = ($user_start + $number_of_lines);
			$stmt="SELECT count(*) from vicidial_remote_agents where user_start > '$user_start' and user_start < '$user_finish';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ($row[0] > 0)
				{echo "<br>AGENTS DISTANTS NOT MODIFIED - votre nombre de chevauchements de lignes avec un autre agent à distance\n";}
			else
				{
				if ( (strlen($server_ip) < 2) or (strlen($user_start) < 2)  or (strlen($campaign_id) < 2) or (strlen($conf_exten) < 2) )
					{
					echo "<br>AGENT DISTANT NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
					echo "<br>Le début de l'ID de l'utilisateur et l'extension externe doivent contenir au moins 2 caractères\n";
					}
				else
					{
					$stmt="UPDATE vicidial_remote_agents set user_start='$user_start', number_of_lines='$number_of_lines', server_ip='$server_ip', conf_exten='$conf_exten', status='$status', campaign_id='$campaign_id', closer_campaigns='$groups_value',extension_group='$extension_group',on_hook_agent='$on_hook_agent',on_hook_ring_time='$on_hook_ring_time' where remote_agent_id='$remote_agent_id';";
					$rslt=mysql_query($stmt, $link);

					echo "<br><B>AGENTS DISTANTS MODIFIES</B>\n";

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='REMOTEAGENTS', event_type='MODIFY', record_id='$remote_agent_id', event_code='ADMIN MODIFY REMOTE AGENT', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=31111;	# go to remote agents modification form below
	}


######################
# ADD=42111 modify extenison group entry in the system
######################

if ($ADD==42111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($extension_id) < 1) or (strlen($extension_group_id) < 2)  or (strlen($extension) < 2) or (strlen($rank) < 1) )
			{
			echo "<br>ENTRÉE DU GROUPE D'EXTENSION PAS MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Extension group id and extension must be at least 2 characters in length\n";
			}
		else
			{
			$stmt="UPDATE vicidial_extension_groups set extension_group_id='$extension_group_id', extension='$extension', rank='$rank', campaign_groups='$campaign_groups' where extension_id='$extension_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>ENTRÉE DU GROUPE D'EXTENSION mise à jour</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='EXTENGROUP', event_type='MODIFY', record_id='$extension_id', event_code='ADMIN MODIFY EXTENSION GROUP', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=32111;	# go to extension group modification form below
	}


######################
# ADD=411111 modify user group info in the system
######################

if ($ADD==411111)
	{
	if ($LOGmodify_usergroups==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($user_group) < 2) or (strlen($group_name) < 2) )
			{
			echo "<br>GROUPE D'UTILISATEURS NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Le nom et la description du groupe doivent contenir au moins 2 caractères\n";
			}
		else
			{
			if ( ($LOGmodify_same_user_level < 1) and ($user_group=="$LOGuser_group") )
				{
				echo "Vous n'êtes pas autorisé à modifier votre propre groupe d'utilisateurs\n";
				exit;
				}
			else
				{
				$p=0;
				$GROUP_shifts=' ';
				$group_shifts_ct = count($group_shifts);
				while ($p <= $group_shifts_ct)
					{
					$group_shifts[$p] = ereg_replace("[^- \_0-9a-zA-Z]","",$group_shifts[$p]);
					$GROUP_shifts .= "$group_shifts[$p] ";
					$p++;
					}
				$p=0;
				$VGROUP_vgroups=' ';
				$vgroup_vgroups_ct = count($agent_status_viewable_groups);
				while ($p <= $vgroup_vgroups_ct)
					{
					$agent_status_viewable_groups[$p] = ereg_replace("[^- \_0-9a-zA-Z]","",$agent_status_viewable_groups[$p]);
					$VGROUP_vgroups .= "$agent_status_viewable_groups[$p] ";
					$p++;
					}
				$p=0;
				$Vadmin_viewable_groups=' ';
				$admin_viewable_groups_ct = count($admin_viewable_groups);
				while ($p <= $admin_viewable_groups_ct)
					{
					$admin_viewable_groups[$p] = ereg_replace("[^- \_0-9a-zA-Z]","",$admin_viewable_groups[$p]);
					$Vadmin_viewable_groups .= "$admin_viewable_groups[$p] ";
					$p++;
					}
				$p=0;
				$Vadmin_viewable_call_times=' ';
				$admin_viewable_call_times_ct = count($admin_viewable_call_times);
				while ($p <= $admin_viewable_call_times_ct)
					{
					$admin_viewable_call_times[$p] = ereg_replace("[^- \_0-9a-zA-Z]","",$admin_viewable_call_times[$p]);
					$Vadmin_viewable_call_times .= "$admin_viewable_call_times[$p] ";
					$p++;
					}
				$k=0;
				$multi_count = count($allowed_reports);
				$multi_array = $allowed_reports;
				while ($k < $multi_count)
					{
					$new_field_value .= "$multi_array[$k],";
					$k++;
					}
				$allowed_reports = preg_replace("/,$/","",$new_field_value);

				$stmt="UPDATE vicidial_user_groups set user_group='$user_group', group_name='$group_name',allowed_campaigns='$campaigns_value',qc_allowed_campaigns='$qc_campaigns_value',qc_allowed_inbound_groups='$qc_groups_value',group_shifts='$GROUP_shifts',forced_timeclock_login='$forced_timeclock_login',shift_enforcement='$shift_enforcement',agent_status_viewable_groups='$VGROUP_vgroups',agent_status_view_time='$agent_status_view_time',agent_call_log_view='$agent_call_log_view',agent_xfer_consultative='$agent_xfer_consultative',agent_xfer_dial_override='$agent_xfer_dial_override',agent_xfer_vm_transfer='$agent_xfer_vm_transfer',agent_xfer_blind_transfer='$agent_xfer_blind_transfer',agent_xfer_dial_with_customer='$agent_xfer_dial_with_customer',agent_xfer_park_customer_dial='$agent_xfer_park_customer_dial',agent_fullscreen='$agent_fullscreen',allowed_reports='$allowed_reports',webphone_url_override='" . mysql_real_escape_string($webphone_url_override) . "',webphone_systemkey_override='$webphone_systemkey_override',webphone_dialpad_override='$webphone_dialpad_override',admin_viewable_groups='$Vadmin_viewable_groups',admin_viewable_call_times='$Vadmin_viewable_call_times' where user_group='$OLDuser_group';";
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>GROUPE D'UTILISATEURS MODIFIE</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='USERGROUPS', event_type='MODIFY', record_id='$user_group', event_code='ADMIN MODIFY GROUPE D'UTILISATEURS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);

				###############################################################
				##### START SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
				$stmt = "SELECT enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url FROM system_settings;";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$ss_conf_ct = mysql_num_rows($rslt);
				if ($ss_conf_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$enable_vtiger_integration =	$row[0];
					$vtiger_server_ip	=			$row[1];
					$vtiger_dbname =				$row[2];
					$vtiger_login =					$row[3];
					$vtiger_pass =					$row[4];
					$vtiger_url =					$row[5];
					}
				##### END SYSTEM_SETTINGS VTIGER CONNECTION INFO LOOKUP #####
				#############################################################

				if ($enable_vtiger_integration > 0)
					{
					### connect to your vtiger database
					$linkV=mysql_connect("$vtiger_server_ip", "$vtiger_login","$vtiger_pass");
					if (!$linkV) {die("Could not connect: $vtiger_server_ip|$vtiger_dbname|$vtiger_login|$vtiger_pass" . mysql_error());}
					echo 'Connected successfully';
					mysql_select_db("$vtiger_dbname", $linkV);

					######################################
					##### BEGIN Add/Update group info in Vtiger
					$stmt="SELECT count(*) from vtiger_groups where groupname='$user_group';";
					$rslt=mysql_query($stmt, $linkV);
					if ($DB) {echo "$stmt\n";}
					if (!$rslt) {die('Could not execute: ' . mysql_error());}
					$row=mysql_fetch_row($rslt);
					$group_found_count = $row[0];

					### group exists in vtiger, update it
					if ($group_found_count > 0)
						{
						$stmt="SELECT groupid from vtiger_groups where groupname='$user_group';";
						$rslt=mysql_query($stmt, $linkV);
						if ($DB) {echo "$stmt\n";}
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						$row=mysql_fetch_row($rslt);
						$groupid = $row[0];

						$stmtA = "UPDATE vtiger_groups SET description='$group_name' where groupid='$groupid';";
						if ($DB) {echo "|$stmtA|\n";}
						$rslt=mysql_query($stmtA, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}
						}

					### user doesn't exist in vtiger, insert it
					else
						{
						#### BEGIN CREATE NEW GROUP RECORD IN VTIGER
						# Get next available id from vtiger_users_seq to use as groupid
						$stmt="SELECT id from vtiger_users_seq;";
						if ($DB) {echo "$stmt\n";}
						$rslt=mysql_query($stmt, $linkV);
						$row=mysql_fetch_row($rslt);
						$groupid = ($row[0] + 1);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						# Increase next available groupid with 1 so next record gets proper id
						$stmt="UPDATE vtiger_users_seq SET id = '$groupid';";
						if ($DB) {echo "$stmt\n";}
						$rslt=mysql_query($stmt, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						$stmtA = "INSERT INTO vtiger_groups SET groupid='$groupid',groupname='$user_group',description='$group_name';";
						if ($DB) {echo "|$stmtA|\n";}
						$rslt=mysql_query($stmtA, $linkV);
						if (!$rslt) {die('Could not execute: ' . mysql_error());}

						#### END CREATE NEW GROUP RECORD IN VTIGER
						}
					##### END Add/Update group info in Vtiger
					######################################
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111;	# go to user group modification form below
	}


######################
# ADD=4111111 modify script in the system
######################

if ($ADD==4111111)
	{
	if ($LOGmodify_scripts==1)
		{
		echo "<!-- $script_text -->\n";
		echo "<!--" . mysql_real_escape_string($script_text) . " -->\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($script_id) < 2) or (strlen($script_name) < 2) or (strlen($script_text) < 2) )
			{
			echo "<br>SCRIPT NON MODIFIE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Les nom, description et texte du script doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$stmt="UPDATE vicidial_scripts set script_name='$script_name', script_comments='$script_comments', script_text='" . mysql_real_escape_string($script_text) . "', active='$active',user_group='$user_group' where script_id='$script_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>SCRIPT MODIFIE</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SCRIPTS', event_type='MODIFY', record_id='$script_id', event_code='ADMIN MODIFY SCRIPT', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3111111;	# go to script modification form below
	}


######################
# ADD=41111111 modify filter in the system
######################

if ($ADD==41111111)
	{
	if ($LOGmodify_filters==1)
		{
		echo "<!-- $lead_filter_sql -->\n";
		echo "<!--" . mysql_real_escape_string($lead_filter_sql) . " -->\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($lead_filter_id) < 2) or (strlen($lead_filter_name) < 2) or (strlen($lead_filter_sql) < 2) )
			{
			echo "<br>FILTRE NON MODIFIE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Identifiant du filtre, le nom et le SQL doivent au moins contenir 2 caractères\n";
			}
		else
			{
			$stmt="UPDATE vicidial_lead_filters set lead_filter_name='$lead_filter_name', lead_filter_comments='$lead_filter_comments', lead_filter_sql='" . mysql_real_escape_string($lead_filter_sql) . "',user_group='$user_group' where lead_filter_id='$lead_filter_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>FILTRE MODIFIE</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTRES', event_type='MODIFY', record_id='$lead_filter_id', event_code='ADMIN MODIFY FILTER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=31111111;	# go to filter modification form below
	}


######################
# ADD=411111111 modify call time in the system
######################

if ($ADD==411111111)
	{
	if ($LOGmodify_call_times==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($call_time_id) < 2) or (strlen($call_time_name) < 2) )
			{
			echo "<br>PERIODE D'APPELS NON MODIFIEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID et le nom de la période d'appel doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$ct_default_start = preg_replace('/\D/', '', $ct_default_start);
			$ct_default_stop = preg_replace('/\D/', '', $ct_default_stop);
			$ct_sunday_start = preg_replace('/\D/', '', $ct_sunday_start);
			$ct_sunday_stop = preg_replace('/\D/', '', $ct_sunday_stop);
			$ct_monday_start = preg_replace('/\D/', '', $ct_monday_start);
			$ct_monday_stop = preg_replace('/\D/', '', $ct_monday_stop);
			$ct_tuesday_start = preg_replace('/\D/', '', $ct_tuesday_start);
			$ct_tuesday_stop = preg_replace('/\D/', '', $ct_tuesday_stop);
			$ct_wednesday_start = preg_replace('/\D/', '', $ct_wednesday_start);
			$ct_wednesday_stop = preg_replace('/\D/', '', $ct_wednesday_stop);
			$ct_thursday_start = preg_replace('/\D/', '', $ct_thursday_start);
			$ct_thursday_stop = preg_replace('/\D/', '', $ct_thursday_stop);
			$ct_friday_start = preg_replace('/\D/', '', $ct_friday_start);
			$ct_friday_stop = preg_replace('/\D/', '', $ct_friday_stop);
			$ct_saturday_start = preg_replace('/\D/', '', $ct_saturday_start);
			$ct_saturday_stop = preg_replace('/\D/', '', $ct_saturday_stop);
			$stmt="UPDATE vicidial_call_times set call_time_name='$call_time_name', call_time_comments='$call_time_comments', ct_default_start='$ct_default_start', ct_default_stop='$ct_default_stop', ct_sunday_start='$ct_sunday_start', ct_sunday_stop='$ct_sunday_stop', ct_monday_start='$ct_monday_start', ct_monday_stop='$ct_monday_stop', ct_tuesday_start='$ct_tuesday_start', ct_tuesday_stop='$ct_tuesday_stop', ct_wednesday_start='$ct_wednesday_start', ct_wednesday_stop='$ct_wednesday_stop', ct_thursday_start='$ct_thursday_start', ct_thursday_stop='$ct_thursday_stop', ct_friday_start='$ct_friday_start', ct_friday_stop='$ct_friday_stop', ct_saturday_start='$ct_saturday_start', ct_saturday_stop='$ct_saturday_stop', default_afterhours_filename_override='$default_afterhours_filename_override', sunday_afterhours_filename_override='$sunday_afterhours_filename_override', monday_afterhours_filename_override='$monday_afterhours_filename_override', tuesday_afterhours_filename_override='$tuesday_afterhours_filename_override', wednesday_afterhours_filename_override='$wednesday_afterhours_filename_override', thursday_afterhours_filename_override='$thursday_afterhours_filename_override', friday_afterhours_filename_override='$friday_afterhours_filename_override', saturday_afterhours_filename_override='$saturday_afterhours_filename_override',user_group='$user_group' where call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>PERIODE D'APPELS MODIFIEE</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES', event_type='MODIFY', record_id='$call_time_id', event_code='ADMIN MODIFY CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111111;	# go to call time modification form below
	}


######################
# ADD=4111111111 modify state call time in the system
######################

if ($ADD==4111111111)
	{
	if ($LOGmodify_call_times==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($call_time_id) < 2) or (strlen($call_time_name) < 2) or (strlen($state_call_time_state) < 2) )
			{
			echo "<br>PERIODE D'APPELS D'ETAT NON MODIFIEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>L'ID, le nom et l'état de l'appel doivent contenir au moins 2 caractères\n";
			}
		else
			{
			$ct_default_start = preg_replace('/\D/', '', $ct_default_start);
			$ct_default_stop = preg_replace('/\D/', '', $ct_default_stop);
			$ct_sunday_start = preg_replace('/\D/', '', $ct_sunday_start);
			$ct_sunday_stop = preg_replace('/\D/', '', $ct_sunday_stop);
			$ct_monday_start = preg_replace('/\D/', '', $ct_monday_start);
			$ct_monday_stop = preg_replace('/\D/', '', $ct_monday_stop);
			$ct_tuesday_start = preg_replace('/\D/', '', $ct_tuesday_start);
			$ct_tuesday_stop = preg_replace('/\D/', '', $ct_tuesday_stop);
			$ct_wednesday_start = preg_replace('/\D/', '', $ct_wednesday_start);
			$ct_wednesday_stop = preg_replace('/\D/', '', $ct_wednesday_stop);
			$ct_thursday_start = preg_replace('/\D/', '', $ct_thursday_start);
			$ct_thursday_stop = preg_replace('/\D/', '', $ct_thursday_stop);
			$ct_friday_start = preg_replace('/\D/', '', $ct_friday_start);
			$ct_friday_stop = preg_replace('/\D/', '', $ct_friday_stop);
			$ct_saturday_start = preg_replace('/\D/', '', $ct_saturday_start);
			$ct_saturday_stop = preg_replace('/\D/', '', $ct_saturday_stop);
			$stmt="UPDATE vicidial_state_call_times set state_call_time_name='$call_time_name', state_call_time_comments='$call_time_comments', sct_default_start='$ct_default_start', sct_default_stop='$ct_default_stop', sct_sunday_start='$ct_sunday_start', sct_sunday_stop='$ct_sunday_stop', sct_monday_start='$ct_monday_start', sct_monday_stop='$ct_monday_stop', sct_tuesday_start='$ct_tuesday_start', sct_tuesday_stop='$ct_tuesday_stop', sct_wednesday_start='$ct_wednesday_start', sct_wednesday_stop='$ct_wednesday_stop', sct_thursday_start='$ct_thursday_start', sct_thursday_stop='$ct_thursday_stop', sct_friday_start='$ct_friday_start', sct_friday_stop='$ct_friday_stop', sct_saturday_start='$ct_saturday_start', sct_saturday_stop='$ct_saturday_stop', state_call_time_state='$state_call_time_state',user_group='$user_group' where state_call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>PERIODE D'APPELS D'ETAT MODIFIEE</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES', event_type='MODIFY', record_id='$call_time_id', event_code='ADMIN MODIFY STATE CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3111111111;	# go to state call time modification form below
	}


######################
# ADD=431111111 modify shift in the system
######################

if ($ADD==431111111)
	{
	if ( ($LOGmodify_call_times==1) or ($LOGmodify_shifts==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$shift_length_test = eregi_replace(':','',$shift_length);
		if ( (strlen($shift_id) < 2) or (strlen($shift_name) < 2) or (strlen($shift_start_time) < 4) or (strlen($shift_start_time) > 4) or (strlen($shift_length) < 5) or (strlen($shift_length) > 5) or ($shift_start_time > 2359) or ($shift_length_test > 2400) )
			{
			echo "<br>SHIFT DEFINITION NOT MODIFIED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Shift ID et le nom doit être d'au moins 2 caractères\n";
			echo "<br>Start Time Shift 4 chiffres doit être de longueur et une heure valide\n";
			echo "<br>Shift Longueur doit être de 5 caractères de longueur et de 24 heures ou moins\n";
			}
		else
			{
			$p=0;
			$shift_weekdays_ct = count($shift_weekdays);
			while ($p <= $shift_weekdays_ct)
				{
				$SHIFT_weekdays .= "$shift_weekdays[$p]";
				$p++;
				}
			$shift_start_time = preg_replace('/\D/', '', $shift_start_time);
			$stmt="UPDATE vicidial_shifts set shift_name='$shift_name', shift_start_time='$shift_start_time', shift_length='$shift_length', shift_weekdays='$SHIFT_weekdays',report_option='$report_option',user_group='$user_group',report_rank='$report_rank' where shift_id='$shift_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>MAJ mise à jour</B>\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SHIFTS', event_type='MODIFY', record_id='$shift_id', event_code='ADMIN MODIFY SHIFT', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=331111111;	# go to shift modification form below
	}


######################
# ADD=41111111111 modify phone record in the system
######################

if ($ADD==41111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from phones where extension='$extension' and server_ip='$server_ip' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( ($row[0] > 0) and ( ($extension != $old_extension) or ($server_ip != $old_server_ip) ) )
			{echo "<br>TELEPHONE NON MODIFIE - il y a déjà un téléphone dans le système avec cette extension/server\n";}
		else
			{
			if ( (strlen($extension) < 1) or (strlen($server_ip) < 7) or (strlen($dialplan_number) < 1) or (strlen($voicemail_id) < 1) or (strlen($login) < 1)  or (strlen($pass) < 1))
				{echo "<br>TELEPHONE NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>TELEPHONE MODIFIE: $extension\n";

				$stmt="UPDATE phones set extension='$extension', dialplan_number='$dialplan_number', voicemail_id='$voicemail_id', phone_ip='$phone_ip', computer_ip='$computer_ip', server_ip='$server_ip', login='$login', pass='$pass', status='$status', active='$active', phone_type='$phone_type', fullname='$fullname', company='$company', picture='$picture', protocol='$protocol', local_gmt='$local_gmt', ASTmgrUSERNAME='$ASTmgrUSERNAME', ASTmgrSECRET='$ASTmgrSECRET', login_user='$login_user', login_pass='$login_pass', login_campaign='$login_campaign', park_on_extension='$park_on_extension', conf_on_extension='$conf_on_extension', VICIDIAL_park_on_extension='$VICIDIAL_park_on_extension', VICIDIAL_park_on_filename='$VICIDIAL_park_on_filename', monitor_prefix='$monitor_prefix', recording_exten='$recording_exten', voicemail_exten='$voicemail_exten', voicemail_dump_exten='$voicemail_dump_exten', ext_context='$ext_context', dtmf_send_extension='$dtmf_send_extension', call_out_number_group='$call_out_number_group', client_browser='$client_browser', install_directory='$install_directory', local_web_callerID_URL='" . mysql_real_escape_string($local_web_callerID_URL) . "', VICIDIAL_web_URL='" . mysql_real_escape_string($VICIDIAL_web_URL) . "', AGI_call_logging_enabled='$AGI_call_logging_enabled', user_switching_enabled='$user_switching_enabled', conferencing_enabled='$conferencing_enabled', admin_hangup_enabled='$admin_hangup_enabled', admin_hijack_enabled='$admin_hijack_enabled', admin_monitor_enabled='$admin_monitor_enabled', call_parking_enabled='$call_parking_enabled', updater_check_enabled='$updater_check_enabled', AFLogging_enabled='$AFLogging_enabled', QUEUE_ACTION_enabled='$QUEUE_ACTION_enabled', CallerID_popup_enabled='$CallerID_popup_enabled', voicemail_button_enabled='$voicemail_button_enabled', enable_fast_rafraîchir='$enable_fast_rafraîchir', fast_rafraîchir_rate='$fast_rafraîchir_rate', enable_persistant_mysql='$enable_persistant_mysql', auto_dial_next_number='$auto_dial_next_number', VDstop_rec_after_each_call='$VDstop_rec_after_each_call', DBX_server='$DBX_server', DBX_database='$DBX_database', DBX_user='$DBX_user', DBX_pass='$DBX_pass', DBX_port='$DBX_port', DBY_server='$DBY_server', DBY_database='$DBY_database', DBY_user='$DBY_user', DBY_pass='$DBY_pass', DBY_port='$DBY_port', outbound_cid='$outbound_cid', enable_sipsak_messages='$enable_sipsak_messages', email='$email', template_id='$template_id', conf_override='$conf_override',phone_context='$phone_context',phone_ring_timeout='$phone_ring_timeout',conf_secret='$conf_secret', delete_vm_after_email='$delete_vm_after_email',is_webphone='$is_webphone',use_external_server_ip='$use_external_server_ip',codecs_list='$codecs_list',codecs_with_template='$codecs_with_template',webphone_dialpad='$webphone_dialpad',on_hook_agent='$on_hook_agent',webphone_auto_answer='$webphone_auto_answer',voicemail_timezone='$voicemail_timezone',voicemail_options='$voicemail_options',user_group='$user_group' where extension='$old_extension' and server_ip='$old_server_ip';";
				$rslt=mysql_query($stmt, $link);

				$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONES', event_type='MODIFY', record_id='$extension', event_code='ADMIN MODIFIER LE TELEPHONE', event_sql=\"$SQL_log\", event_notes='IP du serveur: $server_ip';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=31111111111;	# go to phone modification form below
	}


######################
# ADD=42111111111 modify phone alias record in the system
######################

if ($ADD==42111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from phones_alias where alias_id='$alias_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( (strlen($alias_id) < 1) or (strlen($alias_name) < 2) )
			{echo "<br>PHONE ALIAS PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>PHONE ALIAS mise à jour: $alias_id\n";

			$stmt="UPDATE phones_alias set alias_name='$alias_name', logins_list='$logins_list' where alias_id='$alias_id' and user_group='$user_group';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONEALIASES', event_type='MODIFY', record_id='$alias_id', event_code='ADMIN MODIFIER LE TELEPHONE ALIAS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=32111111111;	# go to phone alias modification form below
	}


######################
# ADD=43111111111 modify group alias record in the system
######################

if ($ADD==43111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from groups_alias where group_alias_id='$group_alias_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( (strlen($group_alias_id) < 1) or (strlen($group_alias_name) < 2) )
			{echo "<br>GROUPE ALIAS PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			echo "<br>GROUPE ALIAS mise à jour: $alias_id\n";

			$stmt="UPDATE groups_alias set group_alias_name='$group_alias_name', caller_id_number='$caller_id_number', caller_id_name='$caller_id_name', active='$active',user_group='$user_group' where group_alias_id='$group_alias_id';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='GROUPALIASES', event_type='MODIFY', record_id='$group_alias_id', event_code='ADMIN Modifier un groupe ALIAS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=33111111111;	# go to group alias modification form below
	}


######################
# ADD=411111111111 modify server record in the system
######################

if ($ADD==411111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from servers where server_id='$server_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( ($row[0] > 0) and ($server_id != $old_server_id) )
			{echo "<br>SERVEUR NOT MODIFIED - there is already a server in the system with this server_id\n";}
		else
			{
			$stmt="SELECT count(*) from servers where server_ip='$server_ip';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ( ($row[0] > 0) and ($server_ip != $old_server_ip) )
				{echo "<br>SERVEUR NON MODIFIE - il y a déjà un serveur dans le système avec cet ID\n";}
			else
				{
				if ( (strlen($server_id) < 1) or (strlen($server_ip) < 7) )
					{echo "<br>SERVEUR NON MODIFIE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
				else
					{
					$stmt="UPDATE servers set server_id='$server_id',server_description='$server_description',server_ip='$server_ip',active='$active',asterisk_version='$asterisk_version', max_vicidial_trunks='$max_vicidial_trunks', telnet_host='$telnet_host', telnet_port='$telnet_port', ASTmgrUSERNAME='$ASTmgrUSERNAME', ASTmgrSECRET='$ASTmgrSECRET', ASTmgrUSERNAMEupdate='$ASTmgrUSERNAMEupdate', ASTmgrUSERNAMElisten='$ASTmgrUSERNAMElisten', ASTmgrUSERNAMEsend='$ASTmgrUSERNAMEsend', local_gmt='$local_gmt', voicemail_dump_exten='$voicemail_dump_exten', answer_transfer_agent='$answer_transfer_agent', ext_context='$ext_context', sys_perf_log='$sys_perf_log', vd_server_logs='$vd_server_logs', agi_output='$agi_output', vicidial_balance_active='$vicidial_balance_active',balance_trunks_offlimits='$balance_trunks_offlimits',recording_web_link='$recording_web_link',alt_server_ip='$alt_server_ip',active_asterisk_server='$active_asterisk_server',generate_vicidial_conf='$generate_vicidial_conf',rebuild_conf_files='$rebuild_conf_files',outbound_calls_per_second='$outbound_calls_per_second',sounds_update='$sounds_update',vicidial_recording_limit='$vicidial_recording_limit',carrier_logging_active='$carrier_logging_active',vicidial_balance_rank='$vicidial_balance_rank',rebuild_music_on_hold='$rebuild_music_on_hold',active_agent_login_server='$active_agent_login_server',conf_secret='$conf_secret',external_server_ip='$external_server_ip',custom_dialplan_entry='$custom_dialplan_entry',active_twin_server_ip='$active_twin_server_ip',user_group='$user_group' where server_id='$old_server_id';";
					$rslt=mysql_query($stmt, $link);

					$stmtA="UPDATE servers SET rebuild_conf_files='Y',rebuild_music_on_hold='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y';";
					$rslt=mysql_query($stmtA, $link);

					echo "<br>SERVEUR MODIFIE: $server_ip\n";

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERS', event_type='MODIFY', record_id='$server_id', event_code='ADMIN MODIFIER LE SERVEUR', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111111111;	# go to server modification form below
	}


######################
# ADD=421111111111 modify vicidial server trunks record in the system
######################

if ($ADD==421111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
		$stmt="SELECT max_vicidial_trunks from servers where server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		$MAXvicidial_trunks = $rowx[0];
		
		$stmt="SELECT sum(dedicated_trunks) from vicidial_server_trunks where server_ip='$server_ip' and campaign_id !='$campaign_id';";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		$SUMvicidial_trunks = ($rowx[0] + $dedicated_trunks);
		
		if ($SUMvicidial_trunks > $MAXvicidial_trunks)
			{
			echo "<br>TRUNK DU SERVEUR VICIDIAL NON AJOUTE - le nombre de trunks vicidial est trop important: $SUMvicidial_trunks / $MAXvicidial_trunks\n";
			}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($server_ip) < 7) or (strlen($dedicated_trunks) < 1) or (strlen($trunk_restriction) < 1) )
				{
				echo "<br>TRUNK DU SERVEUR VICIDIAL NON MODIFIE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>la campagne doit contenir entre 3 et 8 caractères\n";
				echo "<br>le délai du server_ip doit contenir au moins 7 caractères\n";
				echo "<br>les trunks doivent être un nombre entre 0 et 9999\n";
				}
			else
				{
				$stmt="UPDATE vicidial_server_trunks SET dedicated_trunks='$dedicated_trunks',trunk_restriction='$trunk_restriction' where campaign_id='$campaign_id' and server_ip='$server_ip';";
				$rslt=mysql_query($stmt, $link);

				echo "<br><B>TRINK DU SERVEUR VICIDIAL MODIFIE: $campaign_id - $server_ip - $dedicated_trunks - $trunk_restriction</B>\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERMalles', event_type='MODIFY', record_id='$server_ip', event_code='ADMIN MODIFIER LE SERVEUR TRUNK', event_sql=\"$SQL_log\", event_notes='Campagne: $campaign_id';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111111111;	# go to server modification form below
	}


######################
# ADD=431111111111 modify conf template record in the system
###################### '$template_id','$template_name','$template_contents'

if ($ADD==431111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($template_id) < 1) or (strlen($template_name) < 1) )
			{echo "<br>CONF TEMPLATE PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			$stmt="UPDATE vicidial_conf_templates set template_name='$template_name',template_contents='$template_contents' where template_id='$template_id';";
			$rslt=mysql_query($stmt, $link);

			$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and user_group='$user_group';";
			$rslt=mysql_query($stmtA, $link);

			echo "<br>CONF TEMPLATE MODIFIED: $template_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONFTEMPLATES', event_type='MODIFY', record_id='$template_id', event_code='ADMIN MODIFY CONF TEMPLATE', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=331111111111;	# go to conf template modification form below
	}


######################
# ADD=441111111111 modify carrier record in the system
######################

if ($ADD==441111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_carriers==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($carrier_id) < 1) or (strlen($server_ip) < 7) or (strlen($protocol) < 1) )
			{echo "<br>CARRIER PAS mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			$stmt="UPDATE vicidial_server_carriers set carrier_name='$carrier_name',registration_string='$registration_string',template_id='$template_id',account_entry='$account_entry',protocol='$protocol',globals_string='$globals_string',dialplan_entry='$dialplan_entry',server_ip='$server_ip',active='$active',carrier_description='$carrier_description',user_group='$user_group' where carrier_id='$carrier_id';";
			$rslt=mysql_query($stmt, $link);

			$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
			$rslt=mysql_query($stmtA, $link);

			echo "<br>CARRIER mise à jour: $carrier_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CARRIERS', event_type='MODIFY', record_id='$carrier_id', event_code='ADMIN MODIFY CARRIER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=341111111111;	# go to carrier modification form below
	}


######################
# ADD=451111111111 modify tts record in the system
######################

if ($ADD==451111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_tts==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($tts_id) < 2) or (strlen($tts_name) < 5) )
			{echo "<br>TTS entrée n-est pas à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			$stmt="UPDATE vicidial_tts_prompts set tts_name='$tts_name',active='$active',tts_voice='$tts_voice',tts_text=\"$tts_text\",user_group='$user_group' where tts_id='$tts_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br>TTS entrée modifiée: $tts_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='TTS', event_type='MODIFY', record_id='$tts_id', event_code='ADMIN MODIFY TTS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=351111111111;	# go to tts entry modification form below
	}


######################
# ADD=461111111111 modify music on hold record in the system
######################

if ($ADD==461111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_moh==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ($stage == "FILEDELETE")
			{
			if ( (strlen($moh_id) < 2) or (strlen($filename) < 1) or ($moh_id=='sounds') or ($moh_id=='agi-bin') or ($moh_id=='astdb') or ($moh_id=='keys') )
				{echo "<br>MUSIC ON HOLD entrée n-est pas à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				$stmt="DELETE FROM vicidial_music_on_hold_files where moh_id='$moh_id' and filename='$filename';";
				$rslt=mysql_query($stmt, $link);

				$stmtA="UPDATE servers SET rebuild_conf_files='Y',rebuild_music_on_hold='Y',sounds_update='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y';";
				$rslt=mysql_query($stmtA, $link);

				echo "<br>MUSIC ON HOLD entrée modifiée: $moh_id - $filename\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|$stmtA|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='MOH', event_type='MODIFY', record_id='$moh_id', event_code='ADMIN MODIFY MOH', event_sql=\"$SQL_log\", event_notes='FILE DELETE';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		else
			{
			if ( (strlen($moh_id) < 2) or (strlen($moh_name) < 5) or ($moh_id=='sounds') or ($moh_id=='agi-bin') or ($moh_id=='astdb') or ($moh_id=='keys') )
				{echo "<br>MUSIC ON HOLD entrée n-est pas à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				$stmt="UPDATE vicidial_music_on_hold set moh_name='$moh_name',active='$active',random='$random',user_group='$user_group' where moh_id='$moh_id';";
				$rslt=mysql_query($stmt, $link);
				$stmtLIST = $stmt;

				$stmt="SELECT filename,rank from vicidial_music_on_hold_files where moh_id='$moh_id' order by rank;";
				$rsltx=mysql_query($stmt, $link);
				$mohfiles_to_print = mysql_num_rows($rsltx);
				$ranks = ($mohfiles_to_print + 1);
				$o=0;
				while ($mohfiles_to_print > $o)
					{
					$rowx=mysql_fetch_row($rsltx);
					$mohfiles[$o] = $rowx[0];
					$mohranks[$o] = $rowx[1];
					$o++;
					}

				$o=0;
				while ($mohfiles_to_print > $o)
					{
					$new_rank=0;
					$Ffilename = $mohfiles[$o];
					if (isset($_GET[$Ffilename]))			{$new_rank=$_GET[$Ffilename];}
						elseif (isset($_POST[$Ffilename]))	{$new_rank=$_POST[$Ffilename];}

					$stmt="UPDATE vicidial_music_on_hold_files set rank='$new_rank' where moh_id='$moh_id' and filename='$mohfiles[$o]';";
					$rslt=mysql_query($stmt, $link);
					$stmtLIST .= "|$stmt";
					$o++;
					}

				if (strlen($filename) > 0)
					{
					$stmt="INSERT INTO vicidial_music_on_hold_files set filename='$filename',rank='$ranks',moh_id='$moh_id';";
					$rslt=mysql_query($stmt, $link);
					$stmtLIST .= "|$stmt";
					}

				$stmtA="UPDATE servers SET rebuild_conf_files='Y',rebuild_music_on_hold='Y',sounds_update='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y';";
				$rslt=mysql_query($stmtA, $link);

				echo "<br>MUSIC ON HOLD entrée modifiée: $moh_id\n";

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmtLIST|$stmtA|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='MOH', event_type='MODIFY', record_id='$moh_id', event_code='ADMIN MODIFY MOH', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=361111111111;	# go to music on hold entry modification form below
	}


######################
# ADD=471111111111 modify voicemail record in the system
######################

if ($ADD==471111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_voicemail==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($voicemail_id) < 2) or (strlen($fullname) < 2) )
			{echo "<br>La boîte vocale PAS MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			$stmt="UPDATE vicidial_voicemail set fullname='$fullname',active='$active',pass='$pass',email='$email',delete_vm_after_email='$delete_vm_after_email',voicemail_timezone='$voicemail_timezone',voicemail_options='$voicemail_options',user_group='$user_group' where voicemail_id='$voicemail_id';";
			$rslt=mysql_query($stmt, $link);

			$stmt="SELECT active_voicemail_server from system_settings;";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$active_voicemail_server = $row[0];

			$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$active_voicemail_server';";
			$rslt=mysql_query($stmtA, $link);

			echo "<br>La boîte vocale mise à jour: $voicemail_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='VOICEMAIL', event_type='MODIFY', record_id='$voicemail_id', event_code='ADMIN MODIFY VOICEMAIL', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=371111111111;	# go to voicemail entry modification form below
	}


######################
# ADD=481111111111 modify screen label record in the system
######################

if ($ADD==481111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_labels==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($label_id) < 2) or (strlen($label_name) < 2) )
			{echo "<br>LABEL écran n'est pas mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			$stmt="UPDATE vicidial_screen_labels set label_name='$label_name',active='$active',label_hide_field_logs='$label_hide_field_logs',label_title='$label_title',label_first_name='$label_first_name',label_middle_initial='$label_middle_initial',label_last_name='$label_last_name',label_address1='$label_address1',label_address2='$label_address2',label_address3='$label_address3',label_city='$label_city',label_state='$label_state',label_province='$label_province',label_postal_code='$label_postal_code',label_vendor_lead_code='$label_vendor_lead_code',label_gender='$label_gender',label_phone_number='$label_phone_number',label_phone_code='$label_phone_code',label_alt_phone='$label_alt_phone',label_security_phrase='$label_security_phrase',label_email='$label_email',label_comments='$label_comments',user_group='$user_group' where label_id='$label_id';";
			$rslt=mysql_query($stmt, $link);

			echo "<br>LABEL écran modifié: $label_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LABEL', event_type='MODIFY', record_id='$label_id', event_code='ADMIN MODIFY LABEL', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=381111111111;	# go to screen label entry modification form below
	}


######################
# ADD=491111111111 modify contact record in the system
######################

if ($ADD==491111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_contacts==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($contact_id) < 1)
			{echo "<br>Contact non mise à jour - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";}
		else
			{
			if ( (preg_match("/contact_information/",$SStables_use_alt_log_db)) and (strlen($SSalt_log_server_ip)>4) and (strlen($SSalt_log_dbname)>0) )
				{
				$linkALT=mysql_connect("$SSalt_log_server_ip", "$SSalt_log_login", "$SSalt_log_pass");
				mysql_select_db("$SSalt_log_dbname", $linkALT);
				}
			else
				{$linkALT = $link;}
			$stmt="UPDATE contact_information set first_name='$first_name',last_name='$last_name',office_num='$office_num',cell_num='$cell_num',other_num1='$other_num1',other_num2='$other_num2',bu_name='$bu_name',department='$department',group_name='$group_name',job_title='$job_title',location='$location' where contact_id='$contact_id';";
			$rslt=mysql_query($stmt, $linkALT);

			echo "<br>CONTACT MODIFIED: $contact_id\n";

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONTACTS', event_type='MODIFY', record_id='$contact_id', event_code='ADMIN Modifier un contact', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=391111111111;	# go to contact entry modification form below
	}


######################
# ADD=4111111111111 modify conference record in the system
######################

if ($ADD==4111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( ($row[0] > 0) and ( ($conf_exten != $old_conf_exten) or ($server_ip != $old_server_ip) ) )
			{echo "<br>CONFERENCE NON MODIFIEE - il y a déjà une conférence dans le système avec cette extension-serveur\n";}
		else
			{
			if ( (strlen($conf_exten) < 1) or (strlen($server_ip) < 7) )
				{echo "<br>CONFERENCE NON MODIFIEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>CONFERENCE MODIFIEE: $conf_exten\n";

				$stmt="UPDATE conferences set conf_exten='$conf_exten',server_ip='$server_ip',extension='$extension' where conf_exten='$old_conf_exten' and server_ip='$server_ip';";
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=3111111111111;	# go to conference modification form below
	}


######################
# ADD=41111111111111 modify vicidial conference record in the system
######################

if ($ADD==41111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from vicidial_conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ( ($row[0] > 0) and ( ($conf_exten != $old_conf_exten) or ($server_ip != $old_server_ip) ) )
			{echo "<br>VICIDIAL CONFERENCE NON MODIFIEE - il y a déjà une conférence dans le système avec cette extension-serveur\n";}
		else
			{
			if ( (strlen($conf_exten) < 1) or (strlen($server_ip) < 7) )
				{echo "<br>VICIDIAL CONFERENCE NON MODIFIEE - Veuillez revenir en arrière et vérifier les données que vous avez saisies\n";}
			else
				{
				echo "<br>VICIDIAL CONFERENCE MODIFIEE: $conf_exten\n";

				$stmt="UPDATE vicidial_conferences set conf_exten='$conf_exten',extension='$extension' where conf_exten='$old_conf_exten' and server_ip='$server_ip';";
				$rslt=mysql_query($stmt, $link);

				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=31111111111111;	# go to vicidial conference modification form below
	}


######################
# ADD=411111111111111 modify vicidial system settings
######################

if ($ADD==411111111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>REGLAGES DU SYSTEME VICIDIAL MODIFIES\n";

		$k=0;
		$multi_count = count($reports_use_slave_db);
		$multi_array = $reports_use_slave_db;
		while ($k < $multi_count)
			{
			$new_field_value .= "$multi_array[$k],";
			$k++;
			}
		$reports_use_slave_db = preg_replace("/,$/","",$new_field_value);

		$m=0;
		$altlog_count = count($tables_use_alt_log_db);
		$altlog_array = $tables_use_alt_log_db;
		while ($m < $altlog_count)
			{
			$new_altlog_value .= "$altlog_array[$m],";
			$m++;
			}
		$tables_use_alt_log_db = preg_replace("/,$/","",$new_altlog_value);

		$stmt="UPDATE system_settings set use_non_latin='$use_non_latin',webroot_writable='$webroot_writable',enable_queuemetrics_logging='$enable_queuemetrics_logging',queuemetrics_server_ip='$queuemetrics_server_ip',queuemetrics_dbname='$queuemetrics_dbname',queuemetrics_login='$queuemetrics_login',queuemetrics_pass='$queuemetrics_pass',queuemetrics_url='$queuemetrics_url',queuemetrics_log_id='$queuemetrics_log_id',queuemetrics_eq_prepend='$queuemetrics_eq_prepend',vicidial_agent_disable='$vicidial_agent_disable',allow_sipsak_messages='$allow_sipsak_messages',admin_home_url='$admin_home_url',enable_agc_xfer_log='$enable_agc_xfer_log',timeclock_end_of_day='$timeclock_end_of_day',vdc_header_date_format='$vdc_header_date_format',vdc_customer_date_format='$vdc_customer_date_format',vdc_header_phone_format='$vdc_header_phone_format',vdc_agent_api_active='$vdc_agent_api_active',enable_vtiger_integration='$enable_vtiger_integration',vtiger_server_ip='$vtiger_server_ip',vtiger_dbname='$vtiger_dbname',vtiger_login='$vtiger_login',vtiger_pass='$vtiger_pass',vtiger_url='$vtiger_url',qc_features_active='$qc_features_active',outbound_autodial_active='$outbound_autodial_active',outbound_calls_per_second='$outbound_calls_per_second',enable_tts_integration='$enable_tts_integration',agentonly_callback_campaign_lock='$agentonly_callback_campaign_lock',sounds_central_control_active='$sounds_central_control_active',sounds_web_server='$sounds_web_server',sounds_web_directory='$sounds_web_directory',active_voicemail_server='$active_voicemail_server',auto_dial_limit='$auto_dial_limit',user_territories_active='$user_territories_active',allow_custom_dialplan='$allow_custom_dialplan',enable_second_webform='$enable_second_webform',default_webphone='$default_webphone',default_external_server_ip='$default_external_server_ip',webphone_url='" . mysql_real_escape_string($webphone_url) . "',enable_agc_dispo_log='$enable_agc_dispo_log',custom_dialplan_entry='$custom_dialplan_entry',queuemetrics_loginout='$queuemetrics_loginout',callcard_enabled='$callcard_enabled',queuemetrics_callstatus='$queuemetrics_callstatus',default_codecs='$default_codecs',admin_web_directory='$admin_web_directory',label_title='$label_title',label_first_name='$label_first_name',label_middle_initial='$label_middle_initial',label_last_name='$label_last_name',label_address1='$label_address1',label_address2='$label_address2',label_address3='$label_address3',label_city='$label_city',label_state='$label_state',label_province='$label_province',label_postal_code='$label_postal_code',label_vendor_lead_code='$label_vendor_lead_code',label_gender='$label_gender',label_phone_number='$label_phone_number',label_phone_code='$label_phone_code',label_alt_phone='$label_alt_phone',label_security_phrase='$label_security_phrase',label_email='$label_email',label_comments='$label_comments',custom_fields_enabled='$custom_fields_enabled',slave_db_server='$slave_db_server',reports_use_slave_db='$reports_use_slave_db',webphone_systemkey='$webphone_systemkey',first_login_trigger='$first_login_trigger',default_phone_registration_password='$default_phone_registration_password',default_phone_login_password='$default_phone_login_password',default_server_password='$default_server_password',admin_modify_rafraîchir='$admin_modify_rafraîchir',nocache_admin='$nocache_admin',generate_cross_server_exten='$generate_cross_server_exten',queuemetrics_addmember_enabled='$queuemetrics_addmember_enabled',queuemetrics_dispo_pause='$queuemetrics_dispo_pause',label_hide_field_logs='$label_hide_field_logs',queuemetrics_pe_phone_append='$queuemetrics_pe_phone_append',test_campaign_calls='$test_campaign_calls',agents_calls_reset='$agents_calls_reset',default_voicemail_timezone='$default_voicemail_timezone',default_local_gmt='$default_local_gmt',noanswer_log='$noanswer_log',alt_log_server_ip='$alt_log_server_ip',alt_log_dbname='$alt_log_dbname',alt_log_login='$alt_log_login',alt_log_pass='$alt_log_pass',tables_use_alt_log_db='$tables_use_alt_log_db',did_agent_log='$did_agent_log',campaign_cid_areacodes_enabled='$campaign_cid_areacodes_enabled',pllb_grouping_limit='$pllb_grouping_limit',did_ra_extensions_enabled='$did_ra_extensions_enabled',expanded_list_stats='$expanded_list_stats',contacts_enabled='$contacts_enabled';";
		$rslt=mysql_query($stmt, $link);

		if ($reload_dialplan_on_servers > 0)
			{
			$stmtB="UPDATE servers set rebuild_conf_files='Y' where active='Y' and active_asterisk_server='Y' and generate_vicidial_conf='Y';";
			$rslt=mysql_query($stmtB, $link);
			}

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|$stmtB|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SYSTEMSETTINGS', event_type='MODIFY', record_id='system_settings', event_code='ADMIN MODIFY SYSTEM SETTINGS', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111111111111;	# go to vicidial system settings form below
	}


######################
# ADD=421111111111111 modify/delete system status in the system
######################

if ($ADD==421111111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_statuses==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (ereg('delete',$stage))
			{
			if ( (strlen($status) < 1) or (preg_match("/^B$|^NA$|^DNC$|^NA$|^DROP$|^INCALL$|^QUEUE$|^NEW$/i",$status)) )
				{
				echo "<br>STATUT DE SYSTÈME NON SUPPRIMÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut de système ne peut pas être un statut réservé :B,NA,DNC,NA,DROP,INCALL,QUEUE,NEW\n";
				echo "<br>le statut de système doit être au moins les caractères 1 delongueur\n";
				}
			else
				{
				echo "<br><B>SYSTEM STATUS DELETED: $status</B>\n";

				$stmt="DELETE FROM vicidial_statuses where status='$status';";
				$rslt=mysql_query($stmt, $link);

				$stmtA="DELETE FROM vicidial_campaign_hotkeys where status='$status';";
				$rslt=mysql_query($stmtA, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SYSTEMSTATUSES', event_type='DELETE', record_id='$status', event_code='ADMIN DELETE SYSTEM STATUS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		if (ereg('modify',$stage))
			{
			if ( (strlen($status) < 1) or (strlen($status_name) < 2) )
				{
				echo "<br>STATUT DE SYSTÈME NON MODIFIÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut de système doit être au moins les caractères 1 delongueur\n";
				echo "<br>le nom de statut de système doit être au moins les caractères 1 delongueur\n";
				}
			else
				{
				echo "<br><B>LE STATUT DE SYSTÈME A MODIFIÉ: $status</B>\n";

				$stmt="UPDATE vicidial_statuses SET status_name='$status_name',selectable='$selectable',human_answered='$human_answered',category='$category',sale='$sale',dnc='$dnc',customer_contact='$customer_contact',not_interested='$not_interested',unworkable='$unworkable',scheduled_callback='$scheduled_callbacks',completed='$completed' where status='$status';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SYSTEMSTATUSES', event_type='MODIFY', record_id='$status', event_code='ADMIN MODIFY SYSTEM STATUS', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=321111111111111;	# go to system settings modification form below
	}


######################
# ADD=431111111111111 modify/delete status category in the system
######################

if ($ADD==431111111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_statuses==1) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($vsc_id) < 2)  or (preg_match("/^UNDEFINED$/i",$vsc_id)) )
			{
			echo "<br>CATÉGORIE DE STATUT NON MODIFIÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>la catégorie de statut ne peut pas être une catégorie réservée :UNDEFINED\n";
			echo "<br>la catégorie de statut doit être au moins 2 caractères de longueur\n";
			}
		else
			{
			if (ereg('delete',$stage))
				{
				echo "<br><B>LA CATÉGORIE DE STATUT A SUPPRIMÉ: $vsc_id</B>\n";

				$stmt="DELETE FROM vicidial_status_categories where vsc_id='$vsc_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='STATUSCATEGORIES', event_type='DELETE', record_id='$vsc_id', event_code='ADMIN DELETE STATUS CATÉGORIE', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			if (ereg('modify',$stage))
				{
				echo "<br><B>LA CATÉGORIE DE STATUT A MODIFIÉ: $vsc_id</B>\n";

				$stmt="SELECT count(*) from vicidial_status_categories where tovdad_display='Y' and vsc_id NOT IN('$vsc_id');";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				if ( ($row[0] > 3) and (ereg('Y',$tovdad_display)) )
					{
					$tovdad_display = 'N';
					echo "<br><B>ERREUR : Il y a déjà ensemble de 4 catégories de statut àl'affichage de TimeOnVDAD</B>\n";
					}

				$stmt="UPDATE vicidial_status_categories SET vsc_name='$vsc_name',vsc_description='$vsc_description',tovdad_display='$tovdad_display',sale_category='$sale_category',dead_lead_category='$dead_lead_category' where vsc_id='$vsc_id';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='STATUSCATEGORIES', event_type='MODIFY', record_id='$vsc_id', event_code='ADMIN MODIFY STATUS CATÉGORIE', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=331111111111111;	# go to system settings modification form below
	}


######################
# ADD=441111111111111 modify/delete qc status code in the system
######################

if ($ADD==441111111111111)
	{
	if ( ($LOGmodify_servers==1) and ($SSqc_features_active > 0) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (ereg('delete',$stage))
			{
			if ( (strlen($code) < 1) or (preg_match("/^B$|^NA$|^DNC$|^NA$|^DROP$|^INCALL$|^QUEUE$|^NEW$/i",$code)) )
				{
				echo "<br>QC CODE ÉTAT PAS SUPPRIMÉ - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>the qc status code cannot be a reserved status: B,NA,DNC,NA,DROP,INCALL,QUEUE,NEW\n";
				echo "<br>qc le code de statut doit être au moins de 1 caractères\n";
				}
			else
				{
				echo "<br><B>QC ÉTAT CODE DELETED:$code</B>\n";

				$stmt="DELETE FROM vicidial_qc_codes where code='$code';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='QCCODES', event_type='DELETE', record_id='$vsc_id', event_code='ADMIN DELETE QC CODES', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		if (ereg('modify',$stage))
			{
			if ( (strlen($code) < 1) or (strlen($code_name) < 2) )
				{
				echo "<br>QC CODE ÉTAT PAS mise à jour- Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>qc le code de statut doit être au moins de 1 caractères\n";
				echo "<br>qc le nom de code de statut doit être au moins de 1 caractères\n";
				}
			else
				{
				echo "<br><B>QC ÉTAT CODE mise à jour:$code</B>\n";

				$stmt="UPDATE vicidial_qc_codes SET code_name='$code_name' where code='$code';";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='QCCODES', event_type='MODIFY', record_id='$vsc_id', event_code='ADMIN MODIFY QC CODES', event_sql=\"$SQL_log\", event_notes='';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=341111111111111;	# go to qc status code modification form below
	}




######################################################################################################
######################################################################################################
#######   5 series, delete records confirmation
######################################################################################################
######################################################################################################


######################
# ADD=5 confirmation before deletion of user
######################

if ($ADD==5)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($user) < 2) or ($LOGdelete_users < 1) )
		{
		echo "<br>UTILISATEUR NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Utilisateur be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DE L'UTILISATEUR: $user</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6&user=$user&CoNfIrM=YES\">Cliquez ici pour supprimer cet utilisateur $user</a><br><br><br>\n";
		}

	$ADD='3';		# go to user modification below
	}

######################
# ADD=51 confirmation before deletion of campaign
######################

if ($ADD==51)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($campaign_id) < 2) or ($LOGdelete_campaigns < 1) )
		{
		echo "<br>CAMPAGNE NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Campagne_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DE LA CAMPAGNE: $campaign_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=61&campaign_id=$campaign_id&CoNfIrM=YES\">Cliquez ici pour supprimer cette campagne $campaign_id</a><br><br><br>\n";
		}

	$ADD='31';		# go to campaign modification below
	}

######################
# ADD=52 confirmation before logging all agents out of campaign of campaign
######################

if ($ADD==52)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($campaign_id) < 2)
		{
		echo "<br>AGENTS NON DECONNECTES DE LA CAMPAGNE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Campagne_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA DECONNECTION DE L'AGENT: $campaign_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=62&campaign_id=$campaign_id&CoNfIrM=YES&DB=$DB\">Cliquez ici pour déconnecter tous les agents de $campaign_id</a><br><br><br>\n";
		}

	$ADD='31';		# go to campaign modification below
	}

######################
# ADD=53 confirmation before Emergency VDAC Jam Clear - deletes oldest LIVE vicidial_auto_call record
######################

if ($ADD==53)
	{
	if (eregi('IN',$stage))
		{$group_id=$campaign_id;}
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($campaign_id) < 2)
		{
		echo "<br>VDAC NON EFFACE POUR LA CAMPAGNE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Campagne_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE L'EFFACEMENT DE VDAC: $campaign_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=63&campaign_id=$campaign_id&CoNfIrM=YES&stage=$stage\">Cliquez ici pour effacer les plus vieux enregistrements LIVE dans VDAC pour $campaign_id</a><br><br><br>\n";
		}

	# go to campaign modification below
	if (eregi('IN',$stage))
		{$ADD='3111';}
	else
		{$ADD='31';}	
	}

######################
# ADD=511 confirmation before deletion of list
######################

if ($ADD==511)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($list_id) < 2) or ($LOGdelete_lists < 1) )
		{
		echo "<br>LISTE NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>List_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DE LA LISTE: $list_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=611&list_id=$list_id&CoNfIrM=YES\">Cliquez ici pour supprimer cette liste et toutes ses fiches $list_id</a><br><br><br>\n";
		}

	$ADD='311';		# go to campaign modification below
	}

######################
# ADD=5111 confirmation before deletion of in-group
######################

if ($ADD==5111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($group_id) < 2) or ($LOGdelete_ingroups < 1) )
		{
		echo "<br>IN-GROUP NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Group_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DU IN-GROUP: $group_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6111&group_id=$group_id&CoNfIrM=YES\">Cliquer ici pour supprimer le in-group $group_id</a><br><br><br>\n";
		}

	$ADD='3111';		# go to in-group modification below
	}

######################
# ADD=5311 confirmation before deletion of did
######################

if ($ADD==5311)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($did_id) < 1) or ($LOGdelete_dids < 1) )
		{
		echo "<br>NE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>did_id be at least 1 characters in length\n";
		}
	else
		{
		echo "<br><B>A DELETION CONFIRMATION: $menu_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6311&did_id=$did_id&CoNfIrM=YES\">Cliquez ici pour supprimerDID $did_id</a><br><br><br>\n";
		}

	$ADD='3311';		# go to did modification below
	}

######################
# ADD=5511 confirmation before deletion of call menu
######################

if ($ADD==5511)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($menu_id) < 2) or ($LOGdelete_dids < 1) )
		{
		echo "<br>CALL MENU pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>menu_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CALL MENU DE SUPPRESSION DE CONFIRMATION: $menu_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6511&menu_id=$menu_id&CoNfIrM=YES\">Cliquez ici pour supprimer CALL MENU $menu_id</a><br><br><br>\n";
		}

	$ADD='3511';		# go to call menu modification below
	}

######################
# ADD=5711 confirmation before deletion of filter phone group
######################

if ($ADD==5711)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($filter_phone_group_id) < 2) or ($LOGdelete_dids < 1) )
		{
		echo "<br>GROUPE DE TÉLÉPHONE FILTRE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>filter_phone_group_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>FILTRE CONFIRMATION DE SUPPRESSION DE TÉLÉPHONE DU GROUPE: $filter_phone_group_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6711&filter_phone_group_id=$filter_phone_group_id&CoNfIrM=YES\">Cliquez ici pour supprimer le groupe TÉLÉPHONE FILTRE $filter_phone_group_id</a><br><br><br>\n";
		}

	$ADD='3711';		# go to filter phone group modification below
	}

######################
# ADD=51111 confirmation before deletion of remote agent record
######################

if ($ADD==51111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($remote_agent_id) < 1) or ($LOGdelete_remote_agents < 1) )
		{
		echo "<br>AGENT DISTANT NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Remote_agent_id be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DE L'AGENT DISTANT: $remote_agent_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=61111&remote_agent_id=$remote_agent_id&CoNfIrM=YES\">Cliquez ici pour supprimer l'agent distant $remote_agent_id</a><br><br><br>\n";
		}

	$ADD='31111';		# go to remote agent modification below
	}

######################
# ADD=52111 confirmation before deletion of extension group record
######################

if ($ADD==52111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($extension_id) < 1) or ($LOGdelete_remote_agents < 1) )
		{
		echo "<br>ENTRÉE DU GROUPE D'EXTENSION PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>extension_id be at least 1 characters in length\n";
		}
	else
		{
		echo "<br><B>GROUPE D'EXTENSION DE SUPPRESSION D'ENTRÉE DE CONFIRMATION: $extension_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=62111&extension_id=$extension_id&CoNfIrM=YES\">Cliquez ici pour supprimer l'entrée du groupe d'extension $extension_id</a><br><br><br>\n";
		}

	$ADD='32111';		# go to extension group modification below
	}

######################
# ADD=511111 confirmation before deletion of user group record
######################

if ($ADD==511111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($user_group) < 2) or ($LOGdelete_user_groups < 1) )
		{
		echo "<br>GROUPE D'UTILISATEUR NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Utilisateur_group be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DU GROUPE D'UTILISATEURS: $user_group</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=611111&user_group=$user_group&CoNfIrM=YES\">Cliquez ici pour supprimer le groupe d'utilisateurs $user_group</a><br><br><br>\n";
		}

	$ADD='311111';		# go to user group modification below
	}

######################
# ADD=5111111 confirmation before deletion of script record
######################

if ($ADD==5111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($script_id) < 2) or ($LOGdelete_scripts < 1) )
		{
		echo "<br>SCRIPT NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Script_id must be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DU SCRIPT: $script_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6111111&script_id=$script_id&CoNfIrM=YES\">Cliquez ici pour supprimer le script $script_id</a><br><br><br>\n";
		}

	$ADD='3111111';		# go to script modification below
	}

######################
# ADD=51111111 confirmation before deletion of filter record
######################

if ($ADD==51111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($lead_filter_id) < 2) or ($LOGdelete_filters < 1) )
		{
		echo "<br>FILTRE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'identifiant du filtre doit contenir au moins 2 caractères\n";
		}
	else
		{
		echo "<br><B>FILTER DELETION CONFIRMATION: $lead_filter_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=61111111&lead_filter_id=$lead_filter_id&CoNfIrM=YES\">Cliquez ici pour effacer le filtre$lead_filter_id</a><br><br><br>\n";
		}

	$ADD='31111111';		# go to filter modification below
	}

######################
# ADD=511111111 confirmation before deletion of call time record
######################

if ($ADD==511111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($call_time_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>PERIODE D'APPELS NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'ID de la période d'appels doit contenir au moins 2 caractères\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESION DE LA PERIODE D'APPELS: $call_time_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=611111111&call_time_id=$call_time_id&CoNfIrM=YES\">Cliquez ici pour supprimercall time $call_time_id</a><br><br><br>\n";
		}

	$ADD='311111111';		# go to call time modification below
	}

######################
# ADD=5111111111 confirmation before deletion of state call time record
######################

if ($ADD==5111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($call_time_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>PERIODE D'APPELS D'ETAT NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'ID de la période d'appels doit contenir au moins 2 caractères\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DE LA PERIODE D'APPELS D'ETAT: $call_time_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6111111111&call_time_id=$call_time_id&CoNfIrM=YES\">Cliquez ici pour supprimerstate call time $call_time_id</a><br><br><br>\n";
		}

	$ADD='3111111111';		# go to state call time modification below
	}

######################
# ADD=531111111 confirmation before deletion of shift record
######################

if ($ADD==531111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($shift_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>MAJ pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Shift ID must be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>SHIFT DELETION CONFIRMATION:$shift_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=631111111&shift_id=$shift_id&CoNfIrM=YES\">Cliquez ici pour supprimer le passage $shift_id</a><br><br><br>\n";
		}

	$ADD='331111111';		# go to call time modification below
	}

######################
# ADD=51111111111 confirmation before deletion of phone record
######################

if ($ADD==51111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($extension) < 2) or (strlen($server_ip) < 7) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>TELEPHONE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Extension be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE LA SUPPRESSION DU TELEPHONE: $extension - $server_ip</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=61111111111&extension=$extension&server_ip=$server_ip&CoNfIrM=YES\">Cliquez ici pour supprimer le téléphone $extension - $server_ip</a><br><br><br>\n";
		}
	$ADD='31111111111';		# go to phone modification below
	}


######################
# ADD=52111111111 confirmation before deletion of phone alias record
######################

if ($ADD==52111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($alias_id) < 1) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>PHONE ALIAS pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Alias ID must be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>PHONE ALIAS DELETION CONFIRMATION: $alias_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=62111111111&alias_id=$alias_id&CoNfIrM=YES\">Cliquez ici pour supprimer le téléphone alias $alias_id</a><br><br><br>\n";
		}
	$ADD='32111111111';		# go to phone alias modification below
	}


######################
# ADD=53111111111 confirmation before deletion of group alias record
######################

if ($ADD==53111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($group_alias_id) < 1) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>GROUPE ALIAS pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Alias Groupe ID must be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>GROUPE ALIAS DELETION CONFIRMATION: $group_alias_id</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=63111111111&group_alias_id=$group_alias_id&CoNfIrM=YES\">Cliquez ici pour supprimer le groupe alias $group_alias_id</a><br><br><br>\n";
		}
	$ADD='33111111111';		# go to group alias modification below
	}


######################
# ADD=511111111111 confirmation before deletion of server record
######################

if ($ADD==511111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($server_id) < 2) or (strlen($server_ip) < 7) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>SERVEUR NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID du serveur be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		echo "<br><B>SERVEUR DELETION CONFIRMATION: $server_id - $server_ip</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=611111111111&server_id=$server_id&server_ip=$server_ip&CoNfIrM=YES\">Cliquez ici pour supprimer le téléphone $server_id - $server_ip</a><br><br><br>\n";
		}
	$ADD='311111111111';		# go to server modification below
	}


######################
# ADD=531111111111 confirmation before deletion of conf template record
######################

if ($ADD==531111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($template_id) < 2)
		{
		echo "<br>CONF TEMPLATE pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID modèle être d'au moins 2 caractères\n";
		}
	else
		{
		echo "<br><B>CONF TEMPLATE DELETION CONFIRMATION: $template_id - $template_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=631111111111&template_id=$template_id&server_ip=$server_ip&CoNfIrM=YES\">Cliquez ici pour supprimer le modèle de conf $template_id - $template_name</a><br><br><br>\n";
		}
	$ADD='331111111111';		# go to conf template modification below
	}


######################
# ADD=541111111111 confirmation before deletion of carrier record
######################

if ($ADD==541111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($carrier_id) < 2)
		{
		echo "<br>CARRIER pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Carrier ID être d'au moins 2 caractères\n";
		}
	else
		{
		echo "<br><B>SUPPRESSION DE SUPPORT DE CONFIRMATION: $carrier_id - $carrier_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=641111111111&carrier_id=$carrier_id&CoNfIrM=YES\">Cliquez ici pour supprimer le transporteur $carrier_id - $carrier_name</a><br><br><br>\n";
		}
	$ADD='341111111111';		# go to carrier modification below
	}


######################
# ADD=551111111111 confirmation before deletion of tts record
######################

if ($ADD==551111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($tts_id) < 2)
		{
		echo "<br>TTS ENTRY pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>TTS ID be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>TTS ENTREE DE SUPPRESSION DE CONFIRMATION: $tts_id - $tts_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=651111111111&tts_id=$tts_id&CoNfIrM=YES\">Cliquez ici pour supprimer l-entrée tts $tts_id - $tts_name</a><br><br><br>\n";
		}
	$ADD='351111111111';		# go to tts entry modification below
	}


######################
# ADD=561111111111 confirmation before deletion of music on hold record
######################

if ($ADD==561111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($moh_id) < 2)
		{
		echo "<br>MUSIC ON HOLD ENTRY pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>MOH ID be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>MUSIC ON HOLD ENTREE DE SUPPRESSION DE CONFIRMATION: $moh_id - $moh_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=661111111111&moh_id=$moh_id&CoNfIrM=YES\">Cliquez ici pour supprimer la musique en attente d-entrée $moh_id - $moh_name</a><br><br><br>\n";
		}
	$ADD='361111111111';		# go to music on hold entry modification below
	}


######################
# ADD=571111111111 confirmation before deletion of voicemail record
######################

if ($ADD==571111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($voicemail_id) < 2)
		{
		echo "<br>La boîte vocale pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID vocale be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>La boîte vocale SUPPRESSION DE CONFIRMATION: $voicemail_id - $fullname</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=671111111111&voicemail_id=$voicemail_id&CoNfIrM=YES\">Cliquez ici pour supprimer boîte vocale $voicemail_id - $fullname</a><br><br><br>\n";
		}
	$ADD='371111111111';		# go to voicemail entry modification below
	}


######################
# ADD=581111111111 confirmation before deletion of screen label record
######################

if ($ADD==581111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($label_id) < 2)
		{
		echo "<br>LABEL ECRAN PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Label ID be at least 2 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFIRMATION DE SUPPRESSION D'ÉCRAN LABEL: $label_id - $label_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=681111111111&label_id=$label_id&CoNfIrM=YES\">Cliquez ici pour supprimer l'étiquette d'écran $label_id - $label_name</a><br><br><br>\n";
		}
	$ADD='381111111111';		# go to screen label entry modification below
	}


######################
# ADD=591111111111 confirmation before deletion of contact record
######################

if ($ADD==591111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($contact_id) < 1)
		{
		echo "<br>CONTACT PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Contact ID must be at least 1 character in length\n";
		}
	else
		{
		echo "<br><B>CONTACT Confirmation de suppression: $contact_id - $first_name - $last_name</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=691111111111&contact_id=$contact_id&CoNfIrM=YES\">Cliquez ici pour supprimercontact $contact_id - $first_name - $last_name</a><br><br><br>\n";
		}
	$ADD='391111111111';		# go to contact entry modification below
	}


######################
# ADD=5111111111111 confirmation before deletion of conference record
######################

if ($ADD==5111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($conf_exten) < 2) or (strlen($server_ip) < 7) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>CONFERENCE NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Conference must be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		echo "<br><B>CONFERENCE DELETION CONFIRMATION: $conf_exten - $server_ip</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=6111111111111&conf_exten=$conf_exten&server_ip=$server_ip&CoNfIrM=YES\">Cliquez ici pour supprimer le téléphone $conf_exten - $server_ip</a><br><br><br>\n";
		}
	$ADD='3111111111111';		# go to conference modification below
	}


######################
# ADD=51111111111111 confirmation before deletion of vicidial conference record
######################

if ($ADD==51111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($conf_exten) < 2) or (strlen($server_ip) < 7) or ($LOGast_delete_phones < 1) )
		{
		echo "<br>VICIDIAL CONFERENCE NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Conference must be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		echo "<br><B>VICIDIAL CONFERENCE DELETION CONFIRMATION: $conf_exten - $server_ip</B>\n";
		echo "<br><br><a href=\"$PHP_SELF?ADD=61111111111111&conf_exten=$conf_exten&server_ip=$server_ip&CoNfIrM=YES\">Cliquez ici pour supprimer le téléphone $conf_exten - $server_ip</a><br><br><br>\n";
		}
	$ADD='31111111111111';		# go to vicidial conference modification below
	}



######################################################################################################
######################################################################################################
#######   6 series, delete records
######################################################################################################
######################################################################################################


######################
# ADD=6 delete user record
######################

if ($ADD==6)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( ( strlen($user) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_users < 1) )
		{
		echo "<br>UTILISATEUR NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Utilisateur be at least 2 characters in length\n";
		}
	else
		{
		if ( ($LOGmodify_same_user_level < 1) and ($user=='$PHP_AUTH_USER') )
			{
			echo "Vous n'êtes pas autorisé à modifier votre propre utilisateur\n";
			exit;
			}
		else
			{
			$stmtA="DELETE from vicidial_users where user='$user' $LOGadmin_viewable_groupsSQL limit 1;";
			$rslt=mysql_query($stmtA, $link);

			$stmt="DELETE from vicidial_campaign_agents where user='$user';";
			$rslt=mysql_query($stmt, $link);

			$stmt="DELETE from vicidial_inbound_group_agents where user='$user';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmtA|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='DELETE', record_id='$user', event_code='ADMIN DELETE USER', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>SUPPRESSION DE L'UTILISATEUR CONFIRMEE: $user</B>\n";
			echo "<br><br>\n";
			}
		}
	$ADD='0';		# go to user list
	}

######################
# ADD=61 delete campaign record
######################

if ($ADD==61)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( ( strlen($campaign_id) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_campaigns < 1) )
		{
		echo "<br>CAMPAGNE NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Campagne_id be at least 2 characters in length\n";
		}
	else
		{
		$stmtA="DELETE from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL limit 1;";
		$rslt=mysql_query($stmtA, $link);

		$stmt="DELETE from vicidial_campaign_agents where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_live_agents where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_hotkeys where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_callbacks where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_stats where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_stats_debug where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_lead_recycle where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_server_stats where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_server_trunks where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_pause_codes where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaigns_list_mix where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_xfer_presets where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_xfer_stats where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);		

		echo "<br>ENLEVER LES FICHES DU VIEUX DISTRIBUTEUR DE FICHES DE LA CAMAPGNE ($campaign_id)\n";
		$stmt="DELETE from vicidial_hopper where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPRESSION DE LA CAMPAGNE CONFIRMEE: $campaign_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='10';		# go to campaigns list
	}


######################
# ADD=62 Logout all agents from a campaign
######################

if ($ADD==62)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($campaign_id) < 2)
			{
			echo "<br>AGENTS NON DECONNECTES DE LA CAMPAGNE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Campagne_id be at least 2 characters in length\n";
			}
		else
			{
			$now_date_epoch = date('U');
			$inactive_epoch = ($now_date_epoch - 60);
			$stmt = "SELECT user,campaign_id,UNIX_TIMESTAMP(last_update_time),extension from vicidial_live_agents where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "<BR>$stmt\n";}
			$vla_ct = mysql_num_rows($rslt);
			$k=0;
			while ($vla_ct > $k)
				{
				$row=mysql_fetch_row($rslt);
				$VLA_user[$k] =			$row[0];
				$VLA_campaign_id[$k] =	$row[1];
				$VLA_update_time[$k] =	$row[2];
				$VLA_extension[$k] =	$row[3];
				$k++;
				}

			$k=0;
			while ($vla_ct > $k)
				{
				if ($VLA_update_time[$k] > $inactive_epoch)
					{
					$lead_active=0;
					$stmt = "SELECT agent_log_id,user,server_ip,event_time,lead_id,campaign_id,pause_epoch,pause_sec,wait_epoch,wait_sec,talk_epoch,talk_sec,dispo_epoch,dispo_sec,status,user_group,comments,sub_status,dead_epoch,dead_sec from vicidial_agent_log where user='$VLA_user[$k]' order by agent_log_id desc LIMIT 1;";
					$rslt=mysql_query($stmt, $link);
					if ($DB) {echo "<BR>$stmt\n";}
					$val_ct = mysql_num_rows($rslt);
					if ($val_ct > 0)
						{
						$row=mysql_fetch_row($rslt);
						$VAL_agent_log_id =		$row[0];
						$VAL_user =				$row[1];
						$VAL_server_ip =		$row[2];
						$VAL_event_time =		$row[3];
						$VAL_lead_id =			$row[4];
						$VAL_campaign_id =		$row[5];
						$VAL_pause_epoch =		$row[6];
						$VAL_pause_sec =		$row[7];
						$VAL_wait_epoch =		$row[8];
						$VAL_wait_sec =			$row[9];
						$VAL_talk_epoch =		$row[10];
						$VAL_talk_sec =			$row[11];
						$VAL_dispo_epoch =		$row[12];
						$VAL_dispo_sec =		$row[13];
						$VAL_status =			$row[14];
						$VAL_user_group =		$row[15];
						$VAL_comments =			$row[16];
						$VAL_sub_status =		$row[17];
						$VAL_dead_epoch =		$row[18];
						$VAL_dead_sec =			$row[19];

						if ($DB) {echo "\n<BR>VAL VALUES: $VAL_agent_log_id|$VAL_status|$VAL_lead_id\n";}

						if ( ($VAL_wait_epoch < 1) or ( ($VAL_status == 'PAUSE') and ($VAL_dispo_epoch < 1) ) )
							{
							$VAL_pause_sec = ( ($now_date_epoch - $VAL_pause_epoch) + $VAL_pause_sec);
							$stmt = "UPDATE vicidial_agent_log SET wait_epoch='$now_date_epoch', pause_sec='$VAL_pause_sec' where agent_log_id='$VAL_agent_log_id';";
							}
						else
							{
							if ($VAL_talk_epoch < 1)
								{
								$VAL_wait_sec = ( ($now_date_epoch - $VAL_wait_epoch) + $VAL_wait_sec);
								$stmt = "UPDATE vicidial_agent_log SET talk_epoch='$now_date_epoch', wait_sec='$VAL_wait_sec' where agent_log_id='$VAL_agent_log_id';";
								}
							else
								{
								$lead_active++;
								$status_update_SQL='';
								if ( ( (strlen($VAL_status) < 1) or ($VAL_status == 'NULL') ) and ($VAL_lead_id > 0) )
									{
									$status_update_SQL = ", status='PU'";
									$stmt="UPDATE vicidial_list SET status='PU' where lead_id='$VAL_lead_id';";
									if ($DB) {echo "<BR>$stmt\n";}
									$rslt=mysql_query($stmt, $link);
									}
								if ($VAL_dispo_epoch < 1)
									{
									$VAL_talk_sec = ($now_date_epoch - $VAL_talk_epoch);
									$stmt = "UPDATE vicidial_agent_log SET dispo_epoch='$now_date_epoch', talk_sec='$VAL_talk_sec'$status_update_SQL where agent_log_id='$VAL_agent_log_id';";
									}
								else
									{
									if ($VAL_dispo_sec < 1)
										{
										$VAL_dispo_sec = ($now_date_epoch - $VAL_dispo_epoch);
										$stmt = "UPDATE vicidial_agent_log SET dispo_sec='$VAL_dispo_sec' where agent_log_id='$VAL_agent_log_id';";
										}
									}
								}
							}

						if ($DB) {echo "<BR>$stmt\n";}
						$rslt=mysql_query($stmt, $link);
						}
					}

				$stmt="DELETE from vicidial_live_agents where user='$VLA_user[$k]';";
				if ($DB) {echo "<BR>$stmt\n";}
				$rslt=mysql_query($stmt, $link);

				if (strlen($VAL_user_group) < 1)
					{
					$stmt = "SELECT user_group FROM vicidial_users where user='$VLA_user[$k]' $LOGadmin_viewable_groupsSQL;";
					$rslt=mysql_query($stmt, $link);
					if ($DB) {echo "<BR>$stmt\n";}
					$val_ct = mysql_num_rows($rslt);
					if ($val_ct > 0)
						{
						$row=mysql_fetch_row($rslt);
						$VAL_user_group =		$row[0];
						}
					}

				$stmt = "INSERT INTO vicidial_user_log (user,event,campaign_id,event_date,event_epoch,user_group) values('$VLA_user[$k]','LOGOUT','$VLA_campaign_id[$k]','$SQLdate','$now_date_epoch','$VAL_user_group');";
				if ($DB) {echo "<BR>$stmt\n";}
				$rslt=mysql_query($stmt, $link);


				#############################################
				##### START QUEUEMETRICS LOGGING LOOKUP #####
				$stmt = "SELECT enable_queuemetrics_logging,queuemetrics_server_ip,queuemetrics_dbname,queuemetrics_login,queuemetrics_pass,queuemetrics_log_id,queuemetrics_loginout,queuemetrics_addmember_enabled,queuemetrics_dispo_pause,queuemetrics_pe_phone_append FROM system_settings;";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "<BR>$stmt\n";}
				$qm_conf_ct = mysql_num_rows($rslt);
				if ($qm_conf_ct > 0)
					{
					$row=mysql_fetch_row($rslt);
					$enable_queuemetrics_logging =		$row[0];
					$queuemetrics_server_ip	=			$row[1];
					$queuemetrics_dbname =				$row[2];
					$queuemetrics_login	=				$row[3];
					$queuemetrics_pass =				$row[4];
					$queuemetrics_log_id =				$row[5];
					$queuemetrics_loginout =			$row[6];
					$queuemetrics_addmember_enabled =	$row[7];
					$queuemetrics_dispo_pause =			$row[8];
					$queuemetrics_pe_phone_append =		$row[9];
					}
				##### END QUEUEMETRICS LOGGING LOOKUP #####
				###########################################
				if ($enable_queuemetrics_logging > 0)
					{
					$QM_LOGOFF = 'AGENTLOGOFF';
					if ($queuemetrics_loginout=='CALLBACK')
						{$QM_LOGOFF = 'AGENTCALLBACKLOGOFF';}

					$linkB=mysql_connect("$queuemetrics_server_ip", "$queuemetrics_login", "$queuemetrics_pass");
					mysql_select_db("$queuemetrics_dbname", $linkB);

					$agents='@agents';
					$agent_logged_in='';
					$time_logged_in='0';

					$stmtB = "SELECT agent,time_id,data1 FROM queue_log where agent='Agent/$VLA_user[$k]' and verb IN('AGENTLOGIN','AGENTCALLBACKLOGIN') and time_id > $check_time order by time_id desc limit 1;";
					$rsltB=mysql_query($stmtB, $linkB);
					if ($DB) {echo "<BR>$stmtB\n";}
					$qml_ct = mysql_num_rows($rsltB);
					if ($qml_ct > 0)
						{
						$row=mysql_fetch_row($rsltB);
						$agent_logged_in =		$row[0];
						$time_logged_in =		$row[1];
						$RAWtime_logged_in =	$row[1];
						$phone_logged_in =		$row[2];
						}

					$time_logged_in = ($now_date_epoch - $time_logged_in);
					if ($time_logged_in > 1000000) {$time_logged_in=1;}

					if ($queuemetrics_loginout == 'NONE')
						{
						$stmt = "INSERT INTO queue_log SET partition='P01',time_id='$now_date_epoch',call_id='NONE',queue='NONE',agent='Agent/$VLA_user[$k]',verb='PAUSEREASON',serverid='$queuemetrics_log_id',data1='LOGOFF';";
						if ($DB) {echo "$stmt\n";}
						$rslt=mysql_query($stmt, $linkB);
						$affected_rows = mysql_affected_rows($linkB);
						}

					if ($queuemetrics_addmember_enabled > 0)
						{
						$queuemetrics_phone_environment='';
						$stmt = "SELECT queuemetrics_phone_environment FROM vicidial_campaigns where campaign_id='$VLA_campaign_id[$k]' $LOGallowed_campaignsSQL;";
						$rslt=mysql_query($stmt, $link);
						if ($DB) {echo "<BR>$stmt\n";}
						$cqpe_ct = mysql_num_rows($rslt);
						if ($cqpe_ct > 0)
							{
							$row=mysql_fetch_row($rslt);
							$queuemetrics_phone_environment =	$row[0];
							}

						if ( ($time_logged_in < 1) or ($queuemetrics_loginout == 'NONE') )
							{
							$stmtB = "SELECT agent,time_id,data3 FROM queue_log where agent='Agent/$VLA_user[$k]' and verb='PAUSEREASON' and data1='LOGIN' order by time_id desc limit 1;";
							$rsltB=mysql_query($stmtB, $linkB);
							if ($DB) {echo "<BR>$stmtB\n";}
							$qml_ct = mysql_num_rows($rsltB);
							if ($qml_ct > 0)
								{
								$row=mysql_fetch_row($rsltB);
								$agent_logged_in =		$row[0];
								$time_logged_in =		$row[1];
								$RAWtime_logged_in =	$row[1];
								$phone_logged_in =		$row[2];
								}
							$time_logged_in = ($now_date_epoch - $time_logged_in);
							if ($time_logged_in > 1000000) {$time_logged_in=1;}
							}
						$stmt = "SELECT distinct queue FROM queue_log where time_id >= $RAWtime_logged_in and agent='$agent_logged_in' and verb IN('ADDMEMBER','ADDMEMBER2')  and queue != '$VLA_campaign_id[$k]' order by time_id desc;";
						$rslt=mysql_query($stmt, $linkB);
						if ($DB) {echo "$stmt\n";}
						$amq_conf_ct = mysql_num_rows($rslt);
						$i=0;
						while ($i < $amq_conf_ct)
							{
							$row=mysql_fetch_row($rslt);
							$AMqueue[$i] =	$row[0];
							$i++;
							}

						### add the logged-in campaign as well
						$AMqueue[$i] = $VLA_campaign_id[$k];
						$i++;
						$amq_conf_ct++;

						$i=0;
						while ($i < $amq_conf_ct)
							{
							$pe_append='';
							if ( ($queuemetrics_pe_phone_append > 0) and (strlen($queuemetrics_phone_environment)>0) )
								{
								$qm_extension = explode('/',$phone_logged_in);
								$pe_append = "-$qm_extension[1]";
								}
							$stmt = "INSERT INTO queue_log SET partition='P01',time_id='$now_date_epoch',call_id='NONE',queue='$AMqueue[$i]',agent='$agent_logged_in',verb='REMOVEMEMBER',data1='$phone_logged_in',serverid='$queuemetrics_log_id',data4='$queuemetrics_phone_environment$pe_append';";
							$rslt=mysql_query($stmt, $linkB);
							$affected_rows = mysql_affected_rows($linkB);
							$i++;
							}
						}

					if ($queuemetrics_loginout != 'NONE')
						{
						$stmtB = "INSERT INTO queue_log SET partition='P01',time_id='$now_date_epoch',call_id='NONE',queue='NONE',agent='$agent_logged_in',verb='$QM_LOGOFF',serverid='$queuemetrics_log_id',data1='$phone_logged_in',data2='$time_logged_in';";
						if ($DB) {echo "<BR>$stmtB\n";}
						$rsltB=mysql_query($stmtB, $linkB);
						}
					}

				echo "<!-- Agent $VLA_user[$k] has been emergency logged out, make sure they close their web browser<BR> -->\n";

				$k++;
				}

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='LOGOUT', record_id='$campaign_id', event_code='ADMIN LOGOUT CAMPAIGN AGENTS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>Déconnection des agents terminée: $campaign_id</B>\n";
			echo "<br><br>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD='31';		# go to campaign modification below
	}


######################
# ADD=63 Emergency VDAC Jam Clear
######################

if ($ADD==63)
	{
	if ($LOGmodify_campaigns==1)
		{
		if (eregi('IN',$stage))
			{$group_id=$campaign_id;}
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if (strlen($campaign_id) < 2)
			{
			echo "<br>VDAC NON EFFACE POUR LA CAMPAGNE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>Campagne_id be at least 2 characters in length\n";
			}
		else
			{
			$stmt="DELETE from vicidial_auto_calls where status='LIVE' and campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by call_time limit 1;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGNS', event_type='RESET', record_id='$campaign_id', event_code='ADMIN RESET CAMPAIGN JAM', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>DERNIER ENREGISTREMENT VDAC DE LA CAMPAGNE EFFACE: $campaign_id</B>\n";
			echo "<br><br>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	# go to campaign modification below
	if (eregi('IN',$stage))
		{$ADD='3111';}
	else
		{$ADD='31';}
	}


######################
# ADD=65 delete campaign lead recycle in the system
######################

if ($ADD==65)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
			{
			echo "<br>RECYCLAGE DES FICHES DE LA CAMPAGNE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
			echo "<br>le délai d'attente doit être au moins 120 secondes\n";
			echo "<br>le nombre d'essais maximum doit être compris entre 1 et 10\n";
			}
		else
			{
			echo "<br><B>RECYCLAGE DES FICHES DE LA CAMPAGNE SUPPRIME: $campaign_id - $status - $attempt_delay</B>\n";

			$stmt="DELETE FROM vicidial_lead_recycle where campaign_id='$campaign_id' and status='$status' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_RECYCLE', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN LEAD RECYCLE', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=25;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=66 delete auto alt dial status from the campaign
######################

if ($ADD==66)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
		$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id' and auto_alt_dial_statuses LIKE \"% $status %\" $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] < 1)
			{echo "<br>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF NON SUPPRIME - ce statut d'appel automatique du numéro alternatif n'est pas dans cette campagne\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
				{
				echo "<br>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
				}
			else
				{
				echo "<br><B>STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF SUPPRIME: $campaign_id - $status</B>\n";

				$stmt="SELECT auto_alt_dial_statuses from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);

				$auto_alt_dial_statuses = eregi_replace(" $status "," ",$row[0]);
				$stmt="UPDATE vicidial_campaigns set auto_alt_dial_statuses='$auto_alt_dial_statuses' where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_ALTDIALS', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN ALT DIAL', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=26;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=67 delete agent pause code in the system
######################

if ($ADD==67)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($pause_code) < 1) )
			{
			echo "<br>CODE DE PAUSE DE LA CAMPAGNE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>pause code must be between 1 and 6 characters in length\n";
			}
		else
			{
			echo "<br><B>CAMPAIGN PAUSE CODE DELETED: $campaign_id - $pause_code</B>\n";

			$stmt="DELETE FROM vicidial_pause_codes where campaign_id='$campaign_id' and pause_code='$pause_code' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PAUSECODES', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN PAUSE CODE', event_sql=\"$SQL_log\", event_notes='Etat: $pause_code';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=27;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=68 remove campaign dial status
######################

if ($ADD==68)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
		$stmt="SELECT count(*) from vicidial_campaigns where campaign_id='$campaign_id' and dial_statuses LIKE \"% $status %\" $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if ($row[0] < 1)
			{echo "<br>STATUT D'APPEL POUR CETTE CAMPAGNE NON SUPPRIME - ce statut d'appel n'est pas selectionné pour cette campagne\n";}
		else
			{
			if ( (strlen($campaign_id) < 2) or (strlen($status) < 1) )
				{
				echo "<br>STATUT D'APPEL POUR CETTE CAMPAGNE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
				echo "<br>le statut doit contenir entre 1 et 6 caractères\n";
				}
			else
				{
				echo "<br><B>STATUT D'APPEL POUR CETTE CAMPAGNE SUPPRIME: $campaign_id - $status</B>\n";

				$stmt="SELECT dial_statuses from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);

				$dial_statuses = eregi_replace(" $status "," ",$row[0]);
				$stmt="UPDATE vicidial_campaigns set dial_statuses='$dial_statuses' where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);

				### LOG INSERTION Admin Log Table ###
				$SQL_log = "$stmt|";
				$SQL_log = ereg_replace(';','',$SQL_log);
				$SQL_log = addslashes($SQL_log);
				$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_DIALSTATUSES', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN DIAL STATUS', event_sql=\"$SQL_log\", event_notes='Etat: $status';";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	#$SUB=28;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=601 delete preset in the system
######################

if ($ADD==601)
	{
	if ($LOGmodify_campaigns==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($preset_name) < 1) )
			{
			echo "<br>PRESET CAMPAGNE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>preset name must be between 1 and 40 characters in length\n";
			}
		else
			{
			echo "<br><B>CAMPAIGN PRESET DELETED: $campaign_id - $preset_name</B>\n";

			$stmt="DELETE FROM vicidial_xfer_presets where campaign_id='$campaign_id' and preset_name='$preset_name' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);

			$stmt="DELETE FROM vicidial_xfer_stats where campaign_id='$campaign_id' and preset_name='$preset_name' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CAMPAIGN_PRESETS', event_type='DELETE', record_id='$campaign_id', event_code='ADMIN DELETE CAMPAIGN PRESET', event_sql=\"$SQL_log\", event_notes='Preset: $preset_name';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$SUB=201;
	$ADD=31;	# go to campaign modification form below
	}


######################
# ADD=611 delete list record and all leads within it
######################

if ($ADD==611)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( ( strlen($list_id) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_lists < 1) )
		{
		echo "<br>LISTE NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>List_id be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_lists where list_id='$list_id' $LOGallowed_campaignsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		echo "<br>ENLEVER LES FICHES DU VIEUX DISTRIBUTEUR DE FICHES DE LA CAMAPGNE ($list_id)\n";
		$stmt="DELETE from vicidial_hopper where list_id='$list_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);

		echo "<br>SUPPRIMER LES FICHES DE LA LISTE DE LA TABLE VICIDIAL_LIST\n";
		$stmt="DELETE from vicidial_list where list_id='$list_id';";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LISTS', event_type='DELETE', record_id='$list_id', event_code='ADMIN DELETE LIST', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DE LA LISTE CONFIRMEE: $list_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='100';		# go to lists list
	}

######################
# ADD=6111 delete in-group record
######################

if ($ADD==6111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($group_id) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_ingroups < 1) )
		{
		echo "<br>IN-GROUP NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Group_id be at least 2 characters in length\n";
		}
	else
		{
		$stmtA="DELETE from vicidial_inbound_groups where group_id='$group_id' and group_id NOT IN('AGENTDIRECT') $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmtA, $link);

		$stmt="DELETE from vicidial_inbound_group_agents where group_id='$group_id';";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_live_inbound_agents where group_id='$group_id';";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_stats where campaign_id='$group_id';";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_campaign_stats_debug where campaign_id='$group_id';";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='DELETE', record_id='$group_id', event_code='ADMIN DELETE INGROUP', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DU IN-GROUP TERMINEE: $group_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1000';		# go to in-group list
	}


######################
# ADD=6311 delete did record
######################

if ($ADD==6311)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($did_id) < 1) or ($CoNfIrM != 'YES') or ($LOGdelete_dids < 1) )
		{
		echo "<br>NE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>did_id be at least 1 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_inbound_dids where did_id='$did_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DIDS', event_type='DELETE', record_id='$did_id', event_code='ADMIN DELETE DID', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>A DELETION ACCOMPLIES: $did_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1300';		# go to did list
	}

######################
# ADD=6511 delete call menu record
######################

if ($ADD==6511)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($menu_id) < 1) or ($CoNfIrM != 'YES') or ($LOGdelete_dids < 1) )
		{
		echo "<br>CALL MENU pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>menu_id be at least 1 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_call_menu where menu_id='$menu_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		$stmtA="DELETE from vicidial_call_menu_options where menu_id='$menu_id' limit 17;";
		$rslt=mysql_query($stmtA, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|$stmtA";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLMENUS', event_type='DELETE', record_id='$menu_id', event_code='ADMIN DELETE CALL MENU', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>APPEL menu de suppression REMPLI: $menu_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1500';		# go to call menu list
	}

######################
# ADD=6711 delete filter phone group record
######################

if ($ADD==6711)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($filter_phone_group_id) < 1) or ($CoNfIrM != 'YES') or ($LOGdelete_dids < 1) )
		{
		echo "<br>GROUPE DE TÉLÉPHONE FILTRE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>filter_phone_group_id be at least 1 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_filter_phone_groups where filter_phone_group_id='$filter_phone_group_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		$stmtA="DELETE from vicidial_filter_phone_numbers where filter_phone_group_id='$filter_phone_group_id';";
		$rslt=mysql_query($stmtA, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|$stmtA";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTERPHONEGROUPS', event_type='DELETE', record_id='$filter_phone_group_id', event_code='ADMIN DELETE FILTER PHONE GROUP', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>FILTRE DE SUPPRESSION DU GROUPE DE TÉLÉPHONE REMPLI: $filter_phone_group_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1700';		# go to filter phone group list
	}

######################
# ADD=61111 delete remote agent record
######################

if ($ADD==61111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($remote_agent_id) < 1) or ($CoNfIrM != 'YES') or ($LOGdelete_remote_agents < 1) )
		{
		echo "<br>AGENT DISTANT NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Remote_agent_id be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_remote_agents where remote_agent_id='$remote_agent_id' limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='REMOTEAGENTS', event_type='DELETE', record_id='$remote_agent_id', event_code='ADMIN DELETE REMOTE AGENT', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DE L'AGENT DISTANT CONFIRMEE: $remote_agent_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='10000';		# go to remote agents list
	}

######################
# ADD=62111 delete extension group record
######################

if ($ADD==62111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($extension_id) < 1) or ($CoNfIrM != 'YES') or ($LOGdelete_remote_agents < 1) )
		{
		echo "<br>ENTRÉE DU GROUPE D'EXTENSION PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>extension_id be at least 1 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_extension_groups where extension_id='$extension_id' limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='EXTENGROUP', event_type='DELETE', record_id='$extension_id', event_code='ADMIN DELETE EXTENSION GROUP', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>Suppression de la commande EXTENSION groupe a achevé: $extension_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='12000';		# go to extension group list
	}



######################
# ADD=611111 delete user group record
######################

if ($ADD==611111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($user_group) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_user_groups < 1) )
		{
		echo "<br>GROUPE D'UTILISATEUR NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Utilisateur_group be at least 2 characters in length\n";
		}
	else
		{
		if ( ($LOGmodify_same_user_level < 1) and ($user_group=="$LOGuser_group") )
			{
			echo "Vous n'êtes pas autorisé à modifier votre propre groupe d'utilisateurs\n";
			exit;
			}
		else
			{
			$stmt="DELETE from vicidial_user_groups where user_group='$user_group' $LOGadmin_viewable_groupsSQL limit 1;";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='USERGROUPS', event_type='DELETE', record_id='$user_group', event_code='ADMIN DELETE GROUPE D'UTILISATEURS', event_sql=\"$SQL_log\", event_notes='';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);

			echo "<br><B>SUPPRESSION DU GROUPE D'UTILISATEURS TERMINEE: $user_group</B>\n";
			echo "<br><br>\n";
			}
		}
	$ADD='100000';		# go to user group list
	}

######################
# ADD=6111111 delete script record
######################

if ($ADD==6111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($script_id) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_scripts < 1) )
		{
		echo "<br>SCRIPT NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Script_id be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_scripts where script_id='$script_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SCRIPTS', event_type='DELETE', record_id='$script_id', event_code='ADMIN DELETE SCRIPT', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DU SCRIPT TERMINEE: $script_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1000000';		# go to script list
	}


######################
# ADD=61111111 delete filter record
######################

if ($ADD==61111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($lead_filter_id) < 2) or ($CoNfIrM != 'YES') or ($LOGdelete_filters < 1) )
		{
		echo "<br>FILTRE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'identifiant du filtre doit contenir au moins 2 caractères\n";
		}
	else
		{
		$stmt="DELETE from vicidial_lead_filters where lead_filter_id='$lead_filter_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='FILTRES', event_type='DELETE', record_id='$lead_filter_id', event_code='ADMIN DELETE FILTRES', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>EFFACEMENT DU FILTRE TERMINE: $lead_filter_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='10000000';		# go to filter list
	}


######################
# ADD=611111111 delete call times record
######################

if ($ADD==611111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($call_time_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>PERIODE D'APPELS NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'ID de la période d'appels doit contenir au moins 2 caractères\n";
		}
	else
		{
		$stmt="DELETE from vicidial_call_times where call_time_id='$call_time_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES', event_type='DELETE', record_id='$call_time_id', event_code='ADMIN DELETE CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DE LA PERIODE D'APPELS TERMINEE: $call_time_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='100000000';		# go to call times list
	}


######################
# ADD=6111111111 delete state call times record
######################

if ($ADD==6111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($call_time_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>PERIODE D'APPELS D'ETAT NON SUPPRIMEE - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>L'ID de la période d'appels doit contenir au moins 2 caractères\n";
		}
	else
		{
		$stmtA="DELETE from vicidial_state_call_times where state_call_time_id='$call_time_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmtA, $link);

		$stmt="SELECT call_time_id,ct_state_call_times from vicidial_call_times where ct_state_call_times LIKE \"%|$call_time_id|%\" order by call_time_id;";
		$rslt=mysql_query($stmt, $link);
		$sct_to_print = mysql_num_rows($rslt);
		$sct_list='';

		$o=0;
		while ($sct_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$sct_ids[$o] = "$rowx[0]";
			$sct_states[$o] = "$rowx[1]";
			$o++;
			}
		$o=0;
		while ($sct_to_print > $o) 
			{
			$sct_states[$o] = eregi_replace("\|$call_time_id\|",'|',$sct_states[$o]);
			$stmt="UPDATE vicidial_call_times set ct_state_call_times='$sct_states[$o]' where call_time_id='$sct_ids[$o]';";
			$rslt=mysql_query($stmt, $link);
			echo "$stmt\n";
			echo "Règle d'état supprimée: $sct_ids[$o]<BR>\n";
			$o++;
			}

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CALLTIMES', event_type='DELETE', record_id='$call_time_id', event_code='ADMIN DELETE STATE CALL TIME', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DE LA PERIODE D'APPELS D'ETAT TERMINEE: $call_time_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='1000000000';		# go to call times list
	}


######################
# ADD=631111111 delete shift record
######################

if ($ADD==631111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($shift_id) < 2) or ($LOGdelete_call_times < 1) )
		{
		echo "<br>MAJ pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Shift ID must be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_shifts where shift_id='$shift_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SHIFTS', event_type='DELETE', record_id='$shift_id', event_code='ADMIN DELETE SHIFT', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SHIFT DELETION ACHEVES: $shift_id</B>\n";
		echo "<br><br>\n";
		}

	$ADD='130000000';		# go to shifts list
	}


######################
# ADD=61111111111 delete phone record
######################

if ($ADD==61111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($extension) < 2) or (strlen($server_ip) < 7) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>TELEPHONE NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Extension be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		$stmt="DELETE from phones where extension='$extension' and server_ip='$server_ip' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$server_ip';";
		$rslt=mysql_query($stmtA, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONES', event_type='DELETE', record_id='$extension', event_code='ADMIN DELETE PHONE', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION DU TELEPHONE TERMINEE: $extension - $server_ip</B>\n";
		echo "<br><br>\n";
		}
	$ADD='10000000000';		# go to phone list
	}


######################
# ADD=62111111111 delete phone alias record
######################

if ($ADD==62111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($alias_id) < 2) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>PHONE ALIAS pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Alias ID must be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from phones_alias where alias_id='$alias_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='PHONEALIASES', event_type='DELETE', record_id='$alias_id', event_code='ADMIN DELETE PHONE ALIAS', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>PHONE ALIAS DELETION ACCOMPLIES: $alias_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='12000000000';		# go to phone alias list
	}


######################
# ADD=63111111111 delete group alias record
######################

if ($ADD==63111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($group_alias_id) < 2) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>GROUPE ALIAS pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Alias Groupe ID must be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from groups_alias where group_alias_id='$group_alias_id' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='GROUPALIASES', event_type='DELETE', record_id='$group_alias_id', event_code='ADMIN DELETE GROUP ALIAS', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>GROUPE ALIAS DELETION ACCOMPLIES: $group_alias_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='13000000000';		# go to group alias list
	}


######################
# ADD=611111111111 delete server record
######################

if ($ADD==611111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($server_id) < 2) or (strlen($server_ip) < 7) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>SERVEUR NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID du serveur be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		$stmt="DELETE from servers where server_id='$server_id' and server_ip='$server_ip' $LOGadmin_viewable_groupsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERS', event_type='DELETE', record_id='$server_id', event_code='ADMIN DELETE SERVER', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SERVEUR DELETION COMPLETED: $server_id - $server_ip</B>\n";
		echo "<br><br>\n";
		}
	$ADD='100000000000';		# go to server list
	}


######################
# ADD=621111111111 delete vicidial server trunk record in the system
######################

if ($ADD==621111111111)
	{
	if ($LOGmodify_servers==1)
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (strlen($campaign_id) < 2) or (strlen($server_ip) < 7) )
			{
			echo "<br>TRUNK DU SERVEUR VICIDIAL NON SUPPRIME - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
			echo "<br>la campagne doit contenir entre 3 et 8 caractères\n";
			echo "<br>le délai du server_ip doit contenir au moins 7 caractères\n";
			}
		else
			{
			echo "<br><B>TRUNK DU SERVEUR VICIDIAL SUPPRIME: $campaign_id - $server_ip</B>\n";

			$stmt="DELETE FROM vicidial_server_trunks where campaign_id='$campaign_id' and server_ip='$server_ip';";
			$rslt=mysql_query($stmt, $link);

			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmt|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='SERVERMalles', event_type='DELETE', record_id='$server_ip', event_code='ADMIN DELETE SERVEUR TRUNK', event_sql=\"$SQL_log\", event_notes='Campagne: $campaign_id';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	$ADD=311111111111;	# go to server modification form below
	}


######################
# ADD=631111111111 delete conf template record
######################

if ($ADD==631111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($template_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>CONF TEMPLATE pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID modèle être d'au moins 2 caractères\n";
		}
	else
		{
		$stmt="UPDATE phones SET template_id='' where template_id='$template_id';";
		$rslt=mysql_query($stmt, $link);
		
		$stmt="UPDATE vicidial_server_carriers SET template_id='' where template_id='$template_id';";
		$rslt=mysql_query($stmt, $link);

		$stmt="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y';";
		$rslt=mysql_query($stmt, $link);

		$stmt="DELETE from vicidial_conf_templates where template_id='$template_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONFTEMPLATES', event_type='DELETE', record_id='$template_id', event_code='ADMIN DELETE CONF TEMPLATE', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>CONF TEMPLATE DELETION ACCOMPLIES: $server_id - $server_ip</B>\n";
		echo "<br><br>\n";
		}
	$ADD='130000000000';		# go to conf template list
	}


######################
# ADD=641111111111 delete carrier record
######################

if ($ADD==641111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($carrier_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>CARRIER pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Carrier ID être d'au moins 2 caractères\n";
		}
	else
		{
		$stmt="SELECT server_ip from vicidial_server_carriers where carrier_id='$carrier_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$CARRIERserver_ip =	$row[0];

		$stmt="DELETE from vicidial_server_carriers where carrier_id='$carrier_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$CARRIERserver_ip';";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CARRIERS', event_type='DELETE', record_id='$carrier_id', event_code='ADMIN DELETE CARRIER', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>CARRIER SUPPRESSION ACCOMPLIES: $carrier_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='140000000000';		# go to carrier list
	}


######################
# ADD=651111111111 delete tts record
######################

if ($ADD==651111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($tts_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>TTS ENTRY pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>TTS ID be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_tts_prompts where tts_id='$tts_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='TTS', event_type='DELETE', record_id='$tts_id', event_code='ADMIN DELETE TTS', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>TTS DELETION COMPLETED: $tts_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='150000000000';		# go to tts entry list
	}


######################
# ADD=661111111111 delete music on hold record
######################

if ($ADD==661111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($moh_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>MUSIC ON HOLD ENTRY pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>MOH ID be at least 2 characters in length\n";
		}
	else
		{
		$stmt="UPDATE vicidial_music_on_hold SET remove='Y' where moh_id='$moh_id';";
		$rslt=mysql_query($stmt, $link);

		$stmtA="DELETE from vicidial_music_on_hold_files where moh_id='$moh_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmtA, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|$stmtA|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='MOH', event_type='DELETE', record_id='$moh_id', event_code='ADMIN DELETE MOH', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>MUSIQUE EN ATTENTE DE SUPPRESSION REMPLI: $moh_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='160000000000';		# go to music on hold entry list
	}


######################
# ADD=671111111111 delete voicemail record
######################

if ($ADD==671111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($voicemail_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>La boîte vocale pas supprimé - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>ID vocale be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_voicemail where voicemail_id='$voicemail_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);

		$stmt="SELECT active_voicemail_server from system_settings;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$active_voicemail_server = $row[0];

		$stmtA="UPDATE servers SET rebuild_conf_files='Y' where generate_vicidial_conf='Y' and active_asterisk_server='Y' and server_ip='$active_voicemail_server';";
		$rslt=mysql_query($stmtA, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='VOICEMAIL', event_type='DELETE', record_id='$voicemail_id', event_code='ADMIN DELETE VOICEMAIL', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>La boîte vocale SUPPRESSION REMPLI: $voicemail_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='170000000000';		# go to voicemail entry list
	}


######################
# ADD=681111111111 delete screen labels record
######################

if ($ADD==681111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($label_id) < 2) or ($CoNfIrM != 'YES') )
		{
		echo "<br>LABEL ECRAN PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Label ID be at least 2 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_screen_labels where label_id='$label_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='LABEL', event_type='DELETE', record_id='$label_id', event_code='ADMIN DELETE LABEL', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>SUPPRESSION LABEL écran Terminé: $label_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='180000000000';		# go to screen labels entry list
	}


######################
# ADD=691111111111 delete contact record
######################

if ($ADD==691111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($contact_id) < 1) or ($CoNfIrM != 'YES') )
		{
		echo "<br>CONTACT PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Contact ID be at least 1 character in length\n";
		}
	else
		{
		if ( (preg_match("/contact_information/",$SStables_use_alt_log_db)) and (strlen($SSalt_log_server_ip)>4) and (strlen($SSalt_log_dbname)>0) )
			{
			$linkALT=mysql_connect("$SSalt_log_server_ip", "$SSalt_log_login", "$SSalt_log_pass");
			mysql_select_db("$SSalt_log_dbname", $linkALT);
			}
		else
			{$linkALT = $link;}
		$stmt="DELETE from contact_information where contact_id='$contact_id';";
		$rslt=mysql_query($stmt, $linkALT);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONTACTS', event_type='DELETE', record_id='$contact_id', event_code='ADMIN Supprimer un contact', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>CONTACT DELETION COMPLETED: $contact_id</B>\n";
		echo "<br><br>\n";
		}
	$ADD='190000000000';		# go to contacts entry list
	}


######################
# ADD=6111111111111 delete conference record
######################

if ($ADD==6111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($conf_exten) < 2) or (strlen($server_ip) < 7) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>CONFERENCE NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Conference be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		$stmt="DELETE from conferences where conf_exten='$conf_exten' and server_ip='$server_ip' limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONFERENCES', event_type='DELETE', record_id='$conf_exten', event_code='ADMIN DELETE CONFERENCE', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>CONFERENCE DELETION COMPLETED: $conf_exten - $server_ip</B>\n";
		echo "<br><br>\n";
		}
	$ADD='1000000000000';		# go to conference list
	}


######################
# ADD=61111111111111 delete vicidial conference record
######################

if ($ADD==61111111111111)
	{
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (strlen($conf_exten) < 2) or (strlen($server_ip) < 7) or ($CoNfIrM != 'YES') or ($LOGast_delete_phones < 1) )
		{
		echo "<br>VICIDIAL CONFERENCE NOT DELETED - Veuillez retourner en arrière et vérifier les données que vous avez saisies\n";
		echo "<br>Conference be at least 2 characters in length\n";
		echo "<br>IP du serveur be at least 7 characters in length\n";
		}
	else
		{
		$stmt="DELETE from vicidial_conferences where conf_exten='$conf_exten' and server_ip='$server_ip' limit 1;";
		$rslt=mysql_query($stmt, $link);

		### LOG INSERTION Admin Log Table ###
		$SQL_log = "$stmt|";
		$SQL_log = ereg_replace(';','',$SQL_log);
		$SQL_log = addslashes($SQL_log);
		$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='CONFERENCES', event_type='DELETE', record_id='$conf_exten', event_code='ADMIN DELETE CONFERENCE', event_sql=\"$SQL_log\", event_notes='';";
		if ($DB) {echo "|$stmt|\n";}
		$rslt=mysql_query($stmt, $link);

		echo "<br><B>VICIDIAL CONFERENCE DELETION COMPLETED: $conf_exten - $server_ip</B>\n";
		echo "<br><br>\n";
		}
	$ADD='10000000000000';		# go to vicidial conference list
	}





######################################################################################################
######################################################################################################
#######   3 series, record modification forms
######################################################################################################
######################################################################################################




######################
# ADD=3 modify user info in the system
######################

if ($ADD==3)
	{
	if ($LOGmodify_users==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3&user=$user";
			$modify_footer_rafraîchir=1;
			}

		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT user_id,user,pass,full_name,user_level,user_group,phone_login,phone_pass,delete_users,delete_user_groups,delete_lists,delete_campaigns,delete_ingroups,delete_remote_agents,load_leads,campaign_detail,ast_admin_access,ast_delete_phones,delete_scripts,modify_leads,hotkeys_active,change_agent_campaign,agent_choose_ingroups,closer_campaigns,scheduled_callbacks,agentonly_callbacks,agentcall_manual,vicidial_recording,vicidial_transfers,delete_filters,alter_agent_interface_options,closer_default_blended,delete_call_times,modify_call_times,modify_users,modify_campaigns,modify_lists,modify_scripts,modify_filters,modify_ingroups,modify_usergroups,modify_remoteagents,modify_servers,view_reports,vicidial_recording_override,alter_custdata_override,qc_enabled,qc_user_level,qc_pass,qc_finish,qc_commit,add_timeclock_log,modify_timeclock_log,delete_timeclock_log,alter_custphone_override,vdc_agent_api_access,modify_inbound_dids,delete_inbound_dids,active,alert_enabled,download_lists,agent_shift_enforcement_override,manager_shift_enforcement_override,shift_override_flag,export_reports,delete_from_dnc,email,user_code,territory,allow_alerts,agent_choose_territories,custom_one,custom_two,custom_three,custom_four,custom_five,voicemail_id,agent_call_log_view_override,callcard_admin,agent_choose_blended,realtime_block_user_info,custom_fields_modify,force_change_password,agent_lead_search_override,modify_shifts,modify_phones,modify_carriers,modify_labels,modify_statuses,modify_voicemail,modify_audiostore,modify_moh,modify_tts,preset_contact_search,modify_contacts,modify_same_user_level,admin_hide_lead_data,admin_hide_phone_data from vicidial_users where user='$user' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$user_id =				$row[0];
		$user =					$row[1];
		$pass =					$row[2];
		$full_name =			$row[3];
		$user_level =			$row[4];
		$user_group =			$row[5];
		$phone_login =			$row[6];
		$phone_pass =			$row[7];
		$delete_users =			$row[8];
		$delete_user_groups =	$row[9];
		$delete_lists =			$row[10];
		$delete_campaigns =		$row[11];
		$delete_ingroups =		$row[12];
		$delete_remote_agents =	$row[13];
		$load_leads =			$row[14];
		$campaign_detail =		$row[15];
		$ast_admin_access =		$row[16];
		$ast_delete_phones =	$row[17];
		$delete_scripts =		$row[18];
		$modify_leads =			$row[19];
		$hotkeys_active =		$row[20];
		$change_agent_campaign =$row[21];
		$agent_choose_ingroups =$row[22];
		$scheduled_callbacks =	$row[24];
		$agentonly_callbacks =	$row[25];
		$agentcall_manual =		$row[26];
		$vicidial_recording =	$row[27];
		$vicidial_transfers =	$row[28];
		$delete_filters =		$row[29];
		$alter_agent_interface_options =$row[30];
		$closer_default_blended =		$row[31];
		$delete_call_times =	$row[32];
		$modify_call_times =	$row[33];
		$modify_users =			$row[34];
		$modify_campaigns =		$row[35];
		$modify_lists =			$row[36];
		$modify_scripts =		$row[37];
		$modify_filters =		$row[38];
		$modify_ingroups =		$row[39];
		$modify_usergroups =	$row[40];
		$modify_remoteagents =	$row[41];
		$modify_servers =		$row[42];
		$view_reports =			$row[43];
		$vicidial_recording_override =	$row[44];
		$alter_custdata_override = $row[45];
		$qc_enabled =			$row[46];
		$qc_user_level =		$row[47];
		$qc_pass =				$row[48];
		$qc_finish =			$row[49];
		$qc_commit =			$row[50];
		$add_timeclock_log =	$row[51];
		$modify_timeclock_log = $row[52];
		$delete_timeclock_log = $row[53];
		$alter_custphone_override = $row[54];
		$vdc_agent_api_access = $row[55];
		$modify_inbound_dids =	$row[56];
		$delete_inbound_dids =	$row[57];
		$active =				$row[58];
		$alert_enabled =		$row[59];
		$download_lists =		$row[60];
		$agent_shift_enforcement_override =	$row[61];
		$manager_shift_enforcement_override =	$row[62];
		$export_reports =		$row[64];
		$delete_from_dnc =		$row[65];
		$email =				$row[66];
		$user_code =			$row[67];
		$territory =			$row[68];
		$allow_alerts =			$row[69];
		$agent_choose_territories = $row[70];
		$user_custom_one =		$row[71];
		$user_custom_two =		$row[72];
		$user_custom_three =	$row[73];
		$user_custom_four =		$row[74];
		$user_custom_five =		$row[75];
		$voicemail_id =			$row[76];
		$agent_call_log_view_override = $row[77];
		$callcard_admin =		$row[78];
		$agent_choose_blended = $row[79];
		$realtime_block_user_info = $row[80];
		$custom_fields_modify =	$row[81];
		$force_change_password = $row[82];
		$agent_lead_search_override = $row[83];
		$modify_shifts =		$row[84];
		$modify_phones =		$row[85];
		$modify_carriers =		$row[86];
		$modify_labels =		$row[87];
		$modify_statuses =		$row[88];
		$modify_voicemail =		$row[89];
		$modify_audiostore =	$row[90];
		$modify_moh =			$row[91];
		$modify_tts =			$row[92];
		$preset_contact_search =	$row[93];
		$modify_contacts =		$row[94];
		$modify_same_user_level =	$row[95];
		$admin_hide_lead_data =	$row[96];
		$admin_hide_phone_data =	$row[97];

		if ( ( ($user_level >= $LOGuser_level) and ($LOGuser_level < 9) ) or ( ($LOGmodify_same_user_level < 1) and ($LOGuser_level > 8) and ($user_level > 8) ) )
			{
			echo "<br>Vous n'avez pas les permissions pour modifier cet utilisateur: $user\n";
			}
		else
			{
			echo "<br>MODIFIER UN ENREGISTREMENT D'UTILISATEURS: $user<form action=$PHP_SELF method=POST>\n";
			if ($LOGuser_level > 8)
				{echo "<input type=hidden name=ADD value=4A>\n";}
			else
				{
				if ($LOGalter_agent_interface == "1")
					{echo "<input type=hidden name=ADD value=4B>\n";}
				else
					{echo "<input type=hidden name=ADD value=4>\n";}
				}
			if ($SScustom_fields_enabled < 1)
				{
				echo "<input type=hidden name=custom_fields_modify value=\"$custom_fields_modify\">\n";
				}

			echo "<input type=hidden name=user value=\"$user\">\n";
			echo "<center><TABLE width=$section_width cellspacing=3>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left><b>$user</b>$NWB#vicidial_users-user$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe:</td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=pass size=20 maxlength=20 value=\"$pass\" onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#vicidial_users-pass$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Forcer Changer mot de passe: </td><td align=left><select size=1 name=force_change_password><option>Y</option><option>N</option><option SELECTED>$force_change_password</option></select>$NWB#vicidial_users-force_change_password$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=full_name size=30 maxlength=30 value=\"$full_name\">$NWB#vicidial_users-full_name$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Niveau de l'utilisateur: </td><td align=left><select size=1 name=user_level>";
			$h=1;
			$count_user_level=$LOGuser_level;
			if ( ($LOGmodify_same_user_level < 1) and ($LOGuser_level > 8) )
				{$count_user_level=($LOGuser_level - 1);}
			while ($h<=$count_user_level)
				{
				echo "<option>$h</option>";
				$h++;
				}
			echo "<option SELECTED>$user_level</option></select>$NWB#vicidial_users-user_level$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right><A HREF=\"$PHP_SELF?ADD=311111&user_group=$user_group\">Groupe utilisateur</A>: </td><td align=left><select size=1 name=user_group>\n";

			$stmt="SELECT user_group,group_name from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
			$rslt=mysql_query($stmt, $link);
			$Ugroups_to_print = mysql_num_rows($rslt);
			$Ugroups_list='';
			$o=0;
			while ($Ugroups_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$Ugroups_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$o++;
				}
			echo "$Ugroups_list";
			echo "<option SELECTED>$user_group</option>\n";
			echo "</select>$NWB#vicidial_users-user_group$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Login du téléphone: </td><td align=left><input type=text name=phone_login size=20 maxlength=20 value=\"$phone_login\">$NWB#vicidial_users-phone_login$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe du téléphone: </td><td align=left><input type=text name=phone_pass size=20 maxlength=20 value=\"$phone_pass\">$NWB#vicidial_users-phone_pass$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$active</option></select>$NWB#vicidial_users-active$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>ID vocale: </td><td align=left><input type=text name=voicemail_id id=voicemail_id size=12 maxlength=10 value=\"$voicemail_id\"> <a href=\"javascript:launch_vm_chooser('voicemail_id','vm',100);\">voicemail chooser</a>$NWB#vicidial_users-voicemail_id$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Email:</td><td align=left><input type=text name=email size=40 maxlength=100 value=\"$email\">$NWB#vicidial_users-optional$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur Code: </td><td align=left><input type=text name=user_code size=40 maxlength=100 value=\"$user_code\">$NWB#vicidial_users-optional$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Main Territoire: </td><td align=left><input type=text name=territory size=40 maxlength=100 value=\"$territory\">$NWB#vicidial_users-optional$NWE</td></tr>\n";

			if ($SSuser_territories_active > 0)
				{
				$stmt="SELECT vut.territory,vt.territory_description from vicidial_user_territories vut,vicidial_territories vt where user='$user' and vut.territory=vt.territory;";
				$rslt=mysql_query($stmt, $link);
				$Uterrs_to_print = mysql_num_rows($rslt);
				$Uterrs_list='';
				$o=0;
				while ($Uterrs_to_print > $o) 
					{
					$rowx=mysql_fetch_row($rslt);
					$Uterrs_list .= "$rowx[0] - $rowx[1]<BR>\n";
					$o++;
					}
				echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"user_territories.php\">Utilisateur Territoires</a>: </td><td align=left>$Uterrs_list</tr>\n";
				}

			if ( ($LOGuser_level > 8) or ($LOGalter_agent_interface == "1") )
				{
				echo "<tr bgcolor=#015B91><td colspan=2 align=center><font color=white><B>OPTIONS DE L'INTERFACE DE L'AGENT:</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>L'agent choisit les Ingroups: </td><td align=left><select size=1 name=agent_choose_ingroups><option>0</option><option>1</option><option SELECTED>$agent_choose_ingroups</option></select>$NWB#vicidial_users-agent_choose_ingroups$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Agent Choisissez Blended: </td><td align=left><select size=1 name=agent_choose_blended><option>0</option><option>1</option><option SELECTED>$agent_choose_blended</option></select>$NWB#vicidial_users-agent_choose_blended$NWE</td></tr>\n";
				if ($SSuser_territories_active > 0)
					{
					echo "<tr bgcolor=#B6D3FC><td align=right>Agent Choisir Territoires: </td><td align=left><select size=1 name=agent_choose_territories><option>0</option><option>1</option><option SELECTED>$agent_choose_territories</option></select>$NWB#vicidial_users-agent_choose_territories$NWE</td></tr>\n";
					}
				echo "<tr bgcolor=#B6D3FC><td align=right>Racourccis clavier actifs: </td><td align=left><select size=1 name=hotkeys_active><option>0</option><option>1</option><option SELECTED>$hotkeys_active</option></select>$NWB#vicidial_users-hotkeys_active$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Rappels de service programmés: </td><td align=left><select size=1 name=scheduled_callbacks><option>0</option><option>1</option><option SELECTED>$scheduled_callbacks</option></select>$NWB#vicidial_users-scheduled_callbacks$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Rappels de service d'agent-seulement: </td><td align=left><select size=1 name=agentonly_callbacks><option>0</option><option>1</option><option SELECTED>$agentonly_callbacks</option></select>$NWB#vicidial_users-agentonly_callbacks$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Appel manuel de l'agent: </td><td align=left><select size=1 name=agentcall_manual><option>0</option><option>1</option><option SELECTED>$agentcall_manual</option></select>$NWB#vicidial_users-agentcall_manual$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Enregistrement Vicidial: </td><td align=left><select size=1 name=vicidial_recording><option>0</option><option>1</option><option SELECTED>$vicidial_recording</option></select>$NWB#vicidial_users-vicidial_recording$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Transferts Vicidial: </td><td align=left><select size=1 name=vicidial_transfers><option>0</option><option>1</option><option SELECTED>$vicidial_transfers</option></select>$NWB#vicidial_users-vicidial_transfers$NWE</td></tr>\n";
				if ($SSoutbound_autodial_active > 0)
					{
					echo "<tr bgcolor=#B6D3FC><td align=right>Closer Default Blended: </td><td align=left><select size=1 name=closer_default_blended><option>0</option><option>1</option><option SELECTED>$closer_default_blended</option></select>$NWB#vicidial_users-closer_default_blended$NWE</td></tr>\n";
					}
				echo "<tr bgcolor=#B6D3FC><td align=right>Ecrasement de l'enregistrment VICIDIAL:</td><td align=left><select size=1 name=vicidial_recording_override><option>DISABLED</option><option>NEVER</option><option>ONDEMAND</option><option>ALLCALLS</option><option>ALLFORCE</option><option SELECTED>$vicidial_recording_override</option></select>$NWB#vicidial_users-vicidial_recording_override$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Modifications des données des clients pour l'agent: </td><td align=left><select size=1 name=alter_custdata_override><option>NOT_ACTIVE</option><option>ALLOW_ALTER</option><option SELECTED>$alter_custdata_override</option></select>$NWB#vicidial_users-alter_custdata_override$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Alter Agent Client Téléphone Override:</td><td align=left><select size=1 name=alter_custphone_override><option>NOT_ACTIVE</option><option>ALLOW_ALTER</option><option SELECTED>$alter_custphone_override</option></select>$NWB#vicidial_users-alter_custphone_override$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Agent de l'exécution Shift Override: </td><td align=left><select size=1 name=agent_shift_enforcement_override><option>DISABLED</option><option>OFF</option><option>START</option><option>ALL</option><option SELECTED>$agent_shift_enforcement_override</option></select>$NWB#vicidial_users-agent_shift_enforcement_override$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Agent Call Log Voir Override: </td><td align=left><select size=1 name=agent_call_log_view_override><option>DISABLED</option><option>Y</option><option>N</option><option SELECTED>$agent_call_log_view_override</option></select>$NWB#vicidial_users-agent_call_log_view_override$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Override Recherche Agent principal: </td><td align=left><select size=1 name=agent_lead_search><option>DISABLED</option><option>ENABLED</option><option>NOT_ACTIVE</option><option SELECTED>$agent_lead_search_override</option></select>$NWB#vicidial_users-agent_lead_search_override$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Alerte Enabled: </td><td align=left>$alert_enabled $NWB#vicidial_users-alert_enabled$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Permettez Alertes: </td><td align=left><select size=1 name=allow_alerts><option>0</option><option>1</option><option SELECTED>$allow_alerts</option></select>$NWB#vicidial_users-allow_alerts$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Contact Recherche Preset: </td><td align=left><select size=1 name=preset_contact_search><option>NOT_ACTIVE</option><option>DISABLED</option><option SELECTED>$preset_contact_search</option></select>$NWB#vicidial_users-preset_contact_search$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Rangs De Campagne :$NWB#vicidial_users-campaign_ranks$NWE<BR>\n";
				echo "<table border=0 width=850>\n";
				echo "$RANKcampaigns_list";
				echo "</table>\n";
				echo "</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Groupes entrants: $NWB#vicidial_users-closer_campaigns$NWE<BR>\n";
				echo "<table border=0 width=850>\n";
				echo "$RANKgroups_list";
				echo "</table>\n";
				echo "</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Custom 1: </td><td align=left><input type=text name=custom_one size=50 maxlength=100 value=\"$user_custom_one\">$NWB#vicidial_users-custom_one$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Custom 2: </td><td align=left><input type=text name=custom_two size=50 maxlength=100 value=\"$user_custom_two\">$NWB#vicidial_users-custom_two$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Custom 3: </td><td align=left><input type=text name=custom_three size=50 maxlength=100 value=\"$user_custom_three\">$NWB#vicidial_users-custom_three$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Custom 4: </td><td align=left><input type=text name=custom_four size=50 maxlength=100 value=\"$user_custom_four\">$NWB#vicidial_users-custom_four$NWE</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>Custom 5: </td><td align=left><input type=text name=custom_five size=50 maxlength=100 value=\"$user_custom_five\">$NWB#vicidial_users-custom_five$NWE</td></tr>\n";

				if ($SSqc_features_active > 0)
					{
					echo "<tr bgcolor=#9BB9FB><td align=right>QC Enabled:</td><td align=left><select size=1 name=qc_enabled><option>0</option><option>1</option><option SELECTED>$qc_enabled</option></select>$NWB#vicidial_users-qc_enabled$NWE</td></tr>\n";
					echo "<tr bgcolor=#9BB9FB><td align=right>QC Niveau de l'utilisateur:</td><td align=left><select size=1 name=qc_user_level><option value=1>1 - Rien Modifier</option><option value=2>2 - Modifier Rien Sauf Etat</option><option value=3>3 - Modifier tous les Domaines</option><option value=4>4 - Vérifiez Premier Cycle de QC</option><option value=5>5 - Voir QC Statistiques</option><option value=6>6 - Possibilité de modifier fini records</option><option value=7>7 - Level Manager</option><option SELECTED>$qc_user_level</option></select>$NWB#vicidial_users-qc_user_level$NWE</td></tr>\n";
					echo "<tr bgcolor=#9BB9FB><td align=right>QC Pass:</td><td align=left><select size=1 name=qc_pass><option>0</option><option>1</option><option SELECTED>$qc_pass</option></select>$NWB#vicidial_users-qc_pass$NWE</td></tr>\n";
					echo "<tr bgcolor=#9BB9FB><td align=right>QC Finition:</td><td align=left><select size=1 name=qc_finish><option>0</option><option>1</option><option SELECTED>$qc_finish</option></select>$NWB#vicidial_users-qc_finish$NWE</td></tr>\n";
					echo "<tr bgcolor=#9BB9FB><td align=right>QC Comité:</td><td align=left><select size=1 name=qc_commit><option>0</option><option>1</option><option SELECTED>$qc_commit</option></select>$NWB#vicidial_users-qc_commit$NWE</td></tr>\n";
					}
				}
			if ($LOGuser_level > 8)
				{
				echo "<tr bgcolor=#015B91><td colspan=2 align=center><font color=white><B>OPTIONS RAPPORT ADMIN:</td></tr>\n";

				echo "<tr bgcolor=#9BB9FB><td align=right>En temps réel Infos Message Bloquer: </td><td align=left><select size=1 name=realtime_block_user_info><option>0</option><option>1</option><option SELECTED>$realtime_block_user_info</option></select>$NWB#vicidial_users-realtime_block_user_info$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Administrateur de données masquer plomb: </td><td align=left><select size=1 name=admin_hide_lead_data><option>0</option><option>1</option><option SELECTED>$admin_hide_lead_data</option></select>$NWB#vicidial_users-admin_hide_lead_data$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Administrateur masquer les données du téléphone: </td><td align=left><select size=1 name=admin_hide_phone_data><option>0</option><option>1</option><option>2_DIGITS</option><option>3_DIGITS</option><option>4_DIGITS</option><option SELECTED>$admin_hide_phone_data</option></select>$NWB#vicidial_users-admin_hide_phone_data$NWE</td></tr>\n";

				echo "<tr bgcolor=#015B91><td colspan=2 align=center><font color=white><B>OPTIONS DE L'INTERFACE D'ADMINISTRATION:</td></tr>\n";

				#9BB9FB
				#B9CBFD
				echo "<tr bgcolor=#9BB9FB><td align=right>Voir les rapports: </td><td align=left><select size=1 name=view_reports><option>0</option><option>1</option><option SELECTED>$view_reports</option></select>$NWB#vicidial_users-view_reports$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Changer les options de l'interface de l'agent: </td><td align=left><select size=1 name=alter_agent_interface_options><option>0</option><option>1</option><option SELECTED>$alter_agent_interface_options</option></select>$NWB#vicidial_users-alter_agent_interface_options$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les utilisateurs: </td><td align=left><select size=1 name=modify_users><option>0</option><option>1</option><option SELECTED>$modify_users</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Changer l'agent de campagne: </td><td align=left><select size=1 name=change_agent_campaign><option>0</option><option>1</option><option SELECTED>$change_agent_campaign</option></select>$NWB#vicidial_users-change_agent_campaign$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer les utilisateurs: </td><td align=left><select size=1 name=delete_users><option>0</option><option>1</option><option SELECTED>$delete_users</option></select>$NWB#vicidial_users-delete_users$NWE</td></tr>\n";

				echo "<tr bgcolor=#9BB9FB><td align=right>Modifier les groupes d'utilisateurs: </td><td align=left><select size=1 name=modify_usergroups><option>0</option><option>1</option><option SELECTED>$modify_usergroups</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Supprimer les groupes utilisateurs: </td><td align=left><select size=1 name=delete_user_groups><option>0</option><option>1</option><option SELECTED>$delete_user_groups</option></select>$NWB#vicidial_users-delete_user_groups$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les listes: </td><td align=left><select size=1 name=modify_lists><option>0</option><option>1</option><option SELECTED>$modify_lists</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer les listes: </td><td align=left><select size=1 name=delete_lists><option>0</option><option>1</option><option SELECTED>$delete_lists</option></select>$NWB#vicidial_users-delete_lists$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Charger des fiches: </td><td align=left><select size=1 name=load_leads><option>0</option><option>1</option><option SELECTED>$load_leads</option></select>$NWB#vicidial_users-load_leads$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les fiches: </td><td align=left><select size=1 name=modify_leads><option>0</option><option>1</option><option SELECTED>$modify_leads</option></select>$NWB#vicidial_users-modify_leads$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Listes de téléchargement: </td><td align=left><select size=1 name=download_lists><option>0</option><option>1</option><option SELECTED>$download_lists</option></select>$NWB#vicidial_users-modify_leads$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Rapports d'exportation: </td><td align=left><select size=1 name=export_reports><option>0</option><option>1</option><option SELECTED>$export_reports</option></select>$NWB#vicidial_users-export_reports$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer From Listes DNC: </td><td align=left><select size=1 name=delete_from_dnc><option>0</option><option>1</option><option SELECTED>$delete_from_dnc</option></select>$NWB#vicidial_users-delete_from_dnc$NWE</td></tr>\n";

				if ($SScustom_fields_enabled > 0)
					{
					echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les champs personnalisés: </td><td align=left><select size=1 name=custom_fields_modify><option>0</option><option>1</option><option SELECTED>$custom_fields_modify</option></select>$NWB#vicidial_users-custom_fields_modify$NWE</td></tr>\n";
					}

				echo "<tr bgcolor=#9BB9FB><td align=right>Modifier les campagnes: </td><td align=left><select size=1 name=modify_campaigns><option>0</option><option>1</option><option SELECTED>$modify_campaigns</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Détails de la campagne: </td><td align=left><select size=1 name=campaign_detail><option>0</option><option>1</option><option SELECTED>$campaign_detail</option></select>$NWB#vicidial_users-campaign_detail$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Supprimer les campagnes: </td><td align=left><select size=1 name=delete_campaigns><option>0</option><option>1</option><option SELECTED>$delete_campaigns</option></select>$NWB#vicidial_users-delete_campaigns$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les In-Groups: </td><td align=left><select size=1 name=modify_ingroups><option>0</option><option>1</option><option SELECTED>$modify_ingroups</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer les in-groups: </td><td align=left><select size=1 name=delete_ingroups><option>0</option><option>1</option><option SELECTED>$delete_ingroups</option></select>$NWB#vicidial_users-delete_ingroups$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier DiDs:</td><td align=left><select size=1 name=modify_inbound_dids><option>0</option><option>1</option><option SELECTED>$modify_inbound_dids</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer DiDs:</td><td align=left><select size=1 name=delete_inbound_dids><option>0</option><option>1</option><option SELECTED>$delete_inbound_dids</option></select>$NWB#vicidial_users-delete_ingroups$NWE</td></tr>\n";

				echo "<tr bgcolor=#9BB9FB><td align=right>Modifier les agents distants: </td><td align=left><select size=1 name=modify_remoteagents><option>0</option><option>1</option><option SELECTED>$modify_remoteagents</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Supprimer les agents distants: </td><td align=left><select size=1 name=delete_remote_agents><option>0</option><option>1</option><option SELECTED>$delete_remote_agents</option></select>$NWB#vicidial_users-delete_remote_agents$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les scripts: </td><td align=left><select size=1 name=modify_scripts><option>0</option><option>1</option><option SELECTED>$modify_scripts</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer les scriptss: </td><td align=left><select size=1 name=delete_scripts><option>0</option><option>1</option><option SELECTED>$delete_scripts</option></select>$NWB#vicidial_users-delete_scripts$NWE</td></tr>\n";

				if ($SSoutbound_autodial_active > 0)
					{
					echo "<tr bgcolor=#9BB9FB><td align=right>Modifier les filtres: </td><td align=left><select size=1 name=modify_filters><option>0</option><option>1</option><option SELECTED>$modify_filters</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
					echo "<tr bgcolor=#9BB9FB><td align=right>Supprimer le filtres: </td><td align=left><select size=1 name=delete_filters><option>0</option><option>1</option><option SELECTED>$delete_filters</option></select>$NWB#vicidial_users-delete_filters$NWE</td></tr>\n";
					}
				echo "<tr bgcolor=#B9CBFD><td align=right>Accès administateur de l'AGC: </td><td align=left><select size=1 name=ast_admin_access><option>0</option><option>1</option><option SELECTED>$ast_admin_access</option></select>$NWB#vicidial_users-ast_admin_access$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Supprimer les téléphones AGC: </td><td align=left><select size=1 name=ast_delete_phones><option>0</option><option>1</option><option SELECTED>$ast_delete_phones</option></select>$NWB#vicidial_users-ast_delete_phones$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier la période d'appelss: </td><td align=left><select size=1 name=modify_call_times><option>0</option><option>1</option><option SELECTED>$modify_call_times</option></select>$NWB#vicidial_users-modify_call_times$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>SupprimerPériodes d'appels: </td><td align=left><select size=1 name=delete_call_times><option>0</option><option>1</option><option SELECTED>$delete_call_times</option></select>$NWB#vicidial_users-delete_call_times$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier les serveurs: </td><td align=left><select size=1 name=modify_servers><option>0</option><option>1</option><option SELECTED>$modify_servers</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Modifier Shifts: </td><td align=left><select size=1 name=modify_shifts><option>0</option><option>1</option><option SELECTED>$modify_shifts</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierMobiles: </td><td align=left><select size=1 name=modify_phones><option>0</option><option>1</option><option SELECTED>$modify_phones</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierCarriers: </td><td align=left><select size=1 name=modify_carriers><option>0</option><option>1</option><option SELECTED>$modify_carriers</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierLabels: </td><td align=left><select size=1 name=modify_labels><option>0</option><option>1</option><option SELECTED>$modify_labels</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierStatuts: </td><td align=left><select size=1 name=modify_statuses><option>0</option><option>1</option><option SELECTED>$modify_statuses</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierBoîte vocale: </td><td align=left><select size=1 name=modify_voicemail><option>0</option><option>1</option><option SELECTED>$modify_voicemail</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierAudio Store: </td><td align=left><select size=1 name=modify_audiostore><option>0</option><option>1</option><option SELECTED>$modify_audiostore</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierMusique d-attente: </td><td align=left><select size=1 name=modify_moh><option>0</option><option>1</option><option SELECTED>$modify_moh</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierTTS: </td><td align=left><select size=1 name=modify_tts><option>0</option><option>1</option><option SELECTED>$modify_tts</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>ModifierContacts: </td><td align=left><select size=1 name=modify_contacts><option>0</option><option>1</option><option SELECTED>$modify_contacts</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>CallCard accès: </td><td align=left><select size=1 name=callcard_admin><option>0</option><option>1</option><option SELECTED>$callcard_admin</option></select>$NWB#vicidial_users-modify_sections$NWE</td></tr>\n";
				echo "<tr bgcolor=#B9CBFD><td align=right>Agent API d'accès:</td><td align=left><select size=1 name=vdc_agent_api_access><option>0</option><option>1</option><option SELECTED>$vdc_agent_api_access</option></select>$NWB#vicidial_users-vdc_agent_api_access$NWE</td></tr>\n";

				echo "<tr bgcolor=#9BB9FB><td align=right>Ajouter Log timeclock Record: </td><td align=left><select size=1 name=add_timeclock_log><option>0</option><option>1</option><option SELECTED>$add_timeclock_log</option></select>$NWB#vicidial_users-add_timeclock_log$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Modifier timeclock journal Record: </td><td align=left><select size=1 name=modify_timeclock_log><option>0</option><option>1</option><option SELECTED>$modify_timeclock_log</option></select>$NWB#vicidial_users-modify_timeclock_log$NWE</td></tr>\n";
				echo "<tr bgcolor=#9BB9FB><td align=right>Supprimer timeclock journal Record: </td><td align=left><select size=1 name=delete_timeclock_log><option>0</option><option>1</option><option SELECTED>$delete_timeclock_log</option></select>$NWB#vicidial_users-delete_timeclock_log$NWE</td></tr>\n";

				echo "<tr bgcolor=#B9CBFD><td align=right>Shift Manager exécution Override: </td><td align=left><select size=1 name=manager_shift_enforcement_override><option>0</option><option>1</option><option SELECTED>$manager_shift_enforcement_override</option></select>$NWB#vicidial_users-manager_shift_enforcement_override$NWE</td></tr>\n";

				if ( ($LOGmodify_same_user_level < 1) or ($LOGuser_level < 9) )
					{
					echo "<input type=hidden name=modify_same_user_level id=modify_same_user_level value=\"0\">\n";
					}
				else
					{
					echo "<tr bgcolor=#9BB9FB><td align=right>Modifier niveau de l'utilisateur même: </td><td align=left><select size=1 name=modify_same_user_level><option>0</option><option>1</option><option SELECTED>$modify_same_user_level</option></select>$NWB#vicidial_users-modify_same_user_level$NWE</td></tr>\n";
					}
				}
			echo "<tr bgcolor=#9BB9FB><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
			echo "</TABLE></center>\n";

			if ($LOGdelete_users > 0)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=5&user=$user\">SUPPRIMER CET UTILISATEUR</a>\n";
				}
			echo "<br><br><a href=\"./AST_agent_time_sheet.php?agent=$user\">Cliquez ici pour la feuille de présence de l'utilisateur</a>\n";
			echo "<br><br><a href=\"./user_status.php?user=$user\">Cliquez ici pour les statuts utilisateur</a>\n";
			echo "<br><br><a href=\"./user_stats.php?user=$user\">Cliquez ici pour les statistiques de l'utilisateur</a>\n";
			echo "<br><br><a href=\"./AST_agent_days_detail.php?user=$user&query_date=$REPORTdate&end_date=$REPORTdate&group[]=--ALL--&shift=ALL\">Cliquez ici pour l'utilisateur de plusieurs jours le statut de détails rapport</a>\n";
			echo "<br><br><a href=\"$PHP_SELF?ADD=8&user=$user\">Cliquez ici pour les rappels reservés à cet utilisateur</a>\n";
			if ($LOGuser_level >= 9)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=UTILISATEURS&stage=$user\">Cliquez ici pour voir les changements d'administration de ce disque</FONT>\n";
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=31 modify campaign info in the system - Detail view
######################

if ( ($LOGcampaign_detail < 1) and ($ADD==31) ) {$ADD=34;}	# send to Basic if not allowed

if ( ($ADD==31) and ( (!eregi("$campaign_id",$LOGallowed_campaigns)) and (!eregi("ALL-CAMPAIGNS",$LOGallowed_campaigns)) ) ) 
	{$ADD=30;}	# send to not allowed screen if not in vicidial_user_groups allowed_campaigns list

if ($ADD==31)
	{
	if ($LOGmodify_campaigns==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31&campaign_id=$campaign_id&SUB=$SUB";
			$modify_footer_rafraîchir=1;
			}
		if ($stage=='show_dialable')
			{
			$stmt="UPDATE vicidial_campaigns set display_dialable_count='Y' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='hide_dialable')
			{
			$stmt="UPDATE vicidial_campaigns set display_dialable_count='N' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='show_leadscount')
			{
			$stmt="UPDATE vicidial_campaigns set display_leads_count='Y' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='hide_leadscount')
			{
			$stmt="UPDATE vicidial_campaigns set display_leads_count='N' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}

		$stmt="SELECT enable_vtiger_integration,vtiger_url from system_settings;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$enable_vtiger_integration_LU =		$row[0];
		$vtiger_url_LU =					$row[1];

		$stmt="SELECT campaign_id,campaign_name,active,dial_status_a,dial_status_b,dial_status_c,dial_status_d,dial_status_e,lead_order,park_ext,park_file_name,web_form_address,allow_closers,hopper_level,auto_dial_level,next_agent_call,local_call_time,voicemail_ext,dial_timeout,dial_prefix,campaign_cid,campaign_vdad_exten,campaign_rec_exten,campaign_recording,campaign_rec_filename,campaign_script,get_call_launch,am_message_exten,amd_send_to_vmx,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,alt_number_dialing,scheduled_callbacks,lead_filter_id,drop_call_seconds,drop_action,safe_harbor_exten,display_dialable_count,wrapup_seconds,wrapup_message,closer_campaigns,use_internal_dnc,allcalls_delay,omit_phone_code,dial_method,available_only_ratio_tally,adaptive_dropped_percentage,adaptive_maximum_level,adaptive_latest_server_time,adaptive_intensity,adaptive_dl_diff_target,concurrent_transfers,auto_alt_dial,auto_alt_dial_statuses,agent_pause_codes_active,campaign_description,campaign_changedate,campaign_stats_refresh,campaign_logindate,dial_statuses,disable_alter_custdata,no_hopper_leads_logins,list_order_mix,campaign_allow_inbound,manual_dial_list_id,default_xfer_group,xfer_groups,queue_priority,drop_inbound_group,qc_enabled,qc_statuses,qc_lists,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,survey_first_audio_file,survey_dtmf_digits,survey_ni_digit,survey_opt_in_audio_file,survey_ni_audio_file,survey_method,survey_no_response_action,survey_ni_status,survey_response_digit_map,survey_xfer_exten,survey_camp_record_dir,disable_alter_custphone,display_queue_count,manual_dial_filter,agent_clipboard_copy,agent_extended_alt_dial,use_campaign_dnc,three_way_call_cid,three_way_dial_prefix,web_form_target,vtiger_search_category,vtiger_create_call_record,vtiger_create_lead_record,vtiger_screen_login,cpd_amd_action,agent_allow_group_alias,default_group_alias,vtiger_search_dead,vtiger_status_call,survey_third_digit,survey_third_audio_file,survey_third_status,survey_third_exten,survey_fourth_digit,survey_fourth_audio_file,survey_fourth_status,survey_fourth_exten,drop_lockout_time,quick_transfer_button,prepopulate_transfer_preset,drop_rate_group,view_calls_in_queue,view_calls_in_queue_launch,grab_calls_in_queue,call_requeue_button,pause_after_each_call,no_hopper_dialing,agent_dial_owner_only,agent_display_dialable_leads,web_form_address_two,waitforsilence_options,agent_select_territories,campaign_calldate,crm_popup_login,crm_login_address,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,use_custom_cid,scheduled_callbacks_alert,queuemetrics_callstatus_override,extension_appended_cidname,scheduled_callbacks_count,manual_dial_override,blind_monitor_warning,blind_monitor_message,blind_monitor_filename,inbound_queue_no_dial,timer_action_destination,enable_xfer_presets,hide_xfer_number_to_dial,manual_dial_prefix,customer_3way_hangup_logging,customer_3way_hangup_seconds,customer_3way_hangup_action,ivr_park_call,ivr_park_call_agi,manual_preview_dial,realtime_agent_time_stats,use_auto_hopper,auto_hopper_multi,auto_trim_hopper,api_manual_dial,manual_dial_call_time_check,display_leads_count,lead_order_randomize,lead_order_secondary,per_call_notes,my_callback_option,agent_lead_search,agent_lead_search_method,queuemetrics_phone_environment,auto_pause_precall,auto_resume_precall,auto_pause_precall_code,manual_dial_cid,post_phone_time_diff_alert,custom_3way_button_transfer,available_only_tally_threshold,available_only_tally_threshold_agents,dial_level_threshold,dial_level_threshold_agents,safe_harbor_audio,safe_harbor_menu_id,survey_menu_id,callback_days_limit,dl_diff_target_method,disable_dispo_screen,disable_dispo_status,screen_labels,status_display_fields,na_call_url,survey_recording,pllb_grouping,pllb_grouping_limit,call_count_limit,call_count_target,callback_hours_block,callback_list_calltime,user_group,hopper_vlc_dup_check from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$campaign_name = $row[1];
		$campaign_active = $row[2];
		$dial_status_a = $row[3];
		$dial_status_b = $row[4];
		$dial_status_c = $row[5];
		$dial_status_d = $row[6];
		$dial_status_e = $row[7];
		$lead_order = $row[8];
		$park_ext = $row[9];
		$park_file_name = $row[10];
		$web_form_address = stripslashes($row[11]);
		$allow_closers = $row[12];
		$hopper_level = $row[13];
		$auto_dial_level = $row[14];
		$next_agent_call = $row[15];
		$local_call_time = $row[16];
		$voicemail_ext = $row[17];
		$dial_timeout = $row[18];
		$dial_prefix = $row[19];
		$campaign_cid = $row[20];
		$campaign_vdad_exten = $row[21];
		$campaign_rec_exten = $row[22];
		$campaign_recording = $row[23];
		$campaign_rec_filename = $row[24];
		$script_id = $row[25];
		$get_call_launch = $row[26];
		$am_message_exten = $row[27];
		$amd_send_to_vmx = $row[28];
		$xferconf_a_dtmf = $row[29];
		$xferconf_a_number = $row[30];
		$xferconf_b_dtmf = $row[31];
		$xferconf_b_number = $row[32];
		$alt_number_dialing = $row[33];
		$scheduled_callbacks = $row[34];
		$lead_filter_id = $row[35];
			if ($lead_filter_id=='') {$lead_filter_id='NONE';}
		$drop_call_seconds = $row[36];
		$drop_action = $row[37];
		$safe_harbor_exten = $row[38];
		$display_dialable_count = $row[39];
		$wrapup_seconds = $row[40];
		$wrapup_message = $row[41];
	#	$closer_campaigns = $row[42];
		$use_internal_dnc = $row[43];
		$allcalls_delay = $row[44];
		$omit_phone_code = $row[45];
		$dial_method = $row[46];
		$available_only_ratio_tally = $row[47];
		$adaptive_dropped_percentage = $row[48];
		$adaptive_maximum_level = $row[49];
		$adaptive_latest_server_time = $row[50];
		$adaptive_intensity = $row[51];
		$adaptive_dl_diff_target = $row[52];
		$concurrent_transfers = $row[53];
		$auto_alt_dial = $row[54];
		$auto_alt_dial_statuses = $row[55];
		$agent_pause_codes_active = $row[56];
		$campaign_description = $row[57];
		$campaign_changedate = $row[58];
		$campaign_stats_rafraîchir = $row[59];
		$campaign_logindate = $row[60];
		$dial_statuses = $row[61];
		$disable_alter_custdata = $row[62];
		$no_hopper_leads_logins = $row[63];
		$list_order_mix = $row[64];
		$campaign_allow_inbound = $row[65];
		$manual_dial_list_id = $row[66];
		$default_xfer_group = $row[67];
		$queue_priority = $row[69];
		$drop_inbound_group = $row[70];
		$qc_enabled = $row[71];
		$qc_statuses = $row[72];
		$qc_lists = $row[73];
		$qc_shift_id = $row[74];
		$qc_get_record_launch = $row[75];
		$qc_show_recording = $row[76];
		$qc_web_form_address = stripslashes($row[77]);
		$qc_script = $row[78];
		$survey_first_audio_file = $row[79];
		$survey_dtmf_digits = $row[80];
		$survey_ni_digit = $row[81];
		$survey_opt_in_audio_file = $row[82];
		$survey_ni_audio_file = $row[83];
		$survey_method = $row[84];
		$survey_no_response_action = $row[85];
		$survey_ni_status = $row[86];
		$survey_response_digit_map = $row[87];
		$survey_xfer_exten = $row[88];
		$survey_camp_record_dir = $row[89];
		$disable_alter_custphone = $row[90];
		$display_queue_count = $row[91];
		$manual_dial_filter = $row[92];
		$agent_clipboard_copy = $row[93];
		$agent_extended_alt_dial = $row[94];
		$use_campaign_dnc = $row[95];
		$three_way_call_cid = $row[96];
		$three_way_dial_prefix = $row[97];
		$web_form_target = $row[98];
		$vtiger_search_category = $row[99];
		$vtiger_create_call_record = $row[100];
		$vtiger_create_lead_record = $row[101];
		$vtiger_screen_login = $row[102];
		$cpd_amd_action = $row[103];
		$agent_allow_group_alias = $row[104];
		$default_group_alias = $row[105];
		$vtiger_search_dead = $row[106];
		$vtiger_status_call = $row[107];
		$survey_third_digit = $row[108];
		$survey_third_audio_file = $row[109];
		$survey_third_status = $row[110];
		$survey_third_exten = $row[111];
		$survey_fourth_digit = $row[112];
		$survey_fourth_audio_file = $row[113];
		$survey_fourth_status = $row[114];
		$survey_fourth_exten = $row[115];
		$drop_lockout_time = $row[116];
		$quick_transfer_button = $row[117];
		$prepopulate_transfer_preset = $row[118];
		$drop_rate_group = $row[119];
		$view_calls_in_queue = $row[120];
		$view_calls_in_queue_launch = $row[121];
		$grab_calls_in_queue = $row[122];
		$call_requeue_button = $row[123];
		$pause_after_each_call = $row[124];
		$no_hopper_dialing = $row[125];
		$agent_dial_owner_only = $row[126];
		$agent_display_dialable_leads = $row[127];
		$web_form_address_two = $row[128];
		$waitforsilence_options = $row[129];
		$agent_select_territories = $row[130];
		$campaign_calldate = $row[131];
		$crm_popup_login = $row[132];
		$crm_login_address = $row[133];
		$timer_action = $row[134];
		$timer_action_message = $row[135];
		$timer_action_seconds = $row[136];
		$start_call_url = $row[137];
		$dispo_call_url = $row[138];
		$xferconf_c_number = $row[139];
		$xferconf_d_number = $row[140];
		$xferconf_e_number = $row[141];
		$use_custom_cid = $row[142];
		$scheduled_callbacks_alert = $row[143];
		$queuemetrics_callstatus = $row[144];
		$extension_appended_cidname = $row[145];
		$scheduled_callbacks_count = $row[146];
		$manual_dial_override = $row[147];
		$blind_monitor_warning = $row[148];
		$blind_monitor_message = $row[149];
		$blind_monitor_filename = $row[150];
		$inbound_queue_no_dial = $row[151];
		$timer_action_destination = $row[152];
		$enable_xfer_presets = $row[153];
		$hide_xfer_number_to_dial = $row[154];
		$manual_dial_prefix = $row[155];
		$customer_3way_hangup_logging = $row[156];
		$customer_3way_hangup_seconds = $row[157];
		$customer_3way_hangup_action = $row[158];
		$ivr_park_call = $row[159];
		$ivr_park_call_agi = $row[160];
		$manual_preview_dial = $row[161];
		$realtime_agent_time_stats = $row[162];
		$use_auto_hopper = $row[163];
		$auto_hopper_multi = $row[164];
		$auto_trim_hopper = $row[165];
		$api_manual_dial = $row[166];
		$manual_dial_call_time_check = $row[167];
		$display_leads_count = $row[168];
		$lead_order_randomize = $row[169];
		$lead_order_secondary = $row[170];
		$per_call_notes = $row[171];
		$my_callback_option = $row[172];
		$agent_lead_search = $row[173];
		$agent_lead_search_method = $row[174];
		$queuemetrics_phone_environment = $row[175];
		$auto_pause_precall = $row[176];
		$auto_resume_precall = $row[177];
		$auto_pause_precall_code = $row[178];
		$manual_dial_cid = $row[179];
		$post_phone_time_diff_alert = $row[180];
		$custom_3way_button_transfer = $row[181];
		$available_only_tally_threshold = $row[182];
		$available_only_tally_threshold_agents = $row[183];
		$dial_level_threshold = $row[184];
		$dial_level_threshold_agents = $row[185];
		$safe_harbor_audio = $row[186];
		$safe_harbor_menu_id = $row[187];
		$survey_menu_id = $row[188];
		$callback_days_limit = $row[189];
		$dl_diff_target_method = $row[190];
		$disable_dispo_screen = $row[191];
		$disable_dispo_status = $row[192];
		$screen_labels = $row[193];
		$status_display_fields = $row[194];
		$na_call_url = $row[195];
		$survey_recording = $row[196];
		$pllb_grouping = $row[197];
		$pllb_grouping_limit = $row[198];
		$call_count_limit = $row[199];
		$call_count_target = $row[200];
		$callback_hours_block = $row[201];
		$callback_list_calltime = $row[202];
		$user_group = $row[203];
		$hopper_vlc_dup_check = $row[204];

	if (ereg("DISABLED",$list_order_mix))
		{$DEFlistDISABLE = '';	$DEFstatusDISABLED=0;}
	else
		{$DEFlistDISABLE = 'disabled';	$DEFstatusDISABLED=1;}

	if ($auto_alt_dial == 'MULTI_LEAD')
		{$ALTmultiDISABLE=1;	$ALTmultiLINK="<a href=\"./admin_campaign_multi_alt.php?campaign_id=$campaign_id\">Multi-Alt-Paramètres</a>";}
	else
		{$ALTmultiDISABLE=0;	$ALTmultiLINK='';}


	$stmt="SELECT count(*) from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and status='ACTIVE' $LOGallowed_campaignsSQL;";
	$rslt=mysql_query($stmt, $link);
	$rowx=mysql_fetch_row($rslt);
	if ($rowx[0] < 1)
		{
		$mixes_list="<option SELECTED value=\"DISABLED\">DISABLED</option>\n";
		$mixname_list["DISABLED"] = "DISABLED";
		}
	else
		{
		##### get list_mix listings for dynamic pulldown
		$stmt="SELECT vcl_id,vcl_name from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and status='ACTIVE' $LOGallowed_campaignsSQL limit 1";
		$rslt=mysql_query($stmt, $link);
		$mixes_to_print = mysql_num_rows($rslt);
		$mixes_list="<option value=\"DISABLED\">DISABLED</option>\n";

		$o=0;
		while ($mixes_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$mixes_list .= "<option value=\"ACTIVE\">ACTIVE ($rowx[0] - $rowx[1])</option>\n";
			$mixname_list["ACTIVE"] = "$rowx[0] - $rowx[1]";
			$o++;
			}
		}

	$dial_statuses = preg_replace("/ -$/","",$dial_statuses);
	$Dstatuses = explode(" ", $dial_statuses);
	$Ds_to_print = (count($Dstatuses) -1);

	$qc_statuses = preg_replace("/^ | -$/","",$qc_statuses);
	$QCstatuses = explode(" ", $qc_statuses);
	$QCs_to_print = (count($QCstatuses) -0);

	$qc_lists = preg_replace("/^ | -$/","",$qc_lists);
	$QClists = explode(" ", $qc_lists);
	$QCL_to_print = (count($QClists) -0);

	##### get status listings for dynamic pulldown
	$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_statuses order by status;";
	$rslt=mysql_query($stmt, $link);
	$statuses_to_print = mysql_num_rows($rslt);
	$statuses_list='';
	$dial_statuses_list='';
	$qc_statuses_list='';
	$survey_ni_status_list='';
	$o=0;
	while ($statuses_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		if ($rowx[0] != 'CBHOLD') 
			{
			$dial_statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			if ($survey_ni_status == $rowx[0])
				{
				$survey_ni_status_list .= "<option value=\"$rowx[0]\" SELECTED>$rowx[0] - $rowx[1]</option>\n";
				}
			else
				{
				$survey_ni_status_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				}
			}
		$statname_list["$rowx[0]"] = "$rowx[1]";
		$LRstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";
		if (eregi("Y",$rowx[2]))
			{$HKstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";}

		$qc_statuses_list .= "<input type=\"checkbox\" name=\"qc_statuses[]\" value=\"$rowx[0]\"";
		$p=0;
		while ($p < $QCs_to_print)
			{
			if ($rowx[0] == $QCstatuses[$p]) 
				{
				$qc_statuses_list .= " CHECKED";
				}
			$p++;
			}
		$qc_statuses_list .= "> $rowx[0] - $rowx[1]<BR>\n";

		$o++;
		}

	$stmt="SELECT status,status_name,selectable,campaign_id,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
	$rslt=mysql_query($stmt, $link);
	$Cstatuses_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($Cstatuses_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		if ($rowx[0] != 'CBHOLD') {$dial_statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";}
		$statname_list["$rowx[0]"] = "$rowx[1]";
		$LRstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";
		if (eregi("Y",$rowx[2]))
			{$HKstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";}

		$qc_statuses_list .= "<input type=\"checkbox\" name=\"qc_statuses[]\" value=\"$rowx[0]\"";
		$p=0;
		while ($p < $QCs_to_print)
			{
			if ($rowx[0] == $QCstatuses[$p]) 
				{
				$qc_statuses_list .= " CHECKED";
				}
			$p++;
			}
		$qc_statuses_list .= "> $rowx[0] - $rowx[1]<BR>\n";

		$o++;
		}

	##### get in-groups listings for dynamic drop in-group pulldown
	$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
#	$stmt="SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') order by group_id";
	$rslt=mysql_query($stmt, $link);
	$Dgroups_to_print = mysql_num_rows($rslt);
	$Dgroups_menu='';
	$Dgroups_selected=0;
	$o=0;
	while ($Dgroups_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$Dgroups_menu .= "<option ";
		if ($drop_inbound_group == "$rowx[0]") 
			{
			$Dgroups_menu .= "SELECTED ";
			$Dgroups_selected++;
			}
		$Dgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}
	if ($Dgroups_selected < 1) 
		{$Dgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
	else 
		{$Dgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}

	$nxLOGadmin_viewable_groupsSQL = $LOGadmin_viewable_groupsSQL;
	if (strlen($xfer_groupsSQL) < 6)
			{$nxLOGadmin_viewable_groupsSQL = $whereLOGadmin_viewable_groupsSQL;}
	##### get in-groups listings for dynamic transfer group pulldown list menu
	$stmt="SELECT group_id,group_name from vicidial_inbound_groups $xfer_groupsSQL $nxLOGadmin_viewable_groupsSQL order by group_id;";
	$rslt=mysql_query($stmt, $link);
	$Xgroups_to_print = mysql_num_rows($rslt);
	$Xgroups_menu='';
	$Xgroups_selected=0;
	$o=0;
	while ($Xgroups_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$Xgroups_menu .= "<option ";
		if ($default_xfer_group == "$rowx[0]") 
			{
			$Xgroups_menu .= "SELECTED ";
			$Xgroups_selected++;
			}
		$Xgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}
	if ($Xgroups_selected < 1) 
		{$Xgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
	else 
		{$Xgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}

	##### get agent screen label listings for dynamic pulldown list menu
	$stmt="SELECT label_id,label_name from vicidial_screen_labels where active='Y' $LOGadmin_viewable_groupsSQL order by label_id;";
	$rslt=mysql_query($stmt, $link);
	$labels_to_print = mysql_num_rows($rslt);
	$labels_menu='';
	$o=0;
	while ($labels_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$labels_menu .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}

	$stmt="SELECT count(*) from servers where active='Y' and active_agent_login_server='Y';";
	if ($DB) {echo "|$stmt|\n";}
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	$agent_servers_count=$row[0];

	$stmt="SELECT count(*) from phones_alias $whereLOGadmin_viewable_groupsSQL;";
	if ($DB) {echo "|$stmt|\n";}
	$rslt=mysql_query($stmt, $link);
	$row=mysql_fetch_row($rslt);
	$phones_alias_count=$row[0];


	if ($SUB<1)		{$camp_detail_color=$subcamp_color;}
		else		{$camp_detail_color=$campaigns_color;}
	if ($SUB==22)	{$camp_statuses_color=$subcamp_color;}
		else		{$camp_statuses_color=$campaigns_color;}
	if ($SUB==23)	{$camp_hotkeys_color=$subcamp_color;}
		else		{$camp_hotkeys_color=$campaigns_color;}
	if ($SUB==25)	{$camp_recycle_color=$subcamp_color;}
		else		{$camp_recycle_color=$campaigns_color;}
	if ($SUB==26)	{$camp_autoalt_color=$subcamp_color;}
		else		{$camp_autoalt_color=$campaigns_color;}
	if ($SUB==27)	{$camp_pause_color=$subcamp_color;}
		else		{$camp_pause_color=$campaigns_color;}
	if ($SUB==28)	{$camp_qc_color=$subcamp_color;}
		else		{$camp_qc_color=$campaigns_color;}
	if ($SUB==29)	{$camp_listmix_color=$subcamp_color;}
		else		{$camp_listmix_color=$campaigns_color;}
	if ($SUB=='20A')	{$camp_survey_color=$subcamp_color;}
		else		{$camp_survey_color=$campaigns_color;}
	if ($SUB==201)	{$camp_preset_color=$subcamp_color;}
		else		{$camp_preset_color=$campaigns_color;}
	if ($SUB==202)	{$camp_accid_color=$subcamp_color;}
		else		{$camp_accid_color=$campaigns_color;}
	echo "<font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\"> <B>$campaign_id</B>: </font><BR>";
	echo "<TABLE WIDTH=$page_width CELLPADDING=2 CELLSPACING=0><TR BGCOLOR=\"$campaigns_color\">\n";
	echo "<TD> &nbsp; <a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Basic</font></a></TD>";
	echo "<TD BGCOLOR=\"$camp_detail_color\"> <a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Détail </font></a> </TD>";
	echo "<TD BGCOLOR=\"$camp_statuses_color\"><a href=\"$PHP_SELF?ADD=31&SUB=22&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Statuts</font></a></TD>";
	echo "<TD BGCOLOR=\"$camp_hotkeys_color\"><a href=\"$PHP_SELF?ADD=31&SUB=23&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">HotKeys</font></a></TD>";

	if ($SSoutbound_autodial_active > 0)
		{
		echo "<TD BGCOLOR=\"$camp_recycle_color\"><a href=\"$PHP_SELF?ADD=31&SUB=25&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Lead Recycling</font></a></TD>";
		echo "<TD BGCOLOR=\"$camp_autoalt_color\"><a href=\"$PHP_SELF?ADD=31&SUB=26&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Auto Alt Dial</font></a></TD>";
		echo "<TD BGCOLOR=\"$camp_listmix_color\"><a href=\"$PHP_SELF?ADD=31&SUB=29&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Liste Mix</font></a></TD>";
		echo "<TD BGCOLOR=\"$camp_survey_color\"><a href=\"$PHP_SELF?ADD=31&SUB=20A&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Sondage</font></a></TD>";
		}
	echo "<TD BGCOLOR=\"$camp_pause_color\"><a href=\"$PHP_SELF?ADD=31&SUB=27&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Pause Codes</font></a></TD>";
	if ($enable_xfer_presets == 'ENABLED')
		{
		echo "<TD BGCOLOR=\"$camp_preset_color\"><a href=\"$PHP_SELF?ADD=31&SUB=201&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\"> Presets moins de/font></a></TD>";
		}
	if ($SScampaign_cid_areacodes_enabled == '1')
		{
		echo "<TD BGCOLOR=\"$camp_accid_color\"><a href=\"$PHP_SELF?ADD=31&SUB=202&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">AC-CID</font></a></TD>";
		}
	if ($SSqc_features_active > 0)
		{
		echo "<TD BGCOLOR=\"$camp_qc_color\"><a href=\"$PHP_SELF?ADD=31&SUB=28&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">QC</font></a></TD>";
		}
	if ($SSoutbound_autodial_active < 1)
		{
		echo "<TD></TD><TD></TD><TD></TD><TD></TD>\n";
		}
	echo "<TD> <a href=\"./realtime_report.php?RR=4&DB=0&group=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Real-Time</font></a></TD>\n";
	echo "</TR></TABLE>\n";

	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<center>\n";

	if ($SUB < 1)
		{
		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=41>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "<input type=hidden name=park_ext value=\"$park_ext\">\n";
		echo "<input type=hidden name=old_campaign_allow_inbound value=\"$campaign_allow_inbound\">\n";
		echo "<TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left><b>$campaign_id</b>$NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la campagne: </td><td align=left><input type=text name=campaign_name size=40 maxlength=40 value=\"$campaign_name\">$NWB#vicidial_campaigns-campaign_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description de la campagne: </td><td align=left><input type=text name=campaign_description size=40 maxlength=255 value=\"$campaign_description\">$NWB#vicidial_campaigns-campaign_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Changement Date: </td><td align=left>$campaign_changedate &nbsp; $NWB#vicidial_campaigns-campaign_changedate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Login Date: </td><td align=left>$campaign_logindate &nbsp; $NWB#vicidial_campaigns-campaign_logindate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Call Date: </td><td align=left>$campaign_calldate &nbsp; $NWB#vicidial_campaigns-campaign_calldate$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'8','campaign',$link,'total_calls','call count',1);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$campaign_active</option></select>$NWB#vicidial_campaigns-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#8EBCFD><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_campaigns-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Parc de la Musique-sur-Hold: </td><td align=left><input type=text name=park_file_name id=park_file_name size=20 maxlength=100 value=\"$park_file_name\"> <a href=\"javascript:launch_moh_chooser('park_file_name','moh',200);\">moh chooser</a> $NWB#vicidial_campaigns-park_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web: </td><td align=left><input type=text name=web_form_address size=70 maxlength=9999 value=\"$web_form_address\">$NWB#vicidial_campaigns-web_form_address$NWE</td></tr>\n";
		if ($SSenable_second_webform > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web Two: </td><td align=left><input type=text name=web_form_address_two size=70 maxlength=9999 value=\"$web_form_address_two\">$NWB#vicidial_campaigns-web_form_address$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web Public: </td><td align=left><input type=text name=web_form_target size=25 maxlength=255 value=\"$web_form_target\">$NWB#vicidial_campaigns-web_form_target$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Autoriser les closers: </td><td align=left><select size=1 name=allow_closers><option>Y</option><option>N</option><option SELECTED>$allow_closers</option></select>$NWB#vicidial_campaigns-allow_closers$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Permettez d'arrivée et mélangé :</td><td align=left><select size=1 name=campaign_allow_inbound><option>Y</option><option>N</option><option SELECTED>$campaign_allow_inbound</option></select>$NWB#vicidial_campaigns-campaign_allow_inbound$NWE</td></tr>\n";

			$o=0;
			while ($Ds_to_print > $o) 
				{
				$o++;
				$Dstatus = $Dstatuses[$o];

				echo "<tr bgcolor=#8EBCFD><td align=right>Statut d'appel$o: </td><td align=left> \n";

				if ($DEFstatusDISABLED > 0)
					{
					echo "<font color=grey><DEL><b>$Dstatus</b> - $statname_list[$Dstatus] &nbsp; &nbsp; &nbsp; &nbsp; <font size=2>\n";
					echo "REMOVE</DEL></td></tr>\n";
					}
				else
					{
					echo "<b>$Dstatus</b> - $statname_list[$Dstatus] &nbsp; &nbsp; &nbsp; &nbsp; <font size=2>\n";
					echo "<a href=\"$PHP_SELF?ADD=68&campaign_id=$campaign_id&status=$Dstatuses[$o]\">SUPPRIMER</a></td></tr>\n";
					}
				}

			echo "<tr bgcolor=#8EBCFD><td align=right>Ajouter un statut Composer pour appeler: </td><td align=left><select size=1 name=dial_status $DEFlistDISABLE>\n";
			echo "<option value=\"\"> - NONE - </option>\n";

			echo "$dial_statuses_list";
			echo "</select> &nbsp; \n";
			echo "<input type=submit name=submit value=AJOUTER> &nbsp; &nbsp; $NWB#vicidial_campaigns-dial_status$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Ordre de la liste: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_order value=\"$lead_order\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_order>
				<option SELECTED>$lead_order</option>
				<option>DOWN</option>
				<option>UP</option>
				<option>DOWN PHONE</option>
				<option>UP PHONE</option>
				<option>DOWN LAST NAME</option>
				<option>UP LAST NAME</option>
				<option>DOWN COUNT</option>
				<option>UP COUNT</option>
				<option>RANDOM</option>
				<option>DOWN LAST CALL TIME</option>
				<option>UP LAST CALL TIME</option>
				<option>DOWN RANK</option>
				<option>UP RANK</option>
				<option>DOWN OWNER</option>
				<option>UP OWNER</option>
				<option>DOWN TIMEZONE</option>
				<option>UP TIMEZONE</option>
				<option>DOWN 2nd NEW</option>
				<option>DOWN 3rd NEW</option>
				<option>DOWN 4th NEW</option>
				<option>DOWN 5th NEW</option>
				<option>DOWN 6th NEW</option>
				<option>UP 2nd NEW</option>
				<option>UP 3rd NEW</option>
				<option>UP 4th NEW</option>
				<option>UP 5th NEW</option>
				<option>UP 6th NEW</option>
				<option>DOWN PHONE 2nd NEW</option>
				<option>DOWN PHONE 3rd NEW</option>
				<option>DOWN PHONE 4th NEW</option>
				<option>DOWN PHONE 5th NEW</option>
				<option>DOWN PHONE 6th NEW</option>
				<option>UP PHONE 2nd NEW</option>
				<option>UP PHONE 3rd NEW</option>
				<option>UP PHONE 4th NEW</option>
				<option>UP PHONE 5th NEW</option>
				<option>UP PHONE 6th NEW</option>
				<option>DOWN LAST NAME 2nd NEW</option>
				<option>DOWN LAST NAME 3rd NEW</option>
				<option>DOWN LAST NAME 4th NEW</option>
				<option>DOWN LAST NAME 5th NEW</option>
				<option>DOWN LAST NAME 6th NEW</option>
				<option>UP LAST NAME 2nd NEW</option>
				<option>UP LAST NAME 3rd NEW</option>
				<option>UP LAST NAME 4th NEW</option>
				<option>UP LAST NAME 5th NEW</option>
				<option>UP LAST NAME 6th NEW</option>
				<option>DOWN COUNT 2nd NEW</option>
				<option>DOWN COUNT 3rd NEW</option>
				<option>DOWN COUNT 4th NEW</option>
				<option>DOWN COUNT 5th NEW</option>
				<option>DOWN COUNT 6th NEW</option>
				<option>UP COUNT 2nd NEW</option>
				<option>UP COUNT 3rd NEW</option>
				<option>UP COUNT 4th NEW</option>
				<option>UP COUNT 5th NEW</option>
				<option>UP COUNT 6th NEW</option>
				<option>RANDOM 2nd NEW</option>
				<option>RANDOM 3rd NEW</option>
				<option>RANDOM 4th NEW</option>
				<option>RANDOM 5th NEW</option>
				<option>RANDOM 6th NEW</option>
				<option>DOWN LAST CALL TIME 2nd NEW</option>
				<option>DOWN LAST CALL TIME 3rd NEW</option>
				<option>DOWN LAST CALL TIME 4th NEW</option>
				<option>DOWN LAST CALL TIME 5th NEW</option>
				<option>DOWN LAST CALL TIME 6th NEW</option>
				<option>UP LAST CALL TIME 2nd NEW</option>
				<option>UP LAST CALL TIME 3rd NEW</option>
				<option>UP LAST CALL TIME 4th NEW</option>
				<option>UP LAST CALL TIME 5th NEW</option>
				<option>UP LAST CALL TIME 6th NEW</option>
				<option>DOWN RANK 2nd NEW</option>
				<option>DOWN RANK 3rd NEW</option>
				<option>DOWN RANK 4th NEW</option>
				<option>DOWN RANK 5th NEW</option>
				<option>DOWN RANK 6th NEW</option>
				<option>UP RANK 2nd NEW</option>
				<option>UP RANK 3rd NEW</option>
				<option>UP RANK 4th NEW</option>
				<option>UP RANK 5th NEW</option>
				<option>UP RANK 6th NEW</option>
				<option>DOWN OWNER 2nd NEW</option>
				<option>DOWN OWNER 3rd NEW</option>
				<option>DOWN OWNER 4th NEW</option>
				<option>DOWN OWNER 5th NEW</option>
				<option>DOWN OWNER 6th NEW</option>
				<option>UP OWNER 2nd NEW</option>
				<option>UP OWNER 3rd NEW</option>
				<option>UP OWNER 4th NEW</option>
				<option>UP OWNER 5th NEW</option>
				<option>UP OWNER 6th NEW</option>
				<option>DOWN TIMEZONE 2nd NEW</option>
				<option>DOWN TIMEZONE 3rd NEW</option>
				<option>DOWN TIMEZONE 4th NEW</option>
				<option>DOWN TIMEZONE 5th NEW</option>
				<option>DOWN TIMEZONE 6th NEW</option>
				<option>UP TIMEZONE 2nd NEW</option>
				<option>UP TIMEZONE 3rd NEW</option>
				<option>UP TIMEZONE 4th NEW</option>
				<option>UP TIMEZONE 5th NEW</option>
				<option>UP TIMEZONE 6th NEW</option>
				</select>$NWB#vicidial_campaigns-lead_order$NWE\n";
				}

			echo "</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Commandez Liste Randomize: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_order_randomize value=\"$lead_order_randomize\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_order_randomize><option>Y</option><option>N</option><option SELECTED>$lead_order_randomize</option></select>$NWB#vicidial_campaigns-lead_order_randomize$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Commandez Liste secondaire: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_order_secondary value=\"$lead_order_secondary\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_order_secondary><option>LEAD_ASCEND</option><option>LEAD_DESCEND</option><option>CALLTIME_ASCEND</option><option>CALLTIME_DESCEND</option><option SELECTED>$lead_order_secondary</option></select>$NWB#vicidial_campaigns-lead_order_secondary$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=31&SUB=29&campaign_id=$campaign_id&vcl_id=$list_order_mix\">Liste Mix</a>: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=list_order_mix value=\"$list_order_mix\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=list_order_mix>\n";
				echo "$mixes_list";
				if (ereg("DISABLED",$list_order_mix))
					{echo "<option selected value=\"$list_order_mix\">$list_order_mix - $mixname_list[$list_order_mix]</option>\n";}
				else
					{echo "<option selected value=\"ACTIVE\">ACTIVE ($mixname_list[ACTIVE])</option>\n";}
				echo "</select>$NWB#vicidial_campaigns-list_order_mix$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=31111111&lead_filter_id=$lead_filter_id\">Filtre de la fiche</a>: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_filter_id value=\"$lead_filter_id\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_filter_id>\n";
				echo "$filters_list";
				echo "<option selected value=\"$lead_filter_id\">$lead_filter_id - $filtername_list[$lead_filter_id]</option>\n";
				echo "</select>$NWB#vicidial_campaigns-lead_filter_id$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Drop Lockout Time: </td><td align=left><input type=text name=drop_lockout_time size=6 maxlength=6 value=\"$drop_lockout_time\"> $NWB#vicidial_campaigns-drop_lockout_time$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Appelez le comte Limite: </td><td align=left><input type=text name=call_count_limit size=4 maxlength=5 value=\"$call_count_limit\"> $NWB#vicidial_campaigns-call_count_limit$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Appelez le comte cible: </td><td align=left><input type=text name=call_count_target size=4 maxlength=5 value=\"$call_count_target\"> $NWB#vicidial_campaigns-call_count_target$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Niveau minimum Hopper: </td><td align=left><select size=1 name=hopper_level><option>1</option><option>5</option><option>10</option><option>20</option><option>50</option><option>100</option><option>200</option><option>500</option><option>700</option><option>1000</option><option>2000</option><option SELECTED>$hopper_level</option></select>$NWB#vicidial_campaigns-hopper_level$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Niveau Hopper automatique: </td><td align=left><select size=1 name=use_auto_hopper><option>Y</option><option>N</option><option SELECTED>$use_auto_hopper</option></select>$NWB#vicidial_campaigns-use_auto_hopper$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Multiplicateur Hopper automatique: </td><td align=left><select size=1 name=auto_hopper_multi><option>0.1</option><option>0.2</option><option>0.3</option><option>0.4</option><option>0.5</option><option>0.6</option><option>0.7</option><option>0.8</option><option>0.9</option><option>1.0</option><option>1.1</option><option>1.2</option><option>1.3</option><option>1.4</option><option>1.5</option><option>1.6</option><option>1.7</option><option>1.8</option><option>1.9</option><option>2.0</option><option SELECTED>$auto_hopper_multi</option></select>$NWB#vicidial_campaigns-hopper_level$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Auto Trim Hopper: </td><td align=left><select size=1 name=auto_trim_hopper><option>Y</option><option>N</option><option SELECTED>$auto_trim_hopper</option></select>$NWB#vicidial_campaigns-auto_trim_hopper$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Hopper VLC Dup Vérifiez: </td><td align=left><select size=1 name=hopper_vlc_dup_check><option>Y</option><option>N</option><option SELECTED>$hopper_vlc_dup_check</option></select>$NWB#vicidial_campaigns-hopper_vlc_dup_check$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Forcer la réinitialisation du distributeur de fiches: </td><td align=left><select size=1 name=reset_hopper><option>Y</option><option SELECTED>N</option></select>$NWB#vicidial_campaigns-force_reset_hopper$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Méthode d'appel: </td><td align=left><select size=1 name=dial_method><option >MANUAL</option><option>RATIO</option><option>ADAPT_HARD_LIMIT</option><option>ADAPT_TAPERED</option><option>ADAPT_AVERAGE</option><option>INBOUND_MAN</option><option SELECTED>$dial_method</option></select>$NWB#vicidial_campaigns-dial_method$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Niveau de l'appel automatique: </td><td align=left><select size=1 name=auto_dial_level><option selected>$auto_dial_level</option>\n";
			$adl=0;
			while($adl <= $SSauto_dial_limit)
				{
				echo "<option>$adl</option>\n";
				if ($adl < 1)
					{$adl = ($adl + 1);}
				else
					{
					if ($adl < 3)
						{$adl = ($adl + 0.1);}
					else
						{
						if ($adl < 4)
							{$adl = ($adl + 0.25);}
						else
							{
							if ($adl < 5)
								{$adl = ($adl + 0.5);}
							else
								{
								if ($adl < 10)
									{$adl = ($adl + 1);}
								else
									{
									if ($adl < 20)
										{$adl = ($adl + 2);}
									else
										{
										if ($adl < 40)
											{$adl = ($adl + 5);}
										else
											{
											if ($adl < 200)
												{$adl = ($adl + 10);}
											else
												{
												if ($adl < 400)
													{$adl = ($adl + 50);}
												else
													{
													if ($adl < 1000)
														{$adl = ($adl + 100);}
													else
														{$adl = ($adl + 1);}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			echo "<option>$adl</option></select>(0 = off)$NWB#vicidial_campaigns-auto_dial_level$NWE &nbsp; &nbsp; &nbsp; <input type=checkbox name=dial_level_override value=\"1\">ADAPTER LE DEPASSEMENT</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Seuil Auto Level Dial: </td><td align=left><select size=1 name=dial_level_threshold><option >DISABLED</option><option>LOGGED-IN_AGENTS</option><option>NON-PAUSED_AGENTS</option><option>WAITING_AGENTS</option><option SELECTED>$dial_level_threshold</option></select>$NWB#vicidial_campaigns-dial_level_threshold$NWE &nbsp; &nbsp; &nbsp; agents: <select size=1 name=dial_level_threshold_agents><option SELECTED>$dial_level_threshold_agents</option><option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>50</option></select></td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Valable seulement pour les contrôles: </td><td align=left><select size=1 name=available_only_ratio_tally><option>Y</option><option>N</option><option SELECTED>$available_only_ratio_tally</option></select>$NWB#vicidial_campaigns-available_only_ratio_tally$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Disponible Seuil Tally seulement: </td><td align=left><select size=1 name=available_only_tally_threshold><option >DISABLED</option><option>LOGGED-IN_AGENTS</option><option>NON-PAUSED_AGENTS</option><option>WAITING_AGENTS</option><option SELECTED>$available_only_tally_threshold</option></select>$NWB#vicidial_campaigns-available_only_tally_threshold$NWE &nbsp; &nbsp; &nbsp; agents: <select size=1 name=available_only_tally_threshold_agents><option SELECTED>$available_only_tally_threshold_agents</option><option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>50</option></select></td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Pourcentage limite d'abandon: </td><td align=left><select size=1 name=adaptive_dropped_percentage>\n";
			$n=101;
			while ($n>=0.1)
				{
				if ($n <= 3)
					{$n = ($n - 0.1);}
				else
					{$n--;}
				echo "<option>$n</option>\n";
				}
			echo "<option SELECTED>$adaptive_dropped_percentage</option></select>% $NWB#vicidial_campaigns-adaptive_dropped_percentage$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Adaptation maximum du niveau de l'appel: </td><td align=left><input type=text name=adaptive_maximum_level size=6 maxlength=6 value=\"$adaptive_maximum_level\"><i>number only</i> $NWB#vicidial_campaigns-adaptive_maximum_level$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Heure max du serveur: </td><td align=left><input type=text name=adaptive_latest_server_time size=6 maxlength=4 value=\"$adaptive_latest_server_time\"><i>4 chiffres seulement</i> $NWB#vicidial_campaigns-adaptive_latest_server_time$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Adapter le modificateur d'intensité: </td><td align=left><select size=1 name=adaptive_intensity>\n";
			$n=40;
			while ($n>=-40)
				{
				$dtl = 'Balanced';
				if ($n<0) {$dtl = 'Less Intense';}
				if ($n>0) {$dtl = 'More Intense';}
				if ($n == $adaptive_intensity) 
					{echo "<option SELECTED value=\"$n\">$n - $dtl</option>\n";}
				else
					{echo "<option value=\"$n\">$n - $dtl</option>\n";}
				$n--;
				}
			echo "</select> $NWB#vicidial_campaigns-adaptive_intensity$NWE</td></tr>\n";



			echo "<tr bgcolor=#BDFFBD><td align=right>Différence cible du niveau d'appel: </td><td align=left><select size=1 name=adaptive_dl_diff_target>\n";
			$n=40;
			while ($n>=-40)
				{
				$nabs = abs($n);
				$dtl = 'Balanced';
				if ($n<0) {$dtl = 'Agents Waiting for Calls';}
				if ($n>0) {$dtl = 'Calls Waiting for Agents';}
				if ($n == $adaptive_dl_diff_target) 
					{echo "<option SELECTED value=\"$n\">$n --- $nabs $dtl</option>\n";}
				else
					{echo "<option value=\"$n\">$n --- $nabs $dtl</option>\n";}
				$n--;
				}
			echo "</select> $NWB#vicidial_campaigns-adaptive_dl_diff_target$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Composez méthode cible de différence de niveau: </td><td align=left><select size=1 name=dl_diff_target_method><option>ADAPT_CALC_ONLY</option><option>CALLS_PLACED</option><option SELECTED>$dl_diff_target_method</option></select>$NWB#vicidial_campaigns-dl_diff_target_method$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Transferts concurents: </td><td align=left><select size=1 name=concurrent_transfers><option >AUTO</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>15</option><option>20</option><option>25</option><option>30</option><option>40</option><option>50</option><option>60</option><option>80</option><option>100</option><option SELECTED>$concurrent_transfers</option></select>$NWB#vicidial_campaigns-concurrent_transfers$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>File d'attente de priorité:</td><td align=left><select size=1 name=queue_priority>\n";
			$n=99;
			while ($n>=-99)
				{
				$dtl = 'Even';
				if ($n<0) {$dtl = 'Lower';}
				if ($n>0) {$dtl = 'Higher';}
				if ($n == $queue_priority) 
					{echo "<option SELECTED value=\"$n\">$n - $dtl</option>\n";}
				else
					{echo "<option value=\"$n\">$n - $dtl</option>\n";}
				$n--;
				}
			echo "</select> $NWB#vicidial_campaigns-queue_priority$NWE</td></tr>\n";



			echo "<tr bgcolor=#BDFFBD><td align=right>Multiples campagne Drop Rate Groupe: </td><td align=left><select size=1 name=drop_rate_group>";
			##### get list_mix listings for dynamic pulldown
			$stmt="SELECT group_id from vicidial_drop_rate_groups;";
			$rslt=mysql_query($stmt, $link);
			$DRgroups_to_print = mysql_num_rows($rslt);
			$DRgroups_list="<option value=\"DISABLED\">DISABLED</option>\n";

			$o=0;
			while ($DRgroups_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$DRgroups[$o] = "$rowx[0]";
				$o++;
				}

			$o=0;
			while ($DRgroups_to_print > $o)
				{
				$DRcampaigns='';
				$stmt="SELECT campaign_id from vicidial_campaigns where drop_rate_group='$DRgroups[$o]' $LOGallowed_campaignsSQL;";
				$rslt=mysql_query($stmt, $link);
				$DRcampaigns_to_print = mysql_num_rows($rslt);
				$p=0;
				while ($DRcampaigns_to_print > $p)
					{
					$rowx=mysql_fetch_row($rslt);
					$DRcampaigns .= "$rowx[0] ";
					$p++;
					}
				if (strlen($DRcampaigns)<2)
					{$DRcampaigns='-EMPTY- ';}
				while(strlen($DRcampaigns) > 45) {$DRcampaigns = substr("$DRcampaigns", 0, -1);}
				if(strlen($DRcampaigns) > 42) {$DRcampaigns = "$DRcampaigns...";}

				$DRgroups_list .= "<option value=\"$DRgroups[$o]\">$DRgroups[$o] ( $DRcampaigns)</option>\n";
				$o++;
				}
			echo "$DRgroups_list<option SELECTED>$drop_rate_group</option></select>$NWB#vicidial_campaigns-drop_rate_group$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Pas de file d'attente entrante Composez: </td><td align=left><select size=1 name=inbound_queue_no_dial><option >DISABLED</option><option>ENABLED</option><option>ALL_SERVERS</option><option SELECTED>$inbound_queue_no_dial</option></select>$NWB#vicidial_campaigns-inbound_queue_no_dial$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Appeler automatiquement le numéro alternatif: </td><td align=left><select size=1 name=auto_alt_dial><option >NONE</option><option>ALT_ONLY</option><option>ADDR3_ONLY</option><option>ALT_AND_ADDR3</option><option>ALT_AND_EXTENDED</option><option>ALT_AND_ADDR3_AND_EXTENDED</option><option>EXTENDED_ONLY</option><option>MULTI_LEAD</option><option SELECTED>$auto_alt_dial</option></select>$NWB#vicidial_campaigns-auto_alt_dial$NWE $ALTmultiLINK</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Appeler l'agent suivant : </td><td align=left><select size=1 name=next_agent_call><option >random</option><option>oldest_call_start</option><option>oldest_call_finish</option><option>overall_user_level</option><option>campaign_rank</option><option>campaign_grade_random</option><option>fewest_calls</option><option>longest_wait_time</option><option SELECTED>$next_agent_call</option></select>$NWB#vicidial_campaigns-next_agent_call$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$local_call_time\">Heure d'appel locale: </a></td><td align=left><select size=1 name=local_call_time>\n";
		echo "$call_times_list";
		echo "<option selected value=\"$local_call_time\">$local_call_time - $call_timename_list[$local_call_time]</option>\n";
		echo "</select>$NWB#vicidial_campaigns-local_call_time$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>Délai de tentative d'appel: </td><td align=left><input type=text name=dial_timeout size=3 maxlength=3 value=\"$dial_timeout\"> <i>in seconds</i>$NWB#vicidial_campaigns-dial_timeout$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Préfixe de numérotation: </td><td align=left><input type=text name=dial_prefix size=20 maxlength=20 value=\"$dial_prefix\"> <font size=1>for 91NXXNXXXXXX value would be 9, for no dial prefix use X</font>$NWB#vicidial_campaigns-dial_prefix$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Préfixe Manuel: </td><td align=left><input type=text name=manual_dial_prefix size=20 maxlength=20 value=\"$manual_dial_prefix\"> $NWB#vicidial_campaigns-manual_dial_prefix$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Omettre le phone code: </td><td align=left><select size=1 name=omit_phone_code><option>Y</option><option>N</option><option SELECTED>$omit_phone_code</option></select>$NWB#vicidial_campaigns-omit_phone_code$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>CallerID de la campagne: </td><td align=left><input type=text name=campaign_cid size=20 maxlength=20 value=\"$campaign_cid\">$NWB#vicidial_campaigns-campaign_cid$NWE\n";
		$stmt="SELECT count(*) from vicidial_lists where campaign_id='$campaign_id' and campaign_cid_override != '' and active='Y' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		if ($rowx[0] > 0) 
			{echo " <font color=red>LIST OVERRIDE ACTIVE</font>";}
		echo "</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Personnalisé CallerID: </td><td align=left><select size=1 name=use_custom_cid><option>Y</option><option>N</option><option>Indicatif régional</option><option SELECTED>$use_custom_cid</option></select>$NWB#vicidial_campaigns-use_custom_cid$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>Routage Extension:</td><td align=left><input type=text name=campaign_vdad_exten size=10 maxlength=20 value=\"$campaign_vdad_exten\">$NWB#vicidial_campaigns-campaign_vdad_exten$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension d'enregistrement de la campagne: </td><td align=left><input type=text name=campaign_rec_exten size=10 maxlength=10 value=\"$campaign_rec_exten\">$NWB#vicidial_campaigns-campaign_rec_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Enregistrement de la campagne: </td><td align=left><select size=1 name=campaign_recording><option>NEVER</option><option>ONDEMAND</option><option>ALLCALLS</option><option>ALLFORCE</option><option SELECTED>$campaign_recording</option></select>$NWB#vicidial_campaigns-campaign_recording$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du fichier d'enregistrement de la campagne: </td><td align=left><input type=text name=campaign_rec_filename size=50 maxlength=50 value=\"$campaign_rec_filename\">$NWB#vicidial_campaigns-campaign_rec_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Délai d'enregistrement: </td><td align=left><input type=text name=allcalls_delay size=3 maxlength=3 value=\"$allcalls_delay\"> <i>in seconds</i>$NWB#vicidial_campaigns-allcalls_delay$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Appelez-notes par Appel: </td><td align=left><select size=1 name=per_call_notes><option>ENABLED</option><option>DISABLED</option><option SELECTED>$per_call_notes</option></select>$NWB#vicidial_campaigns-per_call_notes$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Recherche de plomb Agent: </td><td align=left><select size=1 name=agent_lead_search><option>ENABLED</option><option>DISABLED</option><option SELECTED>$agent_lead_search</option></select>$NWB#vicidial_campaigns-agent_lead_search$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Méthode de recherche d'agent principal: </td><td align=left><select size=1 name=agent_lead_search_method><option>SYSTEM</option><option>CAMPAIGNLISTS</option><option>CAMPLISTS_ALL</option><option>LIST</option>USER_CAMPAIGNLISTS</option><option>USER_CAMPLISTS_ALL</option><option>USER_LIST</option><option>GROUP_SYSTEM</option><option>GROUP_CAMPAIGNLISTS</option><option>GROUP_CAMPLISTS_ALL</option><option>GROUP_LIST</option><option>TERRITORY_SYSTEM</option><option>TERRITORY_CAMPAIGNLISTS</option><option>TERRITORY_CAMPLISTS_ALL</option><option>TERRITORY_LIST<option SELECTED>$agent_lead_search_method</option></select>$NWB#vicidial_campaigns-agent_lead_search_method$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">Script</a>: </td><td align=left><select size=1 name=script_id>\n";
		echo "$scripts_list";
		echo "<option selected value=\"$script_id\">$script_id - $scriptname_list[$script_id]</option>\n";
		echo "</select>$NWB#vicidial_campaigns-campaign_script$NWE\n";
		$stmt="SELECT count(*) from vicidial_lists where campaign_id='$campaign_id' and agent_script_override != '' and active='Y' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		if ($rowx[0] > 0) 
			{echo " <font color=red>LIST OVERRIDE ACTIVE</font>";}
		echo "</td></tr>\n";

		$eswHTML=''; $cfwHTML='';
		if ($SSenable_second_webform > 0)
			{$eswHTML = '<option>WEBFORMTWO</option>';}
		if ($SScustom_fields_enabled > 0)
			{$cfwHTML = '<option>FORM</option>';}
		echo "<tr bgcolor=#B6D3FC><td align=right>Lancer l'appel: </td><td align=left><select size=1 name=get_call_launch><option selected>NONE</option><option>SCRIPT</option><option>WEBFORM</option>$eswHTML$cfwHTML<option selected>$get_call_launch</option></select>$NWB#vicidial_campaigns-get_call_launch$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Message de répondeur: </td><td><input type=text size=50 maxlength=100 name=am_message_exten id=am_message_exten value=\"$am_message_exten\"> <a href=\"javascript:launch_chooser('am_message_exten','date',2000);\">audio chooser</a>  $NWB#vicidial_campaigns-am_message_exten$NWE\n";
		$stmt="SELECT count(*) from vicidial_lists where campaign_id='$campaign_id' and am_message_exten_override != '' and active='Y' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		if ($rowx[0] > 0) 
			{echo " <font color=red>LIST OVERRIDE ACTIVE</font>";}
		echo "</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>WaitForSilence Options: </td><td align=left><input type=text name=waitforsilence_options size=20 maxlength=25 value=\"$waitforsilence_options\">$NWB#vicidial_campaigns-waitforsilence_options$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>AMD envoyé au VM exten: </td><td align=left><select size=1 name=amd_send_to_vmx><option>Y</option><option>N</option><option SELECTED>$amd_send_to_vmx</option></select>$NWB#vicidial_campaigns-amd_send_to_vmx$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>CPD AMD Action: </td><td align=left><select size=1 name=cpd_amd_action><option>DISABLED</option><option>DISPO</option><option>MESSAGE</option><option SELECTED>$cpd_amd_action</option></select>$NWB#vicidial_campaigns-cpd_amd_action$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>DTMF Transfert-Conf 1: </td><td align=left><input type=text name=xferconf_a_dtmf size=20 maxlength=50 value=\"$xferconf_a_dtmf\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 1: </td><td align=left><input type=text name=xferconf_a_number size=20 maxlength=50 value=\"$xferconf_a_number\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>DTMF Transfert-Conf 2: </td><td align=left><input type=text name=xferconf_b_dtmf size=20 maxlength=50 value=\"$xferconf_b_dtmf\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 2: </td><td align=left><input type=text name=xferconf_b_number size=20 maxlength=50 value=\"$xferconf_b_number\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 3: </td><td align=left><input type=text name=xferconf_c_number size=20 maxlength=50 value=\"$xferconf_c_number\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 4: </td><td align=left><input type=text name=xferconf_d_number size=20 maxlength=50 value=\"$xferconf_d_number\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 5: </td><td align=left><input type=text name=xferconf_e_number size=20 maxlength=50 value=\"$xferconf_e_number\">$NWB#vicidial_campaigns-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer Presets de transfert: </td><td align=left><select size=1 name=enable_xfer_presets><option>DISABLED</option><option>ENABLED</option><option>CONTACTS</option><option SELECTED>$enable_xfer_presets</option></select>$NWB#vicidial_campaigns-enable_xfer_presets$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Masquer le numéro de transfert à composer: </td><td align=left><select size=1 name=hide_xfer_number_to_dial><option>DISABLED</option><option>ENABLED</option><option SELECTED>$hide_xfer_number_to_dial</option></select>$NWB#vicidial_campaigns-hide_xfer_number_to_dial$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Quick Transfer Button: </td><td align=left><select size=1 name=quick_transfer_button><option>N</option><option>IN_GROUP</option><option>PRESET_1</option><option>PRESET_2</option><option>PRESET_3</option><option>PRESET_4</option><option>PRESET_5</option><option SELECTED>$quick_transfer_button</option><option>LOCKED_IN_GROUP</option><option>LOCKED_PRESET_1</option><option>LOCKED_PRESET_2</option><option>LOCKED_PRESET_3</option><option>LOCKED_PRESET_4</option><option>LOCKED_PRESET_5</option></select>$NWB#vicidial_campaigns-quick_transfer_button$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Transfert personnalisé Bouton 3-voies: </td><td align=left><select size=1 name=custom_3way_button_transfer><option>DISABLED</option><option>PRESET_1</option><option>PRESET_2</option><option>PRESET_3</option><option>PRESET_4</option><option>PRESET_5</option><option>FIELD_address3</option><option>FIELD_province</option><option>FIELD_security_phrase</option><option>FIELD_vendor_lead_code</option><option>FIELD_email</option><option>FIELD_owner</option><option>PARK_PRESET_1</option><option>PARK_PRESET_2</option><option>PARK_PRESET_3</option><option>PARK_PRESET_4</option><option>PARK_PRESET_5</option><option>PARK_FIELD_address3</option><option>PARK_FIELD_province</option><option>PARK_FIELD_security_phrase</option><option>PARK_FIELD_vendor_lead_code</option><option>PARK_FIELD_email</option><option>PARK_FIELD_owner</option><option>VIEW_PRESET</option><option>VIEW_CONTACTS</option><option SELECTED>$custom_3way_button_transfer</option></select>$NWB#vicidial_campaigns-custom_3way_button_transfer$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Préremplir Transfert Preset: </td><td align=left><select size=1 name=prepopulate_transfer_preset><option>N</option><option>PRESET_1</option><option>PRESET_2</option><option>PRESET_3</option><option>PRESET_4</option><option>PRESET_5</option><option SELECTED>$prepopulate_transfer_preset</option></select>$NWB#vicidial_campaigns-prepopulate_transfer_preset$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Parc Appel IVR: </td><td align=left><select size=1 name=ivr_park_call><option>DISABLED</option><option>ENABLED</option><option>ENABLED_PARK_ONLY</option><option>ENABLED_BUTTON_HIDDEN</option><option SELECTED>$ivr_park_call</option></select>$NWB#vicidial_campaigns-ivr_park_call$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Parc Appel IVR AGI: </td><td align=left><input type=text name=ivr_park_call_agi size=80 maxlength=1000 value=\"$ivr_park_call_agi\">$NWB#vicidial_campaigns-ivr_park_call_agi$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Minuterie d-action: </td><td align=left><select size=1 name=timer_action><option selected>NONE</option><option>D1_DIAL</option><option>D2_DIAL</option><option>D3_DIAL</option><option>D4_DIAL</option><option>D5_DIAL</option><option>D1_DIAL_QUIET</option><option>D2_DIAL_QUIET</option><option>D3_DIAL_QUIET</option><option>D4_DIAL_QUIET</option><option>D5_DIAL_QUIET</option><option>MESSAGE_ONLY</option><option>WEBFORM</option>$eswHTML<option>HANGUP</option><option>CALLMENU</option><option>EXTENSION</option><option>IN_GROUP</option><option selected>$timer_action</option></select>$NWB#vicidial_campaigns-timer_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Minuterie d-action Message: </td><td align=left><input type=text name=timer_action_message size=50 maxlength=255 value=\"$timer_action_message\">$NWB#vicidial_campaigns-timer_action_message$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Minuterie d-action Seconds: </td><td align=left><input type=text name=timer_action_seconds size=10 maxlength=10 value=\"$timer_action_seconds\">$NWB#vicidial_campaigns-timer_action_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Destination action minuterie: </td><td align=left><input type=text name=timer_action_destination size=25 maxlength=30 value=\"$timer_action_destination\">$NWB#vicidial_campaigns-timer_action_destination$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Appel du numéro alternatif: </td><td align=left><select size=1 name=alt_number_dialing><option>Y</option><option>N</option><option SELECTED>$alt_number_dialing</option></select>$NWB#vicidial_campaigns-alt_number_dialing$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Rappels de service programmés: </td><td align=left><select size=1 name=scheduled_callbacks><option>Y</option><option>N</option><option SELECTED>$scheduled_callbacks</option></select>$NWB#vicidial_campaigns-scheduled_callbacks$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rappels réguliers d'alerte: </td><td align=left><select size=1 name=scheduled_callbacks_alert><option>NONE</option><option>BLINK</option><option>RED</option><option>BLINK_RED</option><option>BLINK_DEFER</option><option>RED_DEFER</option><option>BLINK_RED_DEFER</option><option SELECTED>$scheduled_callbacks_alert</option></select>$NWB#vicidial_campaigns-scheduled_callbacks_alert$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rappels réguliers comte: </td><td align=left><select size=1 name=scheduled_callbacks_count><option>LIVE</option><option>ALL_ACTIVE</option><option SELECTED>$scheduled_callbacks_count</option></select>$NWB#vicidial_campaigns-scheduled_callbacks_count$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Prévu rappels Jours Limite: </td><td align=left><input type=text name=callback_days_limit size=4 maxlength=3 value=\"$callback_days_limit\">$NWB#vicidial_campaigns-callback_days_limit$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Prévu rappels Heures Bloquer: </td><td align=left><input type=text name=callback_hours_block size=3 maxlength=2 value=\"$callback_hours_block\">$NWB#vicidial_campaigns-callback_hours_block$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rappels réguliers bloc Calltime: </td><td align=left><select size=1 name=callback_list_calltime><option>ENABLED</option><option>DISABLED</option><option SELECTED>$callback_list_calltime</option></select>$NWB#vicidial_campaigns-callback_list_calltime$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Mon défaut Checkbox rappels: </td><td align=left><select size=1 name=my_callback_option><option>CHECKED</option><option>UNCHECKED</option><option SELECTED>$my_callback_option</option></select>$NWB#vicidial_campaigns-my_callback_option$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>Temps avant abandon de l'appel: </td><td align=left><input type=text name=drop_call_seconds size=5 maxlength=2 value=\"$drop_call_seconds\">$NWB#vicidial_campaigns-drop_call_seconds$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Drop d'action:</td><td align=left><select size=1 name=drop_action><option>AUDIO</option><option>HANGUP</option><option>MESSAGE</option><option>VOICEMAIL</option><option>IN_GROUP</option><option>CALLMENU</option><option SELECTED>$drop_action</option></select>$NWB#vicidial_campaigns-drop_action$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Extension du port sûr: </td><td align=left><input type=text name=safe_harbor_exten size=10 maxlength=20 value=\"$safe_harbor_exten\">$NWB#vicidial_campaigns-safe_harbor_exten$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Safe Harbour Audio: </td><td align=left><input type=text name=safe_harbor_audio id=safe_harbor_audio size=40 maxlength=100 value=\"$safe_harbor_audio\"> <a href=\"javascript:launch_chooser('safe_harbor_audio','date',2200);\">audio chooser</a> $NWB#vicidial_campaigns-safe_harbor_audio$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Coffre-fort Menu Appel port: </td><td align=left><select size=1 name=safe_harbor_menu_id id=safe_harbor_menu_id>$call_menu_list<option SELECTED>$safe_harbor_menu_id</option></select>$NWB#vicidial_campaigns-safe_harbor_menu_id$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Boîte vocale: </td><td align=left><input type=text name=voicemail_ext id=voicemail_ext size=12 maxlength=10 value=\"$voicemail_ext\"> <a href=\"javascript:launch_vm_chooser('voicemail_ext','vm',3200);\">voicemail chooser</a>$NWB#vicidial_campaigns-voicemail_ext$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Drop de transfert du Groupe:</td><td align=left><select size=1 name=drop_inbound_group>";
			echo "$Dgroups_menu";
			echo "</select>$NWB#vicidial_campaigns-drop_inbound_group$NWE\n";
			$stmt="SELECT count(*) from vicidial_lists where campaign_id='$campaign_id' and drop_inbound_group_override != '' and active='Y' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			$rowx=mysql_fetch_row($rslt);
			if ($rowx[0] > 0) 
				{echo " <font color=red>LIST OVERRIDE ACTIVE</font>";}
			echo "</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Désactiver l'écran Dispo: </td><td align=left><select size=1 name=disable_dispo_screen><option>DISPO_ENABLED</option><option>DISPO_DISABLED</option><option>DISPO_SELECT_DISABLED</option><option SELECTED>$disable_dispo_screen</option></select>$NWB#vicidial_campaigns-disable_dispo_screen$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Désactiver Statut Dispo: </td><td align=left><input type=text name=disable_dispo_status size=7 maxlength=6 value=\"$disable_dispo_status\">$NWB#vicidial_campaigns-disable_dispo_status$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Temps de conclusion: </td><td align=left><input type=text name=wrapup_seconds size=5 maxlength=3 value=\"$wrapup_seconds\">$NWB#vicidial_campaigns-wrapup_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Message de conclusion: </td><td align=left><input type=text name=wrapup_message size=40 maxlength=255 value=\"$wrapup_message\">$NWB#vicidial_campaigns-wrapup_message$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Utiliser la liste DNC interne: </td><td align=left><select size=1 name=use_internal_dnc><option>Y</option><option>N</option><option>Indicatif régional</option><option SELECTED>$use_internal_dnc</option></select>$NWB#vicidial_campaigns-use_internal_dnc$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Utilisez la liste de campagne DNC: </td><td align=left><select size=1 name=use_campaign_dnc><option>Y</option><option>N</option><option>Indicatif régional</option><option SELECTED>$use_campaign_dnc</option></select>$NWB#vicidial_campaigns-use_campaign_dnc$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>AgentCodes De PauseActif: </td><td align=left><select size=1 name=agent_pause_codes_active><option>FORCE</option><option>Y</option><option>N</option><option SELECTED>$agent_pause_codes_active</option></select>$NWB#vicidial_campaigns-agent_pause_codes_active$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Pause pré-Appel de travail: </td><td align=left><select size=1 name=auto_pause_precall><option>Y</option><option>N</option><option SELECTED>$auto_pause_precall</option></select>$NWB#vicidial_campaigns-auto_pause_precall$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Reprendre pré-Appel de travail: </td><td align=left><select size=1 name=auto_resume_precall><option>Y</option><option>N</option><option SELECTED>$auto_resume_precall</option></select>$NWB#vicidial_campaigns-auto_resume_precall$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Pause pré-Appel de code: </td><td align=left><input type=text name=auto_pause_precall_code size=7 maxlength=6 value=\"$auto_pause_precall_code\">$NWB#vicidial_campaigns-auto_pause_precall_code$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Stats Refresh: </td><td align=left><select size=1 name=campaign_stats_rafraîchir><option>Y</option><option>N</option><option SELECTED>$campaign_stats_rafraîchir</option></select>$NWB#vicidial_campaigns-campaign_stats_rafraîchir$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Real-Time Temps Stats Agent: </td><td align=left><select size=1 name=realtime_agent_time_stats><option>DISABLED</option><option>WAIT_CUST_ACW</option><option>WAIT_CUST_ACW_PAUSE</option><option>CALLS_WAIT_CUST_ACW_PAUSE</option><option SELECTED>$realtime_agent_time_stats</option></select>$NWB#vicidial_campaigns-realtime_agent_time_stats$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Désactiver la modification des données d'un client</td><td align=left><select size=1 name=disable_alter_custdata><option>Y</option><option>N</option><option SELECTED>$disable_alter_custdata</option></select>$NWB#vicidial_campaigns-disable_alter_custdata$NWE</td></tr>\n";
		echo "<tr bgcolor=#8EBCFD><td align=right>Désactiver Alter clientèle Téléphone:</td><td align=left><select size=1 name=disable_alter_custphone><option>Y</option><option>N</option><option>CACHER</option><option SELECTED>$disable_alter_custphone</option></select>$NWB#vicidial_campaigns-disable_alter_custphone$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Autoriser la connection dans les distributeurs vides: </td><td align=left><select size=1 name=no_hopper_leads_logins><option>Y</option><option>N</option><option SELECTED>$no_hopper_leads_logins</option></select>$NWB#vicidial_campaigns-no_hopper_leads_logins$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>N Hopper Dialing: </td><td align=left><select size=1 name=no_hopper_dialing><option>Y</option><option>N</option><option SELECTED>$no_hopper_dialing</option></select>$NWB#vicidial_campaigns-no_hopper_dialing$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Propriétaire composer seulement: </td><td align=left><select size=1 name=agent_dial_owner_only><option>NONE</option><option>USER</option><option>TERRITORY</option><option>USER_GROUP</option><option SELECTED>$agent_dial_owner_only</option></select>$NWB#vicidial_campaigns-agent_dial_owner_only$NWE</td></tr>\n";

			if ($SSuser_territories_active > 0)
				{
				echo "<tr bgcolor=#B6D3FC><td align=right>Agent de sélectionner des territoires: </td><td align=left><select size=1 name=agent_select_territories><option>Y</option><option>N</option><option SELECTED>$agent_select_territories</option></select>$NWB#vicidial_campaigns-agent_select_territories$NWE</td></tr>\n";
				}
			echo "<tr bgcolor=#8EBCFD><td align=right>Agent d-affichage composable Leads: </td><td align=left><select size=1 name=agent_display_dialable_leads><option>Y</option><option>N</option><option SELECTED>$agent_display_dialable_leads</option></select>$NWB#vicidial_campaigns-agent_display_dialable_leads$NWE</td></tr>\n";
			}
		if ( ($screen_labels=='--SYSTEM-SETTINGS--') or (strlen($screen_labels)<2) ) {$ASLlink = "$PHP_SELF?ADD=311111111111111";}
		else {$ASLlink = "$PHP_SELF?ADD=381111111111&label_id=$screen_labels";}
		echo "<tr bgcolor=#8EBCFD><td align=right><a href=\"$ASLlink\">Les étiquettes de l'écran de l'agent</a>: </td><td align=left><select size=1 name=screen_labels>$labels_menu<option value=\"--SYSTEM-SETTINGS--\">--SYSTEM-SETTINGS-- - Default</option><option SELECTED>$screen_labels</option></select>$NWB#vicidial_campaigns-screen_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Les champs d'affichage d'état: </td><td align=left><select size=1 name=status_display_fields><option>CALLID</option><option>CALLID_LEADID</option><option>CALLID_LEADID_LISTID</option><option>---NONE---</option><option SELECTED>$status_display_fields</option></select>$NWB#vicidial_campaigns-status_display_fields$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Agent Chef de file d'attente d'affichage:</td><td align=left><select size=1 name=display_queue_count><option>Y</option><option>N</option><option SELECTED>$display_queue_count</option></select>$NWB#vicidial_campaigns-display_queue_count$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Agent Voir appels en attente: </td><td align=left><select size=1 name=view_calls_in_queue><option>NONE</option><option>ALL</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option SELECTED>$view_calls_in_queue</option></select>$NWB#vicidial_campaigns-view_calls_in_queue$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Voir les appels en attente de lancement: </td><td align=left><select size=1 name=view_calls_in_queue_launch><option>AUTO</option><option>MANUAL</option><option SELECTED>$view_calls_in_queue_launch</option></select>$NWB#vicidial_campaigns-view_calls_in_queue_launch$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Agent Grab appels en attente: </td><td align=left><select size=1 name=grab_calls_in_queue><option>Y</option><option>N</option><option SELECTED>$grab_calls_in_queue</option></select>$NWB#vicidial_campaigns-grab_calls_in_queue$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agent d-appel Re-Queue Button: </td><td align=left><select size=1 name=call_requeue_button><option>Y</option><option>N</option><option SELECTED>$call_requeue_button</option></select>$NWB#vicidial_campaigns-call_requeue_button$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agent Pause après chaque appel: </td><td align=left><select size=1 name=pause_after_each_call><option>Y</option><option>N</option><option SELECTED>$pause_after_each_call</option></select>$NWB#vicidial_campaigns-pause_after_each_call$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Composition manuelle Override: </td><td align=left><select size=1 name=manual_dial_override><option>NONE</option><option>ALLOW_ALL</option><option>DISABLE_ALL</option><option SELECTED>$manual_dial_override</option></select>$NWB#vicidial_campaigns-manual_dial_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Identification Manuelle De Liste De Cadran :</td><td align=left><input type=text name=manual_dial_list_id size=15 maxlength=12 value=\"$manual_dial_list_id\">$NWB#vicidial_campaigns-manual_dial_list_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Manuelle Filter:</td><td align=left><select size=1 name=manual_dial_filter><option>NONE</option><option>DNC_ONLY</option><option>CAMPLISTS_ONLY</option><option>CAMPLISTS_ALL</option><option>DNC_AND_CAMPLISTS</option><option>DNC_AND_CAMPLISTS_ALL</option><option SELECTED>$manual_dial_filter</option></select>$NWB#vicidial_campaigns-manual_dial_filter$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Dial Aperçu Manuel: </td><td align=left><select size=1 name=manual_preview_dial><option>DISABLED</option><option>PREVIEW_AND_SKIP</option><option>PREVIEW_ONLY</option><option SELECTED>$manual_preview_dial</option></select>$NWB#vicidial_campaigns-manual_preview_dial$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Durée de l'appel Vérification manuelle: </td><td align=left><select size=1 name=manual_dial_call_time_check><option>DISABLED</option><option>ENABLED</option><option SELECTED>$manual_dial_call_time_check</option></select>$NWB#vicidial_campaigns-manual_dial_call_time_check$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Composition manuelle API: </td><td align=left><select size=1 name=api_manual_dial><option>STANDARD</option><option>QUEUE</option><option>QUEUE_AND_AUTOCALL</option><option SELECTED>$api_manual_dial</option></select>$NWB#vicidial_campaigns-api_manual_dial$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Composition manuelle CID: </td><td align=left><select size=1 name=manual_dial_cid><option>CAMPAIGN</option><option>AGENT_PHONE</option><option SELECTED>$manual_dial_cid</option></select>$NWB#vicidial_campaigns-manual_dial_cid$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Message Téléphone Décalage horaire alerte: </td><td align=left><select size=1 name=post_phone_time_diff_alert><option>ENABLED</option><option>OUTSIDE_CALLTIME_ONLY</option><option>OUTSIDE_CALLTIME_PHONE</option><option>OUTSIDE_CALLTIME_POSTAL</option><option>OUTSIDE_CALLTIME_BOTH</option><option>DISABLED</option><option SELECTED>$post_phone_time_diff_alert</option></select>$NWB#vicidial_campaigns-post_phone_time_diff_alert$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agent de copie d'écran du Presse-papiers: </td><td align=left><select size=1 name=agent_clipboard_copy><option>NONE</option><option>lead_id</option><option>list_id</option><option>title</option><option>first_name</option><option>middle_initial</option><option>last_name</option><option>phone_code</option><option>phone_number</option><option>address1</option><option>address2</option><option>address3</option><option>city</option><option>state</option><option>province</option><option>postal_code</option><option>country_code</option><option>alt_phone</option><option>comments</option><option>date_of_birth</option><option>email</option><option>gender</option><option>gmt_offset_now</option><option>security_phrase</option><option>vendor_lead_code</option><option SELECTED>$agent_clipboard_copy</option></select>$NWB#vicidial_campaigns-agent_clipboard_copy$NWE</td></tr>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Screen Extended Alt Dial: </td><td align=left><select size=1 name=agent_extended_alt_dial><option>Y</option><option>N</option><option SELECTED>$agent_extended_alt_dial</option></select>$NWB#vicidial_campaigns-agent_extended_alt_dial$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#8EBCFD><td align=right>3-Way Outbound Call CallerID: </td><td align=left><select size=1 name=three_way_call_cid><option>CAMPAIGN</option><option>CUSTOMER</option><option>AGENT_PHONE</option><option>AGENT_CHOOSE</option><option>CUSTOM_CID</option><option SELECTED>$three_way_call_cid</option></select>$NWB#vicidial_campaigns-three_way_call_cid$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>3-Way Call Préfixe de numérotation: </td><td align=left><input type=text name=three_way_dial_prefix size=15 maxlength=20 value=\"$three_way_dial_prefix\">$NWB#vicidial_campaigns-three_way_dial_prefix$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Logging Raccrocher à la clientèle 3-voies: </td><td align=left><select size=1 name=customer_3way_hangup_logging><option>DISABLED</option><option>ENABLED</option><option SELECTED>$customer_3way_hangup_logging</option></select>$NWB#vicidial_campaigns-customer_3way_hangup_logging$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Secondes hangup clientèle 3-voies: </td><td align=left><input type=text name=customer_3way_hangup_seconds size=5 maxlength=5 value=\"$customer_3way_hangup_seconds\">$NWB#vicidial_campaigns-customer_3way_hangup_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Raccrocher à la clientèle d'action 3-voies: </td><td align=left><select size=1 name=customer_3way_hangup_action><option>NONE</option><option>DISPO</option><option SELECTED>$customer_3way_hangup_action</option></select>$NWB#vicidial_campaigns-customer_3way_hangup_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe Alias permis: </td><td align=left><select size=1 name=agent_allow_group_alias><option>Y</option><option>N</option><option SELECTED>$agent_allow_group_alias</option></select>$NWB#vicidial_campaigns-agent_allow_group_alias$NWE</td></tr>\n";

		if ($agent_allow_group_alias == 'Y')
			{
			##### get groups_alias listings for dynamic default group alias pulldown list menu
			$stmt="SELECT group_alias_id,group_alias_name from groups_alias where active='Y' $LOGadmin_viewable_groupsSQL order by group_alias_id;";
			$rslt=mysql_query($stmt, $link);
			$group_alias_to_print = mysql_num_rows($rslt);
			$group_alias_menu='';
			$group_alias_selected=0;
			$o=0;
			while ($group_alias_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$group_alias_menu .= "<option ";
				if ($default_group_alias == "$rowx[0]") 
					{
					$group_alias_menu .= "SELECTED ";
					$group_alias_selected++;
					}
				$group_alias_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$o++;
				}

			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe par défaut Alias: </td><td align=left><select size=1 name=default_group_alias>";
			echo "<option value=\"\">NONE</option>";
			echo "$group_alias_menu";
			echo "</select>$NWB#vicidial_campaigns-default_group_alias$NWE</td></tr>\n";
			}

		if ($SSenable_vtiger_integration > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger Recherche Catégorie: </td><td align=left><select size=1 name=vtiger_search_category><option>LEAD</option><option>ACCOUNT</option><option>VENDOR</option><option>LEAD_ACCOUNT</option><option>LEAD_ACCOUNT_VENDOR</option><option>ACCTID</option><option>ACCTID_ACCOUNT</option><option>ACCTID_ACCOUNT_LEAD_VENDOR</option><option>UNIFIED_CONTACT</option><option SELECTED>$vtiger_search_category</option></select>$NWB#vicidial_campaigns-vtiger_search_category$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger Recherche Dead Comptes: </td><td align=left><select size=1 name=vtiger_search_dead><option>DISABLED</option><option>ASK</option><option>RESURRECT</option><option SELECTED>$vtiger_search_dead</option></select>$NWB#vicidial_campaigns-vtiger_search_dead$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger Créer Enregistrement d'appel: </td><td align=left><select size=1 name=vtiger_create_call_record><option>Y</option><option>N</option><option>DISPO</option><option SELECTED>$vtiger_create_call_record</option></select>$NWB#vicidial_campaigns-vtiger_create_call_record$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger Créer Lead Enregistrement: </td><td align=left><select size=1 name=vtiger_create_lead_record><option>Y</option><option>N</option><option SELECTED>$vtiger_create_lead_record</option></select>$NWB#vicidial_campaigns-vtiger_create_lead_record$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger état des appels: </td><td align=left><select size=1 name=vtiger_status_call><option>Y</option><option>N</option><option SELECTED>$vtiger_status_call</option></select>$NWB#vicidial_campaigns-vtiger_status_call$NWE</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Vtiger Screen Login: </td><td align=left><select size=1 name=vtiger_screen_login><option>Y</option><option>N</option><option>NEW_WINDOW</option><option SELECTED>$vtiger_screen_login</option></select>$NWB#vicidial_campaigns-vtiger_screen_login$NWE</td></tr>\n";
			}
		else
			{
			echo "<input type=hidden name=vtiger_search_category value=\"$vtiger_search_category\">\n";
			echo "<input type=hidden name=vtiger_create_call_record value=\"$vtiger_create_call_record\">\n";
			echo "<input type=hidden name=vtiger_create_lead_record value=\"$vtiger_create_lead_record\">\n";
			echo "<input type=hidden name=vtiger_screen_login value=\"$vtiger_screen_login\">\n";
			echo "<input type=hidden name=vtiger_search_dead value=\"$vtiger_search_dead\">\n";
			echo "<input type=hidden name=vtiger_status_call value=\"$vtiger_status_call\">\n";
			}

		if ($SSenable_queuemetrics_logging > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>QM CallStatus Override: </td><td align=left><select size=1 name=queuemetrics_callstatus><option>DISABLED</option><option>NO</option><option>YES</option><option SELECTED>$queuemetrics_callstatus</option></select>$NWB#vicidial_campaigns-queuemetrics_callstatus$NWE</td></tr>\n";
			echo "<tr bgcolor=#8EBCFD><td align=right>Environnement Téléphone QM: </td><td align=left><input type=text name=queuemetrics_phone_environment size=20 maxlength=20 value=\"$queuemetrics_phone_environment\">$NWB#vicidial_campaigns-queuemetrics_phone_environment$NWE</td></tr>\n";
			}
		else
			{
			echo "<input type=hidden name=queuemetrics_callstatus value=\"$queuemetrics_callstatus\">\n";
			echo "<input type=hidden name=queuemetrics_phone_environment value=\"$queuemetrics_phone_environment\">\n";
			}

		if ( ($agent_servers_count > 1) and ($phones_alias_count > 0) )
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupement PLLB: </td><td align=left><select size=1 name=pllb_grouping><option>DISABLED</option><option>ONE_SERVER_ONLY</option><option>CASCADING</option><option SELECTED>$pllb_grouping</option></select>$NWB#vicidial_campaigns-pllb_grouping$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Limite Groupement PLLB: </td><td align=left><input type=text name=pllb_grouping_limit size=4 maxlength=3 value=\"$pllb_grouping_limit\">$NWB#vicidial_campaigns-pllb_grouping_limit$NWE</td></tr>\n";
			}
		else
			{
			echo "<input type=hidden name=pllb_grouping value=\"$pllb_grouping\">\n";
			echo "<input type=hidden name=pllb_grouping_limit value=\"$pllb_grouping_limit\">\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>CRM Popup Login: </td><td align=left><select size=1 name=crm_popup_login><option>Y</option><option>N</option><option SELECTED>$crm_popup_login</option></select>$NWB#vicidial_campaigns-crm_popup_login$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>CRM Popup Adresse: </td><td align=left><input type=text name=crm_login_address size=70 maxlength=2000 value=\"$crm_login_address\">$NWB#vicidial_campaigns-crm_login_address$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Début de l-appel Web: </td><td align=left><input type=text name=start_call_url size=70 maxlength=2000 value=\"$start_call_url\">$NWB#vicidial_campaigns-start_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Dispo Call Web: </td><td align=left><input type=text name=dispo_call_url size=70 maxlength=2000 value=\"$dispo_call_url\">$NWB#vicidial_campaigns-dispo_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Aucune URL Appel Agent: </td><td align=left><input type=text name=na_call_url size=70 maxlength=2000 value=\"$na_call_url\">$NWB#vicidial_campaigns-na_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Extension Ajoutez CID: </td><td align=left><select size=1 name=extension_appended_cidname><option>Y</option><option>N</option><option SELECTED>$extension_appended_cidname</option></select>$NWB#vicidial_campaigns-extension_appended_cidname$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Attention Moniteur aveugles: </td><td align=left><select size=1 name=blind_monitor_warning><option>DISABLED</option><option>ALERT</option><option>NOTICE</option><option>AUDIO</option><option>ALERT_NOTICE</option><option>ALERT_AUDIO</option><option>NOTICE_AUDIO</option><option>ALL</option><option SELECTED>$blind_monitor_warning</option></select>$NWB#vicidial_campaigns-blind_monitor_warning$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Avis aveugles Moniteur: </td><td align=left><input type=text name=blind_monitor_message size=70 maxlength=255 value=\"$blind_monitor_message\">$NWB#vicidial_campaigns-blind_monitor_message$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Nom du moniteur aveugles: </td><td align=left><input type=text name=blind_monitor_filename id=blind_monitor_filename size=40 maxlength=100 value=\"$blind_monitor_filename\"> <a href=\"javascript:launch_chooser('blind_monitor_filename','date',3200);\">audio chooser</a> $NWB#vicidial_campaigns-blind_monitor_filename$NWE</td></tr>\n";

		if ($campaign_allow_inbound == 'Y')
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupes entrants autorisés: <BR>";
			echo " $NWB#vicidial_campaigns-closer_campaigns$NWE</td><td align=left>\n";
			echo "$groups_list";
			echo "</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe De Transfert De Défaut :</td><td align=left><select size=1 name=default_xfer_group>";
		echo "$Xgroups_menu";
		echo "</select>$NWB#vicidial_campaigns-default_xfer_group$NWE</td></tr>\n";

		if ($allow_closers == 'Y')
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupes Laissés De Transfert :<BR>";
			echo " $NWB#vicidial_campaigns-xfer_groups$NWE</td><td align=left>\n";
			echo "$XFERgroups_list";
			echo "</td></tr>\n";
			}

		echo "<input type=hidden name=form_end value=\"END\">\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center></FORM>\n";

		echo "<center>\n";

		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=41>\n";
		echo "<input type=hidden name=DB value=$DB>\n";
		echo "<input type=hidden name=stage value=list_activation>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";

		if ($SSoutbound_autodial_active > 0)
			{
			echo "<br><b>LISTES DANS CETTE CAMPAGNE: &nbsp; $NWB#vicidial_campaign_lists$NWE</b>\n";

			echo "<TABLE><TR><TD>\n";
				echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			$LISTlink='stage=LISTIDDOWN';
			$NAMElink='stage=LISTNAMEDOWN';
			$TALLYlink='stage=TALLYDOWN';
			$ACTIVElink='stage=ACTIVEDOWN';
			$CAMPAIGNlink='stage=CAMPAIGNDOWN';
			$CALLDATElink='stage=CALLDATEDOWN';
			$SQLorder='order by list_id';
			if (eregi("LISTIDUP",$stage))		{$SQLorder='order by list_id asc';				$LISTlink='stage=LISTIDDOWN';}
			if (eregi("LISTIDDOWN",$stage))		{$SQLorder='order by list_id desc';				$LISTlink='stage=LISTIDUP';}
			if (eregi("LISTNAMEUP",$stage))		{$SQLorder='order by list_name asc';			$NAMElink='stage=LISTNAMEDOWN';}
			if (eregi("LISTNAMEDOWN",$stage))	{$SQLorder='order by list_name desc';			$NAMElink='stage=LISTNAMEUP';}
			if (eregi("TALLYUP",$stage))		{$SQLorder='order by tally asc';				$TALLYlink='stage=TALLYDOWN';}
			if (eregi("TALLYDOWN",$stage))		{$SQLorder='order by tally desc';				$TALLYlink='stage=TALLYUP';}
			if (eregi("ACTIVEUP",$stage))		{$SQLorder='order by active asc';				$ACTIVElink='stage=ACTIVEDOWN';}
			if (eregi("ACTIVEDOWN",$stage))		{$SQLorder='order by active desc';				$ACTIVElink='stage=ACTIVEUP';}
			if (eregi("CAMPAIGNUP",$stage))		{$SQLorder='order by campaign_id asc';			$CAMPAIGNlink='stage=CAMPAIGNDOWN';}
			if (eregi("CAMPAIGNDOWN",$stage))	{$SQLorder='order by campaign_id desc';			$CAMPAIGNlink='stage=CAMPAIGNUP';}
			if (eregi("CALLDATEUP",$stage))		{$SQLorder='order by list_lastcalldate asc';	$CALLDATElink='stage=CALLDATEDOWN';}
			if (eregi("CALLDATEDOWN",$stage))	{$SQLorder='order by list_lastcalldate desc';	$CALLDATElink='stage=CALLDATEUP';}
			$stmt="SELECT vls.list_id,list_name,list_description,count(*) as tally,active,list_lastcalldate,campaign_id from vicidial_lists vls,vicidial_list vl where vls.list_id=vl.list_id and campaign_id='$campaign_id' $LOGallowed_campaignsSQL group by list_id $SQLorder";
			$rslt=mysql_query($stmt, $link);
			$lists_to_print = mysql_num_rows($rslt);

			echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
			echo "<TR BGCOLOR=BLACK>";
			echo "<TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$LISTlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID DE LA LISTE</B></a></TD>";
			echo "<TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$NAMElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>NOM DE LA LISTE</B></a></TD>";
			echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</B></TD>\n";
			echo "<TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$TALLYlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ABOUTIT COUNT</B></a></TD>\n";
			echo "<TD COLSPAN=2><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$ACTIVElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ACTIF</B></a></TD>";
			echo "<TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$CALLDATElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>LAST CALL DATE</B></a></TD>";
			echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>MODIFIER</TD>\n";
			echo "</TR>\n";

			$o=0;
			while ($lists_to_print > $o)
				{
				$row=mysql_fetch_row($rslt);
				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}
				echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">$row[0]</a></td>";
				echo "<td><font size=1> $row[1]</td>";
				echo "<td><font size=1> $row[2]</td>";
				echo "<td><font size=1> $row[3]</td>";
				echo "<td><font size=1> $row[4]</td>";
				echo "<td>";

				if (ereg('Y',$row[4]))
					{
					$active_lists++;
					$camp_lists .= "'$row[0]',";
					echo "<input type=\"checkbox\" name=\"list_active_change[]\" value=\"$row[0]\" CHECKED>";
					}
				else
					{
					$inactive_lists++;
					echo "<input type=\"checkbox\" name=\"list_active_change[]\" value=\"$row[0]\"";
					}

				echo "</td>";
				echo "<td><font size=1> $row[5]</td>";
				echo "<td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">MODIFIER</a></td></tr>\n";

				$o++;
				}

			echo "<TR><TD COLSPAN=7 ALIGN=CENTER><input type=submit value=\"VALIDER ACTIVE LISTE DES CHANGEMENTS\"></TD></TR>\n";
			echo "</TABLE></center><BR></FORM>\n";

			$filterSQL = $filtersql_list[$lead_filter_id];
			$filterSQL = preg_replace("/\\\\/","",$filterSQL);
			$filterSQL = eregi_replace("^and|and$|^or|or$","",$filterSQL);
			if (strlen($filterSQL)>4)
				{$fSQL = "and $filterSQL";}
			else
				{$fSQL = '';}

			$camp_lists = eregi_replace(".$","",$camp_lists);
			echo "<center><B>Cette campagne a $active_lists listes actives et $inactive_lists listes inactives</B><br><br>\n";

			$dial_statuses_original = $dial_statuses;

			if ( ($display_leads_count == 'Y') and (strlen($camp_lists) > 3) )
				{
				# grab names of global statuses and statuses in the selected campaign
				$stmt="SELECT status,status_name,completed from vicidial_statuses order by status;";
				$rslt=mysql_query($stmt, $link);
				$statuses_to_print = mysql_num_rows($rslt);

				$o=0;
				while ($statuses_to_print > $o) 
					{
					$rowx=mysql_fetch_row($rslt);
					$statuses_name_list["$rowx[0]"] = "$rowx[1]";
					$statuses_complete_list["$rowx[0]"] = "$rowx[2]";
					$o++;
					}

				$stmt="SELECT status,status_name,completed from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
				$rslt=mysql_query($stmt, $link);
				$Cstatuses_to_print = mysql_num_rows($rslt);

				$o=0;
				while ($Cstatuses_to_print > $o) 
					{
					$rowx=mysql_fetch_row($rslt);
					$statuses_name_list["$rowx[0]"] = "$rowx[1]";
					$statuses_complete_list["$rowx[0]"] = "$rowx[2]";
					$o++;
					}
				# end grab status names

				echo "<br><b>STATUTS dans les listes ACTIFS POUR CETTE CAMPAGNE:</b>\n";
				echo " - <font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&stage=hide_leadscount\">CACHER</a></font><BR>";

				if ($SSexpanded_list_stats > 0)
					{
					echo "<TABLE width=700 cellspacing=3>\n";
					$dialable_total=0;
					$complete_total=0;
					$fSQL = '';

					$stmt="SELECT lead_filter_sql from vicidial_lead_filters where lead_filter_id='$lead_filter_id' $LOGadmin_viewable_groupsSQL;";
					$rslt=mysql_query($stmt, $link);
					$filters_to_print = mysql_num_rows($rslt);
					if ($filters_to_print > 0) 
						{
						$rowx=mysql_fetch_row($rslt);
						$filterSQL = $rowx[0];
						$filterSQL = preg_replace("/\\\\/","",$filterSQL);
						$filterSQL = eregi_replace("^and|and$|^or|or$","",$filterSQL);
						if (strlen($filterSQL)>4)
							{$fSQL = "and $filterSQL";}
						else
							{$fSQL = '';}
						}
					echo "<tr><td>ETAT</td><td>NOM DU STATUT</td><td>APPELE</td><td>NON APPELE</td><td>DIALABLE</td><td>PENETRATION</td></tr>\n";
					}
				else
					{
					echo "<TABLE width=500 cellspacing=3>\n";
					echo "<tr><td>ETAT</td><td>NOM DU STATUT</td><td>APPELE</td><td>NON APPELE</td></tr>\n";
					}

				$leads_in_list = 0;
				$leads_in_list_N = 0;
				$leads_in_list_Y = 0;
				$stmt="SELECT status,called_since_last_reset,count(*) from vicidial_list where list_id IN($camp_lists) group by status,called_since_last_reset order by status,called_since_last_reset;";
				if ($DB) {echo "$stmt\n";}
				$rslt=mysql_query($stmt, $link);
				$statuses_to_print = mysql_num_rows($rslt);

				$o=0;
				$lead_list['count'] = 0;
				$lead_list['Y_count'] = 0;
				$lead_list['N_count'] = 0;
				while ($statuses_to_print > $o) 
					{
					$rowx=mysql_fetch_row($rslt);
					
					$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
					if ($rowx[1] == 'N') 
						{
						$since_reset = 'N';
						$since_resetX = 'Y';
						}
					else 
						{
						$since_reset = 'Y';
						$since_resetX = 'N';
						} 
					$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
					$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
					#If opposite side is not set, it may not in the future so give it a value of zero
					if (!isset($lead_list[$since_resetX][$rowx[0]])) 
						{
						$lead_list[$since_resetX][$rowx[0]]=0;
						}
					$o++;
					}
			 
				$o=0;
				if ($lead_list['count'] > 0)
					{
					while (list($dispo,) = each($lead_list[$since_reset]))
						{
						if (eregi("1$|3$|5$|7$|9$", $o))
							{$bgcolor='bgcolor="#B9CBFD"';} 
						else
							{$bgcolor='bgcolor="#9BB9FB"';}

						if ($dispo == 'CBHOLD')
							{
							$CLB="<a href=\"$PHP_SELF?ADD=811&list_id=$list_id\">";
							$CLE="</a>";
							}
						else
							{
							$CLB='';
							$CLE='';
							}
						if ($SSexpanded_list_stats > 0)
							{
							### call function to calculate dialable leads
							$single_status=1;
							$dial_statuses=" $dispo -";
							if ($statuses_complete_list[$dispo] == 'Y')
								{$Xdialable_count=0;}
							else
								{$Xdialable_count = dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL);}
							$dialable_total = ($dialable_total + $Xdialable_count);

							### get number of complete calls of this status for penetration calculations
							$Xcomplete_count = complete_leads($DB,$link,$dial_statuses,$camp_lists,$call_count_limit,$single_status,$campaign_id);
							$complete_total = ($complete_total + $Xcomplete_count);
							$dispo_total = ($lead_list['Y'][$dispo] + $lead_list['N'][$dispo]);
							if ( ($Xcomplete_count < 1) or ($dispo_total < 1) )
								{$complete_pct = "0";}
							else
								{
								$complete_pct = intval(($Xcomplete_count / $dispo_total) * 100);
								}

							echo "<tr $bgcolor><td><font size=1>$CLB$dispo$CLE</td><td><font size=1>$statuses_name_list[$dispo]</td><td><font size=1>".$lead_list['Y'][$dispo]."</td><td><font size=1>".$lead_list['N'][$dispo]." </td><td><font size=1>$Xdialable_count </td><td align=right><font size=1>$complete_pct% &nbsp; </td></tr>\n";
							}
						else
							{
							echo "<tr $bgcolor><td><font size=1>$CLB$dispo$CLE</td><td><font size=1>$statuses_name_list[$dispo]</td><td><font size=1>".$lead_list['Y'][$dispo]."</td><td><font size=1>".$lead_list['N'][$dispo]." </td></tr>\n";
							}
						$o++;
						}
					}

				if ($SSexpanded_list_stats > 0)
					{
					if ( ($complete_total < 1) or ($lead_list[count] < 1) )
						{$total_complete_pct = "0";}
					else
						{$total_complete_pct = intval(($complete_total / $lead_list[count]) * 100);}
					echo "<tr><td colspan=2><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td><td><font size=1> &nbsp; </td><td><font size=1> &nbsp; </td></tr>\n";
					echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td><td><font size=1>$dialable_total</td><td align=right><font size=1> $total_complete_pct% &nbsp; </td></tr>\n";
					}
				else
					{
					echo "<tr><td colspan=2><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
					echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";
					}

				echo "</table></center><br>\n";
				unset($lead_list);
				}
			else
				{
				echo "<font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&stage=show_leadscount\">MONTRER STATUTS DE PLOMB DANS CETTE CAMPAGNE</a></font><BR><BR>";
				}



			echo "<center><b>\n";

			if ($display_dialable_count == 'Y')
				{
				### call function to calculate and print dialable leads
				$single_status=0;
				$dial_statuses = $dial_statuses_original;
				dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL);
				echo " - <font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&stage=hide_dialable\">CACHER</a></font><BR><BR>";
				}
			else
				{
				echo "<a href=\"$PHP_SELF?ADD=73&campaign_id=$campaign_id\" target=\"_blank\">Popup Dialable Leads Count</a>";
				echo " - <font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&stage=show_dialable\">MONTRER</a></font><BR><BR>";
				}

			$stmt="SELECT count(*) FROM vicidial_hopper where campaign_id='$campaign_id' $LOGallowed_campaignsSQL and status IN('READY');";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$rowx=mysql_fetch_row($rslt);
			$hopper_leads = "$rowx[0]";

			echo "Cette campagne a $hopper_leads fiches dans le distributeur de fiches<br><br>\n";
			echo "<a href=\"./AST_VICIDIAL_hopperlist.php?group=$campaign_id\">Cliquez ici pour voir quelles fiches sont dans le distributeur à l'instant</a><br><br>\n";
			echo "<a href=\"./AST_VDADstats.php?group=$campaign_id\">Cliquez ici pour voir une VDAD rapport de cette campagne</a><BR><BR>\n";
			}
		echo "<a href=\"$PHP_SELF?ADD=81&campaign_id=$campaign_id\">Cliquez ici pour voir les rappels réservés de cette campagne</a><BR><BR>\n";

		if ($SSoutbound_autodial_active > 0)
			{
			if ( ($SStest_campaign_calls > 0) and ($campaign_active == 'Y') )
				{
				echo "<form action=$PHP_SELF method=POST>\n";
				echo "<input type=hidden name=ADD value=41>\n";
				echo "<input type=hidden name=DB value=$DB>\n";
				echo "<input type=hidden name=stage value=test_call>\n";
				echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
				echo "<input type=hidden name=manual_dial_list_id value=\"$manual_dial_list_id\">\n";
				echo "<input type=hidden name=dial_timeout value=\"$dial_timeout\">\n";
				echo "<input type=hidden name=dial_prefix value=\"$dial_prefix\">\n";
				echo "<input type=hidden name=campaign_cid value=\"$campaign_cid\">\n";
				echo "<input type=hidden name=campaign_vdad_exten value=\"$campaign_vdad_exten\">\n";
				echo "<input type=hidden name=omit_phone_code value=\"$omit_phone_code\">\n";
				echo "Testez des appels sortants: ";
				echo "code: <input type=text name=phone_code id=phone_code size=4 maxlength=10 value=\"\"> &nbsp; ";
				echo "number: <input type=text name=phone_number id=phone_number size=14 maxlength=20 value=\"\"> &nbsp; ";
				echo "<input type=submit value=\"APPEL DE TEST LIEU\"> &nbsp; $NWB#settings-test_campaign_calls$NWE</form><br><br>\n";
				}
			else
				{
				echo "Test de l'appel désactivé<br><br>\n";
				}
			}

		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CAMPAIGNS&stage=$campaign_id\">Cliquez ici pour voir les changements d'administration à cette campagne</a></FONT>\n";
			}
		echo "</b></center>\n";
		}


	##### CAMPAIGN CUSTOM STATUSES #####
	if ($SUB==22)
		{

	##### get status category listings for dynamic pulldown
	$stmt="SELECT vsc_id,vsc_name from vicidial_status_categories order by vsc_id desc;";
	$rslt=mysql_query($stmt, $link);
	$cats_to_print = mysql_num_rows($rslt);
	$cats_list="";

	$o=0;
	while ($cats_to_print > $o)
		{
		$rowx=mysql_fetch_row($rslt);
		$cats_list .= "<option value=\"$rowx[0]\">$rowx[0] - " . substr($rowx[1],0,20) . "</option>\n";
		$catsname_list["$rowx[0]"] = substr($rowx[1],0,20);
		$o++;
		}


		echo "<center>\n";
		echo "<br><b>STATUTS PERSONNALISES DANS CETTE CAMPAGNE: &nbsp; $NWB#vicidial_campaign_statuses$NWE</b><br>\n";

		echo "<TABLE width=700 cellspacing=3>\n";
		echo "<tr><td align=center valign=bottom><font size=2><b>S<br>T<br>A<br>T<br>U<br>S</td>\n";
		echo "<td align=center valign=bottom><font size=2><b>DESCRIPTION</td>\n";
		echo "<td align=center valign=bottom><font size=2><b>CATÉGORIE</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b><br>A<br>G<br>E<br>N<br>T<br>&nbsp;<BR>S<br>E<br>L<br>E<br>C<br>T<br>A<br>B<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>H<br>U<br>M<br>A<br>N<br>&nbsp;<BR>A<br>N<br>S<br>W<br>E<br>R</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>S<br>A<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>D<br>N<br>C</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>C<br>U<br>S<br>T<br>O<br>M<br>E<br>R<br>&nbsp;<br>C<br>O<br>N<br>T<br>A<br>C<br>T</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>N<br>O<br>T<br>&nbsp;<br>I<br>N<br>T<br>E<br>R<br>E<br>S<br>T<br>E<br>D</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>U<br>N<br>W<br>O<br>R<br>K<br>A<br>B<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>S<br>C<br>H<br>E<br>D<br>U<br>L<br>E<br>D<br>&nbsp;<br>C<br>A<br>L<br>L<br>B<br>A<br>C<br>K</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>C<br>O<br>M<br>P<br>L<br>E<br>T<br>E<br>D<br></td>\n";
		echo "<td align=center valign=bottom><font size=2><b>MODIFY/DELETE</td></tr>\n";

		##### get status category listings for dynamic pulldown
		$stmt="SELECT vsc_id,vsc_name from vicidial_status_categories order by vsc_id desc;";
		$rslt=mysql_query($stmt, $link);
		$cats_to_print = mysql_num_rows($rslt);
		$cats_list="";

		$o=0;
		while ($cats_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$cats_list .= "<option value=\"$rowx[0]\">$rowx[0] - " . substr($rowx[1],0,20) . "</option>\n";
			$catsname_list["$rowx[0]"] = substr($rowx[1],0,20);
			$o++;
			}

		$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$AScategory = $rowx[4];
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=42>\n";
			echo "<input type=hidden name=stage value=modify>\n";
			echo "<input type=hidden name=status value=\"$rowx[0]\">\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "<font size=2><B>$rowx[0]</B></td>\n";
			echo "<td><input type=text name=status_name size=20 maxlength=30 value=\"$rowx[1]\"></td>\n";
			echo "<td>\n";
			echo "<select size=1 name=category>\n";
			echo "$cats_list";
			echo "<option selected value=\"$AScategory\">$AScategory - $catsname_list[$AScategory]</option>\n";
			echo "</select>\n";
			echo "\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=selectable><option>Y</option><option>N</option><option selected>$rowx[2]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=human_answered><option>Y</option><option>N</option><option selected>$rowx[3]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=sale><option>Y</option><option>N</option><option selected>$rowx[5]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=dnc><option>Y</option><option>N</option><option selected>$rowx[6]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=customer_contact><option>Y</option><option>N</option><option selected>$rowx[7]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=not_interested><option>Y</option><option>N</option><option selected>$rowx[8]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=unworkable><option>Y</option><option>N</option><option selected>$rowx[9]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=scheduled_callbacks><option>Y</option><option>N</option><option selected>$rowx[10]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=completed><option>Y</option><option>N</option><option selected>$rowx[11]</option></select>\n";
			echo "</td><td align=center nowrap><font size=1><input type=submit name=submit value=MODIFY> &nbsp; &nbsp; &nbsp; &nbsp; \n";
			echo " &nbsp; \n";
			
			if (preg_match("/^B$|^NA$|^DNC$|^NA$|^DROP$|^INCALL$|^QUEUE$|^NEW$/i",$rowx[0]))
				{
				echo "<DEL>SUPPRIMER</DEL>\n";
				}
			else
				{
				echo "<a href=\"$PHP_SELF?ADD=42&campaign_id=$campaign_id&status=$rowx[0]&stage=delete\">SUPPRIMER</a>\n";
				}
			echo "</form></td></tr>\n";
			}

		echo "</table>\n";


		echo "<br>AJOUTER UN NOUVEAU STATUT DE CAMPAGNE PERSONNALISE<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=22>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Etat: <input type=text name=status_id size=8 maxlength=6> &nbsp; \n";
		echo "Description: <input type=text name=status_name size=20 maxlength=30> &nbsp; \n";
		echo "Selectionnable: <select size=1 name=selectable><option>Y</option><option>N</option></select> &nbsp; \n";
		echo "Réponse de l'homme: <select size=1 name=human_answered><option>Y</option><option SELECTED>N</option></select> &nbsp; <BR>\n";
		echo "Sale: <select size=1 name=sale><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "DNC: <select size=1 name=dnc><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Customer Contact: <select size=1 name=customer_contact><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Not Interested: <select size=1 name=not_interested><option>Y</option><option SELECTED>N</option></select> &nbsp;  <BR>\n";
		echo "Unworkable: <select size=1 name=unworkable><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Callback: <select size=1 name=scheduled_callbacks><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Completed: <select size=1 name=completed><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Catégorie :\n";
		echo "<select size=1 name=category>\n";
		echo "$cats_list";
		echo "<option selected value=\"$AScategory\">$AScategory - $catsname_list[$AScategory]</option>\n";
		echo "</select> &nbsp; <BR>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";
		}

	##### CAMPAIGN HOTKEYS #####
	if ($SUB==23)
		{
		echo "<br><b>PERSONNALISER LES RACCOURCIS CLAVIER DE CETTE CAMPAGNE: &nbsp; $NWB#vicidial_campaign_hotkeys$NWE</b><br>\n";
		echo "<TABLE width=400 cellspacing=3>\n";
		echo "<tr><td>RACCOURCI CLAVIER</td><td>ETAT</td><td>DESCRIPTION</td><td>SUPPRIMER</td></tr>\n";

		$stmt="SELECT status,hotkey,status_name,selectable,campaign_id from vicidial_campaign_hotkeys where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by hotkey;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1>$rowx[1]</td><td><font size=1>$rowx[0]</td><td><font size=1>$rowx[2]</td><td><font size=1><a href=\"$PHP_SELF?ADD=43&campaign_id=$campaign_id&status=$rowx[0]&hotkey=$rowx[1]&action=DELETE\">SUPPRIMER</a></td></tr>\n";

			}

		echo "</table>\n";

		echo "<br>AJOUTER UN NOUVEAU RACCOURCI CLAVIER PERSONNALISE<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=23>\n";
		echo "<input type=hidden name=selectable value=Y>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Hotkey: <select size=1 name=hotkey>\n";
		echo "<option>1</option>\n";
		echo "<option>2</option>\n";
		echo "<option>3</option>\n";
		echo "<option>4</option>\n";
		echo "<option>5</option>\n";
		echo "<option>6</option>\n";
		echo "<option>7</option>\n";
		echo "<option>8</option>\n";
		echo "<option>9</option>\n";
		echo "</select> &nbsp; \n";
		echo "Etat: <select size=1 name=HKstatus>\n";
		echo "$HKstatuses_list\n";
		echo "<option value=\"ALTPH2-----Alternate Phone Hot Dial\">ALTPH2 - Alternate Phone Hot Dial</option>\n";
		echo "<option value=\"ADDR3-----Address3 Hot Dial\">ADDR3 - Address3 Hot Dial</option>\n";
		echo "</select> &nbsp; \n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";
		echo "</form><BR>\n";
		}

	##### CAMPAIGN LEAD RECYCLING #####
	if ($SUB==25)
		{
		### display counts on leads that have hit the limit in this campaign
		$stmt="SELECT list_id,active,list_name from vicidial_lists where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rslt);
		$camp_lists='';
		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			if (ereg("Y", $rowx[1])) {$camp_lists .= "'$rowx[0]',";}
			$o++;
			}
		$camp_lists = eregi_replace(".$","",$camp_lists);

		$stmt="SELECT recycle_id,campaign_id,status,attempt_delay,attempt_maximum,active from vicidial_lead_recycle where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
		$rslt=mysql_query($stmt, $link);
		$recycle_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($recycle_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$RECYCLE_status[$o] =	$rowx[2];
			$RECYCLE_delay[$o] =	$rowx[3];
			$RECYCLE_attempt[$o] =	$rowx[4];
			$RECYCLE_active[$o] =	$rowx[5];
			$RECYCLE_count[$o] = "'Y','Y1','Y2','Y3','Y4','Y5','Y6','Y7','Y8','Y9','Y10'";
			if ($RECYCLE_attempt[$o]==1) {$RECYCLE_count[$o] = "'Y1','Y2','Y3','Y4','Y5','Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==2) {$RECYCLE_count[$o] = "'Y2','Y3','Y4','Y5','Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==3) {$RECYCLE_count[$o] = "'Y3','Y4','Y5','Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==4) {$RECYCLE_count[$o] = "'Y4','Y5','Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==5) {$RECYCLE_count[$o] = "'Y5','Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==6) {$RECYCLE_count[$o] = "'Y6','Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==7) {$RECYCLE_count[$o] = "'Y7','Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==8) {$RECYCLE_count[$o] = "'Y8','Y9','Y10'";}
			if ($RECYCLE_attempt[$o]==9) {$RECYCLE_count[$o] = "'Y9','Y10'";}
			if ($RECYCLE_attempt[$o]>9) {$RECYCLE_count[$o] = "'Y10'";}
			$o++;
			}
		$o=0;

		echo "<br><br><b>FICHES EN RECYCLAGES DANS CETTE CAMPAGNE: &nbsp; $NWB#vicidial_lead_recycle$NWE</b><br>\n";
		echo "<TABLE width=700 cellspacing=3>\n";
		echo "<tr><td>ETAT</td><td>DELAI DE TENTATIVE</td><td>NOMBRE MAX DE TENTATIVES</td><td>LIMITE AU FILS</td><td>ACTIF</td><td> </td><td>SUPPRIMER</td></tr>\n";

		while ($recycle_to_print > $o) 
			{
			$recycle_limit=0;
			if (strlen($camp_lists) > 2)
				{
				$stmt="SELECT count(*) from vicidial_list where status='$RECYCLE_status[$o]' and list_id IN($camp_lists) and called_since_last_reset IN($RECYCLE_count[$o]);";
				if ($DB) {echo "|$stmt|\n";}
				$rslt=mysql_query($stmt, $link);
				$counts_to_print = mysql_num_rows($rslt);
				if ($counts_to_print > 0) 
					{
					$rowx=mysql_fetch_row($rslt);
					$recycle_limit = $rowx[0];
					}
				}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=2> &nbsp; $RECYCLE_status[$o]<form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=status value=\"$RECYCLE_status[$o]\">\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "<input type=hidden name=ADD value=45></td>\n";
			echo "<td><font size=1><input type=text size=7 maxlength=5 name=attempt_delay value=\"$RECYCLE_delay[$o]\"></td>\n";
			echo "<td><font size=1><input type=text size=5 maxlength=3 name=attempt_maximum value=\"$RECYCLE_attempt[$o]\"></td>\n";
			echo "<td align=right><font size=2>$recycle_limit &nbsp; </td>\n";
			echo "<td><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$RECYCLE_active[$o]</option></select></td>\n";
			echo "<td><font size=1><input type=submit name=submit value=MODIFY></form></td>\n";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=65&campaign_id=$campaign_id&status=$RECYCLE_status[$o]\">SUPPRIMER</a></td></tr>\n";
			$o++;
			}

		echo "</table>\n";

		echo "<br>AJOUTER UN NOUVEAU RECYCLAGE DE FICHES DE LA CAMAPGNE<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=25>\n";
		echo "<input type=hidden name=active value=\"N\">\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Etat: <select size=1 name=status>\n";
		echo "$LRstatuses_list\n";
		echo "</select> &nbsp; \n";
		echo "Délai d'attente: <input type=text size=7 maxlength=5 name=attempt_delay>\n";
		echo "Nombre max de tentatives: <input type=text size=5 maxlength=3 name=attempt_maximum>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";
		echo "<br>\n";
		echo "* Lead compte active des listes de prises dans la campagne ne.\n";
		}

	##### CAMPAIGN AUTO-ALT-NUMBER DIALING #####
	if ($SUB==26)
		{
		echo "<br><br><b>APPEL AUTOMATIQUE DU NUMERO ALTERNATIF POUR CETTE CAMPAGNE: &nbsp; $NWB#vicidial_auto_alt_dial_statuses$NWE</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>STATUSES</td><td>SUPPRIMER</td></tr>\n";

		$auto_alt_dial_statuses = preg_replace("/ -$/","",$auto_alt_dial_statuses);
		$AADstatuses = explode(" ", $auto_alt_dial_statuses);
		$AADs_to_print = (count($AADstatuses) -1);

		$o=0;
		while ($AADs_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			$o++;

			echo "<tr $bgcolor><td><font size=1>$AADstatuses[$o]</td>\n";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=66&campaign_id=$campaign_id&status=$AADstatuses[$o]\">SUPPRIMER</a></td></tr>\n";
			}

		echo "</table>\n";

		echo "<br>AJOUTER UN NOUVEAU STATUT D'APPEL AUTOMATIQUE DU NUMERO ALTERNATIF<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=26>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Etat: <select size=1 name=status>\n";
		echo "$LRstatuses_list\n";
		echo "</select> &nbsp; \n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";
		}

	##### CAMPAIGN CODES DE PAUSE #####
	if ($SUB==27)
		{
		echo "<br><br><b>CODES DE PAUSE DES AGENTS POUR CETTE CAMPAGNE: &nbsp; $NWB#vicidial_pause_codes$NWE</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>CODES DE PAUSE</td><td>FACTURABLE</td><td>MODIFIER</td><td>SUPPRIMER</td></tr>\n";

		$stmt="SELECT pause_code,pause_code_name,billable,campaign_id from vicidial_pause_codes where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by pause_code;";
		$rslt=mysql_query($stmt, $link);
		$pause_codes_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($pause_codes_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><form action=$PHP_SELF method=POST><font size=1>$rowx[0]\n";
			echo "<input type=hidden name=ADD value=47>\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "<input type=hidden name=pause_code value=\"$rowx[0]\"> &nbsp;\n";
			echo "<input type=text size=20 maxlength=30 name=pause_code_name value=\"$rowx[1]\"></td>\n";
			echo "<td><select size=1 name=billable><option>YES</option><option>NO</option><option>HALF</option><option SELECTED>$rowx[2]</option></select></td>\n";
			echo "<td><font size=1><input type=submit name=submit value=MODIFY></form></td>\n";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=67&campaign_id=$campaign_id&pause_code=$rowx[0]\">SUPPRIMER</a></td></tr>\n";
			}

		echo "</table>\n";

		echo "<br>AJOUTER UN NOUVEAU CODE DE PAUSE<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=27>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Code de pause: <input type=text size=8 maxlength=6 name=pause_code>\n";
		echo "Nom du code de pause: <input type=text size=20 maxlength=30 name=pause_code_name>\n";
		echo " &nbsp; Facturable: <select size=1 name=billable><option>YES</option><option>NO</option><option>HALF</option></select>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</center></FORM><br>\n";
		}

	##### CAMPAIGN QC SETTINGS #####
	if ( ($SUB==28) and ($SSqc_features_active > 0) )
		{
		$stmt="SELECT list_id,list_name,active from vicidial_lists where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rslt);
		$qc_lists_list='';

		$p=0;
		while ($lists_to_print > $p) 
			{
			$rowx=mysql_fetch_row($rslt);
			$qc_lists_list .= "<input type=\"checkbox\" name=\"qc_lists[]\" value=\"$rowx[0]\"";
			$r=0;
			while ($r < $QCL_to_print)
				{
				if ($rowx[0] == $QClists[$r]) 
					{
					$qc_lists_list .= " CHECKED";
					}
				$r++;
				}
			$qc_lists_list .= "> $rowx[0] - $rowx[1] - $rowx[2]<BR>\n";

			$p++;
			}

		##### get scripts listings for pulldown
		$stmt="SELECT script_id,script_name from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
		$rslt=mysql_query($stmt, $link);
		$scripts_to_print = mysql_num_rows($rslt);
		$QCscripts_list="";
		$o=0;
		while ($scripts_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$QCscripts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$scriptname_list["$rowx[0]"] = "$rowx[1]";
			$o++;
			}
		##### get shifts listings for pulldown
		$stmt="SELECT shift_id,shift_name from vicidial_shifts $whereLOGadmin_viewable_groupsSQL order by shift_id;";
		$rslt=mysql_query($stmt, $link);
		$shifts_to_print = mysql_num_rows($rslt);
		$QCshifts_list="";
		$o=0;
		while ($shifts_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$QCshifts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$shiftname_list["$rowx[0]"] = "$rowx[1]";
			$o++;
			}

		echo "<br><br><b>QC SETTINGS pour cette campagne:</b><br>\n";
		echo "<form action=$PHP_SELF method=POST><center><TABLE width=700 cellspacing=3>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right><input type=hidden name=ADD value=48>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "QC Enabled:</td><td><select size=1 name=qc_enabled><option>Y</option><option>N</option><option SELECTED>$qc_enabled</option></select> $NWB#vicidial_campaigns-qc_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#9BB9FB><td align=right>QC Statut:<BR> $NWB#vicidial_campaigns-qc_statuses$NWE</td><td>$qc_statuses_list</td></tr>\n";
#		echo "<tr bgcolor=#B9CBFD><td align=right>QC Lists: <BR> $NWB#vicidial_campaigns-qc_lists$NWE</td><td>$qc_lists_list</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>QC WebForm:</td><td align=left><input type=text name=qc_web_form_address size=70 maxlength=255 value=\"$qc_web_form_address\">$NWB#vicidial_campaigns-qc_web_form_address$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">QC Script</a>: </td><td align=left><select size=1 name=qc_script>\n";
		echo "$QCscripts_list";
		echo "<option selected value=\"$qc_script\">$qc_script - $scriptname_list[$qc_script]</option>\n";
		echo "</select>$NWB#vicidial_campaigns-qc_script$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right><a href=\"$PHP_SELF?ADD=331111111&shift_id=$qc_shift_id\">QC Shift</a>: </td><td align=left><select size=1 name=qc_shift_id>\n";
		echo "$QCshifts_list";
		echo "<option selected value=\"$qc_shift_id\">$qc_shift_id - $shiftname_list[$qc_shift_id]</option>\n";
		echo "</select>$NWB#vicidial_campaigns-qc_shift_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Get Lancement Record QC: </td><td><select size=1 name=qc_get_record_launch><option>NONE</option><option>SCRIPT</option><option>WEBFORM</option><option>QCSCRIPT</option><option>QCWEBFORM</option><option SELECTED>$qc_get_record_launch</option></select> $NWB#vicidial_campaigns-qc_get_record_launch$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>QC Voir l'enregistrement: </td><td><select size=1 name=qc_show_recording><option>Y</option><option>N</option><option SELECTED>$qc_show_recording</option></select> $NWB#vicidial_campaigns-qc_show_recording$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=center colspan=2><input type=submit name=submit value=VALIDER></td></tr>\n";
		echo "</table>\n";
		echo "<BR></center></FORM><br>\n";
		}

	##### CAMPAIGN SURVEY SETTINGS #####
	if ($SUB=='20A')
		{

		echo "<center><br><b>SONDAGE SETTINGS pour cette campagne:</b><br>\n";
		echo "<form action=$PHP_SELF method=POST name=admin_form id=admin_form><center><TABLE width=750 cellspacing=3>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right><input type=hidden name=ADD value=40A>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête Premier fichier audio: </td><td><input type=text size=50 maxlength=50 name=survey_first_audio_file id=survey_first_audio_file value=\"$survey_first_audio_file\"> <a href=\"javascript:launch_chooser('survey_first_audio_file','date',30);\">audio chooser</a>  $NWB#vicidial_campaigns-survey_first_audio_file$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête DTMF Digits: </td><td><input type=text size=16 maxlength=16 name=survey_dtmf_digits value=\"$survey_dtmf_digits\"> $NWB#vicidial_campaigns-survey_dtmf_digits$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête Non Intéressé Digit: </td><td><input type=text size=5 maxlength=1 name=survey_ni_digit value=\"$survey_ni_digit\"> $NWB#vicidial_campaigns-survey_ni_digit$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête sur Opt-in audio de dossier: </td><td><input type=text size=50 maxlength=50 name=survey_opt_in_audio_file id=survey_opt_in_audio_file value=\"$survey_opt_in_audio_file\"> <a href=\"javascript:launch_chooser('survey_opt_in_audio_file','date',30);\">audio chooser</a> $NWB#vicidial_campaigns-survey_opt_in_audio_file$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête Non Intéressé fichier audio: </td><td><input type=text size=50 maxlength=50 name=survey_ni_audio_file id=survey_ni_audio_file value=\"$survey_ni_audio_file\"> <a href=\"javascript:launch_chooser('survey_ni_audio_file','date',30);\">audio chooser</a> $NWB#vicidial_campaigns-survey_ni_audio_file$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête sur la méthode: </td><td><select size=1 name=survey_method><option>AGENT_XFER</option><option>VOICEMAIL</option><option>EXTENSION</option><option>HANGUP</option><option>CAMPREC_60_WAV</option><option>CALLMENU</option><option SELECTED>$survey_method</option></select> $NWB#vicidial_campaigns-survey_method$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Etude de non-réponse de l'action: </td><td><select size=1 name=survey_no_response_action><option>OPTIN</option><option>OPTOUT</option><option SELECTED>$survey_no_response_action</option></select> $NWB#vicidial_campaigns-survey_no_response_action$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête Non Intéressé Etat: </td><td><select name=survey_ni_status>$survey_ni_status_list</select> $NWB#vicidial_campaigns-survey_ni_status$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête sur le troisième chiffre: </td><td><input type=text size=5 maxlength=1 name=survey_third_digit id=survey_third_digit value=\"$survey_third_digit\"> $NWB#vicidial_campaigns-survey_third_digit$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Troisième enquête sur Fichier Audio: </td><td><input type=text size=50 maxlength=50 name=survey_third_audio_file id=survey_third_audio_file value=\"$survey_third_audio_file\"> <a href=\"javascript:launch_chooser('survey_third_audio_file','date',30);\">audio chooser</a> $NWB#vicidial_campaigns-survey_third_audio_file$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Troisième enquête Etat: </td><td><input type=text size=10 maxlength=6 name=survey_third_status value=\"$survey_third_status\"> $NWB#vicidial_campaigns-survey_third_status$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête Troisième prorogation: </td><td><input type=text size=20 maxlength=20 name=survey_third_exten value=\"$survey_third_exten\"> $NWB#vicidial_campaigns-survey_third_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête quatrième chiffre: </td><td><input type=text size=5 maxlength=1 name=survey_fourth_digit value=\"$survey_fourth_digit\"> $NWB#vicidial_campaigns-survey_fourth_digit$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Quatrième étude Fichier Audio: </td><td><input type=text size=50 maxlength=50 name=survey_fourth_audio_file id=survey_fourth_audio_file value=\"$survey_fourth_audio_file\"> <a href=\"javascript:launch_chooser('survey_fourth_audio_file','date',30);\">audio chooser</a> $NWB#vicidial_campaigns-survey_fourth_audio_file$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Quatrième enquête sur l-état: </td><td><input type=text size=10 maxlength=6 name=survey_fourth_status value=\"$survey_fourth_status\"> $NWB#vicidial_campaigns-survey_fourth_status$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Quatrième enquête Extension:</td><td><input type=text size=20 maxlength=20 name=survey_fourth_exten value=\"$survey_fourth_exten\"> $NWB#vicidial_campaigns-survey_fourth_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête sur la carte réponse Digit: </td><td><input type=text size=70 maxlength=100 name=survey_response_digit_map value=\"$survey_response_digit_map\"> $NWB#vicidial_campaigns-survey_response_digit_map$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Sondage Enquête Xfer Extension:</td><td><input type=text size=12 maxlength=20 name=survey_xfer_exten value=\"$survey_xfer_exten\"> $NWB#vicidial_campaigns-survey_xfer_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enquête sur la campagne d'enregistrement du répertoire: </td><td><input type=text size=70 maxlength=255 name=survey_camp_record_dir value=\"$survey_camp_record_dir\"> $NWB#vicidial_campaigns-survey_camp_record_dir$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Boîte vocale: </td><td><input type=text size=12 maxlength=10 name=voicemail_ext id=voicemail_ext value=\"$voicemail_ext\"> <a href=\"javascript:launch_vm_chooser('voicemail_ext','vm',300);\">voicemail chooser</a> $NWB#vicidial_campaigns-voicemail_ext$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Menu Appel Enquête: </td><td align=left><select size=1 name=survey_menu_id id=survey_menu_id>$call_menu_list<option SELECTED>$survey_menu_id</option></select>$NWB#vicidial_campaigns-survey_menu_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B9CBFD><td align=right>Enregistrement Enquête: </td><td align=left><select size=1 name=survey_recording id=survey_recording><option>Y</option><option>N</option><option>Y_WITH_AMD</option><option SELECTED>$survey_recording</option></select>$NWB#vicidial_campaigns-survey_recording$NWE</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=center colspan=2><input type=submit name=submit value=VALIDER></td></tr>\n";
		echo "</table>\n";
		echo "<BR></center></FORM><br>\n";
		}


	##### CAMPAIGN PRESETS #####
	if ($SUB==201)
		{
		$stmt="SELECT preset_name,preset_number,preset_dtmf,preset_hide_number from vicidial_xfer_presets where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by preset_name;";
		$rslt=mysql_query($stmt, $link);
		$presets_to_print = mysql_num_rows($rslt);

		echo "<br><br><b>$presets_to_print PRESETS pour cette campagne: &nbsp; $NWB#vicidial_xfer_presets$NWE</b><br>\n";

		echo "<br>ADD NEW PRESET -<BR><form action=$PHP_SELF method=POST><font size=2>\n";
		echo "<input type=hidden name=ADD value=201>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Nom du paramètre prédéfini: <input type=text size=20 maxlength=40 name=preset_name style=\"font-family: sans-serif; font-size: 10px;\">\n";
		echo " Number: <input type=text size=18 maxlength=50 name=preset_number style=\"font-family: sans-serif; font-size: 10px;\">\n";
		echo " DTMF: <input type=text size=5 maxlength=50 name=preset_dtmf style=\"font-family: sans-serif; font-size: 10px;\">\n";
		echo " &nbsp; Masquer numéro: <select size=1 name=preset_hide_number style=\"font-family: sans-serif; font-size: 10px;\"><option>Y</option><option SELECTED>N</option></select> &nbsp;\n";
		echo "<input type=submit name=submit value=AJOUTER style=\"font-family: sans-serif; font-size: 10px;\"><BR>\n";
		echo "</font></center></FORM><br>\n";

		echo "<center><table width=700 cellspacing=3>\n";
		echo "<tr><td># </td><td>PRESET NAME</td><td>NUMERO</td><td>DTMF</td><td>CACHER</td><td>MODIFIER</td><td>SUPPRIMER</td></tr>\n";

		$o=0;
		while ($presets_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<form action=$PHP_SELF method=POST><tr $bgcolor>\n";
			echo "<td><font size=2>$o </td>\n";
			echo "<td><font size=2>$rowx[0]\n";
			echo "<input type=hidden name=ADD value=401>\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "<input type=hidden name=preset_name value=\"$rowx[0]\"> &nbsp;</td>\n";
			echo "<td><input type=text size=20 maxlength=50 name=preset_number value=\"$rowx[1]\" style=\"font-family: sans-serif; font-size: 10px;\"></td>\n";
			echo "<td><input type=text size=20 maxlength=50 name=preset_dtmf value=\"$rowx[2]\" style=\"font-family: sans-serif; font-size: 10px;\"></td>\n";
			echo "<td><select size=1 name=preset_hide_number style=\"font-family: sans-serif; font-size: 10px;\"><option>Y</option><option>N</option><option SELECTED>$rowx[3]</option></select></td>\n";
			echo "<td><font size=1><input type=submit name=submit value=MODIFY style=\"font-family: sans-serif; font-size: 10px;\"></td>\n";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=601&campaign_id=$campaign_id&preset_name=$rowx[0]\">SUPPRIMER</a></td></tr></form>\n";
			}

		echo "</table>\n";
		}


	##### CAMPAIGN Indicatif régional CID #####
	if ($SUB==202)
		{
		echo "<br><br><b>CIDS indicatif régional pour cette campagne: &nbsp; $NWB#vicidial_campaign_cid_areacodes$NWE</b><br>\n";
		if ($use_custom_cid != 'Indicatif régional')
			{echo "<br><B><font color=red>The campaign setting Personnalisé CallerID is not set to Indicatif régional! </font></B><BR>";}
		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=202>\n";
		echo "<input type=hidden name=stage value=MODIFY>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "<center><TABLE width=700 cellspacing=2>\n";
		echo "<tr><td>#</td><td>Indicatif régional</td><td>CID NUMÉRO</td><td>DESCRIPTION</td><td>ACTIF</td><td>CALLS</td><td>SUPPRIMER</td></tr>\n";

		$stmt="SELECT areacode,outbound_cid,active,cid_description,call_count_today from vicidial_campaign_cid_areacodes where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by areacode,outbound_cid;";
		$rslt=mysql_query($stmt, $link);
		$accids_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($accids_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xareacode[$o] =			$rowx[0];
			$Xoutbound_cid[$o] =		$rowx[1];
			$Xactive[$o] =				$rowx[2];
			$Xcid_description[$o] =		$rowx[3];
			$Xcall_count_today[$o] =	$rowx[4];
			$o++;
			}

		$o=0;
		while ($accids_to_print > $o) 
			{
			$ct = ($o + 1);
			if ($ct == '1')
				{
				$bgcolor='bgcolor="#9BB9FB"';
				$bgac = $Xareacode[$o];
				} 
			else
				{
				if ($Xareacode[$o] != $bgac)
					{
					if (eregi("1$|3$|5$|7$|9$", $bgct))
						{$bgcolor='bgcolor="#9BB9FB"';} 
					else
						{$bgcolor='bgcolor="#B9CBFD"';}
					$bgct++;
					$bgac = $Xareacode[$o];
					}
				}

			echo "<tr $bgcolor><td><font size=2> &nbsp; $ct</font></td>\n";
			echo "<td><font size=2> &nbsp; $Xareacode[$o]</font></td>\n";
			echo "<td><font size=2> &nbsp; $Xoutbound_cid[$o]</font></td>\n";
			echo "<td><input type=text size=30 maxlength=100 name=cid_description_$Xareacode[$o]_$Xoutbound_cid[$o] value=\"$Xcid_description[$o]\" style=\"font-family: sans-serif; font-size: 10px;\"></td>\n";
			echo "<td>\n";
			if ($Xactive[$o] == 'Y')
				{
				echo "<input type=\"checkbox\" name=\"active_$Xareacode[$o]_$Xoutbound_cid[$o]\" value=\"Y\" CHECKED>";
				}
			else
				{
				echo "<input type=\"checkbox\" name=\"active_$Xareacode[$o]_$Xoutbound_cid[$o]\" value=\"Y\">";
				}
			echo "</td>\n";
			echo "<td><font size=2> &nbsp; $Xcall_count_today[$o]</font></td>\n";
			echo "<td><font size=1> &nbsp; <a href=\"$PHP_SELF?ADD=202&stage=DELETE&campaign_id=$campaign_id&areacode=$Xareacode[$o]&outbound_cid=$Xoutbound_cid[$o]\">SUPPRIMER</a></td></tr>\n";
			$o++;
			}

		echo "</table>\n";
		echo "<input type=submit name=submit value=\"Soumettre les modifications\"></form><br><br>\n";

		echo "<br>ADD NEW indicatif régional CID<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=202>\n";
		echo "<input type=hidden name=stage value=AJOUTER>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Areacode: <input type=text size=7 maxlength=5 name=areacode>\n";
		echo "Outbound CID: <input type=text size=20 maxlength=20 name=outbound_cid><BR>\n";
		echo "Description: <input type=text size=50 maxlength=100 name=cid_description>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</center></FORM><br>\n";
		}


	if ($SUB < 1)
		{
		echo "<BR><BR>\n";
		echo "<a href=\"$PHP_SELF?ADD=52&campaign_id=$campaign_id&DB=$DB\">DECONNECTER TOUS LES AGENTS DE CETTE CAMPAGNE</a><BR><BR>\n";
	#	echo "<a href=\"$PHP_SELF?ADD=53&campaign_id=$campaign_id&DB=$DB\">EMERGENCY VDAC CLEAR FOR THIS CAMPAIGN</a><BR><BR>\n";

		if ($LOGdelete_campaigns > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=51&campaign_id=$campaign_id\">SUPPRIMER CETTE CAMPAGNE</a>\n";
			}
		}
	}
	else
	{
	echo "Vous n'avez pas la permission de voir cette page\n";
	exit;
	}
}


######################
# ADD=34 modify campaign info in the system - Basic View
######################

if ( ($ADD==34) and ( (!eregi("$campaign_id",$LOGallowed_campaigns)) and (!eregi("ALL-CAMPAIGNS",$LOGallowed_campaigns)) ) ) 
	{$ADD=30;}	# send to not allowed screen if not in vicidial_user_groups allowed_campaigns list

if ($ADD==34)
	{
	if ($LOGmodify_campaigns==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31&campaign_id=$campaign_id&SUB=$SUB";
			$modify_footer_rafraîchir=1;
			}
		if ($stage=='show_dialable')
			{
			$stmt="UPDATE vicidial_campaigns set display_dialable_count='Y' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='hide_dialable')
			{
			$stmt="UPDATE vicidial_campaigns set display_dialable_count='N' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='show_leadscount')
			{
			$stmt="UPDATE vicidial_campaigns set display_leads_count='Y' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}
		if ($stage=='hide_leadscount')
			{
			$stmt="UPDATE vicidial_campaigns set display_leads_count='N' where campaign_id='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			}

		$stmt="SELECT campaign_id,campaign_name,active,dial_status_a,dial_status_b,dial_status_c,dial_status_d,dial_status_e,lead_order,park_ext,park_file_name,web_form_address,allow_closers,hopper_level,auto_dial_level,next_agent_call,local_call_time,voicemail_ext,dial_timeout,dial_prefix,campaign_cid,campaign_vdad_exten,campaign_rec_exten,campaign_recording,campaign_rec_filename,campaign_script,get_call_launch,am_message_exten,amd_send_to_vmx,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,alt_number_dialing,scheduled_callbacks,lead_filter_id,drop_call_seconds,drop_action,safe_harbor_exten,display_dialable_count,wrapup_seconds,wrapup_message,closer_campaigns,use_internal_dnc,allcalls_delay,omit_phone_code,dial_method,available_only_ratio_tally,adaptive_dropped_percentage,adaptive_maximum_level,adaptive_latest_server_time,adaptive_intensity,adaptive_dl_diff_target,concurrent_transfers,auto_alt_dial,auto_alt_dial_statuses,agent_pause_codes_active,campaign_description,campaign_changedate,campaign_stats_refresh,campaign_logindate,dial_statuses,disable_alter_custdata,no_hopper_leads_logins,list_order_mix,campaign_allow_inbound,manual_dial_list_id,default_xfer_group,xfer_groups,queue_priority,drop_inbound_group,qc_enabled,qc_statuses,qc_lists,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,survey_first_audio_file,survey_dtmf_digits,survey_ni_digit,survey_opt_in_audio_file,survey_ni_audio_file,survey_method,survey_no_response_action,survey_ni_status,survey_response_digit_map,survey_xfer_exten,survey_camp_record_dir,disable_alter_custphone,display_queue_count,manual_dial_filter,agent_clipboard_copy,agent_extended_alt_dial,use_campaign_dnc,three_way_call_cid,three_way_dial_prefix,web_form_target,vtiger_search_category,vtiger_create_call_record,vtiger_create_lead_record,vtiger_screen_login,cpd_amd_action,agent_allow_group_alias,default_group_alias,vtiger_search_dead,vtiger_status_call,survey_third_digit,survey_third_audio_file,survey_third_status,survey_third_exten,survey_fourth_digit,survey_fourth_audio_file,survey_fourth_status,survey_fourth_exten,drop_lockout_time,quick_transfer_button,prepopulate_transfer_preset,drop_rate_group,view_calls_in_queue,view_calls_in_queue_launch,grab_calls_in_queue,call_requeue_button,pause_after_each_call,no_hopper_dialing,agent_dial_owner_only,agent_display_dialable_leads,web_form_address_two,waitforsilence_options,display_leads_count,user_group from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$dial_status_a = $row[3];
		$dial_status_b = $row[4];
		$dial_status_c = $row[5];
		$dial_status_d = $row[6];
		$dial_status_e = $row[7];
		$lead_order = $row[8];
		$hopper_level = $row[13];
		$auto_dial_level = $row[14];
		$next_agent_call = $row[15];
		$local_call_time = $row[16];
		$voicemail_ext = $row[17];
		$dial_timeout = $row[18];
		$dial_prefix = $row[19];
		$campaign_cid = $row[20];
		$campaign_vdad_exten = $row[21];
		$script_id = $row[25];
		$get_call_launch = $row[26];
		$lead_filter_id = $row[35];
			if ($lead_filter_id=='') {$lead_filter_id='NONE';}
		$display_dialable_count = $row[39];
		$dial_method = $row[46];
		$adaptive_intensity = $row[51];
		$auto_alt_dial = $row[54];
		$campaign_description = $row[57];
		$campaign_changedate = $row[58];
		$campaign_stats_rafraîchir = $row[59];
		$campaign_logindate = $row[60];
		$dial_statuses = $row[61];
		$list_order_mix = $row[64];
		$default_xfer_group = $row[67];
		$campaign_allow_inbound = $row[65];
		$default_xfer_group = $row[67];
		$drop_lockout_time = $row[116];
		$display_leads_count = $row[130];
		$user_group = $row[131];

	if (ereg("DISABLED",$list_order_mix))
		{$DEFlistDISABLE = '';	$DEFstatusDISABLED=0;}
	else
		{$DEFlistDISABLE = 'disabled';	$DEFstatusDISABLED=1;}

	if ($auto_alt_dial == 'MULTI_LEAD')
		{$ALTmultiDISABLE=1;	$ALTmultiLINK="<a href=\"./admin_campaign_multi_alt.php?campaign_id=$campaign_id\">Multi-Alt-Paramètres</a>";}
	else
		{$ALTmultiDISABLE=0;	$ALTmultiLINK='';}

		$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_statuses order by status;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);
		$statuses_list='';
		$dial_statuses_list='';
		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			if ($rowx[0] != 'CBHOLD') {$dial_statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";}
			$statname_list["$rowx[0]"] = "$rowx[1]";
			$LRstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";
			if (eregi("Y",$rowx[2]))
				{$HKstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";}
			$o++;
			}

		$stmt="SELECT status,status_name,selectable,campaign_id,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
		$rslt=mysql_query($stmt, $link);
		$Cstatuses_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($Cstatuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			if ($rowx[0] != 'CBHOLD') {$dial_statuses_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";}
			$statname_list["$rowx[0]"] = "$rowx[1]";
			$LRstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";
			if (eregi("Y",$rowx[2]))
				{$HKstatuses_list .= "<option value=\"$rowx[0]-----$rowx[1]\">$rowx[0] - $rowx[1]</option>\n";}
			$o++;
			}

		$dial_statuses = preg_replace("/ -$/","",$dial_statuses);
		$Dstatuses = explode(" ", $dial_statuses);
		$Ds_to_print = (count($Dstatuses) -1);

	$stmt="SELECT count(*) from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and status='ACTIVE' $LOGallowed_campaignsSQL;";
	$rslt=mysql_query($stmt, $link);
	$rowx=mysql_fetch_row($rslt);
	if ($rowx[0] < 1)
		{
		$mixes_list="<option SELECTED value=\"DISABLED\">DISABLED</option>\n";
		$mixname_list["DISABLED"] = "DISABLED";
		}
	else
		{
		##### get list_mix listings for dynamic pulldown
		$stmt="SELECT vcl_id,vcl_name from vicidial_campaigns_list_mix where campaign_id='$campaign_id' and status='ACTIVE' $LOGallowed_campaignsSQL limit 1;";
		$rslt=mysql_query($stmt, $link);
		$mixes_to_print = mysql_num_rows($rslt);
		$mixes_list="<option value=\"DISABLED\">DISABLED</option>\n";

		$o=0;
		while ($mixes_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$mixes_list .= "<option value=\"ACTIVE\">ACTIVE ($rowx[0] - $rowx[1])</option>\n";
			$mixname_list["ACTIVE"] = "$rowx[0] - $rowx[1]";
			$o++;
			}
		}

	if ($SUB<1)		{$camp_detail_color=$subcamp_color;}
		else		{$camp_detail_color=$campaigns_color;}
	if ($SUB==22)	{$camp_statuses_color=$subcamp_color;}
		else		{$camp_statuses_color=$campaigns_color;}
	if ($SUB==23)	{$camp_hotkeys_color=$subcamp_color;}
		else		{$camp_hotkeys_color=$campaigns_color;}
	if ($SUB==25)	{$camp_recycle_color=$subcamp_color;}
		else		{$camp_recycle_color=$campaigns_color;}
	if ($SUB==26)	{$camp_autoalt_color=$subcamp_color;}
		else		{$camp_autoalt_color=$campaigns_color;}
	if ($SUB==27)	{$camp_pause_color=$subcamp_color;}
		else		{$camp_pause_color=$campaigns_color;}
	if ($SUB==29)	{$camp_listmix_color=$subcamp_color;}
		else		{$camp_listmix_color=$campaigns_color;}
	echo "<TABLE WIDTH=$page_width CELLPADDING=2 CELLSPACING=0><TR BGCOLOR=\"$campaigns_color\">\n";
	echo "<TD><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\"> <B>$campaign_id</B>: </font></TD>";
	echo "<TD BGCOLOR=\"$camp_detail_color\"><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Vue basique </font></a></TD>";
	echo "<TD> <a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Vue détaillée</font></a> </TD>";
	if ($SSoutbound_autodial_active > 0)
		{
		echo "<TD BGCOLOR=\"$camp_listmix_color\"> <a href=\"$PHP_SELF?ADD=34&SUB=29&campaign_id=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Liste Mix</font></a> </TD>";
		}
	echo "<TD> <a href=\"./realtime_report.php?RR=4&DB=0&group=$campaign_id\"><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\">Ecran temps réel</font></a></TD>\n";
	echo "<TD WIDTH=300><font size=2 color=$subcamp_font face=\"ARIAL,HELVETICA\"> &nbsp; </font></TD>\n";
	if ($SSoutbound_autodial_active < 1)
		{
		echo "<TD></TD>";
		}
	echo "</TR></TABLE>\n";

	if ($SUB < 1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=44>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "<input type=hidden name=old_campaign_allow_inbound value=\"$campaign_allow_inbound\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID de la campagne: </td><td align=left><b>$campaign_id</b>$NWB#vicidial_campaigns-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la campagne: </td><td align=left><input type=text name=campaign_name size=40 maxlength=40 value=\"$row[1]\">$NWB#vicidial_campaigns-campaign_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description de la campagne: </td><td align=left>$row[57]$NWB#vicidial_campaigns-campaign_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Changement Date: </td><td align=left>$campaign_changedate &nbsp; $NWB#vicidial_campaigns-campaign_changedate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne Login Date: </td><td align=left>$campaign_logindate &nbsp; $NWB#vicidial_campaigns-campaign_logindate$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$row[2]</option></select>$NWB#vicidial_campaigns-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#8EBCFD><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left>$user_group $NWB#vicidial_campaigns-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Parc de la Musique-sur-Hold: </td><td align=left>$row[10] $NWB#vicidial_campaigns-park_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web: </td><td align=left>$row[11]$NWB#vicidial_campaigns-web_form_address$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Autoriser les closers: </td><td align=left>$row[12] $NWB#vicidial_campaigns-allow_closers$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe De Transfert De Défaut :</td><td align=left>$default_xfer_group $NWB#vicidial_campaigns-default_xfer_group$NWE</td></tr>\n";
		if ($SSoutbound_autodial_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Permettez d'arrivée et mélangé :</td><td align=left>$campaign_allow_inbound $NWB#vicidial_campaigns-campaign_allow_inbound$NWE</td></tr>\n";

			$o=0;
			while ($Ds_to_print > $o) 
				{
				$o++;
				$Dstatus = $Dstatuses[$o];

				echo "<tr bgcolor=#8EBCFD><td align=right>Statut d'appel$o: </td><td align=left> \n";
				if ($DEFstatusDISABLED > 0)
					{
					echo "<font color=grey><DEL><b>$Dstatus</b> - $statname_list[$Dstatus] &nbsp; &nbsp; &nbsp; &nbsp; <font size=2>\n";
					echo "REMOVE</DEL></td></tr>\n";
					}
				else
					{
					echo "<b>$Dstatus</b> - $statname_list[$Dstatus] &nbsp; &nbsp; &nbsp; &nbsp; <font size=2>\n";
					echo "<a href=\"$PHP_SELF?ADD=68&campaign_id=$campaign_id&status=$Dstatuses[$o]\">SUPPRIMER</a></td></tr>\n";
					}
				}

			echo "<tr bgcolor=#8EBCFD><td align=right>Ajouter un statut Composer pour appeler: </td><td align=left><select size=1 name=dial_status $DEFlistDISABLE>\n";
			echo "<option value=\"\"> - NONE - </option>\n";

			echo "$dial_statuses_list";
			echo "</select> &nbsp; \n";
			echo "<input type=submit name=submit value=AJOUTER> &nbsp; &nbsp; $NWB#vicidial_campaigns-dial_status$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Ordre de la liste: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_order value=\"$lead_order\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_order>
				<option SELECTED>$lead_order</option>
				<option>DOWN</option>
				<option>UP</option>
				<option>DOWN PHONE</option>
				<option>UP PHONE</option>
				<option>DOWN LAST NAME</option>
				<option>UP LAST NAME</option>
				<option>DOWN COUNT</option>
				<option>UP COUNT</option>
				<option>RANDOM</option>
				<option>DOWN LAST CALL TIME</option>
				<option>UP LAST CALL TIME</option>
				<option>DOWN RANK</option>
				<option>UP RANK</option>
				<option>DOWN OWNER</option>
				<option>UP OWNER</option>
				<option>DOWN TIMEZONE</option>
				<option>UP TIMEZONE</option>
				<option>DOWN 2nd NEW</option>
				<option>DOWN 3rd NEW</option>
				<option>DOWN 4th NEW</option>
				<option>DOWN 5th NEW</option>
				<option>DOWN 6th NEW</option>
				<option>UP 2nd NEW</option>
				<option>UP 3rd NEW</option>
				<option>UP 4th NEW</option>
				<option>UP 5th NEW</option>
				<option>UP 6th NEW</option>
				<option>DOWN PHONE 2nd NEW</option>
				<option>DOWN PHONE 3rd NEW</option>
				<option>DOWN PHONE 4th NEW</option>
				<option>DOWN PHONE 5th NEW</option>
				<option>DOWN PHONE 6th NEW</option>
				<option>UP PHONE 2nd NEW</option>
				<option>UP PHONE 3rd NEW</option>
				<option>UP PHONE 4th NEW</option>
				<option>UP PHONE 5th NEW</option>
				<option>UP PHONE 6th NEW</option>
				<option>DOWN LAST NAME 2nd NEW</option>
				<option>DOWN LAST NAME 3rd NEW</option>
				<option>DOWN LAST NAME 4th NEW</option>
				<option>DOWN LAST NAME 5th NEW</option>
				<option>DOWN LAST NAME 6th NEW</option>
				<option>UP LAST NAME 2nd NEW</option>
				<option>UP LAST NAME 3rd NEW</option>
				<option>UP LAST NAME 4th NEW</option>
				<option>UP LAST NAME 5th NEW</option>
				<option>UP LAST NAME 6th NEW</option>
				<option>DOWN COUNT 2nd NEW</option>
				<option>DOWN COUNT 3rd NEW</option>
				<option>DOWN COUNT 4th NEW</option>
				<option>DOWN COUNT 5th NEW</option>
				<option>DOWN COUNT 6th NEW</option>
				<option>UP COUNT 2nd NEW</option>
				<option>UP COUNT 3rd NEW</option>
				<option>UP COUNT 4th NEW</option>
				<option>UP COUNT 5th NEW</option>
				<option>UP COUNT 6th NEW</option>
				<option>RANDOM 2nd NEW</option>
				<option>RANDOM 3rd NEW</option>
				<option>RANDOM 4th NEW</option>
				<option>RANDOM 5th NEW</option>
				<option>RANDOM 6th NEW</option>
				<option>DOWN LAST CALL TIME 2nd NEW</option>
				<option>DOWN LAST CALL TIME 3rd NEW</option>
				<option>DOWN LAST CALL TIME 4th NEW</option>
				<option>DOWN LAST CALL TIME 5th NEW</option>
				<option>DOWN LAST CALL TIME 6th NEW</option>
				<option>UP LAST CALL TIME 2nd NEW</option>
				<option>UP LAST CALL TIME 3rd NEW</option>
				<option>UP LAST CALL TIME 4th NEW</option>
				<option>UP LAST CALL TIME 5th NEW</option>
				<option>UP LAST CALL TIME 6th NEW</option>
				<option>DOWN RANK 2nd NEW</option>
				<option>DOWN RANK 3rd NEW</option>
				<option>DOWN RANK 4th NEW</option>
				<option>DOWN RANK 5th NEW</option>
				<option>DOWN RANK 6th NEW</option>
				<option>UP RANK 2nd NEW</option>
				<option>UP RANK 3rd NEW</option>
				<option>UP RANK 4th NEW</option>
				<option>UP RANK 5th NEW</option>
				<option>UP RANK 6th NEW</option>
				<option>DOWN OWNER 2nd NEW</option>
				<option>DOWN OWNER 3rd NEW</option>
				<option>DOWN OWNER 4th NEW</option>
				<option>DOWN OWNER 5th NEW</option>
				<option>DOWN OWNER 6th NEW</option>
				<option>UP OWNER 2nd NEW</option>
				<option>UP OWNER 3rd NEW</option>
				<option>UP OWNER 4th NEW</option>
				<option>UP OWNER 5th NEW</option>
				<option>UP OWNER 6th NEW</option>
				<option>DOWN TIMEZONE 2nd NEW</option>
				<option>DOWN TIMEZONE 3rd NEW</option>
				<option>DOWN TIMEZONE 4th NEW</option>
				<option>DOWN TIMEZONE 5th NEW</option>
				<option>DOWN TIMEZONE 6th NEW</option>
				<option>UP TIMEZONE 2nd NEW</option>
				<option>UP TIMEZONE 3rd NEW</option>
				<option>UP TIMEZONE 4th NEW</option>
				<option>UP TIMEZONE 5th NEW</option>
				<option>UP TIMEZONE 6th NEW</option>
				</select>$NWB#vicidial_campaigns-lead_order$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=31&SUB=29&campaign_id=$campaign_id&vcl_id=$list_order_mix\">Liste Mix</a>: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=list_order_mix value=\"$list_order_mix\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=list_order_mix>\n";
				echo "$mixes_list";
				if (ereg("DISABLED",$list_order_mix))
					{echo "<option selected value=\"$list_order_mix\">$list_order_mix - $mixname_list[$list_order_mix]</option>\n";}
				else
					{echo "<option selected value=\"ACTIVE\">ACTIVE ($mixname_list[ACTIVE])</option>\n";}
				echo "</select>$NWB#vicidial_campaigns-list_order_mix$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=31111111&lead_filter_id=$lead_filter_id\">Filtre de la fiche</a>: </td><td align=left>";
			if ($ALTmultiDISABLE > 0)
				{
				echo "<input type=hidden name=lead_filter_id value=\"$lead_filter_id\"> $ALTmultiLINK";
				}
			else
				{
				echo "<select size=1 name=lead_filter_id>\n";
				echo "$filters_list";
				echo "<option selected value=\"$lead_filter_id\">$lead_filter_id - $filtername_list[$lead_filter_id]</option>\n";
				echo "</select>$NWB#vicidial_campaigns-lead_filter_id$NWE";
				}
			echo "</td></tr>\n";

			echo "<tr bgcolor=#8EBCFD><td align=right>Niveau minimum Hopper: </td><td align=left><select size=1 name=hopper_level><option>1</option><option>5</option><option>10</option><option>20</option><option>50</option><option>100</option><option>200</option><option>500</option><option>700</option><option>1000</option><option>2000</option><option SELECTED>$hopper_level</option></select>$NWB#vicidial_campaigns-hopper_level$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Forcer la réinitialisation du distributeur de fiches: </td><td align=left><select size=1 name=reset_hopper><option>Y</option><option SELECTED>N</option></select>$NWB#vicidial_campaigns-force_reset_hopper$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Méthode d'appel: </td><td align=left><select size=1 name=dial_method><option >MANUAL</option><option>RATIO</option><option>ADAPT_HARD_LIMIT</option><option>ADAPT_TAPERED</option><option>ADAPT_AVERAGE</option><option>INBOUND_MAN</option><option SELECTED>$dial_method</option></select>$NWB#vicidial_campaigns-dial_method$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Niveau de l'appel automatique: </td><td align=left><select size=1 name=auto_dial_level><option selected>$auto_dial_level</option>\n";
			$adl=0;
			while($adl <= $SSauto_dial_limit)
				{
				echo "<option>$adl</option>\n";
				if ($adl < 1)
					{$adl = ($adl + 1);}
				else
					{
					if ($adl < 3)
						{$adl = ($adl + 0.1);}
					else
						{
						if ($adl < 4)
							{$adl = ($adl + 0.25);}
						else
							{
							if ($adl < 5)
								{$adl = ($adl + 0.5);}
							else
								{
								if ($adl < 10)
									{$adl = ($adl + 1);}
								else
									{
									if ($adl < 20)
										{$adl = ($adl + 2);}
									else
										{
										if ($adl < 40)
											{$adl = ($adl + 5);}
										else
											{
											if ($adl < 200)
												{$adl = ($adl + 10);}
											else
												{
												if ($adl < 400)
													{$adl = ($adl + 50);}
												else
													{
													if ($adl < 1000)
														{$adl = ($adl + 100);}
													else
													{$adl = ($adl + 1);}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			echo "<option>$adl</option></select>(0 = off)$NWB#vicidial_campaigns-auto_dial_level$NWE</td></tr>\n";

			echo "<tr bgcolor=#BDFFBD><td align=right>Adapter le modificateur d'intensité: </td><td align=left><select size=1 name=adaptive_intensity>\n";
			$n=40;
			while ($n>=-40)
				{
				$dtl = 'Balanced';
				if ($n<0) {$dtl = 'Less Intense';}
				if ($n>0) {$dtl = 'More Intense';}
				if ($n == $adaptive_intensity) 
					{echo "<option SELECTED value=\"$n\">$n - $dtl</option>\n";}
				else
					{echo "<option value=\"$n\">$n - $dtl</option>\n";}
				$n--;
				}
			echo "</select> $NWB#vicidial_campaigns-adaptive_intensity$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">Script</a>: </td><td align=left>$script_id</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Lancer l'appel: </td><td align=left>$get_call_launch</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center></FORM>\n";

		echo "<center>\n";

	if ($SSoutbound_autodial_active > 0)
		{
		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=44>\n";
		echo "<input type=hidden name=DB value=$DB>\n";
		echo "<input type=hidden name=stage value=list_activation>\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "<br><b>LISTES DANS CETTE CAMPAGNE: &nbsp; $NWB#vicidial_campaign_lists$NWE</b>\n";

		echo "<TABLE><TR><TD>\n";
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$LISTlink='stage=LISTIDDOWN';
		$NAMElink='stage=LISTNAMEDOWN';
		$TALLYlink='stage=TALLYDOWN';
		$ACTIVElink='stage=ACTIVEDOWN';
		$CAMPAIGNlink='stage=CAMPAIGNDOWN';
		$CALLDATElink='stage=CALLDATEDOWN';
		$SQLorder='order by list_id';
		if (eregi("LISTIDUP",$stage))		{$SQLorder='order by list_id asc';				$LISTlink='stage=LISTIDDOWN';}
		if (eregi("LISTIDDOWN",$stage))		{$SQLorder='order by list_id desc';				$LISTlink='stage=LISTIDUP';}
		if (eregi("LISTNAMEUP",$stage))		{$SQLorder='order by list_name asc';			$NAMElink='stage=LISTNAMEDOWN';}
		if (eregi("LISTNAMEDOWN",$stage))	{$SQLorder='order by list_name desc';			$NAMElink='stage=LISTNAMEUP';}
		if (eregi("TALLYUP",$stage))		{$SQLorder='order by tally asc';				$TALLYlink='stage=TALLYDOWN';}
		if (eregi("TALLYDOWN",$stage))		{$SQLorder='order by tally desc';				$TALLYlink='stage=TALLYUP';}
		if (eregi("ACTIVEUP",$stage))		{$SQLorder='order by active asc';				$ACTIVElink='stage=ACTIVEDOWN';}
		if (eregi("ACTIVEDOWN",$stage))		{$SQLorder='order by active desc';				$ACTIVElink='stage=ACTIVEUP';}
		if (eregi("CAMPAIGNUP",$stage))		{$SQLorder='order by campaign_id asc';			$CAMPAIGNlink='stage=CAMPAIGNDOWN';}
		if (eregi("CAMPAIGNDOWN",$stage))	{$SQLorder='order by campaign_id desc';			$CAMPAIGNlink='stage=CAMPAIGNUP';}
		if (eregi("CALLDATEUP",$stage))		{$SQLorder='order by list_lastcalldate asc';	$CALLDATElink='stage=CALLDATEDOWN';}
		if (eregi("CALLDATEDOWN",$stage))	{$SQLorder='order by list_lastcalldate desc';	$CALLDATElink='stage=CALLDATEUP';}
		$stmt="SELECT vls.list_id,list_name,list_description,count(*) as tally,active,list_lastcalldate,campaign_id from vicidial_lists vls,vicidial_list vl where vls.list_id=vl.list_id and campaign_id='$campaign_id' $whereLOGallowed_campaignsSQL group by list_id $SQLorder";
		$rslt=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rslt);

		echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
		echo "<TR BGCOLOR=BLACK>";
		echo "<TD><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&$LISTlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID DE LA LISTE</B></a></TD>";
		echo "<TD><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&$NAMElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>NOM DE LA LISTE</B></a></TD>";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</B></TD>\n";
		echo "<TD><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&$TALLYlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ABOUTIT COUNT</B></a></TD>\n";
		echo "<TD COLSPAN=2><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&$ACTIVElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ACTIF</B></a></TD>";
		echo "<TD><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&$CALLDATElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>LAST CALL DATE</B></a></TD>";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>MODIFIER</TD>\n";
		echo "</TR>\n";

		$o=0;
		while ($lists_to_print > $o)
			{
			$row=mysql_fetch_row($rslt);
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">$row[0]</a></td>";
			echo "<td><font size=1> $row[1]</td>";
			echo "<td><font size=1> $row[2]</td>";
			echo "<td><font size=1> $row[3]</td>";
			echo "<td><font size=1> $row[4]</td>";
			echo "<td>";

			if (ereg('Y',$row[4]))
				{
				$active_lists++;
				$camp_lists .= "'$row[0]',";
				echo "<input type=\"checkbox\" name=\"list_active_change[]\" value=\"$row[0]\" CHECKED>";
				}
			else
				{
				$inactive_lists++;
				echo "<input type=\"checkbox\" name=\"list_active_change[]\" value=\"$row[0]\"";
				}

			echo "</td>";
			echo "<td><font size=1> $row[5]</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">MODIFIER</a></td></tr>\n";

			$o++;
			}

		echo "<TR><TD COLSPAN=7 ALIGN=CENTER><input type=submit value=\"VALIDER ACTIVE LISTE DES CHANGEMENTS\"></TD></TR>\n";
		echo "</TABLE></center><BR></FORM>\n";
		echo "<center><b>\n";

		$filterSQL = $filtersql_list[$lead_filter_id];
		$filterSQL = preg_replace("/\\\\/","",$filterSQL);
		$filterSQL = eregi_replace("^and|and$|^or|or$","",$filterSQL);
		if (strlen($filterSQL)>4)
			{$fSQL = "and $filterSQL";}
		else
			{$fSQL = '';}

			$camp_lists = eregi_replace(".$","",$camp_lists);
		echo "Cette campagne a $active_lists listes actives et $inactive_lists listes inactives<br><br>\n";


		if ( ($display_leads_count == 'Y') and (strlen($camp_lists) > 3) )
			{
			# grab names of global statuses and statuses in the selected campaign
			$stmt="SELECT status,status_name from vicidial_statuses order by status;";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);

			$o=0;
			while ($statuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$statuses_name_list["$rowx[0]"] = "$rowx[1]";
				$o++;
				}

			$stmt="SELECT status,status_name from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
			$rslt=mysql_query($stmt, $link);
			$Cstatuses_to_print = mysql_num_rows($rslt);

			$o=0;
			while ($Cstatuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$statuses_name_list["$rowx[0]"] = "$rowx[1]";
				$o++;
				}
			# end grab status names

			echo "<br><b>STATUTS dans les listes ACTIFS POUR CETTE CAMPAGNE:</b>\n";
			echo " - <font size=1><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&stage=hide_leadscount\">CACHER</a></font><BR>";
			echo "<TABLE width=500 cellspacing=3>\n";
			echo "<tr><td>ETAT</td><td>NOM DU STATUT</td><td>APPELE</td><td>NON APPELE</td></tr>\n";

			$leads_in_list = 0;
			$leads_in_list_N = 0;
			$leads_in_list_Y = 0;
			$stmt="SELECT status,called_since_last_reset,count(*) from vicidial_list where list_id IN($camp_lists) group by status,called_since_last_reset order by status,called_since_last_reset;";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);

			$o=0;
			$lead_list['count'] = 0;
			$lead_list['Y_count'] = 0;
			$lead_list['N_count'] = 0;
			while ($statuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				
				$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
				if ($rowx[1] == 'N') 
					{
					$since_reset = 'N';
					$since_resetX = 'Y';
					}
				else 
					{
					$since_reset = 'Y';
					$since_resetX = 'N';
					} 
				$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
				$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
				#If opposite side is not set, it may not in the future so give it a value of zero
				if (!isset($lead_list[$since_resetX][$rowx[0]])) 
					{
					$lead_list[$since_resetX][$rowx[0]]=0;
					}
				$o++;
				}
		 
			$o=0;
			if ($lead_list['count'] > 0)
				{
				while (list($dispo,) = each($lead_list[$since_reset]))
					{
					if (eregi("1$|3$|5$|7$|9$", $o))
						{$bgcolor='bgcolor="#B9CBFD"';} 
					else
						{$bgcolor='bgcolor="#9BB9FB"';}

					if ($dispo == 'CBHOLD')
						{
						$CLB="<a href=\"$PHP_SELF?ADD=811&list_id=$list_id\">";
						$CLE="</a>";
						}
					else
						{
						$CLB='';
						$CLE='';
						}

					echo "<tr $bgcolor><td><font size=1>$CLB$dispo$CLE</td><td><font size=1>$statuses_name_list[$dispo]</td><td><font size=1>".$lead_list['Y'][$dispo]."</td><td><font size=1>".$lead_list['N'][$dispo]." </td></tr>\n";
					$o++;
					}
				}

			echo "<tr><td colspan=2><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
			echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";

			echo "</table></center><br>\n";
			unset($lead_list);				
			}
		else
			{
			echo "<font size=1><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&stage=show_leadscount\">MONTRER STATUTS DE PLOMB DANS CETTE CAMPAGNE</a></font><BR><BR>";
			}


		if ($display_dialable_count == 'Y')
			{
			### call function to calculate and print dialable leads
			$single_status=0;
			dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL);
			echo " - <font size=1><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id&stage=hide_dialable\">CACHER</a></font><BR><BR>";
			}
		else
			{
			echo "<a href=\"$PHP_SELF?ADD=73&campaign_id=$campaign_id\" target=\"_blank\">Popup Dialable Leads Count</a>";
			echo " - <font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id&stage=show_dialable\">MONTRER</a></font><BR><BR>";
			}



			$stmt="SELECT count(*) FROM vicidial_hopper where campaign_id='$campaign_id' and status IN('READY') $LOGallowed_campaignsSQL;";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$rowx=mysql_fetch_row($rslt);
			$hopper_leads = "$rowx[0]";

		echo "Cette campagne a $hopper_leads fiches dans le distributeur de fiches<br><br>\n";
		echo "<a href=\"./AST_VICIDIAL_hopperlist.php?group=$campaign_id\">Cliquez ici pour voir quelles fiches sont dans le distributeur à l'instant</a><br><br>\n";
		echo "<a href=\"./AST_VDADstats.php?group=$campaign_id\">Cliquez ici pour voir une VDAD rapport de cette campagne</a><BR><BR>\n";
		}
		echo "<a href=\"$PHP_SELF?ADD=81&campaign_id=$campaign_id\">Cliquez ici pour voir les rappels réservés de cette campagne</a><BR><BR>\n";
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CAMPAIGNS&stage=$campaign_id\">Cliquez ici pour voir les changements d'administration à cette campagne</a></FONT>\n";
			}

		echo "</b></center>\n";

		echo "<br>\n";

		### list of agent rank or skill-level for this campaign
		echo "<center>\n";
		echo "<br><b>GRADES D'AGENT POUR CETTE CAMPAGNE :</b><br>\n";
		echo "<TABLE width=600 cellspacing=3>\n";
		echo "<tr><td>USER</td><td> &nbsp; &nbsp; RANK</td><td> &nbsp; &nbsp; GRADE</td><td> &nbsp; &nbsp; CALLS TODAY</td></tr>\n";

		$stmt="SELECT vu.user,vca.campaign_rank,vca.calls_today,full_name,vca.campaign_grade from vicidial_campaign_agents vca, vicidial_users vu where campaign_id='$campaign_id' and active='Y' and vu.user=vca.user $LOGadmin_viewable_groupsSQL order by vu.user;";
		$rsltx=mysql_query($stmt, $link);
		$users_to_print = mysql_num_rows($rsltx);

		$o=0;
		while ($users_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3&user=$rowx[0]\">$rowx[0]</a> - $rowx[3]</td><td><font size=1>$rowx[1]</td><td><font size=1>$rowx[4]</td><td><font size=1>$rowx[2]</td></tr>\n";
			}

		echo "</table></center><br>\n";


		echo "<a href=\"$PHP_SELF?ADD=52&campaign_id=$campaign_id&DB=$DB\">DECONNECTER TOUS LES AGENTS DE CETTE CAMPAGNE</a><BR><BR>\n";


		if ($LOGdelete_campaigns > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=51&campaign_id=$campaign_id\">SUPPRIMER CETTE CAMPAGNE</a>\n";
			}
		}
	}
	else
	{
	echo "Vous n'avez pas la permission de voir cette page\n";
	exit;
	}
}


######################
# ADD=31 or 34 and SUB=29 for list mixes
######################
if ( ( ($ADD==34) or ($ADD==31) ) and ( (!eregi("$campaign_id",$LOGallowed_campaigns)) and (!eregi("ALL-CAMPAIGNS",$LOGallowed_campaigns)) ) ) 
	{$ADD=30;}	# send to not allowed screen if not in vicidial_user_groups allowed_campaigns list

if ( ($ADD==34) or ($ADD==31) )
{
	if ($LOGmodify_campaigns==1)
	{
	##### CAMPAIGN LIST MIX SETTINGS #####
	if ($SUB==29)
		{
		##### get list_id listings for dynamic pulldown
		$stmt="SELECT list_id,list_name from vicidial_lists where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by list_id;";
		$rslt=mysql_query($stmt, $link);
		$mixlists_to_print = mysql_num_rows($rslt);
		$mixlists_list="";

		$o=0;
		while ($mixlists_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$mixlists_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$mixlistsname_list["$rowx[0]"] = "$rowx[1]";
			$o++;
			}


		echo "<br><br><b>MÉLANGES DE LISTE POUR CETTE CAMPAGNE :&nbsp; $NWB#vicidial_campaigns-list_order_mix$NWE</b><br>\n";

		echo "<br><b>ATTENTION, nous recommandons que la liste Mix pour les utilisateurs avancés, S-il vous plaît lire le manuel VICIDIAL Manager</b><br>\n";

		$stmt="SELECT dial_statuses from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$statuses = mysql_num_rows($rslt);
		if ($statuses > 0) 
			{
			$rowy=mysql_fetch_row($rslt);
			$LMdial_statuses=$rowy[0];
			}

		$stmt="SELECT vcl_id,vcl_name,campaign_id,list_mix_container,mix_method,status from vicidial_campaigns_list_mix where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status, vcl_id;";
		$rslt=mysql_query($stmt, $link);
		$listmixes = mysql_num_rows($rslt);
		$o=0;
		while ($listmixes > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$vcl_id=$rowx[0];
			$o++;

			if ($o < 2)
				{$tablecolor='bgcolor="#99FF99"';   $bgcolor='bgcolor="#CCFFCC"';}
			else
				{
				if (eregi("1$|3$|5$|7$|9$", $o))
					{$tablecolor='bgcolor="#B9CBFD"';   $bgcolor='bgcolor="#9BB9FB"';} 
				else
					{$tablecolor='bgcolor="#9BB9FB"';   $bgcolor='bgcolor="#B9CBFD"';}
				}
			echo "<a name=\"LINK_$vcl_id\"><BR>\n";
			echo "<span id=\"LISTMIX$US$vcl_id$US$o\">";
			echo "<TABLE width=740 cellspacing=3 $tablecolor>\n";
			echo "<tr><td colspan=6>\n";
			echo "<form action=\"$PHP_SELF#LINK_$vcl_id\" method=POST name=$vcl_id id=$vcl_id>\n";
			echo "<input type=hidden name=ADD value=49>\n";
			echo "<input type=hidden name=SUB value=29>\n";
			echo "<input type=hidden name=stage value=\"MODIFY\">\n";
			echo "<input type=hidden name=vcl_id value=\"$vcl_id\">\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "<input type=hidden name=list_mix_container$US$vcl_id id=list_mix_container$US$vcl_id value=\"\">\n";
			echo "<B>$vcl_id:</B>\n";
			echo "<input type=text size=40 maxlength=50 name=vcl_name$US$vcl_id id=vcl_name$US$vcl_id value=\"$rowx[1]\">\n";
			echo " &nbsp; &nbsp; <a href=\"$PHP_SELF?ADD=49&SUB=29&stage=DELMIX&campaign_id=$campaign_id&vcl_id=$vcl_id\">DELETE LIST MIX</a></td></tr>\n";
			echo "<tr><td colspan=3>Etat: \n";
			if ($rowx[5]=='INACTIVE')
				{
				echo "<B>$rowx[5]</B>\n";
				echo "<a href=\"$PHP_SELF?ADD=49&SUB=29&stage=SETACTIVE&campaign_id=$campaign_id&vcl_id=$vcl_id\"><font size=1>PLACEZ À ACTIF</font></a></td>\n";
				}
			else
				{echo "<B>$rowx[5]</B></td>\n";}
			echo "<td colspan=3>Method:\n";
			echo "<select size=1 name=mix_method$US$vcl_id id=method$US$vcl_id><option value=\"EVEN_MIX\">EVEN_MIX</option><option value=\"IN_ORDER\">IN_ORDER</option><option value=\"RANDOM\">RANDOM</option><option SELECTED value=\"$rowx[4]\">$rowx[4]</option></select></td></tr>\n";
			echo "<tr><td>ID DE LA LISTE</td><td>PRIORITÉ</td><td>% MIX</td><td>STATUSES</td><td></td></tr>\n";

# list_id|order|percent|statuses|:list_id|order|percent|statuses|:...
# 101|1|40| A B NA -|:102|2|25| NEW -|:103|3|30| DROP CALLBK -|:101|4|5| DROP -|
# INSERT INTO vicidial_campaigns_list_mix values('TESTMIX','TESTCAMP List Mix','TESTCAMP','101|1|40| A B NA -|:102|2|25| NEW -|:103|3|30| DROP CALLBK -|:101|4|5| DROP -|','IN_ORDER','ACTIVE');
# INSERT INTO vicidial_campaigns_list_mix values('TESTMIX2','TESTCAMP List Mix2','TESTCAMP','101|1|20| A B -|:102|2|45| NEW -|:103|3|30| DROP CALLBK -|:101|4|5| DROP -|','IN_ORDER','ACTIVE');
# INSERT INTO vicidial_campaigns_list_mix values('TESTMIX3','TESTCAMP List Mix3','TESTCAMP','101|1|30| A NA -|:102|2|35| NEW -|:103|3|30| DROP CALLBK -|:101|4|5| DROP -|','IN_ORDER','ACTIVE');

			$MIXentries = $MT;
			$MIXentries = explode(":", $rowx[3]);
			$Ms_to_print = (count($MIXentries) - 0);
			$q=0;
			while ($Ms_to_print > $q) 
				{
				$MIXdetails = explode('|', $MIXentries[$q]);
				$MIXdetailsLIST = $MIXdetails[0];

				$dial_statuses = preg_replace("/ -$/","",$dial_statuses);
				$Dstatuses = explode(" ", $dial_statuses);
				$Ds_to_print = (count($Dstatuses) - 0);
				$Dsql = '';
				$r=0;
				while ($Ds_to_print > $r) 
					{
					$r++;
					$Dsql .= "'$Dstatuses[$r]',";
					}
				$Dsql = preg_replace("/,$/","",$Dsql);

				echo "<tr $bgcolor><td NOWRAP><font size=3>\n";
				echo "<input type=hidden name=list_id$US$q$US$vcl_id id=list_id$US$q$US$vcl_id value=$MIXdetailsLIST>\n";
				echo "<a href=\"$PHP_SELF?ADD=311&list_id=$MIXdetailsLIST\">List</a>: $MIXdetailsLIST &nbsp; <font size=1><a href=\"$PHP_SELF?ADD=49&SUB=29&stage=REMOVE&campaign_id=$campaign_id&vcl_id=$vcl_id&mix_container_item=$q&list_id=$MIXdetailsLIST#LINK_$vcl_id\">SUPPRIMER</a></font></td>\n";

				echo "<td><select size=1 name=priority$US$q$US$vcl_id id=priority$US$q$US$vcl_id>\n";
				$n=40;
				while ($n>=1)
					{
					echo "<option value=\"$n\">$n</option>\n";
					$n = ($n-1);
					}
				echo "<option SELECTED value=\"$MIXdetails[1]\">$MIXdetails[1]</option></select></td>\n";

				echo "<td><select size=1 name=\"percentage$US$q$US$vcl_id\" id=\"percentage$US$q$US$vcl_id\" onChange=\"mod_mix_percent('$vcl_id','$Ms_to_print')\">\n";
				$n=100;
				while ($n>=0)
					{
					echo "<option value=\"$n\">$n</option>\n";
					$n = ($n-1);
					}
				echo "<option SELECTED value=\"$MIXdetails[2]\">$MIXdetails[2]</option></select></td>\n";

				
				echo "<td><input type=hidden name=status$US$q$US$vcl_id id=status$US$q$US$vcl_id value=\"$MIXdetails[3]\"><input type=text size=20 maxlength=255 name=ROstatus$US$q$US$vcl_id id=ROstatus$US$q$US$vcl_id value=\"$MIXdetails[3]\" READONLY></td>\n";
				echo "<td NOWRAP>\n";



				echo "<select size=1 name=dial_status$US$q$US$vcl_id id=dial_status$US$q$US$vcl_id>\n";
				echo "<option value=\"\"> - Select A Status - </option>\n";

				echo "$dial_statuses_list";
				echo "</select> <font size=2><B>\n";
				echo "<a href=\"#\" onclick=\"mod_mix_status('ADD','$vcl_id','$q');return false;\">ADD</a> &nbsp; \n";
				echo "<a href=\"#\" onclick=\"mod_mix_status('REMOVE','$vcl_id','$q');return false;\">SUPPRIMER</a>\n";
				echo "</font></B></td></tr>\n";


				echo "</td></tr>\n";


				$q++;

				}



			
			echo "<tr $bgcolor><td colspan=3 align=right><font size=2>\n";
			echo "Difference %: <input type=text size=4 name=PCT_DIFF_$vcl_id id=PCT_DIFF_$vcl_id value=0 readonly>\n";
			echo "</td>\n";

			echo "<td colspan=2><input type=button name=submit_$vcl_id id=submit_$vcl_id value=\"VALIDER\" onClick=\"submit_mix('$vcl_id','$Ms_to_print')\"> &nbsp; \n";
			echo "<span id=ERROR_$vcl_id></span>\n";
			echo "</form></td></tr>\n";


			echo "<tr $bgcolor><td colspan=3 align=center VALIGN=BOTTOM><font size=2>\n";
			echo "<form action=\"$PHP_SELF#LINK_$vcl_id\" method=POST name=ADD_$vcl_id id=ADD_$vcl_id>\n";
			echo "<input type=hidden name=ADD value=49>\n";
			echo "<input type=hidden name=SUB value=29>\n";
			echo "<input type=hidden name=stage value=\"ADD\">\n";
			echo "<input type=hidden name=vcl_id value=\"$vcl_id\">\n";
			echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
			echo "List: <select size=1 name=list_id>\n";
			echo "$mixlists_list";
			echo "<option selected value=\"\">ADD ANOTHER ENTRY</option>\n";
			echo "</select>\n";
			
			if ($q > 39) {$AE_disabled = 'DISABLED';}
			else {$AE_disabled = '';}
			echo "<input type=submit name=submit value=\"ADD ENTRY\" $AE_disabled>\n";
			echo "</form></td>\n";

			$X='X';
			echo "<td NOWRAP VALIGN=BOTTOM>\n";
			echo "<form action=\"$PHP_SELF#LINK_$vcl_id\" method=POST name=DEFAULT_$vcl_id id=DEFAULT_$vcl_id>\n";
			echo "<input type=hidden name=status$US$X$US$vcl_id id=status$US$X$US$vcl_id value=\"\"><input type=text size=20 maxlength=255 name=ROstatus$US$X$US$vcl_id id=ROstatus$US$X$US$vcl_id value=\"$LMdial_statuses\" READONLY>\n";
			echo "<BR><font size=2><B>CHANGE: \n";
			echo "<a href=\"#\" onclick=\"mod_mix_status('ALL','$vcl_id','$q');return false;\">ALL</a> &nbsp; \n";
			echo "<a href=\"#\" onclick=\"mod_mix_status('EMPTY','$vcl_id','$q');return false;\">EMPTY</a>\n";
			echo "</td><td NOWRAP VALIGN=MIDDLE>\n";
			echo "<select size=1 name=dial_status$US$X$US$vcl_id id=dial_status$US$X$US$vcl_id>\n";
			echo "<option value=\"\"> - Select A Status - </option>\n";
			echo "$dial_statuses_list";
			echo "</select> <font size=2><B>\n";
			echo "<a href=\"#\" onclick=\"mod_mix_status('ADD','$vcl_id','X');return false;\">ADD</a> &nbsp; \n";
			echo "<a href=\"#\" onclick=\"mod_mix_status('REMOVE','$vcl_id','X');return false;\">SUPPRIMER</a>\n";
			echo "</form></td></tr>\n";
			echo "</table></span>\n";
			}


		echo "<br><br><B>AJOUTER UNE NOUVELLE LISTE MIX</B><BR><form action=$PHP_SELF method=POST>\n";
		echo "<table border=0>\n";
		echo "<tr $bgcolor><td><form action=\"$PHP_SELF#LINK_$vcl_id\" method=POST>\n";
		echo "<input type=hidden name=ADD value=49>\n";
		echo "<input type=hidden name=SUB value=29>\n";
		echo "<input type=hidden name=stage value=\"NEWMIX\">\n";
		echo "<input type=hidden name=campaign_id value=\"$campaign_id\">\n";
		echo "Mix ID: <input type=text size=20 maxlength=20 name=vcl_id value=\"\"></td>\n";
		echo "<td>Mix Name: <input type=text size=30 maxlength=50 name=vcl_name value=\"\"></td>\n";
		echo "<td>Mix Method: ";
		echo "<select size=1 name=mix_method><option value=\"EVEN_MIX\">EVEN_MIX</option><option value=\"IN_ORDER\">IN_ORDER</option><option value=\"RANDOM\">RANDOM</option></select></td></tr>\n";
		echo "<tr $bgcolor><td>List: <select size=1 name=list_id>\n";
		echo "$mixlists_list";
		echo "</select></td>\n";
		echo "<td>Dial Etat: <select size=1 name=status>\n";
		echo "$dial_statuses_list";
		echo "</select></td>\n";
		echo "<td> &nbsp; <input type=submit name=submit value=VALIDER></form></td>\n";
		echo "</tr>\n";
		echo "</table>\n";

		echo "<br>\n";

		}
	}
	echo "</TD></TR></TABLE></center>\n";
}


######################
# ADD=30 campaign not allowed
######################

if ($ADD==30)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	echo "You do not have permission to view campaign $campaign_id\n";
	}


######################
# ADD=32 display all campaign statuses
######################
if ($ADD==32)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTES FAITES SUR COMMANDE DE STATUTS DE CAMPAGNE :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>STATUSES</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=22&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT status from vicidial_campaign_statuses where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by status;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=22&campaign_id=$campaigns_id_list[$o]\">MODIFY STATUSES</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=33 display all campaign hotkeys
######################
if ($ADD==33)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTES DE LA CAMPAGNE HOTKEYS :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>HOTKEYS</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=23&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT status from vicidial_campaign_hotkeys where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by hotkey;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=23&campaign_id=$campaigns_id_list[$o]\">MODIFY HOTKEYS</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=35 display all campaign lead recycle entries
######################
if ($ADD==35)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LE FIL DE CAMPAGNE RÉUTILISENT DES LISTES :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>LE FIL RÉUTILISE</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=25&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT status from vicidial_lead_recycle where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by status;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=25&campaign_id=$campaigns_id_list[$o]\">MODIFY LE FIL RÉUTILISE</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=36 display all campaign auto-alt dial entries
######################
if ($ADD==36)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTES DE CADRAN DU FIL AUTO-ALT DE CAMPAGNE :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>AUTO-ALT DIAL</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=26&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT auto_alt_dial_statuses from vicidial_campaigns where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if (strlen($row[0])<3) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=26&campaign_id=$campaigns_id_list[$o]\">MODIFY AUTO-ALT DIAL</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=37 display all campaign agent pause codes
######################
if ($ADD==37)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTES DES CODES DE PAUSE D'AGENT DE CAMPAGNE :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>CODES DE PAUSE</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=27&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT pause_code from vicidial_pause_codes where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by pause_code;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=27&campaign_id=$campaigns_id_list[$o]\">MODIFY CODES DE PAUSE</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=39 display all campaign list mixes
######################
if ($ADD==39)
	{
	echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTES DE MÉLANGE DE LISTE DE CAMPAGNE :\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>LIST MIX</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			$campaigns_id_list[$o] = $row[0];
			$campaigns_name_list[$o] = $row[1];
			$o++;
			}

		$o=0;
		while ($campaigns_to_print > $o) 
			{
			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=29&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT vcl_id from vicidial_campaigns_list_mix where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by status,vcl_id;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=29&campaign_id=$campaigns_id_list[$o]\">MODIFY LIST MIX</a></td></tr>\n";
			$o++;
			}

	echo "</TABLE></center>\n";
	}


######################
# ADD=301 display all campaign presets
######################
if ($ADD==301)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTE DE CAMPAGNE PRESET:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>PRESETS</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

	$stmt="SELECT campaign_id,campaign_name,enable_xfer_presets from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($campaigns_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$campaigns_id_list[$o] =		$row[0];
		$campaigns_name_list[$o] =		$row[1];
		$enable_xfer_presets_list[$o] = $row[2];
		$o++;
		}

	$o=0;
	$k=0;
	while ($campaigns_to_print > $o) 
		{
		if ($enable_xfer_presets_list[$o] == 'ENABLED')
			{
			if (eregi("1$|3$|5$|7$|9$", $k))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=201&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
			echo "<td><font size=1> $campaigns_name_list[$o] </td>";
			echo "<td><font size=1> ";

			$stmt="SELECT preset_name from vicidial_xfer_presets where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL order by preset_name;";
			$rslt=mysql_query($stmt, $link);
			$campstatus_to_print = mysql_num_rows($rslt);
			$p=0;
			while ( ($campstatus_to_print > $p) and ($p < 10) )
				{
				$row=mysql_fetch_row($rslt);
				echo "$row[0] ";
				$p++;
				}
			if ($p<1) 
				{echo "<font color=grey><DEL>NONE</DEL></font>";}
			echo "</td>";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=201&campaign_id=$campaigns_id_list[$o]\">MODIFY PRESETS</a></td></tr>\n";

			$k++;
			}
		$o++;
		}

	echo "</TABLE></center>\n";
	}



######################
# ADD=302 display campaign areacode cid counts
######################
if ($ADD==302)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>LISTE DE CAMPAGNE indicatif régional CID:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>CAMPAIGN</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>CUSTOM CID</B></td>\n";
	echo "<td><B>AC-CIDS</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

	$stmt="SELECT campaign_id,campaign_name,use_custom_cid from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($campaigns_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$campaigns_id_list[$o] =	$row[0];
		$campaigns_name_list[$o] =	$row[1];
		$use_custom_cid_list[$o] =	$row[2];
		$o++;
		}

	$o=0;
	$k=0;
	while ($campaigns_to_print > $o) 
		{
		if (eregi("1$|3$|5$|7$|9$", $k))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=202&campaign_id=$campaigns_id_list[$o]\">$campaigns_id_list[$o]</a></td>";
		echo "<td><font size=1> $campaigns_name_list[$o] </td>";
		echo "<td><font size=1> $use_custom_cid_list[$o] </td>";
		echo "<td><font size=1> ";

		$stmt="SELECT count(*) from vicidial_campaign_cid_areacodes where campaign_id='$campaigns_id_list[$o]' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$campstatus_to_print = mysql_num_rows($rslt);
		$p=0;
		while ( ($campstatus_to_print > $p) and ($p < 10) )
			{
			$row=mysql_fetch_row($rslt);
			echo "$row[0] ";
			$p++;
			}
		echo "</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&SUB=202&campaign_id=$campaigns_id_list[$o]\">MODIFY AC-CIDS</a></td></tr>\n";

		$k++;
		$o++;
		}

	echo "</TABLE></center>\n";
	}



######################
# ADD=311 modify list info in the system
######################

if ($ADD==311)
	{
	if ($LOGmodify_lists==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=311&list_id=$list_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT list_id,list_name,campaign_id,active,list_description,list_changedate,list_lastcalldate,reset_time,agent_script_override,campaign_cid_override,am_message_exten_override,drop_inbound_group_override,xferconf_a_number,xferconf_b_number,xferconf_c_number,xferconf_d_number,xferconf_e_number,web_form_address,web_form_address_two,time_zone_setting,inventory_report from vicidial_lists where list_id='$list_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$list_name =				$row[1];
		$campaign_id =				$row[2];
		$active =					$row[3];
		$list_description =			$row[4];
		$list_changedate =			$row[5];
		$list_lastcalldate =		$row[6];
		$reset_time =				$row[7];
		$agent_script_override =	$row[8];
		$campaign_cid_override =	$row[9];
		$am_message_exten_override =	$row[10];
		$drop_inbound_group_override =	$row[11];
		$xferconf_a_number =		$row[12];
		$xferconf_b_number =		$row[13];
		$xferconf_c_number =		$row[14];
		$xferconf_d_number =		$row[15];
		$xferconf_e_number =		$row[16];
		$web_form_address =			$row[17];
		$web_form_address_two =		$row[18];
		$time_zone_setting =		$row[19];
		$inventory_report =			$row[20];

		# grab names of global statuses and statuses in the selected campaign
		$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_statuses order by status;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$statuses_list["$rowx[0]"] = "$rowx[1]";
			$statuses_complete_list["$rowx[0]"] = "$rowx[11]";
			$o++;
			}

		$stmt="SELECT status,status_name,selectable,campaign_id,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_campaign_statuses where campaign_id='$campaign_id' $LOGallowed_campaignsSQL order by status;";
		$rslt=mysql_query($stmt, $link);
		$Cstatuses_to_print = mysql_num_rows($rslt);

		$o=0;
		while ($Cstatuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$statuses_list["$rowx[0]"] = "$rowx[1]";
			$statuses_complete_list["$rowx[0]"] = "$rowx[12]";
			$o++;
			}
		# end grab status names

		##### get scripts listings for pulldown
		$Lscripts_list = "<option value=\"\">NONE - INACTIVE</option>\n";
		$stmt="SELECT script_id,script_name from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
		$rslt=mysql_query($stmt, $link);
		$scripts_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($scripts_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$Lscripts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$scriptname_list["$rowx[0]"] = "$rowx[1]";
			$o++;
			}

		##### get in-groups listings for dynamic drop in-group pulldown
		$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
		$rslt=mysql_query($stmt, $link);
		$Dgroups_to_print = mysql_num_rows($rslt);
		$Dgroups_menu='';
		$Dgroups_selected=0;
		$o=0;
		while ($Dgroups_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Dgroups_menu .= "<option ";
			if ($drop_inbound_group_override == "$rowx[0]") 
				{
				$Dgroups_menu .= "SELECTED ";
				$Dgroups_selected++;
				}
			$Dgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		if ($Dgroups_selected < 1) 
			{$Dgroups_menu .= "<option SELECTED value=\"\">---NONE---</option>\n";}
		else 
			{$Dgroups_menu .= "<option value=\"\">---NONE---</option>\n";}


		echo "<br>MODIFIER UN ENREGISTREMENT DE LA LISTE: $list_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=411>\n";
		echo "<input type=hidden name=list_id value=\"$list_id\">\n";
		echo "<input type=hidden name=old_campaign_id value=\"$campaign_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID de la liste: </td><td align=left><b>$list_id</b>$NWB#vicidial_lists-list_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la liste: </td><td align=left><input type=text name=list_name size=20 maxlength=20 value=\"$list_name\">$NWB#vicidial_lists-list_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description de la liste: </td><td align=left><input type=text name=list_description size=30 maxlength=255 value=\"$list_description\">$NWB#vicidial_lists-list_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=34&campaign_id=$campaign_id\">Campagne</a>: </td><td align=left><select size=1 name=campaign_id>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);
		$campaigns_list='';
		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$campaigns_list";
		echo "<option SELECTED>$campaign_id</option>\n";
		echo "</select>$NWB#vicidial_lists-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$active</option></select>$NWB#vicidial_lists-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Réinitialiser les statuts des fiches appelées pour cette liste: </td><td align=left><select size=1 name=reset_list><option>Y</option><option SELECTED>N</option></select>$NWB#vicidial_lists-reset_list$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Reset Times: </td><td align=left><input type=text name=reset_time size=30 maxlength=100 value=\"$reset_time\">$NWB#vicidial_lists-reset_time$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Date de changement de la liste: </td><td align=left>$list_changedate &nbsp; $NWB#vicidial_lists-list_changedate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Liste Date Last Call: </td><td align=left>$list_lastcalldate &nbsp; $NWB#vicidial_lists-list_lastcalldate$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$agent_script_override\">Agent Script Override</a>: </td><td align=left><select size=1 name=agent_script_override>\n";
		echo "$Lscripts_list";
		echo "<option selected value=\"$agent_script_override\">$agent_script_override - $scriptname_list[$agent_script_override]</option>\n";
		echo "</select>$NWB#vicidial_lists-agent_script_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Campagne CID Override: </td><td align=left><input type=text name=campaign_cid_override size=20 maxlength=20 value=\"$campaign_cid_override\">$NWB#vicidial_lists-campaign_cid_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Message de répondeur Override: </td><td align=left><input type=text name=am_message_exten_override id=am_message_exten_override size=50 maxlength=100 value=\"$am_message_exten_override\"> <a href=\"javascript:launch_chooser('am_message_exten_override','date',300);\">audio chooser</a> $NWB#vicidial_lists-am_message_exten_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Drop Entrant Groupe Override: </td><td align=left><select size=1 name=drop_inbound_group_override>";
		echo "$Dgroups_menu";
		echo "</select>$NWB#vicidial_lists-drop_inbound_group_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>Formulaire Web: </td><td align=left><input type=text name=web_form_address size=70 maxlength=9999 value=\"$web_form_address\">$NWB#vicidial_lists-web_form_address$NWE</td></tr>\n";
		if ($SSenable_second_webform > 0)
			{
			echo "<tr bgcolor=#8EBCFD><td align=right>Formulaire Web Two: </td><td align=left><input type=text name=web_form_address_two size=70 maxlength=9999 value=\"$web_form_address_two\">$NWB#vicidial_lists-web_form_address$NWE</td></tr>\n";
			}

		echo "<tr bgcolor=#8EBCFD><td align=right>numéro de Transfer-Conf 1 Override: </td><td align=left><input type=text name=xferconf_a_number size=20 maxlength=50 value=\"$xferconf_a_number\">$NWB#vicidial_lists-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>numéro de Transfer-Conf 2 Override: </td><td align=left><input type=text name=xferconf_b_number size=20 maxlength=50 value=\"$xferconf_b_number\">$NWB#vicidial_lists-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>numéro de Transfer-Conf 3 Override: </td><td align=left><input type=text name=xferconf_c_number size=20 maxlength=50 value=\"$xferconf_c_number\">$NWB#vicidial_lists-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>numéro de Transfer-Conf 4 Override: </td><td align=left><input type=text name=xferconf_d_number size=20 maxlength=50 value=\"$xferconf_d_number\">$NWB#vicidial_lists-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#8EBCFD><td align=right>numéro de Transfer-Conf 5 Override: </td><td align=left><input type=text name=xferconf_e_number size=20 maxlength=50 value=\"$xferconf_e_number\">$NWB#vicidial_lists-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rapport d'inventaire: </td><td align=left><select size=1 name=inventory_report><option>Y</option><option>N</option><option SELECTED>$inventory_report</option></select>$NWB#vicidial_lists-inventory_report$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Réglage du fuseau horaire: </td><td align=left><select size=1 name=time_zone_setting><option>COUNTRY_AND_AREA_CODE</option><option>POSTAL_CODE</option><option>NANPA_PREFIX</option><option>OWNER_TIME_ZONE_CODE</option><option SELECTED>$time_zone_setting</option></select>$NWB#vicidial_lists-time_zone_setting$NWE</td></tr>\n";


		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center>\n";
		echo "<br><b>STATUTS DANS CETTE LISTE:</b><br>\n";

		if ($SSexpanded_list_stats > 0)
			{
			echo "<TABLE width=700 cellspacing=3>\n";
			$dialable_total=0;
			$complete_total=0;
			$fSQL = '';
			$stmt="SELECT dial_statuses,local_call_time,lead_filter_id,drop_lockout_time,call_count_limit from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$dial_statuses =		$row[0];
			$local_call_time =		$row[1];
			$lead_filter_id =		$row[2];
			$drop_lockout_time =	$row[3];
			$call_count_limit =		$row[4];

			$stmt="SELECT lead_filter_sql from vicidial_lead_filters where lead_filter_id='$lead_filter_id' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);
			$filters_to_print = mysql_num_rows($rslt);
			if ($filters_to_print > 0) 
				{
				$rowx=mysql_fetch_row($rslt);
				$filterSQL = $rowx[0];
				$filterSQL = preg_replace("/\\\\/","",$filterSQL);
				$filterSQL = eregi_replace("^and|and$|^or|or$","",$filterSQL);
				if (strlen($filterSQL)>4)
					{$fSQL = "and $filterSQL";}
				else
					{$fSQL = '';}
				}
			echo "<tr><td>ETAT</td><td>NOM DU STATUT</td><td>APPELE</td><td>NON APPELE</td><td>DIALABLE</td><td>PENETRATION</td></tr>\n";
			}
		else
			{
			echo "<TABLE width=500 cellspacing=3>\n";
			echo "<tr><td>ETAT</td><td>NOM DU STATUT</td><td>APPELE</td><td>NON APPELE</td></tr>\n";
			}

		$leads_in_list = 0;
		$leads_in_list_N = 0;
		$leads_in_list_Y = 0;
		$stmt="SELECT status,called_since_last_reset,count(*) from vicidial_list where list_id='$list_id' group by status,called_since_last_reset order by status,called_since_last_reset;";
		if ($DB) {echo "$stmt\n";}
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);

		$o=0;
		$lead_list['count'] = 0;
		$lead_list['Y_count'] = 0;
		$lead_list['N_count'] = 0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			
			$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
			if ($rowx[1] == 'N') 
				{
				$since_reset = 'N';
				$since_resetX = 'Y';
				}
			else 
				{
				$since_reset = 'Y';
				$since_resetX = 'N';
				} 
			$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
			$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
			#If opposite side is not set, it may not in the future so give it a value of zero
			if (!isset($lead_list[$since_resetX][$rowx[0]])) 
				{
				$lead_list[$since_resetX][$rowx[0]]=0;
				}
			$o++;
			}
	 
		$o=0;
		if ($lead_list['count'] > 0)
			{
			while (list($dispo,) = each($lead_list[$since_reset]))
				{
				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}

				if ($dispo == 'CBHOLD')
					{
					$CLB="<a href=\"$PHP_SELF?ADD=811&list_id=$list_id\">";
					$CLE="</a>";
					}
				else
					{
					$CLB='';
					$CLE='';
					}
				if ($SSexpanded_list_stats > 0)
					{
					### call function to calculate dialable leads
					$single_status=1;
					$dial_statuses=" $dispo -";
					$camp_lists=$list_id;
					if ($statuses_complete_list[$dispo] == 'Y')
						{$Xdialable_count=0;}
					else
						{$Xdialable_count = dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL);}
					$dialable_total = ($dialable_total + $Xdialable_count);

					### get number of complete calls of this status for penetration calculations
					$Xcomplete_count = complete_leads($DB,$link,$dial_statuses,$camp_lists,$call_count_limit,$single_status,$campaign_id);
					$complete_total = ($complete_total + $Xcomplete_count);
					$dispo_total = ($lead_list['Y'][$dispo] + $lead_list['N'][$dispo]);
					if ( ($Xcomplete_count < 1) or ($dispo_total < 1) )
						{$complete_pct = "0";}
					else
						{
						$complete_pct = intval(($Xcomplete_count / $dispo_total) * 100);
						}

					echo "<tr $bgcolor><td><font size=1>$CLB$dispo$CLE</td><td><font size=1>$statuses_list[$dispo]</td><td><font size=1>".$lead_list['Y'][$dispo]."</td><td><font size=1>".$lead_list['N'][$dispo]." </td><td><font size=1>$Xdialable_count </td><td align=right><font size=1>$complete_pct% &nbsp; </td></tr>\n";
					}
				else
					{
					echo "<tr $bgcolor><td><font size=1>$CLB$dispo$CLE</td><td><font size=1>$statuses_list[$dispo]</td><td><font size=1>".$lead_list['Y'][$dispo]."</td><td><font size=1>".$lead_list['N'][$dispo]." </td></tr>\n";
					}
				$o++;
				}
			}

		if ($SSexpanded_list_stats > 0)
			{
			if ( ($complete_total < 1) or ($lead_list[count] < 1) )
				{$total_complete_pct = "0";}
			else
				{$total_complete_pct = intval(($complete_total / $lead_list[count]) * 100);}
			echo "<tr><td colspan=2><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td><td><font size=1> &nbsp; </td><td><font size=1> &nbsp; </td></tr>\n";
			echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td><td><font size=1>$dialable_total</td><td align=right><font size=1> $total_complete_pct% &nbsp; </td></tr>\n";
			}
		else
			{
			echo "<tr><td colspan=2><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
			echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";
			}
		echo "</table></center><br>\n";
		unset($lead_list);


		echo "<center>\n";
		echo "<br><b>ZONES DE TEMPS DANS CETTE LISTE:</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>GMT OFFSET NOW (heure locale)</td><td>APPELE</td><td>NON APPELE</td></tr>\n";

		$stmt="SELECT gmt_offset_now,called_since_last_reset,count(*) from vicidial_list where list_id='$list_id' group by gmt_offset_now,called_since_last_reset order by gmt_offset_now,called_since_last_reset;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);

		$o=0;
		$plus='+';
		$lead_list['count'] = 0;
		$lead_list['Y_count'] = 0;
		$lead_list['N_count'] = 0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			
			$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
			if ($rowx[1] == 'N') 
				{
				$since_reset = 'N';
				$since_resetX = 'Y';
				}
			else 
				{
				$since_reset = 'Y';
				$since_resetX = 'N';
				} 
			$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
			$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
			#If opposite side is not set, it may not in the future so give it a value of zero
			if (!isset($lead_list[$since_resetX][$rowx[0]])) 
				{
				$lead_list[$since_resetX][$rowx[0]]=0;
				}
			$o++;
			}

		if ($lead_list['count'] > 0)
			{
			while (list($tzone,) = each($lead_list[$since_reset]))
				{
				$LOCALzone=3600 * $tzone;
				$LOCALdate=gmdate("D j M Y H:i", time() + $LOCALzone);

				if ($tzone >= 0) {$DISPtzone = "$plus$tzone";}
				else {$DISPtzone = "$tzone";}
				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}

					echo "<tr $bgcolor><td><font size=1>".$DISPtzone." &nbsp; &nbsp; ($LOCALdate)</td><td><font size=1>".$lead_list['Y'][$tzone]."</td><td><font size=1>".$lead_list['N'][$tzone]."</td></tr>\n";
				}
			}

		echo "<tr><td><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
		echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=2 align=center><font size=1>$lead_list[count]</td></tr>\n";

		echo "</table></center><br>\n";
		unset($lead_list);


		echo "<center>\n";
		echo "<br><b>Guichet unique de cette liste:</b><br>\n";
		if ($SSuser_territories_active > 0)
			{
			### if territories are active in the system then allow for selected-territory called-since-last-reset resetting
			echo "</form>\n";
			echo "<form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=411>\n";
			echo "<input type=hidden name=DB value=$DB>\n";
			echo "<input type=hidden name=stage value=territory_reset>\n";
			echo "<input type=hidden name=list_id value=\"$list_id\">\n";
			echo "<TABLE width=600 cellspacing=3>\n";
			echo "<tr><td>OWNER</td><td>APPELE</td><td>NON APPELE</td><td align=center>RESET</td></tr>\n";

			$leads_in_list = 0;
			$leads_in_list_N = 0;
			$leads_in_list_Y = 0;
			$stmt="SELECT owner,called_since_last_reset,count(*) from vicidial_list where list_id='$list_id' group by owner,called_since_last_reset order by owner,called_since_last_reset;";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$owners_to_print = mysql_num_rows($rslt);

			$o=0;
			$lead_list['count'] = 0;
			$lead_list['Y_count'] = 0;
			$lead_list['N_count'] = 0;
			while ($owners_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				
				$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
				if ($rowx[1] == 'N') 
					{
					$since_reset = 'N';
					$since_resetX = 'Y';
					}
				else 
					{
					$since_reset = 'Y';
					$since_resetX = 'N';
					} 
				$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
				$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
				#If opposite side is not set, it may not in the future so give it a value of zero
				if (!isset($lead_list[$since_resetX][$rowx[0]])) 
					{
					$lead_list[$since_resetX][$rowx[0]]=0;
					}
				$o++;
				}
		 
			$o=0;
			if ($lead_list['count'] > 0)
				{
				while (list($owner,) = each($lead_list[$since_reset]))
					{
					if (eregi("1$|3$|5$|7$|9$", $o))
						{$bgcolor='bgcolor="#B9CBFD"';} 
					else
						{$bgcolor='bgcolor="#9BB9FB"';}

					$CLB='';
					$CLE='';

					echo "<tr $bgcolor><td><font size=1><a href=\"./user_territories.php?action=MODIFY_TERRITORY&territory=$owner\">$CLB$owner$CLE</a></td><td><font size=1>".$lead_list['Y'][$owner]."</td><td><font size=1>".$lead_list['N'][$owner]." </td><td align=center><input type=\"checkbox\" name=\"territory_reset[]\" value=\"$owner\"></td></tr>\n";
					$o++;
					}
				}

			echo "<tr><td><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td>\n";
			echo "<td rowspan=2 align=center><input type=submit value=\"VALIDER\"></td></tr>\n";
			echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";
			echo "</form>\n";

			}
		else
			{
			echo "<TABLE width=500 cellspacing=3>\n";
			echo "<tr><td>OWNER</td><td>APPELE</td><td>NON APPELE</td></tr>\n";

			$leads_in_list = 0;
			$leads_in_list_N = 0;
			$leads_in_list_Y = 0;
			$stmt="SELECT owner,called_since_last_reset,count(*) from vicidial_list where list_id='$list_id' group by owner,called_since_last_reset order by owner,called_since_last_reset;";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$owners_to_print = mysql_num_rows($rslt);

			$o=0;
			$lead_list['count'] = 0;
			$lead_list['Y_count'] = 0;
			$lead_list['N_count'] = 0;
			while ($owners_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				
				$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
				if ($rowx[1] == 'N') 
					{
					$since_reset = 'N';
					$since_resetX = 'Y';
					}
				else 
					{
					$since_reset = 'Y';
					$since_resetX = 'N';
					} 
				$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
				$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
				#If opposite side is not set, it may not in the future so give it a value of zero
				if (!isset($lead_list[$since_resetX][$rowx[0]])) 
					{
					$lead_list[$since_resetX][$rowx[0]]=0;
					}
				$o++;
				}
		 
			$o=0;
			if ($lead_list['count'] > 0)
				{
				while (list($owner,) = each($lead_list[$since_reset]))
					{
					if (eregi("1$|3$|5$|7$|9$", $o))
						{$bgcolor='bgcolor="#B9CBFD"';} 
					else
						{$bgcolor='bgcolor="#9BB9FB"';}

					$CLB='';
					$CLE='';

					echo "<tr $bgcolor><td><font size=1>$CLB$owner$CLE</td><td><font size=1>".$lead_list['Y'][$owner]."</td><td><font size=1>".$lead_list['N'][$owner]." </td></tr>\n";
					$o++;
					}
				}

			echo "<tr><td><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
			echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";
			}
		echo "</table></center><br>\n";
		unset($lead_list);


		echo "<center>\n";
		echo "<br><b>LES RANGS DANS CETTE LISTE:</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>RANK</td><td>APPELE</td><td>NON APPELE</td></tr>\n";

		$leads_in_list = 0;
		$leads_in_list_N = 0;
		$leads_in_list_Y = 0;
		$stmt="SELECT rank,called_since_last_reset,count(*) from vicidial_list where list_id='$list_id' group by rank,called_since_last_reset order by rank,called_since_last_reset;";
		if ($DB) {echo "$stmt\n";}
		$rslt=mysql_query($stmt, $link);
		$ranks_to_print = mysql_num_rows($rslt);

		$o=0;
		$lead_list['count'] = 0;
		$lead_list['Y_count'] = 0;
		$lead_list['N_count'] = 0;
		while ($ranks_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			
			$lead_list['count'] = ($lead_list['count'] + $rowx[2]);
			if ($rowx[1] == 'N') 
				{
				$since_reset = 'N';
				$since_resetX = 'Y';
				}
			else 
				{
				$since_reset = 'Y';
				$since_resetX = 'N';
				} 
			$lead_list[$since_reset][$rowx[0]] = ($lead_list[$since_reset][$rowx[0]] + $rowx[2]);
			$lead_list[$since_reset.'_count'] = ($lead_list[$since_reset.'_count'] + $rowx[2]);
			#If opposite side is not set, it may not in the future so give it a value of zero
			if (!isset($lead_list[$since_resetX][$rowx[0]])) 
				{
				$lead_list[$since_resetX][$rowx[0]]=0;
				}
			$o++;
			}
	 
		$o=0;
		if ($lead_list['count'] > 0)
			{
			while (list($rank,) = each($lead_list[$since_reset]))
				{
				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}

				$CLB='';
				$CLE='';

				echo "<tr $bgcolor><td><font size=1>$CLB$rank$CLE</td><td><font size=1>".$lead_list['Y'][$rank]."</td><td><font size=1>".$lead_list['N'][$rank]." </td></tr>\n";
				$o++;
				}
			}

		echo "<tr><td><font size=1>SOUS TOTAUX</td><td><font size=1>$lead_list[Y_count]</td><td><font size=1>$lead_list[N_count]</td></tr>\n";
		echo "<tr bgcolor=\"#9BB9FB\"><td><font size=1>TOTAL</td><td colspan=3 align=center><font size=1>$lead_list[count]</td></tr>\n";

		echo "</table></center><br>\n";
		unset($lead_list);


		$leads_in_list = 0;
		$leads_in_list_N = 0;
		$leads_in_list_Y = 0;
		$stmt="SELECT status, if(called_count >= 100, 100, called_count), count(*) from vicidial_list where list_id='$list_id' group by status, if(called_count >= 100, 100, called_count) order by status,called_count;";
		$rslt=mysql_query($stmt, $link);
		$status_called_to_print = mysql_num_rows($rslt);

		$o=0;
		$sts=0;
		$first_row=1;
		$all_called_first=1000;
		$all_called_last=0;
		while ($status_called_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$leads_in_list = ($leads_in_list + $rowx[2]);
			$count_statuses[$o]			= $rowx[0];
			$count_called[$o]			= $rowx[1];
			$count_count[$o]			= $rowx[2];
			$all_called_count[$rowx[1]] = ($all_called_count[$rowx[1]] + $rowx[2]);

			if ( (strlen($status[$sts]) < 1) or ($status[$sts] != "$rowx[0]") )
				{
				if ($first_row) {$first_row=0;}
				else {$sts++;}
				$status[$sts] = "$rowx[0]";
				$status_called_first[$sts] = "$rowx[1]";
				if ($status_called_first[$sts] < $all_called_first) {$all_called_first = $status_called_first[$sts];}
				}
			$leads_in_sts[$sts] = ($leads_in_sts[$sts] + $rowx[2]);
			$status_called_last[$sts] = "$rowx[1]";
			if ($status_called_last[$sts] > $all_called_last) {$all_called_last = $status_called_last[$sts];}

			$o++;
			}


		echo "<center>\n";
		echo "<br><b>NOMBRE D'APPELES DANS CETTE LISTE:</b><br>\n";
		echo "<TABLE width=500 cellspacing=1>\n";
		echo "<tr><td align=left><font size=1>ETAT</td><td align=center><font size=1>NOM DU STATUT</td>";
		$first = $all_called_first;
		while ($first <= $all_called_last)
			{
			if (eregi("1$|3$|5$|7$|9$", $first)) {$AB='bgcolor="#AFEEEE"';} 
			else{$AB='bgcolor="#E0FFFF"';}
			if ($first >= 100) {$Fplus='+';}
			else {$Fplus='';}
			echo "<td align=center $AB><font size=1>$first$Fplus</td>";
			$first++;
			}
		echo "<td align=center><font size=1>SOUS TOTAL</td></tr>\n";

		$sts=0;
		$statuses_called_to_print = count($status);
		while ($statuses_called_to_print > $sts) 
			{
			$Pstatus = $status[$sts];
			if (eregi("1$|3$|5$|7$|9$", $sts))
				{$bgcolor='bgcolor="#B9CBFD"';   $AB='bgcolor="#9BB9FB"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';   $AB='bgcolor="#B9CBFD"';}
		#	echo "$status[$sts]|$status_called_first[$sts]|$status_called_last[$sts]|$leads_in_sts[$sts]|\n";
		#	echo "$status[$sts]|";
			echo "<tr $bgcolor><td><font size=1>$Pstatus</td><td><font size=1>$statuses_list[$Pstatus]</td>";

			$first = $all_called_first;
			while ($first <= $all_called_last)
				{
				if (eregi("1$|3$|5$|7$|9$", $sts))
					{
					if (eregi("1$|3$|5$|7$|9$", $first)) {$AB='bgcolor="#9BB9FB"';} 
					else{$AB='bgcolor="#B9CBFD"';}
					}
				else
					{
					if (eregi("0$|2$|4$|6$|8$", $first)) {$AB='bgcolor="#9BB9FB"';} 
					else{$AB='bgcolor="#B9CBFD"';}
					}

				$called_printed=0;
				$o=0;
				while ($status_called_to_print > $o) 
					{
					if ( ($count_statuses[$o] == "$Pstatus") and ($count_called[$o] == "$first") )
						{
						$called_printed++;
						echo "<td $AB><font size=1> $count_count[$o]</td>";
						}

					$o++;
					}
				if (!$called_printed) 
					{echo "<td $AB><font size=1> &nbsp;</td>";}
				$first++;
				}
			echo "<td><font size=1>$leads_in_sts[$sts]</td></tr>\n\n";

			$sts++;
			}

		echo "<tr><td align=center colspan=2><b><font size=1>TOTAL</td>";
		$first = $all_called_first;
		while ($first <= $all_called_last)
			{
			if (eregi("1$|3$|5$|7$|9$", $first)) {$AB='bgcolor="#AFEEEE"';} 
			else{$AB='bgcolor="#E0FFFF"';}
			echo "<td align=center $AB><b><font size=1>$all_called_count[$first]</td>";
			$first++;
			}
		echo "<td align=center><b><font size=1>$leads_in_list</td></tr>\n";

		echo "</table></center><br>\n";





		echo "<center><b>\n";

		if ($SScustom_fields_enabled > 0)
			{
			$stmt="SELECT count(*) from vicidial_lists_fields where list_id='$list_id';";
			$rslt=mysql_query($stmt, $link);
			$rowx=mysql_fetch_row($rslt);

			echo "<br><br><a href=\"./admin_lists_custom.php?action=MODIFY_CUSTOM_FIELDS&list_id=$list_id\">Les champs personnalisés définis pour cette liste: $rowx[0]</a><BR>\n";
			}

		echo "<br><br><a href=\"$PHP_SELF?ADD=811&list_id=$list_id\">Cliquez ici pour voir tous les CallBack Détient dans cette liste</a><BR>\n";
		echo "<br><br><a href=\"./list_download.php?list_id=$list_id\">Cliquez ici pour télécharger la liste</a><BR><BR>\n";

		if ($LOGdelete_lists > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=511&list_id=$list_id\">SUPPRIMER CETTE LISTE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=LISTS&stage=$list_id\">Cliquez ici pour voir les changements d'administration à cette liste</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################
# ADD=3111 modify in-group info in the system
######################

if ($ADD==3111)
	{
	if ($LOGmodify_ingroups==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3111&group_id=$group_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT group_id,group_name,group_color,active,web_form_address,voicemail_ext,next_agent_call,fronter_display,ingroup_script,get_call_launch,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,drop_call_seconds,drop_action,drop_exten,call_time_id,after_hours_action,after_hours_message_filename,after_hours_exten,after_hours_voicemail,welcome_message_filename,moh_context,onhold_prompt_filename,prompt_interval,agent_alert_exten,agent_alert_delay,default_xfer_group,queue_priority,drop_inbound_group,ingroup_recording_override,ingroup_rec_filename,afterhours_xfer_group,qc_enabled,qc_statuses,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,play_place_in_line,play_estimate_hold_time,hold_time_option,hold_time_option_seconds,hold_time_option_exten,hold_time_option_voicemail,hold_time_option_xfer_group,hold_time_option_callback_filename,hold_time_option_callback_list_id,hold_recall_xfer_group,no_delay_call_route,play_welcome_message,answer_sec_pct_rt_stat_one,answer_sec_pct_rt_stat_two,default_group_alias,no_agent_no_queue,no_agent_action,no_agent_action_value,web_form_address_two,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,ignore_list_script_override,extension_appended_cidname,uniqueid_status_display,uniqueid_status_prefix,hold_time_option_minimum,hold_time_option_press_filename,hold_time_option_callmenu,onhold_prompt_no_block,onhold_prompt_seconds,hold_time_option_no_block,hold_time_option_prompt_seconds,hold_time_second_option,hold_time_third_option,wait_hold_option_priority,wait_time_option,wait_time_second_option,wait_time_third_option,wait_time_option_seconds,wait_time_option_exten,wait_time_option_voicemail,wait_time_option_xfer_group,wait_time_option_callmenu,wait_time_option_callback_filename,wait_time_option_callback_list_id,wait_time_option_press_filename,wait_time_option_no_block,wait_time_option_prompt_seconds,timer_action_destination,calculate_estimated_hold_seconds,add_lead_url,eht_minimum_prompt_filename, eht_minimum_prompt_no_block,eht_minimum_prompt_seconds,on_hook_ring_time,na_call_url,on_hook_cid,group_calldate,action_xfer_cid,drop_callmenu,after_hours_callmenu,user_group,max_calls_method,max_calls_count,max_calls_action from vicidial_inbound_groups where group_id='$group_id' $LOGadmin_viewable_groupsSQL;";

		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$group_name =				$row[1];
		$group_color =				$row[2];
		$active =					$row[3];
		$web_form_address =			stripslashes($row[4]);
		$voicemail_ext =			$row[5];
		$next_agent_call =			$row[6];
		$fronter_display =			$row[7];
		$script_id =				$row[8];
		$get_call_launch =			$row[9];
		$xferconf_a_dtmf =			$row[10];
		$xferconf_a_number =		$row[11];
		$xferconf_b_dtmf =			$row[12];
		$xferconf_b_number =		$row[13];
		$drop_call_seconds =		$row[14];
		$drop_action =				$row[15];
		$drop_exten =				$row[16];
		$call_time_id =				$row[17];
		$after_hours_action =		$row[18];
		$after_hours_message_filename =	$row[19];
		$after_hours_exten =		$row[20];
		$after_hours_voicemail =	$row[21];
		$welcome_message_filename =	$row[22];
		$moh_context =				$row[23];
		$onhold_prompt_filename =	$row[24];
		$prompt_interval =			$row[25];
		$agent_alert_exten =		$row[26];
		$agent_alert_delay =		$row[27];
		$default_xfer_group =		$row[28];
		$queue_priority =			$row[29];
		$drop_inbound_group =		$row[30];
		$ingroup_recording_override = $row[31];
		$ingroup_rec_filename =		$row[32];
		$afterhours_xfer_group =	$row[33];
		$qc_enabled =				$row[34];
		$qc_statuses =				$row[35];
		$qc_shift_id =				$row[36];
		$qc_get_record_launch =		$row[37];
		$qc_show_recording =		$row[38];
		$qc_web_form_address =		stripslashes($row[39]);
		$qc_script =				$row[40];
		$play_place_in_line = 		$row[41];
		$play_estimate_hold_time = 	$row[42];
		$hold_time_option = 		$row[43];
		$hold_time_option_seconds = $row[44];
		$hold_time_option_exten = 	$row[45];
		$hold_time_option_voicemail = 	$row[46];
		$hold_time_option_xfer_group = 	$row[47];
		$hold_time_option_callback_filename =	$row[48];
		$hold_time_option_callback_list_id = 	$row[49];
		$hold_recall_xfer_group = 	$row[50];
		$no_delay_call_route = 		$row[51];
		$play_welcome_message = 	$row[52];
		$answer_sec_pct_rt_stat_one =	$row[53];
		$answer_sec_pct_rt_stat_two =	$row[54];
		$default_group_alias =		$row[55];
		$no_agent_no_queue =		$row[56];
		$no_agent_action =			$row[57];
		$no_agent_action_value =	$row[58];
		$web_form_address_two =		stripslashes($row[59]);
		$timer_action =				$row[60];
		$timer_action_message =		$row[61];
		$timer_action_seconds =		$row[62];
		$start_call_url =			$row[63];
		$dispo_call_url =			$row[64];
		$xferconf_c_number =		$row[65];
		$xferconf_d_number =		$row[66];
		$xferconf_e_number =		$row[67];
		$ignore_list_script_override = $row[68];
		$extension_appended_cidname = $row[69];
		$uniqueid_status_display =	$row[70];
		$uniqueid_status_prefix =	$row[71];
		$hold_time_option_minimum = $row[72];
		$hold_time_option_press_filename = $row[73];
		$hold_time_option_callmenu = $row[74];
		$onhold_prompt_no_block =	$row[75];
		$onhold_prompt_seconds =	$row[76];
		$hold_time_option_no_block = $row[77];
		$hold_time_option_prompt_seconds =	$row[78];
		$hold_time_second_option =			$row[79];
		$hold_time_third_option =			$row[80];
		$wait_hold_option_priority =		$row[81];
		$wait_time_option =					$row[82];
		$wait_time_second_option =			$row[83];
		$wait_time_third_option =			$row[84];
		$wait_time_option_seconds =			$row[85];
		$wait_time_option_exten =			$row[86];
		$wait_time_option_voicemail =		$row[87];
		$wait_time_option_xfer_group =		$row[88];
		$wait_time_option_callmenu =		$row[89];
		$wait_time_option_callback_filename =	$row[90];
		$wait_time_option_callback_list_id =	$row[91];
		$wait_time_option_press_filename =	$row[92];
		$wait_time_option_no_block =		$row[93];
		$wait_time_option_prompt_seconds =	$row[94];
		$timer_action_destination =			$row[95];
		$calculate_estimated_hold_seconds = $row[96];
		$add_lead_url =						$row[97];
		$eht_minimum_prompt_filename =		$row[98];
		$eht_minimum_prompt_no_block =		$row[99];
		$eht_minimum_prompt_seconds =		$row[100];
		$on_hook_ring_time =				$row[101];
		$na_call_url =						$row[102];
		$on_hook_cid =						$row[103];
		$group_calldate =					$row[104];
		$action_xfer_cid =					$row[105];
		$drop_callmenu =					$row[106];
		$after_hours_callmenu =				$row[107];
		$user_group =						$row[108];
		$max_calls_method =					$row[109];
		$max_calls_count =					$row[110];
		$max_calls_action =					$row[111];

		##### get callmenu listings for dynamic pulldown
		$stmt="SELECT menu_id,menu_name from vicidial_call_menu $whereLOGadmin_viewable_groupsSQL order by menu_id;";
		$rslt=mysql_query($stmt, $link);
		$Xmenus_to_print = mysql_num_rows($rslt);
		$o=0;
		$Xmenuslist='';
		$Wmenuslist='';
		while ($Xmenus_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xmenuslist .= "<option ";
			$Wmenuslist .= "<option ";
			if ($hold_time_option_callmenu == "$rowx[0]") 
				{
				$Xmenuslist .= "SELECTED ";
				$Xmenus_selected++;
				}
			if ($wait_time_option_callmenu == "$rowx[0]") 
				{
				$Wmenuslist .= "SELECTED ";
				$Wmenus_selected++;
				}
			$Xmenuslist .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$Wmenuslist .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		if ($Xmenus_selected < 1) 
			{$Xmenuslist .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		if ($Wmenus_selected < 1) 
			{$Wmenuslist .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}


		##### get in-groups listings for dynamic pulldown
		$stmt="SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') $LOGadmin_viewable_groupsSQL order by group_id;";
		$rslt=mysql_query($stmt, $link);
		$Xgroups_to_print = mysql_num_rows($rslt);
		$Xgroups_menu='';
		$Xgroups_selected=0;
		$Dgroups_menu='';
		$Dgroups_selected=0;
		$Agroups_menu='';
		$Agroups_selected=0;
		$Hgroups_menu='';
		$Hgroups_selected=0;
		$Wgroups_menu='';
		$Wgroups_selected=0;
		$Tgroups_menu='';
		$Tgroups_selected=0;
		$o=0;
		while ($Xgroups_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xgroups_menu .= "<option ";
			$Dgroups_menu .= "<option ";
			$Agroups_menu .= "<option ";
			$Tgroups_menu .= "<option ";
			$Wgroups_menu .= "<option ";
			$Hgroups_menu .= "<option ";
			if ($default_xfer_group == "$rowx[0]") 
				{
				$Xgroups_menu .= "SELECTED ";
				$Xgroups_selected++;
				}
			if ($drop_inbound_group == "$rowx[0]") 
				{
				$Dgroups_menu .= "SELECTED ";
				$Dgroups_selected++;
				}
			if ($afterhours_xfer_group == "$rowx[0]") 
				{
				$Agroups_menu .= "SELECTED ";
				$Agroups_selected++;
				}
			if ($hold_time_option_xfer_group == "$rowx[0]") 
				{
				$Tgroups_menu .= "SELECTED ";
				$Tgroups_selected++;
				}
			if ($wait_time_option_xfer_group == "$rowx[0]") 
				{
				$Wgroups_menu .= "SELECTED ";
				$Wgroups_selected++;
				}
			if ($hold_recall_xfer_group == "$rowx[0]") 
				{
				$Hgroups_menu .= "SELECTED ";
				$Hgroups_selected++;
				}
			$Xgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$Dgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			if ($group_id!=$rowx[0])
				{
				$Agroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$Tgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$Wgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$Hgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				}
			$o++;
			}
		if ($Xgroups_selected < 1) 
			{$Xgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Xgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($Dgroups_selected < 1) 
			{$Dgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Dgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($Agroups_selected < 1) 
			{$Agroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Agroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($Tgroups_selected < 1) 
			{$Tgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Tgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($Wgroups_selected < 1) 
			{$Wgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Wgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($Hgroups_selected < 1) 
			{$Hgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Hgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}


		echo "<br>MODIFIER UN ENREGISTREMENT DE GROUPES: $row[0]<form action=$PHP_SELF method=POST name=admin_form id=admin_form>\n";
		echo "<input type=hidden name=ADD value=4111>\n";
		echo "<input type=hidden name=group_id value=\"$row[0]\">\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=stage value=\"VALIDER\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID du groupe: </td><td align=left><b>$row[0]</b>$NWB#vicidial_inbound_groups-group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du groupe: </td><td align=left><input type=text name=group_name size=30 maxlength=30 value=\"$row[1]\">$NWB#vicidial_inbound_groups-group_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Couleur du groupe: </td><td align=left bgcolor=\"$row[2]\" id=\"group_color_td\"><input type=text name=group_color size=7 maxlength=7 value=\"$row[2]\">$NWB#vicidial_inbound_groups-group_color$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$active</option></select>$NWB#vicidial_inbound_groups-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>En-Groupe Calldate: </td><td align=left>$group_calldate$NWB#vicidial_inbound_groups-group_calldate$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($group_id,'8','in-group',$link,'total_calls','call count',1);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_inbound_groups-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web: </td><td align=left><input type=text name=web_form_address size=70 maxlength=9999 value=\"$web_form_address\">$NWB#vicidial_inbound_groups-web_form_address$NWE</td></tr>\n";
		if ($SSenable_second_webform > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Formulaire Web Two: </td><td align=left><input type=text name=web_form_address_two size=70 maxlength=9999 value=\"$web_form_address_two\">$NWB#vicidial_inbound_groups-web_form_address$NWE</td></tr>\n";
			}
		echo "<tr bgcolor=#B6D3FC><td align=right>Appeler l'agent suivant : </td><td align=left><select size=1 name=next_agent_call><option >random</option><option>oldest_call_start</option><option>oldest_call_finish</option><option>oldest_inbound_call_start</option><option>oldest_inbound_call_finish</option><option>overall_user_level</option><option>inbound_group_rank</option><option>campaign_rank</option><option>ingroup_grade_random</option><option>campaign_grade_random</option><option>fewest_calls</option><option>fewest_calls_campaign</option><option>longest_wait_time</option><option>ring_all</option><option SELECTED>$next_agent_call</option></select>$NWB#vicidial_inbound_groups-next_agent_call$NWE</td></tr>\n";

		echo "<tr bgcolor=#BDFFBD><td align=right>File d'attente de priorité:</td><td align=left><select size=1 name=queue_priority>\n";
		$n=99;
		while ($n>=-99)
			{
			$dtl = 'Even';
			if ($n<0) {$dtl = 'Lower';}
			if ($n>0) {$dtl = 'Higher';}
			if ($n == $queue_priority) 
				{echo "<option SELECTED value=\"$n\">$n - $dtl</option>\n";}
			else
				{echo "<option value=\"$n\">$n - $dtl</option>\n";}
			$n--;
			}
		echo "</select> $NWB#vicidial_inbound_groups-queue_priority$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Temps Ring On-Hook: </td><td align=left><input type=text name=on_hook_ring_time size=5 maxlength=4 value=\"$on_hook_ring_time\">$NWB#vicidial_inbound_groups-on_hook_ring_time$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>On-Hook CID: </td><td align=left><select size=1 name=on_hook_cid><option selected>GENERIC</option><option>INGROUP</option><option>CUSTOMER_PHONE</option><option>CUSTOMER_PHONE_RINGAGENT</option><option>CUSTOMER_PHONE_INGROUP</option><option selected>$on_hook_cid</option></select>$NWB#vicidial_inbound_groups-on_hook_cid$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Affichage de l'enseigne: </td><td align=left><select size=1 name=fronter_display><option>Y</option><option>N</option><option SELECTED>$fronter_display</option></select>$NWB#vicidial_inbound_groups-fronter_display$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">Script</a>: </td><td align=left><select size=1 name=script_id>\n";
		echo "$scripts_list";
		echo "<option selected value=\"$script_id\">$script_id - $scriptname_list[$script_id]</option>\n";
		echo "</select>$NWB#vicidial_inbound_groups-ingroup_script$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Ignorer Override Script Liste: </td><td align=left><select size=1 name=ignore_list_script_override><option>Y</option><option>N</option><option SELECTED>$ignore_list_script_override</option></select>$NWB#vicidial_inbound_groups-ignore_list_script_override$NWE</td></tr>\n";

		$eswHTML=''; $cfwHTML='';
		if ($SSenable_second_webform > 0)
			{$eswHTML = '<option>WEBFORMTWO</option>';}
		if ($SScustom_fields_enabled > 0)
			{$cfwHTML = '<option>FORM</option>';}
		echo "<tr bgcolor=#B6D3FC><td align=right>Lancer l'appel: </td><td align=left><select size=1 name=get_call_launch><option selected>NONE</option><option>SCRIPT</option><option>WEBFORM</option>$eswHTML$cfwHTML<option selected>$get_call_launch</option></select>$NWB#vicidial_inbound_groups-get_call_launch$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>DTMF Transfert-Conf 1: </td><td align=left><input type=text name=xferconf_a_dtmf size=20 maxlength=50 value=\"$xferconf_a_dtmf\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 1: </td><td align=left><input type=text name=xferconf_a_number size=20 maxlength=50 value=\"$xferconf_a_number\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>DTMF Transfert-Conf 2: </td><td align=left><input type=text name=xferconf_b_dtmf size=20 maxlength=50 value=\"$xferconf_b_dtmf\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 2: </td><td align=left><input type=text name=xferconf_b_number size=20 maxlength=50 value=\"$xferconf_b_number\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 3: </td><td align=left><input type=text name=xferconf_c_number size=20 maxlength=50 value=\"$xferconf_c_number\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 4: </td><td align=left><input type=text name=xferconf_d_number size=20 maxlength=50 value=\"$xferconf_d_number\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>numéro de Transfer-Conf 5: </td><td align=left><input type=text name=xferconf_e_number size=20 maxlength=50 value=\"$xferconf_e_number\">$NWB#vicidial_inbound_groups-xferconf_a_dtmf$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Minuterie d-action: </td><td align=left><select size=1 name=timer_action><option selected>NONE</option><option>D1_DIAL</option><option>D2_DIAL</option><option>D3_DIAL</option><option>D4_DIAL</option><option>D5_DIAL</option><option>D1_DIAL_QUIET</option><option>D2_DIAL_QUIET</option><option>D3_DIAL_QUIET</option><option>D4_DIAL_QUIET</option><option>D5_DIAL_QUIET</option><option>MESSAGE_ONLY</option><option>WEBFORM</option>$eswHTML<option>HANGUP</option><option>CALLMENU</option><option>EXTENSION</option><option>IN_GROUP</option><option selected>$timer_action</option></select>$NWB#vicidial_inbound_groups-timer_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Minuterie d-action Message: </td><td align=left><input type=text name=timer_action_message size=50 maxlength=255 value=\"$timer_action_message\">$NWB#vicidial_inbound_groups-timer_action_message$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Minuterie d-action Seconds: </td><td align=left><input type=text name=timer_action_seconds size=10 maxlength=10 value=\"$timer_action_seconds\">$NWB#vicidial_inbound_groups-timer_action_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Destination action minuterie: </td><td align=left><input type=text name=timer_action_destination size=25 maxlength=30 value=\"$timer_action_destination\">$NWB#vicidial_inbound_groups-timer_action_destination$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Temps avant abandon de l'appel: </td><td align=left><input type=text name=drop_call_seconds size=5 maxlength=4 value=\"$drop_call_seconds\">$NWB#vicidial_inbound_groups-drop_call_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Drop d'action:</td><td align=left><select size=1 name=drop_action><option>HANGUP</option><option>MESSAGE</option><option>VOICEMAIL</option><option>IN_GROUP</option><option>CALLMENU</option><option SELECTED>$drop_action</option></select>$NWB#vicidial_inbound_groups-drop_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Extension d'abandon: </td><td align=left><input type=text name=drop_exten size=10 maxlength=20 value=\"$drop_exten\">$NWB#vicidial_inbound_groups-drop_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Boîte vocale: </td><td align=left><input type=text name=voicemail_ext id=voicemail_ext size=12 maxlength=10 value=\"$voicemail_ext\"> <a href=\"javascript:launch_vm_chooser('voicemail_ext','vm',500);\">voicemail chooser</a>$NWB#vicidial_inbound_groups-voicemail_ext$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right><a href=\"$PHP_SELF?ADD=3111&group_id=$drop_inbound_group\">Drop Transfer Group:</a> </td><td align=left><select size=1 name=drop_inbound_group>";
		echo "$Dgroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-drop_inbound_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$drop_callmenu\">Menu déroulant Appel:</a></td><td align=left><select size=1 name=drop_callmenu id=drop_callmenu>$call_menu_list<option SELECTED>$drop_callmenu</option></select>$NWB#vicidial_inbound_groups-drop_callmenu$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$call_time_id\">Temps D'Appel :</a></td><td align=left><select size=1 name=call_time_id>\n";
		echo "$call_times_list";
		echo "<option selected value=\"$call_time_id\">$call_time_id - $call_timename_list[$call_time_id]</option>\n";
		echo "</select>$NWB#vicidial_inbound_groups-call_time_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Transfert d'action CID: </td><td align=left><input type=text name=action_xfer_cid size=12 maxlength=18 value=\"$action_xfer_cid\">$NWB#vicidial_inbound_groups-action_xfer_cid$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Après Action D'Heures :</td><td align=left><select size=1 name=after_hours_action><option>HANGUP</option><option>MESSAGE</option><option>EXTENSION</option><option>VOICEMAIL</option><option>IN_GROUP</option><option>CALLMENU</option><option SELECTED>$after_hours_action</option></select>$NWB#vicidial_inbound_groups-after_hours_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Après Nom de fichier De Message D'Heures :</td><td align=left><input type=text name=after_hours_message_filename id=after_hours_message_filename size=50 maxlength=255 value=\"$after_hours_message_filename\"> <a href=\"javascript:launch_chooser('after_hours_message_filename','date',600);\">audio chooser</a> $NWB#vicidial_inbound_groups-after_hours_message_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Après Prolongation D'Heures :</td><td align=left><input type=text name=after_hours_exten size=10 maxlength=20 value=\"$after_hours_exten\">$NWB#vicidial_inbound_groups-after_hours_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Après Des Heures Boîte vocale :</td><td align=left><input type=text name=after_hours_voicemail id=after_hours_voicemail size=12 maxlength=10 value=\"$after_hours_voicemail\"> <a href=\"javascript:launch_vm_chooser('after_hours_voicemail','vm',700);\">voicemail chooser</a>$NWB#vicidial_inbound_groups-after_hours_voicemail$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3111&group_id=$afterhours_xfer_group\">After Hours Transfer Group:</a> </td><td align=left><select size=1 name=afterhours_xfer_group>";
		echo "$Agroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-afterhours_xfer_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$after_hours_callmenu\">After Hours Appel du menu:</a></td><td align=left><select size=1 name=after_hours_callmenu id=after_hours_callmenu>$call_menu_list<option SELECTED>$after_hours_callmenu</option></select>$NWB#vicidial_inbound_groups-after_hours_callmenu$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agents n Queueing: </td><td align=left><select size=1 name=no_agent_no_queue><option>Y</option><option>N</option><option>NO_PAUSED</option><option SELECTED>$no_agent_no_queue</option></select>$NWB#vicidial_inbound_groups-no_agent_no_queue$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Non Non Queue action de l-agent: </td><td align=left><select size=1 name=no_agent_action id=no_agent_action onChange=\"dynamic_call_action('no_agent_action','$no_agent_action','$no_agent_action_value','600');\"><option>CALLMENU</option><option>INGROUP</option><option>DID</option><option>MESSAGE</option><option>EXTENSION</option><option>VOICEMAIL</option><option SELECTED>$no_agent_action</option></select>$NWB#vicidial_inbound_groups-no_agent_no_queue$NWE\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>";
		echo "<span id=\"no_agent_action_value_span\" name=\"no_agent_action_value_span\">\n";

		if ($no_agent_action=='CALLMENU')
			{
			echo "<span name=no_agent_action_value_link id=no_agent_action_value_link>";
			echo "<a href=\"$PHP_SELF?ADD=3511&menu_id=$no_agent_action_value\">Appel du menu:</a>";
			echo "</span>";
			echo " <select size=1 name=no_agent_action_value id=no_agent_action_value onChange=\"dynamic_call_action_link('no_agent_action','CALLMENU');\">$call_menu_list<option SELECTED>$no_agent_action_value</option></select>\n";
			}
		if ($no_agent_action=='INGROUP')
			{
			if (strlen($no_agent_action_value) < 10)
				{$no_agent_action_value = 'SALESLINE,CID,LB,998,TESTCAMP,1';}
			$IGno_agent_action_value = explode(",",$no_agent_action_value);
			$IGgroup_id =		$IGno_agent_action_value[0];
			$IGhandle_method =	$IGno_agent_action_value[1];
			$IGsearch_method =	$IGno_agent_action_value[2];
			$IGlist_id =		$IGno_agent_action_value[3];
			$IGcampaign_id =	$IGno_agent_action_value[4];
			$IGphone_code =		$IGno_agent_action_value[5];
			echo "<span name=no_agent_action_value_link id=no_agent_action_value_link>";
			echo "<a href=\"$PHP_SELF?ADD=3111&group_id=$IGgroup_id\">In-Group:</a>";
			echo "</span>";
			echo " <select size=1 name=IGgroup_id_no_agent_action id=IGgroup_id_no_agent_action onChange=\"dynamic_call_action_link('IGgroup_id_no_agent_action','INGROUP');\">";
			echo "$ingroup_list<option SELECTED>$IGgroup_id</option></select>";
			echo " &nbsp; Manipuler Méthode: <select size=1 name=IGhandle_method_$j id=IGhandle_method_$j>";
			echo "$IGhandle_method_list<option SELECTED>$IGhandle_method</option></select>\n";
			echo "<BR>Méthode de recherche: <select size=1 name=IGsearch_method_$j id=IGsearch_method_$j>";
			echo "$IGsearch_method_list<option SELECTED>$IGsearch_method</option></select>\n";
			echo " &nbsp; ID de la liste: <input type=text size=5 maxlength=14 name=IGlist_id_$j id=IGlist_id_$j value=\"$IGlist_id\">";
			echo "<BR>ID de la campagne: <select size=1 name=IGcampaign_id_$j id=IGcampaign_id_$j>";
			echo "$IGcampaign_id_list<option SELECTED>$IGcampaign_id</option></select>\n";
			echo " &nbsp; Phone Code: <input type=text size=5 maxlength=14 name=IGphone_code_$j id=IGphone_code_$j value=\"$IGphone_code\">";
			}
		if ($no_agent_action=='DID')
			{
			$stmt="SELECT did_id from vicidial_inbound_dids where did_pattern='$no_agent_action_value';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$did_id =			$row[0];

			echo "<span name=no_agent_action_value_link id=no_agent_action_value_link>";
			echo "<a href=\"$PHP_SELF?ADD=3311&did_id=$did_id\">DID:</a>";
			echo "</span>";
			echo " <select size=1 name=no_agent_action_value id=no_agent_action_value onChange=\"dynamic_call_action_link('no_agent_action','DID');\">$did_list<option SELECTED>$no_agent_action_value</option></select>\n";
			}
		if ($no_agent_action=='MESSAGE')
			{
			if (strlen($no_agent_action_value) < 3)
				{$no_agent_action_value = 'nbdy-avail-to-take-call|vm-goodbye';}
			echo "fichier audio: <input type=text name=no_agent_action_value id=no_agent_action_value size=50 maxlength=255 value=\"$no_agent_action_value\"> <a href=\"javascript:launch_chooser('no_agent_action_value','date',600);\">audio chooser</a>\n";
			}
		if ($no_agent_action=='EXTENSION')
			{
			if (strlen($no_agent_action_value) < 3)
				{$no_agent_action_value = '8304,default';}
			$EXno_agent_action_value = explode(",",$no_agent_action_value);
			$EXextension =	$EXno_agent_action_value[0];
			$EXcontext =	$EXno_agent_action_value[1];
			echo "Extension:<input type=text name=EXextension_no_agent_action id=EXextension_no_agent_action size=20 maxlength=255 value=\"$EXextension\"> &nbsp; Context: <input type=text name=EXcontext_no_agent_action id=EXcontext_no_agent_action size=20 maxlength=255 value=\"$EXcontext\">\n";
			}
		if ($no_agent_action=='VOICEMAIL')
			{
			echo "Boîte vocale:<input type=text name=no_agent_action_value id=no_agent_action_value size=12 maxlength=10 value=\"$no_agent_action_value\"> <a href=\"javascript:launch_vm_chooser('no_agent_action_value','vm',700);\">voicemail chooser</a>\n";
			}

		echo "</span>
		<BR> &nbsp; </td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Max Appelle la méthode: </td><td align=left><select size=1 name=max_calls_method><option>TOTAL</option><option>IN_QUEUE</option><option>DISABLED</option><option SELECTED>$max_calls_method</option></select>$NWB#vicidial_inbound_groups-max_calls_method$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Max appelle le comte: </td><td align=left><input type=text name=max_calls_count id=max_calls_count size=6 maxlength=5 value=\"$max_calls_count\"> $NWB#vicidial_inbound_groups-max_calls_count$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Max Appels d'action: </td><td align=left><select size=1 name=max_calls_action><option>DROP</option><option>AFTERHOURS</option><option>NO_AGENT_NO_QUEUE</option><option SELECTED>$max_calls_action</option></select>$NWB#vicidial_inbound_groups-max_calls_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de fichier Bienvenu De Message :</td><td align=left><input type=text name=welcome_message_filename id=welcome_message_filename size=50 maxlength=255 value=\"$welcome_message_filename\"> <a href=\"javascript:launch_chooser('welcome_message_filename','date',800);\">audio chooser</a> $NWB#vicidial_inbound_groups-welcome_message_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Play Message de bienvenue:</td><td align=left><select size=1 name=play_welcome_message><option>ALWAYS</option><option>NEVER</option><option>IF_WAIT_ONLY</option><option>YES_UNLESS_NODELAY</option><option SELECTED>$play_welcome_message</option></select>$NWB#vicidial_inbound_groups-play_welcome_message$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Musique Sur Le Contexte De Prise :</td><td align=left><input type=text name=moh_context id=moh_context size=50 maxlength=50 value=\"$moh_context\"> <a href=\"javascript:launch_moh_chooser('moh_context','moh',800);\">moh chooser</a> $NWB#vicidial_inbound_groups-moh_context$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Sur Le Nom de fichier De Message de sollicitation De Prise :</td><td align=left><input type=text name=onhold_prompt_filename id=onhold_prompt_filename size=50 maxlength=255 value=\"$onhold_prompt_filename\"> <a href=\"javascript:launch_chooser('onhold_prompt_filename','date',800);\">audio chooser</a> $NWB#vicidial_inbound_groups-onhold_prompt_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Sur L'Intervalle De Message de sollicitation De Prise :</td><td align=left><input type=text name=prompt_interval size=5 maxlength=5 value=\"$prompt_interval\">$NWB#vicidial_inbound_groups-prompt_interval$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>En attente Demander Non Bloquer: </td><td align=left><select size=1 name=onhold_prompt_no_block><option>N</option><option>Y</option><option SELECTED>$onhold_prompt_no_block</option></select>$NWB#vicidial_inbound_groups-onhold_prompt_no_block$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>En attente secondes Prompt: </td><td align=left><input type=text name=onhold_prompt_seconds size=5 maxlength=5 value=\"$onhold_prompt_seconds\">$NWB#vicidial_inbound_groups-onhold_prompt_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Jouer en ligne Lieu:</td><td align=left><select size=1 name=play_place_in_line><option>Y</option><option>N</option><option SELECTED>$play_place_in_line</option></select>$NWB#vicidial_inbound_groups-play_place_in_line$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Hold estimée Play Time:</td><td align=left><select size=1 name=play_estimate_hold_time><option>Y</option><option>N</option><option SELECTED>$play_estimate_hold_time</option></select>$NWB#vicidial_inbound_groups-play_estimate_hold_time$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Calculer secondes Attente Estimation: </td><td align=left><input type=text name=calculate_estimated_hold_seconds size=5 maxlength=5 value=\"$calculate_estimated_hold_seconds\">$NWB#vicidial_inbound_groups-calculate_estimated_hold_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Estimation Tenez Nom minimum de temps: </td><td align=left><input type=text name=eht_minimum_prompt_filename id=eht_minimum_prompt_filename size=50 maxlength=255 value=\"$eht_minimum_prompt_filename\"> <a href=\"javascript:launch_chooser('eht_minimum_prompt_filename','date',800);\">audio chooser</a> $NWB#vicidial_inbound_groups-eht_minimum_prompt_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Estimation minimale Hold Time Demander Non Bloquer: </td><td align=left><select size=1 name=eht_minimum_prompt_no_block><option>N</option><option>Y</option><option SELECTED>$eht_minimum_prompt_no_block</option></select>$NWB#vicidial_inbound_groups-eht_minimum_prompt_no_block$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Estimation secondes Hold Time minimum Prompt: </td><td align=left><input type=text name=eht_minimum_prompt_seconds size=5 maxlength=5 value=\"$eht_minimum_prompt_seconds\">$NWB#vicidial_inbound_groups-eht_minimum_prompt_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Option Temps: </td><td align=left><select size=1 name=wait_time_option><option>NONE</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$wait_time_option</option></select>$NWB#vicidial_inbound_groups-wait_time_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Option Second Time: </td><td align=left><select size=1 name=wait_time_second_option><option>NONE</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$wait_time_second_option</option></select>$NWB#vicidial_inbound_groups-wait_time_second_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Option troisième fois: </td><td align=left><select size=1 name=wait_time_third_option><option>NONE</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$wait_time_third_option</option></select>$NWB#vicidial_inbound_groups-wait_time_third_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendez quelques secondes Option Temps: </td><td align=left><input type=text name=wait_time_option_seconds size=5 maxlength=5 value=\"$wait_time_option_seconds\">$NWB#vicidial_inbound_groups-wait_time_option_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Extension Option Temps: </td><td align=left><input type=text name=wait_time_option_exten size=20 maxlength=20 value=\"$wait_time_option_exten\">$NWB#vicidial_inbound_groups-wait_time_option_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$wait_time_option_callmenu\">Attendre Callmenu Option Temps</a>: </td><td align=left><select size=1 name=wait_time_option_callmenu>\n";
		echo "$Wmenuslist";
		echo "</select>$NWB#vicidial_inbound_groups-wait_time_option_callmenu$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre la messagerie vocale Option Temps: </td><td align=left><input type=text name=wait_time_option_voicemail id=wait_time_option_voicemail size=12 maxlength=10 value=\"$wait_time_option_voicemail\"> <a href=\"javascript:launch_vm_chooser('wait_time_option_voicemail','vm',1100);\">voicemail chooser</a> $NWB#vicidial_inbound_groups-wait_time_option_voicemail$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre transfert Option Temps En-Groupe: </td><td align=left><select size=1 name=wait_time_option_xfer_group>";
		echo "$Wgroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-wait_time_option_xfer_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Nom de presse Heure Option: </td><td align=left><input type=text name=wait_time_option_press_filename id=wait_time_option_press_filename size=50 maxlength=255 value=\"$wait_time_option_press_filename\"> <a href=\"javascript:launch_chooser('wait_time_option_press_filename','date',1200);\">audio chooser</a> $NWB#vicidial_inbound_groups-wait_time_option_press_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Appuyez sur Option No Time Bloquer: </td><td align=left><select size=1 name=wait_time_option_no_block><option>N</option><option>Y</option><option SELECTED>$wait_time_option_no_block</option></select>$NWB#vicidial_inbound_groups-wait_time_option_no_block$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Les temps d'attente secondes Appuyez sur Option Nom de fichier: </td><td align=left><input type=text name=wait_time_option_prompt_seconds size=5 maxlength=5 value=\"$wait_time_option_prompt_seconds\">$NWB#vicidial_inbound_groups-wait_time_option_prompt_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Option Time After Nom de presse: </td><td align=left><input type=text name=wait_time_option_callback_filename id=wait_time_option_callback_filename size=50 maxlength=255 value=\"$wait_time_option_callback_filename\"> <a href=\"javascript:launch_chooser('wait_time_option_callback_filename','date',1300);\">audio chooser</a> $NWB#vicidial_inbound_groups-wait_time_option_callback_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Attendre Option Temps liste de rappel ID: </td><td align=left><input type=text name=wait_time_option_callback_list_id size=14 maxlength=14 value=\"$wait_time_option_callback_list_id\">$NWB#vicidial_inbound_groups-wait_time_option_callback_list_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Attendre Tenez priorité Option: </td><td align=left><select size=1 name=wait_hold_option_priority><option>WAIT</option><option>BOTH</option><option SELECTED>$wait_hold_option_priority</option></select>$NWB#vicidial_inbound_groups-wait_hold_option_priority$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Estimation Option Temps de maintien: </td><td align=left><select size=1 name=hold_time_option><option>NONE</option><option>EXTENSION</option><option>CALL_MENU</option><option>VOICEMAIL</option><option>IN_GROUP</option><option>CALLERID_CALLBACK</option><option>DROP_ACTION</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$hold_time_option</option></select>$NWB#vicidial_inbound_groups-hold_time_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Tenez Option Second Time: </td><td align=left><select size=1 name=hold_time_second_option><option>NONE</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$hold_time_second_option</option></select>$NWB#vicidial_inbound_groups-hold_time_second_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Tenez Option troisième fois: </td><td align=left><select size=1 name=hold_time_third_option><option>NONE</option><option>PRESS_STAY</option><option>PRESS_VMAIL</option><option>PRESS_EXTEN</option><option>PRESS_CALLMENU</option><option>PRESS_CID_CALLBACK</option><option>PRESS_INGROUP</option><option SELECTED>$hold_time_third_option</option></select>$NWB#vicidial_inbound_groups-hold_time_third_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Option Seconds:</td><td align=left><input type=text name=hold_time_option_seconds size=5 maxlength=5 value=\"$hold_time_option_seconds\">$NWB#vicidial_inbound_groups-hold_time_option_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Tenez minimum Option Temps: </td><td align=left><input type=text name=hold_time_option_minimum size=5 maxlength=5 value=\"$hold_time_option_minimum\">$NWB#vicidial_inbound_groups-hold_time_option_minimum$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Option Extension:</td><td align=left><input type=text name=hold_time_option_exten size=20 maxlength=20 value=\"$hold_time_option_exten\">$NWB#vicidial_inbound_groups-hold_time_option_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$hold_time_option_callmenu\">Tenez Callmenu Option Temps</a>: </td><td align=left><select size=1 name=hold_time_option_callmenu>\n";
		echo "$Xmenuslist";
		echo "</select>$NWB#vicidial_inbound_groups-hold_time_option_callmenu$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Option de messagerie vocale:</td><td align=left><input type=text name=hold_time_option_voicemail id=hold_time_option_voicemail size=12 maxlength=10 value=\"$hold_time_option_voicemail\"> <a href=\"javascript:launch_vm_chooser('hold_time_option_voicemail','vm',1100);\">voicemail chooser</a> $NWB#vicidial_inbound_groups-hold_time_option_voicemail$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Option de transfert en groupe:</td><td align=left><select size=1 name=hold_time_option_xfer_group>";
		echo "$Tgroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-hold_time_option_xfer_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Tenez Nom de presse Heure Option: </td><td align=left><input type=text name=hold_time_option_press_filename id=hold_time_option_press_filename size=50 maxlength=255 value=\"$hold_time_option_press_filename\"> <a href=\"javascript:launch_chooser('hold_time_option_press_filename','date',1200);\">audio chooser</a> $NWB#vicidial_inbound_groups-hold_time_option_press_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Maintenez Appuyez sur Option No Time Bloquer: </td><td align=left><select size=1 name=hold_time_option_no_block><option>N</option><option>Y</option><option SELECTED>$hold_time_option_no_block</option></select>$NWB#vicidial_inbound_groups-hold_time_option_no_block$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Seconds Appuyez sur Option Nom de fichier: </td><td align=left><input type=text name=hold_time_option_prompt_seconds size=5 maxlength=5 value=\"$hold_time_option_prompt_seconds\">$NWB#vicidial_inbound_groups-hold_time_option_prompt_seconds$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Tenez Option Time After Nom de presse: </td><td align=left><input type=text name=hold_time_option_callback_filename id=hold_time_option_callback_filename size=50 maxlength=255 value=\"$hold_time_option_callback_filename\"> <a href=\"javascript:launch_chooser('hold_time_option_callback_filename','date',1300);\">audio chooser</a> $NWB#vicidial_inbound_groups-hold_time_option_callback_filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Hold Time Option Callback Liste ID:</td><td align=left><input type=text name=hold_time_option_callback_list_id size=14 maxlength=14 value=\"$hold_time_option_callback_list_id\">$NWB#vicidial_inbound_groups-hold_time_option_callback_list_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agent d-alerte Filename: </td><td align=left><input type=text name=agent_alert_exten id=agent_alert_exten size=40 maxlength=100 value=\"$agent_alert_exten\"> <a href=\"javascript:launch_chooser('agent_alert_exten','date',1500);\">audio chooser</a> $NWB#vicidial_inbound_groups-agent_alert_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>L'Alerte D'Agent Retardent :</td><td align=left><input type=text name=agent_alert_delay size=6 maxlength=6 value=\"$agent_alert_delay\">$NWB#vicidial_inbound_groups-agent_alert_delay$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe De Transfert De Défaut :</td><td align=left><select size=1 name=default_xfer_group>";
		echo "$Xgroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-default_xfer_group$NWE</td></tr>\n";

		##### get groups_alias listings for dynamic default group alias pulldown list menu
		$stmt="SELECT group_alias_id,group_alias_name from groups_alias where active='Y' $LOGadmin_viewable_groupsSQL order by group_alias_id;";
		$rslt=mysql_query($stmt, $link);
		$group_alias_to_print = mysql_num_rows($rslt);
		$group_alias_menu='';
		$group_alias_selected=0;
		$o=0;
		while ($group_alias_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$group_alias_menu .= "<option ";
			if ($default_group_alias == "$rowx[0]") 
				{
				$group_alias_menu .= "SELECTED ";
				$group_alias_selected++;
				}
			$group_alias_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe par défaut Alias: </td><td align=left><select size=1 name=default_group_alias>";
		echo "<option value=\"\">NONE</option>";
		echo "$group_alias_menu";
		echo "</select>$NWB#vicidial_inbound_groups-default_group_alias$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Hold Recall transfert en groupe:</td><td align=left><select size=1 name=hold_recall_xfer_group>";
		echo "$Hgroups_menu";
		echo "</select>$NWB#vicidial_inbound_groups-hold_recall_xfer_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Pas de délai d'appel Route:</td><td align=left><select size=1 name=no_delay_call_route><option>Y</option><option>N</option><option SELECTED>$no_delay_call_route</option></select>$NWB#vicidial_inbound_groups-no_delay_call_route$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>En groupe enregistrement Override:</td><td align=left><select size=1 name=ingroup_recording_override><option>DISABLED</option><option>NEVER</option><option>ONDEMAND</option><option>ALLCALLS</option><option>ALLFORCE</option><option SELECTED>$ingroup_recording_override</option></select>$NWB#vicidial_inbound_groups-ingroup_recording_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>En groupe d'enregistrement du fichier:</td><td align=left><input type=text name=ingroup_rec_filename size=50 maxlength=50 value=\"$ingroup_rec_filename\">$NWB#vicidial_inbound_groups-ingroup_rec_filename$NWE</td></tr>\n";
		
		echo "<tr bgcolor=#B6D3FC><td align=right>Stats Pourcentage des appels dans les X secondes 1: </td><td align=left><input type=text name=answer_sec_pct_rt_stat_one size=5 maxlength=5 value=\"$answer_sec_pct_rt_stat_one\">$NWB#vicidial_inbound_groups-answer_sec_pct_rt_stat_one$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Stats Pourcentage des appels dans les X secondes 2: </td><td align=left><input type=text name=answer_sec_pct_rt_stat_two size=5 maxlength=5 value=\"$answer_sec_pct_rt_stat_two\">$NWB#vicidial_inbound_groups-answer_sec_pct_rt_stat_one$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Début de l-appel Web: </td><td align=left><input type=text name=start_call_url size=70 maxlength=2000 value=\"$start_call_url\">$NWB#vicidial_inbound_groups-start_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Dispo Call Web: </td><td align=left><input type=text name=dispo_call_url size=70 maxlength=2000 value=\"$dispo_call_url\">$NWB#vicidial_inbound_groups-dispo_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Ajouter plomb URL: </td><td align=left><input type=text name=add_lead_url size=70 maxlength=2000 value=\"$add_lead_url\">$NWB#vicidial_inbound_groups-add_lead_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Aucune URL Appel Agent: </td><td align=left><input type=text name=na_call_url size=70 maxlength=2000 value=\"$na_call_url\">$NWB#vicidial_inbound_groups-na_call_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Extension Ajoutez CID: </td><td align=left><select size=1 name=extension_appended_cidname><option>Y</option><option>N</option><option SELECTED>$extension_appended_cidname</option></select>$NWB#vicidial_inbound_groups-extension_appended_cidname$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Affichage de l'état uniqueid: </td><td align=left><select size=1 name=uniqueid_status_display><option>DISABLED</option><option>ENABLED</option><option>ENABLED_PREFIX</option><option>ENABLED_PRESERVE</option><option SELECTED>$uniqueid_status_display</option></select>$NWB#vicidial_inbound_groups-uniqueid_status_display$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Préfixe Statut uniqueid: </td><td align=left><input type=text name=uniqueid_status_prefix size=10 maxlength=50 value=\"$uniqueid_status_prefix\">$NWB#vicidial_inbound_groups-uniqueid_status_prefix$NWE</td></tr>\n";

		echo "<input type=hidden name=form_end value=\"END\">\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";

		if ($SSqc_features_active > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2> &nbsp; </td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2> Entrant Groupe QC Paramètres: </td></tr>\n";

			##### get status listings for dynamic pulldown
			$qc_statuses = preg_replace("/^ | -$/","",$qc_statuses);
			$QCstatuses = explode(" ", $qc_statuses);
			$QCs_to_print = (count($QCstatuses) -0);
			$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback from vicidial_statuses where status NOT IN('QUEUE','INCALL') order by status";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$qc_statuses_list='';

			$o=0;
			while ($statuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$qc_statuses_list .= "<input type=\"checkbox\" name=\"qc_statuses[]\" value=\"$rowx[0]\"";
				$p=0;
				while ($p < $QCs_to_print)
					{
					if ($rowx[0] == $QCstatuses[$p]) 
						{
						$qc_statuses_list .= " CHECKED";
						}
					$p++;
					}
				$qc_statuses_list .= "> $rowx[0] - $rowx[1]<BR>\n";

				$o++;
				}

			$stmt="SELECT distinct(status),status_name from vicidial_campaign_statuses $whereLOGallowed_campaignsSQL order by status;";
			$rslt=mysql_query($stmt, $link);
			$Cstatuses_to_print = mysql_num_rows($rslt);

			$o=0;
			while ($Cstatuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				if (!ereg("\"$rowx[0]\"",$qc_statuses_list))
					{
					$qc_statuses_list .= "<input type=\"checkbox\" name=\"qc_statuses[]\" value=\"$rowx[0]\"";
					$p=0;
					while ($p < $QCs_to_print)
						{
						if ($rowx[0] == $QCstatuses[$p]) 
							{
							$qc_statuses_list .= " CHECKED";
							}
						$p++;
						}
					$qc_statuses_list .= "> $rowx[0] - $rowx[1]<BR>\n";
					}
				$o++;
				}

			##### get scripts listings for pulldown
			$stmt="SELECT script_id,script_name from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
			$rslt=mysql_query($stmt, $link);
			$scripts_to_print = mysql_num_rows($rslt);
			$QCscripts_list="";
			$o=0;
			while ($scripts_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$QCscripts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$scriptname_list["$rowx[0]"] = "$rowx[1]";
				$o++;
				}
			##### get shifts listings for pulldown
			$stmt="SELECT shift_id,shift_name from vicidial_shifts $whereLOGadmin_viewable_groupsSQL order by shift_id;";
			$rslt=mysql_query($stmt, $link);
			$shifts_to_print = mysql_num_rows($rslt);
			$QCshifts_list="";
			$o=0;
			while ($shifts_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$QCshifts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$shiftname_list["$rowx[0]"] = "$rowx[1]";
				$o++;
				}

			echo "<tr bgcolor=#9BB9FB><td align=right>QC Enabled:</td><td><select size=1 name=qc_enabled><option>Y</option><option>N</option><option SELECTED>$qc_enabled</option></select> $NWB#vicidial_inbound_groups-qc_enabled$NWE</td></tr>\n";
			echo "<tr bgcolor=#9BB9FB><td align=right>QC Statut:<BR> $NWB#vicidial_inbound_groups-qc_statuses$NWE</td><td>$qc_statuses_list</td></tr>\n";
			echo "<tr bgcolor=#B9CBFD><td align=right>QC WebForm:</td><td align=left><input type=text name=qc_web_form_address size=70 maxlength=255 value=\"$qc_web_form_address\">$NWB#vicidial_inbound_groups-qc_web_form_address$NWE</td></tr>\n";

			echo "<tr bgcolor=#B9CBFD><td align=right><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">QC Script</a>: </td><td align=left><select size=1 name=qc_script>\n";
			echo "$QCscripts_list";
			echo "<option selected value=\"$qc_script\">$qc_script - $scriptname_list[$qc_script]</option>\n";
			echo "</select>$NWB#vicidial_inbound_groups-qc_script$NWE</td></tr>\n";

			echo "<tr bgcolor=#B9CBFD><td align=right><a href=\"$PHP_SELF?ADD=331111111&shift_id=$qc_shift_id\">QC Shift</a>: </td><td align=left><select size=1 name=qc_shift_id>\n";
			echo "$QCshifts_list";
			echo "<option selected value=\"$qc_shift_id\">$qc_shift_id - $shiftname_list[$qc_shift_id]</option>\n";
			echo "</select>$NWB#vicidial_inbound_groups-qc_shift_id$NWE</td></tr>\n";

			echo "<tr bgcolor=#B9CBFD><td align=right>Get Lancement Record QC: </td><td><select size=1 name=qc_get_record_launch><option>NONE</option><option>SCRIPT</option><option>WEBFORM</option><option>QCSCRIPT</option><option>QCWEBFORM</option><option SELECTED>$qc_get_record_launch</option></select> $NWB#vicidial_inbound_groups-qc_get_record_launch$NWE</td></tr>\n";
			echo "<tr bgcolor=#B9CBFD><td align=right>QC Voir l'enregistrement: </td><td><select size=1 name=qc_show_recording><option>Y</option><option>N</option><option SELECTED>$qc_show_recording</option></select> $NWB#vicidial_inbound_groups-qc_show_recording$NWE</td></tr>\n";
			echo "<tr bgcolor=#B9CBFD><td align=center colspan=2><input type=submit name=submit value=VALIDER></td></tr>\n";
			}

		echo "</table>\n";
		echo "<BR></center><BR><BR>\n";


		### list of agent rank or skill-level for this inbound group
		echo "<center><a name=\"agent_ranks\">\n";
		echo "<br><b>AGENT RANKS FOR THIS INBOUND GROUP:</b><br>\n";
		echo "<TABLE width=700 cellspacing=3>\n";
		echo "<tr><td>USER</td><td>GROUP</td><td>SELECTED</td><td> &nbsp; &nbsp; RANK</td><td> &nbsp; &nbsp; GRADE</td><td> &nbsp; &nbsp; CALLS TODAY</td></tr>\n";

		$stmt="SELECT user,full_name,closer_campaigns,user_group from vicidial_users where active='Y' $LOGadmin_viewable_groupsSQL order by user;";
		$rsltx=mysql_query($stmt, $link);
		$users_to_print = mysql_num_rows($rsltx);

		$o=0;
		while ($users_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;

			$ARIG_user[$o] =	$rowx[0];
			$ARIG_name[$o] =	$rowx[1];
			$ARIG_close[$o] =	$rowx[2];
			$ARIG_group[$o] =	$rowx[3];
			$ARIG_check[$o] =	'';
			if (preg_match("/ $group_id /",$ARIG_close[$o]))
				{$ARIG_check[$o] = ' CHECKED';}
			}

		$o=0;
		$ARIG_changenotes='';
		$stmtDlog='';
		while ($users_to_print > $o) 
			{
			$o++;
			$stmt="SELECT group_rank,calls_today,group_grade from vicidial_inbound_group_agents where group_id='$group_id' and user='$ARIG_user[$o]';";
			$rsltx=mysql_query($stmt, $link);
			$viga_to_print = mysql_num_rows($rsltx);
			if ($viga_to_print > 0) 
				{
				$rowx=mysql_fetch_row($rsltx);
				$ARIG_rank[$o] =	$rowx[0];
				$ARIG_calls[$o] =	$rowx[1];
				$ARIG_grade[$o] =	$rowx[2];
				}
			else
				{
				$stmtD="INSERT INTO vicidial_inbound_group_agents set calls_today='0',group_rank='0',group_weight='0',user='$ARIG_user[$o]',group_id='$group_id',group_grade='1';";
				$rslt=mysql_query($stmtD, $link);
				if ($DB > 0) {echo "|$stmtD|";}
				$stmtDlog .= "$stmtD|";
				$ARIG_changenotes .= "added missing user to viga table $ARIG_user[$o]|";
				$ARIG_rank[$o] =	'0';
				$ARIG_calls[$o] =	'0';
				$ARIG_grade[$o] =	'1';
				}
			}
		if (strlen($ARIG_changenotes) > 10)
			{
			### LOG INSERTION Admin Log Table ###
			$SQL_log = "$stmtDlog|";
			$SQL_log = ereg_replace(';','',$SQL_log);
			$SQL_log = addslashes($SQL_log);
			$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='MODIFY', record_id='$group_id', event_code='USER INGROUP VIGA ADD', event_sql=\"$SQL_log\", event_notes='$ARIG_changenotes';";
			if ($DB) {echo "|$stmt|\n";}
			$rslt=mysql_query($stmt, $link);
			}


		if ($stage=='VALIDER')
			{
			$o=0;
			while ($users_to_print > $o) 
				{
				$o++;

				$ARIG_checked='';
				$ARIG_ranked='';
				$ARIG_graded='';

				$checkbox_field="CHECK_$ARIG_user[$o]$US$group_id";
				$rank_field="RANK_$ARIG_user[$o]$US$group_id";
				$grade_field="GRADE_$ARIG_user[$o]$US$group_id";

				if (isset($_GET["$checkbox_field"]))			{$ARIG_checked=$_GET["$checkbox_field"];}
					elseif (isset($_POST["$checkbox_field"]))	{$ARIG_checked=$_POST["$checkbox_field"];}
				if (isset($_GET["$rank_field"]))			{$ARIG_ranked=$_GET["$rank_field"];}
					elseif (isset($_POST["$rank_field"]))	{$ARIG_ranked=$_POST["$rank_field"];}
				if (isset($_GET["$grade_field"]))			{$ARIG_graded=$_GET["$grade_field"];}
					elseif (isset($_POST["$grade_field"]))	{$ARIG_graded=$_POST["$grade_field"];}
				$ARIG_checked = ereg_replace("[^A-Z]","",$ARIG_checked);
				$ARIG_ranked = ereg_replace("[^-0-9]","",$ARIG_ranked);
				$ARIG_graded = ereg_replace("[^-0-9]","",$ARIG_graded);

				$stmtA='';
				$stmtB='';
				$stmtC='';
				$ARIG_updated=0;
				$ARIG_changenotes='';
				if ( ($ARIG_check[$o]=='') and ($ARIG_checked=='YES') )
					{
					if (strlen($ARIG_close[$o]) < 4) {$ARIG_close[$o]=' - ';}
					$stmtA="UPDATE vicidial_users set closer_campaigns=' $group_id$ARIG_close[$o]' where user='$ARIG_user[$o]';";
					$rslt=mysql_query($stmtA, $link);
					if ($DB > 0) {echo "|$stmtA|";}
					$ARIG_updated++;
					$ARIG_changenotes .= "added $group_id to selected in-groups|";
					}
				if ( ($ARIG_check[$o]==' CHECKED') and ($ARIG_checked=='') )
					{
					$ARIG_close[$o] = preg_replace("/ $group_id /",' ',$ARIG_close[$o]);
					$stmtB="UPDATE vicidial_users set closer_campaigns='$ARIG_close[$o]' where user='$ARIG_user[$o]';";
					$rslt=mysql_query($stmtB, $link);
					if ($DB > 0) {echo "|$stmtB|";}
					$ARIG_updated++;
					$ARIG_changenotes .= "removed $group_id from selected in-groups|";
					}
				if ( ($ARIG_ranked < $ARIG_rank[$o]) or ($ARIG_ranked > $ARIG_rank[$o]) )
					{
					$stmtC="UPDATE vicidial_inbound_group_agents set group_rank='$ARIG_ranked',group_weight='$ARIG_ranked' where user='$ARIG_user[$o]' and group_id='$group_id';";
					$rslt=mysql_query($stmtC, $link);
					if ($DB > 0) {echo "|$stmtC|";}
					$ARIG_updated++;
					$ARIG_changenotes .= "changed rank from $ARIG_rank[$o] to $ARIG_ranked|";
					}
				if ( ($ARIG_graded < $ARIG_grade[$o]) or ($ARIG_graded > $ARIG_grade[$o]) )
					{
					$stmtC="UPDATE vicidial_inbound_group_agents set group_grade='$ARIG_graded' where user='$ARIG_user[$o]' and group_id='$group_id';";
					$rslt=mysql_query($stmtC, $link);
					if ($DB > 0) {echo "|$stmtC|";}
					$ARIG_updated++;
					$ARIG_changenotes .= "changed grade from $ARIG_grade[$o] to $ARIG_graded|";
					}
				if ($ARIG_updated > 0)
					{
					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmtA|$stmtB|$stmtC|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$ARIG_user[$o]', event_code='USER INGROUP SETTINGS', event_sql=\"$SQL_log\", event_notes='$ARIG_changenotes';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}

			$stmt="SELECT vu.user,viga.group_rank,calls_today,full_name,closer_campaigns,viga.group_grade from vicidial_inbound_group_agents viga, vicidial_users vu where group_id='$group_id' and active='Y' and vu.user=viga.user $LOGadmin_viewable_groupsSQL order by vu.user;";
			$rsltx=mysql_query($stmt, $link);
			$users_to_print = mysql_num_rows($rsltx);

			$o=0;
			while ($users_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rsltx);
				$o++;

				$ARIG_user[$o] =	$rowx[0];
				$ARIG_rank[$o] =	$rowx[1];
				$ARIG_calls[$o] =	$rowx[2];
				$ARIG_name[$o] =	$rowx[3];
				$ARIG_close[$o] =	$rowx[4];
				$ARIG_grade[$o] =	$rowx[5];
				$ARIG_check[$o] =	'';
				if (preg_match("/ $group_id /",$ARIG_close[$o]))
					{$ARIG_check[$o] = ' CHECKED';}
				}
			}

		$checkbox_count=0;
		$o=0;
		while ($users_to_print > $o) 
			{
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			$checkbox_field="CHECK_$ARIG_user[$o]$US$group_id";
			$rank_field="RANK_$ARIG_user[$o]$US$group_id";
			$grade_field="GRADE_$ARIG_user[$o]$US$group_id";
			$checkbox_list .= "|$checkbox_field";
			$checkbox_count++;

			$users_output .= "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3&user=$ARIG_user[$o]\">$ARIG_user[$o]</a> - $ARIG_name[$o]</td>\n";
			$users_output .= "<td><font size=1>$ARIG_group[$o]</td>\n";
			$users_output .= "<td><input type=checkbox name=\"$checkbox_field\" id=\"$checkbox_field\" value=\"YES\"$ARIG_check[$o]></td>\n";
			$users_output .= "<td><select size=1 name=$rank_field>\n";
			$h="9";
			while ($h>=-9)
				{
				$users_output .= "<option value=\"$h\"";
				if ($h==$ARIG_rank[$o])
					{$users_output .= " SELECTED";}
				$users_output .= ">$h</option>";
				$h--;
				}
			$users_output .= "</select></td>\n";
			$users_output .= "<td><select size=1 name=$grade_field>\n";
			$h="10";
			while ($h>=1)
				{
				$users_output .= "<option value=\"$h\"";
				if ($h==$ARIG_grade[$o])
					{$users_output .= " SELECTED";}
				$users_output .= ">$h</option>";
				$h--;
				}
			$users_output .= "</select></td>\n";
			$users_output .= "<td><font size=1>$ARIG_calls[$o]</td></tr>\n";
			}
		echo "<tr><td><font size=1> &nbsp; </font></td><td><font size=1> &nbsp; </font></td><td align=left><a href=\"#\" onclick=\"IGU_selectall('$checkbox_count','$checkbox_list');return false;\"><font size=1>select all</font></a></td><td colspan=2><font size=1> &nbsp; </font></td></tr>\n";

		echo "$users_output";

		echo "<tr><td align=center colspan=4><input type=submit name=submit value=VALIDER></td></tr>\n";

		echo "</table></center><br></FORM>\n";

		echo "<a href=\"./AST_CLOSERstats.php?group[]=$group_id\">Cliquez ici pour voir un rapport de ce groupe d'entrants</a><BR><BR>\n";

		echo "<a href=\"./AST_VICIDIAL_ingrouplist.php?group=$group_id\">Cliquez ici pour voir les agents connectés à ce groupe entrant</a><BR><BR>\n";

		echo "<center><b>\n";

		echo "<B>DIDS D'UTILISER CE GROUPE EN:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT did_id,did_pattern,did_description from vicidial_inbound_dids where group_id='$group_id' and did_route='IN_GROUP' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$dids_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($dids_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3311&did_id=$row[0]\">$row[1] </a></TD><TD> $row[2]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR>\n";
		echo "<B>CALL MENUS D'UTILISER CE GROUPE EN:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT distinct vm.menu_id,menu_name from vicidial_call_menu vm,vicidial_call_menu_options vmo where vm.menu_id=vmo.menu_id and option_route='INGROUP' and option_route_value='$group_id' $vmLOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$cms_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($cms_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3511&menu_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR>\n";
		echo "<B>CAMPAGNES DE PERMETTRE DANS CE GROUPE:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns where closer_campaigns LIKE \"% $group_id %\" $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$campin_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($campin_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";

		if ($LOGdelete_ingroups > 0)
			{
		#	echo "<br><br><a href=\"$PHP_SELF?ADD=53&campaign_id=$group_id&stage=IN\">EMERGENCY VDAC CLEAR FOR THIS IN-GROUP</a><BR><BR>\n";
			echo "<br><br><a href=\"$PHP_SELF?ADD=5111&group_id=$group_id\">SUPPRIMER CE IN-GROUP</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=INGROUPS&stage=$group_id\">Cliquez ici pour voir les changements d'administration à cette En-Groupe</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}

	}



######################
# ADD=3311 modify did info in the system
######################

if ($ADD==3311)
	{
	if ($LOGmodify_dids==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3311&did_id=$did_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$didSQL = "did_id='$did_id'";
		if ( (strlen($did_id)<1) and (strlen($did_pattern)>0) )
			{$didSQL = "did_pattern='$did_pattern'";}
		$stmt="SELECT did_id,did_pattern,did_description,did_active,did_route,extension,exten_context,voicemail_ext,phone,server_ip,user,user_unavailable_action,user_route_settings_ingroup,group_id,call_handle_method,agent_search_method,list_id,campaign_id,phone_code,menu_id,record_call,filter_inbound_number,filter_phone_group_id,filter_url,filter_action,filter_extension,filter_exten_context,filter_voicemail_ext,filter_phone,filter_server_ip,filter_user,filter_user_unavailable_action,filter_user_route_settings_ingroup,filter_group_id,filter_call_handle_method,filter_agent_search_method,filter_list_id,filter_campaign_id,filter_phone_code,filter_menu_id,filter_clean_cid_number,custom_one,custom_two,custom_three,custom_four,custom_five,user_group from vicidial_inbound_dids where $didSQL $LOGadmin_viewable_groupsSQL;";
		if ($DB) {echo "$stmt\n";}
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$did_id = 				$row[0];
		$did_pattern = 			$row[1];
		$did_description = 		$row[2];
		$did_active = 			$row[3];
		$did_route = 			$row[4];
		$extension = 			$row[5];
		$exten_context = 		$row[6];
		$voicemail_ext = 		$row[7];
		$phone = 				$row[8];
		$server_ip = 			$row[9];
		$user = 				$row[10];
		$user_unavailable_action = 	$row[11];
		$user_route_settings_ingroup = 	$row[12];
		$group_id = 			$row[13];
		$call_handle_method = 	$row[14];
		$agent_search_method =	$row[15];
		$list_id = 				$row[16];
		$campaign_id = 			$row[17];
		$phone_code = 			$row[18];
		$menu_id =				$row[19];
		$record_call =			$row[20];
		$filter_inbound_number = $row[21];
		$filter_phone_group_id = $row[22];
		$filter_url =			$row[23];
		$filter_action =		$row[24];
		$filter_extension =		$row[25];
		$filter_exten_context = $row[26];
		$filter_voicemail_ext = $row[27];
		$filter_phone =			$row[28];
		$filter_server_ip =		$row[29];
		$filter_user =			$row[30];
		$filter_user_unavailable_action = $row[31];
		$filter_user_route_settings_ingroup = $row[32];
		$filter_group_id =		$row[33];
		$filter_call_handle_method = $row[34];
		$filter_agent_search_method = $row[35];
		$filter_list_id =		$row[36];
		$filter_campaign_id =	$row[37];
		$filter_phone_code =	$row[38];
		$filter_menu_id =		$row[39];
		$filter_clean_cid_number = $row[40];
		$custom_one =			$row[41];
		$custom_two =			$row[42];
		$custom_three =			$row[43];
		$custom_four =			$row[44];
		$custom_five =			$row[45];
		$user_group =			$row[46];


		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);
		$campaigns_list='';
		$o=0;
		while ($campaigns_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}

		##### get in-groups listings for dynamic pulldown
		$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
		$rslt=mysql_query($stmt, $link);
		$Xgroups_to_print = mysql_num_rows($rslt);
		$Xgroups_menu='';
		$Xgroups_selected=0;
		$FXgroups_menu='';
		$FXgroups_selected=0;
		$o=0;
		while ($Xgroups_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xgroups_menu .= "<option ";
			$FXgroups_menu .= "<option ";
			if ($user_route_settings_ingroup == "$rowx[0]") 
				{
				$Xgroups_menu .= "SELECTED ";
				$Xgroups_selected++;
				}
			if ($filter_user_route_settings_ingroup == "$rowx[0]") 
				{
				$FXgroups_menu .= "SELECTED ";
				$FXgroups_selected++;
				}
			$Xgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$FXgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		if ($Xgroups_selected < 1) 
			{$Xgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Xgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($FXgroups_selected < 1) 
			{$FXgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$FXgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}


		##### get in-groups listings for dynamic pulldown
		$stmt="SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') $LOGadmin_viewable_groupsSQL order by group_id;";
		$rslt=mysql_query($stmt, $link);
		$Dgroups_to_print = mysql_num_rows($rslt);
		$Dgroups_menu='';
		$Dgroups_selected=0;
		$FDgroups_menu='';
		$FDgroups_selected=0;
		$o=0;
		while ($Dgroups_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Dgroups_menu .= "<option ";
			$FDgroups_menu .= "<option ";
			if ($group_id == "$rowx[0]") 
				{
				$Dgroups_menu .= "SELECTED ";
				$Dgroups_selected++;
				}
			if ($filter_group_id == "$rowx[0]") 
				{
				$FDgroups_menu .= "SELECTED ";
				$FDgroups_selected++;
				}
			$Dgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$FDgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		if ($Dgroups_selected < 1) 
			{$Dgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$Dgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}
		if ($FDgroups_selected < 1) 
			{$FDgroups_menu .= "<option SELECTED value=\"---NONE---\">---NONE---</option>\n";}
		else 
			{$FDgroups_menu .= "<option value=\"---NONE---\">---NONE---</option>\n";}


		echo "<br>Modifier un DID RECORD:$row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=4311>\n";
		echo "<input type=hidden name=did_id value=\"$did_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DID Extension:</td><td align=left><input type=text name=did_pattern size=30 maxlength=50 value=\"$did_pattern\">$NWB#vicidial_inbound_dids-did_pattern$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>A Description:</td><td align=left><input type=text name=did_description size=40 maxlength=50 value=\"$did_description\">$NWB#vicidial_inbound_dids-did_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=did_active><option>Y</option><option>N</option><option SELECTED>$did_active</option></select>$NWB#vicidial_inbound_dids-did_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Route de DID:</td><td align=left><select size=1 name=did_route><option>AGENT</option><option>EXTEN</option><option>VOICEMAIL</option><option>PHONE</option><option>IN_GROUP</option><option>CALLMENU</option><option SELECTED>$did_route</option></select>$NWB#vicidial_inbound_dids-did_route$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Enregistrement de l'appel: </td><td align=left><select size=1 name=record_call><option>N</option><option>Y_QUEUESTOP</option><option>Y</option><option SELECTED>$record_call</option></select>$NWB#vicidial_inbound_dids-record_call$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension:</td><td align=left><input type=text name=extension size=40 maxlength=50 value=\"$extension\">$NWB#vicidial_inbound_dids-extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension Contexte:</td><td align=left><input type=text name=exten_context size=40 maxlength=50 value=\"$exten_context\">$NWB#vicidial_inbound_dids-exten_context$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Boîte vocale:</td><td align=left><input type=text name=voicemail_ext id=voicemail_ext size=12 maxlength=10 value=\"$voicemail_ext\"> <a href=\"javascript:launch_vm_chooser('voicemail_ext','vm',100);\">voicemail chooser</a>$NWB#vicidial_inbound_dids-voicemail_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Extension:</td><td align=left><input type=text name=phone size=20 maxlength=100 value=\"$phone\">$NWB#vicidial_inbound_dids-phone$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "<option SELECTED>$server_ip</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-server_ip$NWE</td></tr>\n";

		$stmt="SELECT menu_id,menu_name,menu_prompt from vicidial_call_menu $whereLOGadmin_viewable_groupsSQL order by menu_id;";
		$rslt=mysql_query($stmt, $link);
		$menus_to_print = mysql_num_rows($rslt);
		$menu_list='';
		$i=0;
		while ($i < $menus_to_print)
			{
			$row=mysql_fetch_row($rslt);
			$menu_list .= "<option value=\"$row[0]\">$row[0] - $row[1] - $row[2]</option>";
			$i++;
			}

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$menu_id\">Appel du menu:</a> </td><td align=left><select size=1 name=menu_id>$menu_list<option SELECTED>$menu_id</option></select>$NWB#vicidial_inbound_dids-menu_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur Agent:</td><td align=left><input type=text name=user size=20 maxlength=20 value=\"$user\">$NWB#vicidial_inbound_dids-user$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Unavailable Action utilisateur:</td><td align=left><select size=1 name=user_unavailable_action><option>EXTEN</option><option>VOICEMAIL</option><option>PHONE</option><option>IN_GROUP</option><option SELECTED>$user_unavailable_action</option></select>$NWB#vicidial_inbound_dids-user_unavailable_action$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur Settings En Route-Group:</td><td align=left><select size=1 name=user_route_settings_ingroup>";
		echo "$Xgroups_menu";
		echo "</select>$NWB#vicidial_inbound_dids-user_route_settings_ingroup$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3111&group_id=$group_id\">In-ID du groupe</a>: </td><td align=left><select size=1 name=group_id>";
		echo "$Dgroups_menu";
		echo "</select>$NWB#vicidial_inbound_dids-group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>In-Call Groupe Handle Méthode:</td><td align=left><select size=1 name=call_handle_method><option>CID</option><option>CIDLOOKUP</option><option>CIDLOOKUPRL</option><option>CIDLOOKUPRC</option><option>CIDLOOKUPALT</option><option>CIDLOOKUPRLALT</option><option>CIDLOOKUPRCALT</option><option>CIDLOOKUPADDR3</option><option>CIDLOOKUPRLADDR3</option><option>CIDLOOKUPRCADDR3</option><option>CIDLOOKUPALTADDR3</option><option>CIDLOOKUPRLALTADDR3</option><option>CIDLOOKUPRCALTADDR3</option><option>ANI</option><option>ANILOOKUP</option><option>ANILOOKUPRL</option><option>VIDPROMPT</option><option>VIDPROMPTLOOKUP</option><option>VIDPROMPTLOOKUPRL</option><option>VIDPROMPTLOOKUPRC</option><option>CLOSER</option><option>3DIGITID</option><option>4DIGITID</option><option>5DIGITID</option><option>10DIGITID</option><option SELECTED>$call_handle_method</option></select>$NWB#vicidial_inbound_dids-call_handle_method$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>En groupe Agent Méthode de recherche:</td><td align=left><select size=1 name=agent_search_method><option value=\"LB\">LB - Load Balanced</option><option value=\"LO\">LO - Load Balanced Overflow</option><option value=\"SO\">SO - Server Only</option><option SELECTED>$agent_search_method</option></select>$NWB#vicidial_inbound_dids-agent_search_method$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>In-Liste du groupe ID:</td><td align=left><input type=text name=list_id size=14 maxlength=14 value=\"$list_id\">$NWB#vicidial_inbound_dids-list_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>En-groupe ID de la campagne:</td><td align=left><select size=1 name=campaign_id>\n";
		echo "$campaigns_list";
		echo "<option SELECTED>$campaign_id</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>En-groupe Téléphone Code:</td><td align=left><input type=text name=phone_code size=14 maxlength=14 value=\"$phone_code\">$NWB#vicidial_inbound_dids-phone_code$NWE</td></tr>\n";


		echo "<tr bgcolor=#99FFCC><td align=right>Nettoyez Nombre CID: </td><td align=left><input type=text name=filter_clean_cid_number size=20 maxlength=20 value=\"$filter_clean_cid_number\">$NWB#vicidial_inbound_dids-filter_clean_cid_number$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Filtre Nombre entrants: </td><td align=left><select size=1 name=filter_inbound_number><option value=\"DISABLED\">DISABLED</option><option value=\"GROUP\">GROUP</option><option value=\"URL\">URL</option><option SELECTED>$filter_inbound_number</option></select>$NWB#vicidial_inbound_dids-filter_inbound_number$NWE</td></tr>\n";

		$stmt="SELECT filter_phone_group_id,filter_phone_group_name from vicidial_filter_phone_groups $whereLOGadmin_viewable_groupsSQL order by filter_phone_group_id;";
		$rslt=mysql_query($stmt, $link);
		$Fgroups_to_print = mysql_num_rows($rslt);
		$Fgroups_list='';
		$i=0;
		while ($i < $Fgroups_to_print)
			{
			$row=mysql_fetch_row($rslt);
			$Fgroups_list .= "<option value=\"$row[0]\">$row[0] - $row[1] - $row[2]</option>";
			$i++;
			}

		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$filter_phone_group_id\">Filtre ID Groupe Téléphone:</a> </td><td align=left><select size=1 name=filter_phone_group_id>$Fgroups_list<option SELECTED>$filter_phone_group_id</option></select>$NWB#vicidial_inbound_dids-filter_phone_group_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>URL Filter: </td><td align=left><input type=text name=filter_url size=80 maxlength=1000 value=\"$filter_url\">$NWB#vicidial_inbound_dids-filter_url$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Action de filtrage: </td><td align=left><select size=1 name=filter_action><option>AGENT</option><option>EXTEN</option><option>VOICEMAIL</option><option>PHONE</option><option>IN_GROUP</option><option>CALLMENU</option><option SELECTED>$filter_action</option></select>$NWB#vicidial_inbound_dids-filter_action$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Extension:</td><td align=left><input type=text name=filter_extension size=40 maxlength=50 value=\"$filter_extension\">$NWB#vicidial_inbound_dids-extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Extension Contexte:</td><td align=left><input type=text name=filter_exten_context size=40 maxlength=50 value=\"$filter_exten_context\">$NWB#vicidial_inbound_dids-exten_context$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Boîte vocale:</td><td align=left><input type=text name=filter_voicemail_ext id=voicemail_ext size=12 maxlength=10 value=\"$filter_voicemail_ext\"> <a href=\"javascript:launch_vm_chooser('voicemail_ext','vm',100);\">voicemail chooser</a>$NWB#vicidial_inbound_dids-voicemail_ext$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Téléphone Extension:</td><td align=left><input type=text name=filter_phone size=20 maxlength=100 value=\"$filter_phone\">$NWB#vicidial_inbound_dids-phone$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter IP du serveur: </td><td align=left><select size=1 name=filter_server_ip>\n";
		echo "$servers_list";
		echo "<option SELECTED>$filter_server_ip</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-server_ip$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3511&menu_id=$menu_id\">Filter Appel du menu:</a> </td><td align=left><select size=1 name=filter_menu_id>$menu_list<option SELECTED>$filter_menu_id</option></select>$NWB#vicidial_inbound_dids-menu_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Utilisateur Agent:</td><td align=left><input type=text name=filter_user size=20 maxlength=20 value=\"$filter_user\">$NWB#vicidial_inbound_dids-user$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Unavailable Action utilisateur:</td><td align=left><select size=1 name=filter_user_unavailable_action><option>EXTEN</option><option>VOICEMAIL</option><option>PHONE</option><option>IN_GROUP</option><option SELECTED>$filter_user_unavailable_action</option></select>$NWB#vicidial_inbound_dids-user_unavailable_action$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter Utilisateur Settings En Route-Group:</td><td align=left><select size=1 name=filter_user_route_settings_ingroup>";
		echo "$FXgroups_menu";
		echo "</select>$NWB#vicidial_inbound_dids-user_route_settings_ingroup$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right><a href=\"$PHP_SELF?ADD=3111&group_id=$group_id\">Filter In-ID du groupe</a>: </td><td align=left><select size=1 name=filter_group_id>";
		echo "$FDgroups_menu";
		echo "</select>$NWB#vicidial_inbound_dids-group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter In-Call Groupe Handle Méthode:</td><td align=left><select size=1 name=filter_call_handle_method><option>CID</option><option>CIDLOOKUP</option><option>CIDLOOKUPRL</option><option>CIDLOOKUPRC</option><option>CIDLOOKUPALT</option><option>CIDLOOKUPRLALT</option><option>CIDLOOKUPRCALT</option><option>CIDLOOKUPADDR3</option><option>CIDLOOKUPRLADDR3</option><option>CIDLOOKUPRCADDR3</option><option>CIDLOOKUPALTADDR3</option><option>CIDLOOKUPRLALTADDR3</option><option>CIDLOOKUPRCALTADDR3</option><option>ANI</option><option>ANILOOKUP</option><option>ANILOOKUPRL</option><option>VIDPROMPT</option><option>VIDPROMPTLOOKUP</option><option>VIDPROMPTLOOKUPRL</option><option>VIDPROMPTLOOKUPRC</option><option>CLOSER</option><option>3DIGITID</option><option>4DIGITID</option><option>5DIGITID</option><option>10DIGITID</option><option SELECTED>$filter_call_handle_method</option></select>$NWB#vicidial_inbound_dids-call_handle_method$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter En groupe Agent Méthode de recherche:</td><td align=left><select size=1 name=filter_agent_search_method><option value=\"LB\">LB - Load Balanced</option><option value=\"LO\">LO - Load Balanced Overflow</option><option value=\"SO\">SO - Server Only</option><option SELECTED>$filter_agent_search_method</option></select>$NWB#vicidial_inbound_dids-agent_search_method$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter In-Liste du groupe ID:</td><td align=left><input type=text name=filter_list_id size=14 maxlength=14 value=\"$filter_list_id\">$NWB#vicidial_inbound_dids-list_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter En-groupe ID de la campagne:</td><td align=left><select size=1 name=filter_campaign_id>\n";
		echo "$campaigns_list";
		echo "<option SELECTED>$filter_campaign_id</option>\n";
		echo "</select>$NWB#vicidial_inbound_dids-campaign_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Filter En-groupe Téléphone Code:</td><td align=left><input type=text name=filter_phone_code size=14 maxlength=14 value=\"$filter_phone_code\">$NWB#vicidial_inbound_dids-phone_code$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Custom 1: </td><td align=left><input type=text name=custom_one size=50 maxlength=100 value=\"$custom_one\">$NWB#vicidial_inbound_dids-custom_one$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Custom 2: </td><td align=left><input type=text name=custom_two size=50 maxlength=100 value=\"$custom_two\">$NWB#vicidial_inbound_dids-custom_one$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Custom 3: </td><td align=left><input type=text name=custom_three size=50 maxlength=100 value=\"$custom_three\">$NWB#vicidial_inbound_dids-custom_one$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Custom 4: </td><td align=left><input type=text name=custom_four size=50 maxlength=100 value=\"$custom_four\">$NWB#vicidial_inbound_dids-custom_one$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Custom 5: </td><td align=left><input type=text name=custom_five size=50 maxlength=100 value=\"$custom_five\">$NWB#vicidial_inbound_dids-custom_one$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</table>\n";
		echo "<BR></center></FORM><br>\n";

		echo "<br><a href=\"./AST_DIDstats.php?group[0]=$did_id\">Cliquez ici pour voir un rapport de trafic pour cette DID</FONT><br>\n";
		echo "<br><a href=\"./user_stats.php?user=$did_pattern&did=1&did_id=$did_id\">Cliquez ici pour voir la liste des enregistrements et des appels pour ce DID</FONT><br>\n";

		if ($SSdid_ra_extensions_enabled > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=3321&did_id=$did_id\">VOIR AVEZ télécommande remplace EXTENSION agent pour cette DID</a>\n";
			}
		if ($LOGdelete_dids > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5311&did_id=$did_id\">SUPPRIMER CETTE DID</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=DIDS&stage=$did_id\">Cliquez ici pour voir les changements d'administration à cette DID</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}




######################
# ADD=1320 display did remote agent extension override summary
######################
if ($ADD==1320)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>DISTANCE LISTE DES AGENTS DE VULGARISATION SURPASSEMENTS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr>\n";
	echo "<td><B>DID</B></td>\n";
	echo "<td><B>NOM</B></td>\n";
	echo "<td><B>RA-EXTENS</B></td>\n";
	echo "<td><B>MODIFIER</B></td>\n";
	echo "</tr>\n";

	$stmt="SELECT did_id,did_pattern,did_description from vicidial_inbound_dids $whereLOGadmin_viewable_groupsSQL order by did_id;";
	$rslt=mysql_query($stmt, $link);
	$dids_to_print = mysql_num_rows($rslt);

	$o=0;
	while ($dids_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$dids_id_list[$o] =			$row[0];
		$did_pattern_list[$o] =		$row[1];
		$did_description_list[$o] =	$row[2];
		$o++;
		}

	$o=0;
	$k=0;
	while ($dids_to_print > $o) 
		{
		if (eregi("1$|3$|5$|7$|9$", $k))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3321&did_id=$dids_id_list[$o]\">$did_pattern_list[$o]</a></td>";
		echo "<td><font size=1> $did_description_list[$o] </td>";
		echo "<td><font size=1> ";

		$stmt="SELECT count(*) from vicidial_did_ra_extensions where did_id='$dids_id_list[$o]';";
		$rslt=mysql_query($stmt, $link);
		$didstatus_to_print = mysql_num_rows($rslt);
		$p=0;
		while ( ($didstatus_to_print > $p) and ($p < 10) )
			{
			$row=mysql_fetch_row($rslt);
			echo "$row[0] ";
			$p++;
			}
		echo "</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3321&did_id=$dids_id_list[$o]\">MODIFY RA-EXTENS</a></td></tr>\n";

		$k++;
		$o++;
		}

	echo "</TABLE></center>\n";
	}




######################
# ADD=3321 modify did remote agent extension override entries in the system
######################

if ($ADD==3321)
	{
	if ( ($LOGmodify_dids==1) and ($SSdid_ra_extensions_enabled > 0) )
		{
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		##### BEGIN Add/Delete/ModifierDID Remote Agent Extensions section #####
		if ($stage == 'ADD')
			{
			$stmt="SELECT count(*) from vicidial_did_ra_extensions where did_id='$did_id' and user_start='$user_start' and extension='$extension';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ($row[0] > 0)
				{echo "<br>SAVIEZ-REMOTE OVERRIDE extension de l'agent PAS AJOUTÉE - il ya déjà une entrée pour ce DID avec cette extension RA<br>\n";}
			else
				{
				if ( (strlen($did_id) < 1) or (strlen($user_start) < 2) or (strlen($extension) < 4) )
					{
					echo "<br>SAVIEZ-REMOTE OVERRIDE extension de l'agent PAS AJOUTÉE - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
					}
				else
					{
					echo "<br><B>SAVIEZ-REMOTE OVERRIDE extension de l'agent AJOUTÉE: $did_id - $user_start - $extension</B><br>\n";

					$stmt="INSERT INTO vicidial_did_ra_extensions(did_id,user_start,extension,description,active) values('$did_id','$user_start','$extension','$description','Y');";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DID_RA-EXTEN', event_type='ADD', record_id='$did_id', event_code='ADMIN ADD DID RA EXTEN', event_sql=\"$SQL_log\", event_notes='DID: $user_start - $extension';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		if ($stage == 'DELETE')
			{
			$stmt="SELECT count(*) from vicidial_did_ra_extensions where did_id='$did_id' and user_start='$user_start' and extension='$extension';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			if ($row[0] < 1)
				{echo "<br>Extension DID Remote Agent OVERRIDE PAS SUPPRIMER - cette entrée n'existe pas<br>\n";}
			else
				{
				if ( (strlen($did_id) < 1) or (strlen($user_start) < 2) or (strlen($extension) < 4) )
					{
					echo "<br>Extension DID Remote Agent OVERRIDE PAS SUPPRIMER - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
					}
				else
					{
					echo "<br><B>DID REMOTE AGENT EXTENSION OVERRIDE DELETED: $did_id - $user_start - $extension</B><br>\n";

					$stmt="DELETE FROM vicidial_did_ra_extensions where did_id='$did_id' and user_start='$user_start' and extension='$extension';";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DID_RA-EXTEN', event_type='DELETE', record_id='$did_id', event_code='ADMIN DELETE DID RA EXTEN', event_sql=\"$SQL_log\", event_notes='DID: $user_start - $extension';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				}
			}
		if ($stage == 'MODIFY')
			{
			$stmt="SELECT user_start,extension,active,description,call_count_today from vicidial_did_ra_extensions where did_id='$did_id' order by user_start,extension;";
			$rslt=mysql_query($stmt, $link);
			$raextens_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($raextens_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$Xuser_start[$o] =			$rowx[0];
				$Xextension[$o] =			$rowx[1];
				$Xactive[$o] =				$rowx[2];
				$Xdescription[$o] =			$rowx[3];
				$Xcall_count_today[$o] =	$rowx[4];
				$o++;
				}

			$o=0;
			while ($raextens_to_print > $o) 
				{
				$Factive_value='';
				$Fdescription_value='';
				$Factive = "active_$Xuser_start[$o]_$Xextension[$o]";
				$Fdescription = "description_$Xuser_start[$o]_$Xextension[$o]";

				if (isset($_GET[$Factive]))						{$Factive_value=$_GET[$Factive];}
					elseif (isset($_POST[$Factive]))			{$Factive_value=$_POST[$Factive];}
				if (isset($_GET[$Fdescription]))				{$Fdescription_value=$_GET[$Fdescription];}
					elseif (isset($_POST[$Fdescription]))		{$Fdescription_value=$_POST[$Fdescription];}
				$Fdescription_value = ereg_replace("[^- \.\,\_0-9a-zA-Z]","",$Fdescription_value);
				$Factive_value = ereg_replace("[^A-Z]","",$Factive_value);

			#	echo "$did_id - $Xuser_start[$o] - $Xextension[$o] - $Factive($Factive_value|$Xactive[$o]) - $Fdescription($Fdescription_value|$Xdescription[$o])<BR>";

				if ( ($Factive_value == $Xactive[$o]) and ($Fdescription_value == $Xdescription[$o]) )
					{
			#		echo "<br>DID REMOTE AGENT EXTENSION OVERRIDE NOT MODIFIED - Veuillez retourner en arrière et vérifier les données que vous avez saisies<br>\n";
					}
				else
					{
					echo "<B>Extension DID Remote Agent OVERRIDE mise à jour: $Xuser_start[$o] - $Xextension[$o]</B><br>\n";

					$stmt="UPDATE vicidial_did_ra_extensions SET active='$Factive_value',description='$Fdescription_value' WHERE did_id='$did_id' and user_start='$Xuser_start[$o]' and extension='$Xextension[$o]';";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='DID_RA-EXTEN', event_type='MODIFY', record_id='$did_id', event_code='ADMIN MODIFY DID RA EXTEN', event_sql=\"$SQL_log\", event_notes='DID: $user_start - $extension';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);
					}
				$o++;
				}
			}
		##### END Add/Delete/ModifierDID Remote Agent Extensions section #####


		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3321&did_id=$did_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
		echo "<br><br><b>Télécommande remplace EXTENSION agent pour cette DID: &nbsp; $NWB#vicidial_did_ra_extensions$NWE</b><br>\n";
		echo "<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=3321>\n";
		echo "<input type=hidden name=stage value=MODIFY>\n";
		echo "<input type=hidden name=did_id value=\"$did_id\">\n";
		echo "<center><TABLE width=700 cellspacing=2>\n";
		echo "<tr><td>#</td><td>USER START</td><td>EXTENSION</td><td>DESCRIPTION</td><td>ACTIF</td><td>CALLS</td><td>SUPPRIMER</td></tr>\n";

		$stmt="SELECT user_start,extension,active,description,call_count_today from vicidial_did_ra_extensions where did_id='$did_id' order by user_start,extension;";
		$rslt=mysql_query($stmt, $link);
		$raextens_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($raextens_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Xuser_start[$o] =			$rowx[0];
			$Xextension[$o] =			$rowx[1];
			$Xactive[$o] =				$rowx[2];
			$Xdescription[$o] =			$rowx[3];
			$Xcall_count_today[$o] =	$rowx[4];
			$o++;
			}

		$o=0;
		while ($raextens_to_print > $o) 
			{
			$ct = ($o + 1);
			if ($ct == '1')
				{
				$bgcolor='bgcolor="#9BB9FB"';
				$bgac = $Xuser_start[$o];
				} 
			else
				{
				if ($Xuser_start[$o] != $bgac)
					{
					if (eregi("1$|3$|5$|7$|9$", $bgct))
						{$bgcolor='bgcolor="#9BB9FB"';} 
					else
						{$bgcolor='bgcolor="#B9CBFD"';}
					$bgct++;
					$bgac = $Xuser_start[$o];
					}
				}

			echo "<tr $bgcolor><td><font size=2> &nbsp; $ct</font></td>\n";
			echo "<td><font size=2> &nbsp; $Xuser_start[$o]</font></td>\n";
			echo "<td><font size=2> &nbsp; $Xextension[$o]</font></td>\n";
			echo "<td><input type=text size=30 maxlength=100 name=description_$Xuser_start[$o]_$Xextension[$o] value=\"$Xdescription[$o]\" style=\"font-family: sans-serif; font-size: 10px;\"></td>\n";
			echo "<td>\n";
			if ($Xactive[$o] == 'Y')
				{
				echo "<input type=\"checkbox\" name=\"active_$Xuser_start[$o]_$Xextension[$o]\" value=\"Y\" CHECKED>";
				}
			else
				{
				echo "<input type=\"checkbox\" name=\"active_$Xuser_start[$o]_$Xextension[$o]\" value=\"Y\">";
				}
			echo "</td>\n";
			echo "<td><font size=2> &nbsp; $Xcall_count_today[$o]</font></td>\n";
			echo "<td><font size=1> &nbsp; <a href=\"$PHP_SELF?ADD=3321&stage=DELETE&did_id=$did_id&user_start=$Xuser_start[$o]&extension=$Xextension[$o]\">SUPPRIMER</a></td></tr>\n";
			$o++;
			}

		echo "</table>\n";
		echo "<input type=submit name=submit value=\"Soumettre les modifications\"></form><br><br>\n";

		echo "<br>ADD NEW REMOTE AGENT EXTENSION OVERRIDE<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=3321>\n";
		echo "<input type=hidden name=stage value=AJOUTER>\n";
		echo "<input type=hidden name=did_id value=\"$did_id\">\n";
		echo "Utilisateur Start: <input type=text size=10 maxlength=20 name=user_start>\n";
		echo "Extension:<input type=text size=20 maxlength=20 name=extension><BR>\n";
		echo "Description: <input type=text size=50 maxlength=100 name=description>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</center></FORM><br>\n";

		echo "<br><br><a href=\"$PHP_SELF?ADD=3311&did_id=$did_id\">MODIFIER LE PRÉSENT DID</a>\n";

		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=DIDS&stage=$did_id\">Cliquez ici pour voir les changements d'administration à cette DID</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}





######################
# ADD=3511 modify call menu info in the system
######################

if ($ADD==3511)
	{
	if ($LOGmodify_dids==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3511&menu_id=$menu_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT menu_name,menu_prompt,menu_timeout,menu_timeout_prompt,menu_invalid_prompt,menu_repeat,menu_time_check,call_time_id,track_in_vdac,custom_dialplan_entry,tracking_group,dtmf_log,dtmf_field,user_group from vicidial_call_menu where menu_id='$menu_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$menu_name =			$row[0];
		$menu_prompt =			$row[1];
		$menu_timeout =			$row[2];
		$menu_timeout_prompt =	$row[3];
		$menu_invalid_prompt =	$row[4];
		$menu_repeat =			$row[5];
		$menu_time_check =		$row[6];
		$call_time_id =			$row[7];
		$track_in_vdac =		$row[8];
		$custom_dialplan_entry= $row[9];
		$tracking_group =		$row[10];
		$dtmf_log =				$row[11];
		$dtmf_field =			$row[12];
		$user_group =			$row[13];


		echo "<br>MODIFIER UN APPEL Record menu: $menu_id<form action=$PHP_SELF method=POST name=admin_form id=admin_form>\n";
		echo "<input type=hidden name=ADD value=4511>\n";
		echo "<input type=hidden name=menu_id value=\"$menu_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu ID: </td><td align=left>$menu_id $NWB#vicidial_call_menu-menu_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du menu: </td><td align=left><input type=text name=menu_name size=40 maxlength=50 value=\"$menu_name\">$NWB#vicidial_call_menu-menu_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_call_menu-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu rapide: </td><td align=left><input type=text name=menu_prompt id=menu_prompt size=60 maxlength=255 value=\"$menu_prompt\"> <a href=\"javascript:launch_chooser('menu_prompt','date',30);\">audio chooser</a> $NWB#vicidial_call_menu-menu_prompt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu Timeout: </td><td align=left><input type=text name=menu_timeout size=10 maxlength=5 value=\"$menu_timeout\">$NWB#vicidial_call_menu-menu_timeout$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu prompt timeout: </td><td align=left><input type=text name=menu_timeout_prompt id=menu_timeout_prompt size=60 maxlength=255 value=\"$menu_timeout_prompt\"> <a href=\"javascript:launch_chooser('menu_timeout_prompt','date',30);\">audio chooser</a> $NWB#vicidial_call_menu-menu_timeout_prompt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu Blancs Prompt: </td><td align=left><input type=text name=menu_invalid_prompt id=menu_invalid_prompt size=60 maxlength=255 value=\"$menu_invalid_prompt\"> <a href=\"javascript:launch_chooser('menu_invalid_prompt','date',30);\">audio chooser</a> $NWB#vicidial_call_menu-menu_invalid_prompt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu Répétez: </td><td align=left><input type=text name=menu_repeat size=4 maxlength=3 value=\"$menu_repeat\">$NWB#vicidial_call_menu-menu_repeat$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Menu Heure Départ: </td><td align=left><select size=1 name=menu_time_check>\n";
		if ($menu_time_check > 0)
			{
			echo "<option value=\"0\">0 - No Time Check</option><option selected value=\"1\">1 - Time Check</option>\n";
			}
		else
			{
			echo "<option selected value=\"0\">0 - No Time Check</option><option value=\"1\">1 - Time Check</option>\n";
			}
		echo "	</select>$NWB#vicidial_call_menu-menu_time_check$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$call_time_id\">Temps D'Appel :</a></td><td align=left><select size=1 name=call_time_id>\n";
		echo "$call_times_list";
		echo "<option selected value=\"$call_time_id\">$call_time_id - $call_timename_list[$call_time_id]</option>\n";
		echo "</select>$NWB#vicidial_call_menu-call_time_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Le suivi des appels dans Real-Time Report: </td><td align=left><select size=1 name=track_in_vdac>";
		if ($track_in_vdac > 0)
			{
			echo "<option value=\"0\">0 - Aucun traçage en temps réel</option><option selected value=\"1\">1 - Suivi en temps réel</option>\n";
			}
		else
			{
			echo "<option selected value=\"0\">0 - Aucun traçage en temps réel</option><option value=\"1\">1 - Suivi en temps réel</option>\n";
			}
		echo "</select>$NWB#vicidial_call_menu-track_in_vdac$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe de suivi: </td><td align=left><select size=1 name=tracking_group>\n";
		echo "<option value=\"CALLMENU\">CALLMENU - Default</option>\n";
		echo "$ingroup_list";
		echo "<option selected value=\"$tracking_group\">$tracking_group</option>\n";
		echo "</select>$NWB#vicidial_call_menu-tracking_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Connectez-vous Appuyer sur la touche: </td><td align=left><select size=1 name=dtmf_log>";
		if ($dtmf_log > 0)
			{
			echo "<option value=\"0\">0 - Pas de journalisation DTMF</option><option selected value=\"1\">1 - DTMF Logging Enabled</option>\n";
			}
		else
			{
			echo "<option selected value=\"0\">0 - Pas de journalisation DTMF</option><option value=\"1\">1 - DTMF Logging Enabled</option>\n";
			}
		echo "</select>$NWB#vicidial_call_menu-dtmf_log$NWE &nbsp; &nbsp; Connectez-vous Champ: \n";
		echo "<select size=1 name=dtmf_field><option>NONE</option><option>vendor_lead_code</option><option>source_id</option><option>phone_code</option><option>title</option><option>first_name</option><option>middle_initial</option><option>last_name</option><option>address1</option><option>address2</option><option>address3</option><option>city</option><option>state</option><option>province</option><option>postal_code</option><option>country_code</option><option>alt_phone</option><option>email</option><option>security_phrase</option><option>comments</option><option>rank</option><option>owner</option><option>status</option><option>user</option><option SELECTED>$dtmf_field</option></select>$NWB#vicidial_call_menu-dtmf_field$NWE</td></tr>\n";

		echo "<tr><td align=center colspan=2> <input type=submit name=VALIDER value=VALIDER> </td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=CENTER colspan=2> Appel du menu Options: </td></tr>\n";

		$j=0;
		$stmtA="SELECT option_value,option_description,option_route,option_route_value,option_route_value_context from vicidial_call_menu_options where menu_id='$menu_id' order by option_value;";
		$rslt=mysql_query($stmtA, $link);
		$menus_to_print = mysql_num_rows($rslt);

		while ($menus_to_print > $j)
			{
			$row=mysql_fetch_row($rslt);
			$Aoption_value[$j] =				$row[0];
			$Aoption_description[$j] =			$row[1];
			$Aoption_route[$j] =				$row[2];
			$Aoption_route_value[$j] =			$row[3];
			$Aoption_route_value_context[$j] =	$row[4];
			$j++;
			}

		$j=0;
		while ($menus_to_print > $j)
			{
			$choose_height = (($j * 40) + 400);
			$option_value =					$Aoption_value[$j];
			$option_description =			$Aoption_description[$j];
			$option_route =					$Aoption_route[$j];
			$option_route_value =			$Aoption_route_value[$j];
			$option_route_value_context =	$Aoption_route_value_context[$j];

			$dtmf_list = "<select size=1 name=option_value_$j>";
			$h=0;
			while ($h <= 20)
				{
				$dtmf_list .= "<option";
				if ( (preg_match("/$dtmf[$h]/",$option_value) and (strlen($option_value) == strlen($dtmf[$h])) ) )
					{$dtmf_list .= " selected";}
				$dtmf_list .= " value=\"$dtmf[$h]\"> $dtmf_key[$h]</option>";
				$h++;
				}
			$dtmf_list .= "</select>";

			if (eregi("1$|3$|5$|7$|9$", $j))
				{$bgcolor='bgcolor="#CCFFFF"';} 
			else
				{$bgcolor='bgcolor="#99FFCC"';}

			echo "<tr $bgcolor><td align=CENTER colspan=2> 
			Option: $dtmf_list &nbsp; 
			Description: <input type=text name=option_description_$j size=40 maxlength=255 value=\"$option_description\"> 
			Route: <select size=1 name=option_route_$j id=option_route_$j onChange=\"call_menu_option('$j','$option_route','$option_route_value','$option_route_value_context','$choose_height');\">
				<option>CALLMENU</option>
				<option>INGROUP</option>
				<option>DID</option>
				<option>HANGUP</option>
				<option>EXTENSION</option>
				<option>PHONE</option>
				<option>VOICEMAIL</option>
				<option>AGI</option>
				<option value=\"\">* REMOVE *</option>
				<option selected value=\"$option_route\">$option_route</option>
			</select>		$NWB#vicidial_call_menu-option_value$NWE <BR>

			<span id=\"option_value_value_context_$j\" name=\"option_value_value_context_$j\">\n";

			if ($option_route=='CALLMENU')
				{
				echo "<span name=option_route_link_$j id=option_route_link_$j>";
				echo "<a href=\"$PHP_SELF?ADD=3511&menu_id=$option_route_value\">Appel du menu:</a>";
				echo "</span>";
				echo " <select size=1 name=option_route_value_$j id=option_route_value_$j onChange=\"call_menu_link('$j','CALLMENU');\">$call_menu_list<option SELECTED>$option_route_value</option></select>\n";
				}
			if ($option_route=='INGROUP')
				{
				if (strlen($option_route_value_context) < 10)
					{$option_route_value_context = 'CID,LB,998,TESTCAMP,1,,,,';}
				$IGoption_route_value_context = explode(",",$option_route_value_context);
				$IGhandle_method =			$IGoption_route_value_context[0];
				$IGsearch_method =			$IGoption_route_value_context[1];
				$IGlist_id =				$IGoption_route_value_context[2];
				$IGcampaign_id =			$IGoption_route_value_context[3];
				$IGphone_code =				$IGoption_route_value_context[4];
				$IGvid_enter_filename =		$IGoption_route_value_context[5];
				$IGvid_id_number_filename =	$IGoption_route_value_context[6];
				$IGvid_confirm_filename =	$IGoption_route_value_context[7];
				$IGvid_validate_digits =	$IGoption_route_value_context[8];

				echo "<span name=option_route_link_$j id=option_route_link_$j>";
				echo "<a href=\"$PHP_SELF?ADD=3111&group_id=$option_route_value\">In-Group:</a>";
				echo "</span>";
				echo " <input type=hidden name=option_route_value_context_$j id=option_route_value_context_$j value=\"$option_route_value_context\">";
				echo " <select size=1 name=option_route_value_$j id=option_route_value_$j onChange=\"call_menu_link('$j','INGROUP');\">";
				echo "$ingroup_list<option SELECTED>$option_route_value</option></select>";
				echo " &nbsp; Manipuler Méthode: <select size=1 name=IGhandle_method_$j id=IGhandle_method_$j>";
				echo "$IGhandle_method_list<option SELECTED>$IGhandle_method</option></select> $NWB#vicidial_call_menu-ingroup_settings$NWE\n";
				echo "<BR>Méthode de recherche: <select size=1 name=IGsearch_method_$j id=IGsearch_method_$j>";
				echo "$IGsearch_method_list<option SELECTED>$IGsearch_method</option></select>\n";
				echo " &nbsp; ID de la liste: <input type=text size=5 maxlength=14 name=IGlist_id_$j id=IGlist_id_$j value=\"$IGlist_id\">";
				echo "<BR>ID de la campagne: <select size=1 name=IGcampaign_id_$j id=IGcampaign_id_$j>";
				echo "$IGcampaign_id_list<option SELECTED>$IGcampaign_id</option></select>\n";
				echo " &nbsp; Phone Code: <input type=text size=5 maxlength=14 name=IGphone_code_$j id=IGphone_code_$j value=\"$IGphone_code\">";
				echo "<BR> &nbsp; VID Entrez Nom: <input type=text name=IGvid_enter_filename_$j id=IGvid_enter_filename_$j size=40 maxlength=255 value=\"$IGvid_enter_filename\"> <a href=\"javascript:launch_chooser('IGvid_enter_filename_$j','date',$choose_height);\">audio chooser</a>";
				echo "<BR> &nbsp; Nom du fichier VID Numéro d'identification: <input type=text name=IGvid_id_number_filename_$j id=IGvid_id_number_filename_$j size=40 maxlength=255 value=\"$IGvid_id_number_filename\"> <a href=\"javascript:launch_chooser('IGvid_id_number_filename_$j','date',$choose_height);\">audio chooser</a>";
				echo "<BR> &nbsp; VID Confirmer Nom: <input type=text name=IGvid_confirm_filename_$j id=IGvid_confirm_filename_$j size=40 maxlength=255 value=\"$IGvid_confirm_filename\"> <a href=\"javascript:launch_chooser('IGvid_confirm_filename_$j','date',$choose_height);\">audio chooser</a>";
				echo " &nbsp; Chiffres VID: <input type=text size=3 maxlength=3 name=IGvid_validate_digits_$j id=IGvid_validate_digits_$j value=\"$IGvid_validate_digits\">";
				}
			if ($option_route=='DID')
				{
				$stmt="SELECT did_id from vicidial_inbound_dids where did_pattern='$option_route_value' $LOGadmin_viewable_groupsSQL;";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				$did_id =			$row[0];

				echo "<span name=option_route_link_$j id=option_route_link_$j>";
				echo "<a href=\"$PHP_SELF?ADD=3311&did_id=$did_id\">DID:</a>";
				echo "</span>";
				echo " <select size=1 name=option_route_value_$j id=option_route_value_$j onChange=\"call_menu_link('$j','DID');\">$did_list<option SELECTED>$option_route_value</option></select>\n";
				}
			if ($option_route=='HANGUP')
				{
				echo "fichier audio: <input type=text name=option_route_value_$j id=option_route_value_$j size=50 maxlength=255 value=\"$option_route_value\"> <a href=\"javascript:launch_chooser('option_route_value_$j','date',$choose_height);\">audio chooser</a>\n";
				}
			if ($option_route=='EXTENSION')
				{
				echo "Extension:<input type=text name=option_route_value_$j id=option_route_value_$j size=20 maxlength=255 value=\"$option_route_value\"> &nbsp; Context: <input type=text name=option_route_value_context_$j id=option_route_value_context_$j size=20 maxlength=255 value=\"$option_route_value_context\">\n";
				}
			if ($option_route=='PHONE')
				{
				echo "Phone: <select size=1 name=option_route_value_$j id=option_route_value_$j>$phone_list<option SELECTED>$option_route_value</option></select>\n";
				}
			if ($option_route=='VOICEMAIL')
				{
				echo "Boîte vocale:<input type=text name=option_route_value_$j id=option_route_value_$j size=12 maxlength=10 value=\"$option_route_value\"> <a href=\"javascript:launch_vm_chooser('option_route_value_$j','vm',700);\">voicemail chooser</a>\n";
				}
			if ($option_route=='AGI')
				{
				echo "AGI: <input type=text name=option_route_value_$j id=option_route_value_$j size=80 maxlength=255 value=\"$option_route_value\">\n";
				}

			echo "</span>
			<BR> &nbsp; </td></tr>\n";
			$j++;
			}

		while ($j <= 20)
			{
			$choose_height = (($j * 40) + 400);
			$dtmf_list = "<select size=1 name=option_value_$j><option value=\"\"></option>";
			$h=0;
			while ($h <= 20)
				{
				$dtmf_list .= "<option value=\"$dtmf[$h]\"> $dtmf_key[$h]</option>";
				$h++;
				}
			$dtmf_list .= "</select>";

			if (eregi("1$|3$|5$|7$|9$", $j))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td align=CENTER colspan=2> 
			Option: $dtmf_list &nbsp; 
			Description: <input type=text name=option_description_$j size=40 maxlength=255 value=\"\">  
			Route: <select size=1 name=option_route_$j id=option_route_$j onChange=\"call_menu_option('$j','','','','$choose_height');\">
				<option>CALLMENU</option>
				<option>INGROUP</option>
				<option>DID</option>
				<option>HANGUP</option>
				<option>EXTENSION</option>
				<option>PHONE</option>
				<option>VOICEMAIL</option>
				<option>AGI</option>
				<option SELECTED value=\"\"> </option>
			</select> 
			$NWB#vicidial_call_menu-option_value$NWE <BR>

			<span id=\"option_value_value_context_$j\" name=\"option_value_value_context_$j\">\n";
			echo "</span>
			<BR> &nbsp; </td></tr>\n";
			$j++;
			}

		if ($SSallow_custom_dialplan > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Entrée personnalisée Dialplan: <BR> $NWB#vicidial_call_menu-custom_dialplan_entry$NWE</td><td align=left><TEXTAREA NAME=custom_dialplan_entry ROWS=5 COLS=70>$custom_dialplan_entry</TEXTAREA></td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Entrée personnalisée Dialplan: </td><td align=left>Disabled <input type=hidden name=custom_dialplan_entry value=\"\">$NWB#vicidial_call_menu-custom_dialplan_entry$NWE</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</table>\n";
		echo "<BR></center></FORM><br>\n";

		echo "<B>DIDS UTILISER CE MENU APPEL:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT did_id,did_pattern,did_description from vicidial_inbound_dids where menu_id='$menu_id' and did_route='CALLMENU' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$dids_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($dids_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3311&did_id=$row[0]\">$row[1] </a></TD><TD> $row[2]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR>\n";

		echo "<B>CALL MENUS UTILISER CE MENU APPEL:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT distinct vm.menu_id,menu_name from vicidial_call_menu vm,vicidial_call_menu_options vmo where vm.menu_id=vmo.menu_id and option_route='CALLMENU' and option_route_value='$menu_id';";
		$rslt=mysql_query($stmt, $link);
		$cms_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($cms_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3511&menu_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";


		if ($LOGdelete_dids > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5511&menu_id=$menu_id\">SUPPRIMER CETTE CALL MENU</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CALLMENUS&stage=$menu_id\">Cliquez ici pour voir les changements d'administration à ce menu APPEL</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################
# ADD=31111 modify remote agents info in the system
######################

if ($ADD==31111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31111&remote_agent_id=$remote_agent_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT remote_agent_id,user_start,number_of_lines,server_ip,conf_exten,status,campaign_id,closer_campaigns,extension_group,on_hook_agent,on_hook_ring_time from vicidial_remote_agents where remote_agent_id='$remote_agent_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$remote_agent_id =	$row[0];
		$user_start =		$row[1];
		$number_of_lines =	$row[2];
		$server_ip =		$row[3];
		$conf_exten =		$row[4];
		$status =			$row[5];
		$campaign_id =		$row[6];
		$extension_group =	$row[8];
		$on_hook_agent =	$row[9];
		$on_hook_ring_time =$row[10];

		##### get user_group of start_user
		$stmt="SELECT user_group from vicidial_users where user='$user_start' $LOGadmin_viewable_groupsSQL;";
		$rsltx=mysql_query($stmt, $link);
		$vu_to_print = mysql_num_rows($rsltx);
		if ($vu_to_print > 0)
			{
			$rowx=mysql_fetch_row($rsltx);
			$user_group = $rowx[0];

			##### get extension group listing for dynamic pulldown
			$stmt="SELECT extension_group_id,count(*) from vicidial_extension_groups group by extension_group_id order by extension_group_id;";
			$rsltx=mysql_query($stmt, $link);
			$extengrp_to_print = mysql_num_rows($rsltx);
			$extengrp_list='';
			$o=0;
			while ($extengrp_to_print > $o)
				{
				$rowx=mysql_fetch_row($rsltx);
				$extengrp_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$o++;
				}

			echo "<br>MODIFIER UN ENREGISTREMENT D'AGENT DISTANT: $row[0]<form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=41111>\n";
			echo "<input type=hidden name=remote_agent_id value=\"$row[0]\">\n";
			echo "<center><TABLE width=$section_width cellspacing=3>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=3&user=$user_start\">Début des ID utilisateurs</a>: </td><td align=left><input type=text name=user_start size=9 maxlength=9 value=\"$user_start\"> (nombres seulement, incremented, doit être un utilisateur existant Vicidial)$NWB#vicidial_remote_agents-user_start$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Nombre de lignes: </td><td align=left><input type=text name=number_of_lines size=3 maxlength=3 value=\"$number_of_lines\"> (nombres seulement)$NWB#vicidial_remote_agents-number_of_lines$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
			echo "$servers_list";
			echo "<option SELECTED>$row[3]</option>\n";
			echo "</select>$NWB#vicidial_remote_agents-server_ip$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Extension externe: </td><td align=left><input type=text name=conf_exten size=20 maxlength=20 value=\"$conf_exten\"> (numéro du dial plan pour atteindre les agents)$NWB#vicidial_remote_agents-conf_exten$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'extension: </td><td align=left><select size=1 name=extension_group>\n";
			echo "$extengrp_list";
			echo "<option>NONE</option>\n";
			echo "<option SELECTED>$extension_group</option>\n";
			echo "</select>$NWB#vicidial_remote_agents-extension_group$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Etat: </td><td align=left><select size=1 name=status><option SELECTED>ACTIF</option><option>INACTIVE</option><option SELECTED>$status</option></select>$NWB#vicidial_remote_agents-status$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id\">Campagne</a>: </td><td align=left><select size=1 name=campaign_id>\n";
			echo "$campaigns_list";
			echo "<option SELECTED>$campaign_id</option>\n";
			echo "</select>$NWB#vicidial_remote_agents-campaign_id$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>On-Hook Agent: </td><td align=left><select size=1 name=on_hook_agent><option>Y</option><option>N</option><option SELECTED>$on_hook_agent</option></select>$NWB#vicidial_remote_agents-on_hook_agent$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Temps Ring On-Hook: </td><td align=left><input type=text name=on_hook_ring_time size=5 maxlength=4 value=\"$on_hook_ring_time\"> $NWB#vicidial_remote_agents-on_hook_ring_time$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($user_start,'8','remote-agent',$link,'ra_total_calls','call count',1);
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Groupes entrants: </td><td align=left>\n";
			echo "$groups_list";
			echo "$NWB#vicidial_remote_agents-closer_campaigns$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
			echo "</TABLE></center>\n";
			echo "NOTE: Il peut prendre jusqu'à 30 secondes pour que les chagements soumis sur cette écran soient pris en compte\n";

			##### get count of did ra extens
			$stmt="SELECT count(*) from vicidial_did_ra_extensions where user_start='$user_start';";
			$rsltx=mysql_query($stmt, $link);
			$didraext_to_print = mysql_num_rows($rsltx);
			$didraext_count='0';
			if ($didraext_to_print > 0)
				{
				$rowx=mysql_fetch_row($rsltx);
				$didraext_count = $rowx[0];
				}

			if ($SSdid_ra_extensions_enabled > 0)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=1320\">IL YA $didraext_count DID télécommande remplace extension de l'agent pour cet agent DISTANCE</a>\n";
				}
			if ($LOGdelete_remote_agents > 0)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=51111&remote_agent_id=$remote_agent_id\">SUPPRIMER CET AGENT DISTANT</a>\n";
				}
			if ($LOGuser_level >= 9)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=REMOTEAGENTS&stage=$remote_agent_id\">Cliquez ici pour voir les changements d'administration à cet agent à distance</FONT>\n";
				}
			}
		else
			{
			echo "Démarrer l'utilisateur pour cet agent distant n'existe pas: $user_start\n";
			exit;
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=3711 modify filter phone group info in the system
######################

if ($ADD==3711)
	{
	if ($LOGmodify_dids==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3711&filter_phone_group_id=$filter_phone_group_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT filter_phone_group_id,filter_phone_group_name,filter_phone_group_description,user_group from vicidial_filter_phone_groups where filter_phone_group_id='$filter_phone_group_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$filter_phone_group_id =			$row[0];
		$filter_phone_group_name =			$row[1];
		$filter_phone_group_description =	$row[2];
		$user_group =						$row[3];

		echo "<br>Modifier le groupe Téléphone filtre: $filter_phone_group_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=4711>\n";
		echo "<input type=hidden name=filter_phone_group_id value=\"$filter_phone_group_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre ID Groupe Téléphone: </td><td align=left> <B>$filter_phone_group_id</B> $NWB#vicidial_filter_phone_groups-user_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Nom du groupe Téléphone: </td><td align=left><input type=text name=filter_phone_group_name size=40 maxlength=40 value=\"$filter_phone_group_name\"> $NWB#vicidial_filter_phone_groups-filter_phone_group_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Description du groupe Téléphone: </td><td align=left><input type=text name=filter_phone_group_description size=60 maxlength=100 value=\"$filter_phone_group_description\"> $NWB#vicidial_filter_phone_groups-filter_phone_group_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_filter_phone_groups-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		$stmt="SELECT count(*) from vicidial_filter_phone_numbers where filter_phone_group_id='$filter_phone_group_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		echo "<br><br>Numéros de ce groupe Téléphone filtre: $row[0]";

		if ($LOGdelete_dids > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5711&filter_phone_group_id=$filter_phone_group_id\">Supprimer ce groupe TÉLÉPHONE FILTRE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"./list_download.php?group_id=$filter_phone_group_id&download_type=fpgn\">Cliquez ici pour télécharger les numéros de téléphone dans ce groupe filtre</FONT>\n";

			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=FILTERPHONEGROUPS&stage=$filter_phone_group_id\">Cliquez ici pour voir les changements d'administrateur pour ce groupe de téléphone du filtre</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=32111 modify extension group entry in the system
######################

if ($ADD==32111)
	{
	if ($LOGmodify_remoteagents==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=32111&extension_id=$extension_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT extension_id,extension_group_id,extension,rank,campaign_groups,call_count_today,last_call_time,last_callerid from vicidial_extension_groups where extension_id='$extension_id';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$extension_id =			$row[0];
		$extension_group_id =	$row[1];
		$extension =			$row[2];
		$rank =					$row[3];
		$campaign_groups =		$row[4];
		$call_count_today =		$row[5];
		$last_call_time =		$row[6];
		$last_callerid =		$row[7];

		echo "<br>Modifier une entrée GROUPE D'EXTENSION: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=42111>\n";
		echo "<input type=hidden name=extension_id value=\"$extension_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'extension: </td><td align=left><input type=text name=extension_group_id size=20 maxlength=20 value=\"$extension_group_id\"> (no spaces)$NWB#vicidial_extension_groups-extension_group_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension:</td><td align=left><input type=text name=extension size=18 maxlength=18 value=\"$extension\"> (nombres seulement)$NWB#vicidial_extension_groups-extension$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rank:</td><td align=left><select size=1 name=rank>\n";
		$n=99;
		$rankfound=0;
		while ($n>=-99)
			{
			if ($n == $rank) 
				{echo "<option SELECTED value=\"$n\">$n</option>\n";   $rankfound++;}
			else
				{echo "<option value=\"$n\">$n</option>\n";}
			$n--;
			}
		if ($rankfound < 1)
			{echo "<option SELECTED value=\"$rank\">$rank</option>\n";}

		echo "</select> $NWB#vicidial_extension_groups-rank$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupes Campagnes: </td><td align=left><input type=text name=campaign_groups size=50 maxlength=255 value=\"$campaign_groups\"> (pipe-delimited list)$NWB#vicidial_extension_groups-extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Appelez le comte Aujourd'hui: </td><td align=left>$call_count_today</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Durée dernier appel: </td><td align=left>$last_call_time</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID Last Call: </td><td align=left>$last_callerid</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		if ($LOGdelete_remote_agents > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=52111&extension_id=$extension_id\">Supprimer cette rubrique GROUPE D'EXTENSION</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=EXTENGROUP&stage=$extension_id\">Cliquez ici pour voir les changements d'administration to this extension group entry</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=311111 modify user group info in the system
######################

if ($ADD==311111)
	{
	if ($LOGmodify_usergroups==1)
		{
		if ( ($LOGmodify_same_user_level < 1) and ($user_group=="$LOGuser_group") )
			{
			echo "Vous n'êtes pas autorisé à modifier votre propre groupe d'utilisateurs\n";
			exit;
			}
		else
			{
			if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
				{
				$modify_url = "$PHP_SELF?ADD=311111&user_group=$user_group";
				$modify_footer_rafraîchir=1;
				}
			echo "<TABLE><TR><TD>\n";
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			$stmt="SELECT user_group,group_name,allowed_campaigns,qc_allowed_campaigns,qc_allowed_inbound_groups,group_shifts,forced_timeclock_login,shift_enforcement,agent_status_viewable_groups,agent_status_view_time,agent_call_log_view,agent_xfer_consultative,agent_xfer_dial_override,agent_xfer_vm_transfer,agent_xfer_blind_transfer,agent_xfer_dial_with_customer,agent_xfer_park_customer_dial,agent_fullscreen,allowed_reports,webphone_url_override,webphone_systemkey_override,webphone_dialpad_override,admin_viewable_groups,admin_viewable_call_times from vicidial_user_groups where user_group='$user_group' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$user_group =						$row[0];
			$group_name =						$row[1];
			$GROUP_shifts =						$row[5];
			$forced_timeclock_login =			$row[6];
			$shift_enforcement =				$row[7];
			$VGROUP_vgroups =					$row[8];
			$agent_status_view_time =			$row[9];
			$agent_call_log_view =				$row[10];
			$agent_xfer_consultative =			$row[11];
			$agent_xfer_dial_override =			$row[12];
			$agent_xfer_vm_transfer =			$row[13];
			$agent_xfer_blind_transfer =		$row[14];
			$agent_xfer_dial_with_customer =	$row[15];
			$agent_xfer_park_customer_dial =	$row[16];
			$agent_fullscreen =					$row[17];
			$allowed_reports =					$row[18];
			$webphone_url_override =			$row[19];
			$webphone_systemkey_override =		$row[20];
			$webphone_dialpad_override =		$row[21];
			$admin_viewable_groups =			$row[22];
			$admin_viewable_call_times =		$row[23];

			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			echo "<br>MODIFIER UN ENREGISTREMENT DE GROUPE D'UTILISATEURS<form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=411111>\n";
			echo "<input type=hidden name=OLDuser_group value=\"$user_group\">\n";
			echo "<center><TABLE width=$section_width cellspacing=3>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe: </td><td align=left><input type=text name=user_group size=15 maxlength=20 value=\"$user_group\"> (pas d'espace ni de ponctuation)$NWB#vicidial_user_groups-user_group$NWE</td></tr>\n";
			echo "<tr bgcolor=#B6D3FC><td align=right>Description: </td><td align=left><input type=text name=group_name size=40 maxlength=40 value=\"$group_name\"> (Description du groupe)$NWB#vicidial_user_groups-group_name$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Force timeclock Login: </td><td align=left><select size=1 name=forced_timeclock_login><option SELECTED>N</option><option>Y</option><option>ADMIN_EXEMPT</option><option SELECTED>$forced_timeclock_login</option></select>$NWB#vicidial_user_groups-forced_timeclock_login$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Shift exécution: </td><td align=left><select size=1 name=shift_enforcement><option SELECTED>OFF</option><option>START</option><option>ALL</option><option>ADMIN_EXEMPT</option><option SELECTED>$shift_enforcement</option></select>$NWB#vicidial_user_groups-shift_enforcement$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Campagnes autorisées: <BR>$NWB#vicidial_user_groups-allowed_campaigns$NWE</td><td align=left>\n";
			echo "$campaigns_list <BR>&nbsp;";
			echo "</td></tr>\n";


			echo "<tr bgcolor=#B6D3FC><td align=right>Groupe de changements:<BR>$NWB#vicidial_user_groups-group_shifts$NWE</td><td align=left>\n";
			$stmt="SELECT shift_id,shift_name from vicidial_shifts $whereLOGadmin_viewable_groupsSQL order by shift_id;";
			if ($DB > 0) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$shifts_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($shifts_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$shift_id_value = $rowx[0];
				$shift_name_value = $rowx[1];
				echo "<input type=\"checkbox\" name=\"group_shifts[]\" value=\"$shift_id_value\"";
				$p=0;
				while ($p<1000)
					{
					if (ereg(" $shift_id_value ", $GROUP_shifts))
						{
						echo " CHECKED";
						}
					$p++;
					}
				echo "> <a href=\"$PHP_SELF?ADD=331111111&shift_id=$shift_id_value\">$shift_id_value</a> - $shift_name_value<BR>\n";
				$o++;
				}
			echo " <BR>&nbsp;</td></tr>\n";


			echo "<tr bgcolor=#B6D3FC><td align=right>Le statut de mandataire Viewable Groupes: <BR>$NWB#vicidial_user_groups-agent_status_viewable_groups$NWE</td><td align=left>\n";
			if ($admin_viewable_groupsALL > 0)
				{
				echo "<input type=\"checkbox\" name=\"agent_status_viewable_groups[]\" value=\"--ALL-GROUPS--\"";
				if (ereg(" --ALL-GROUPS-- ", $VGROUP_vgroups))
					{echo " CHECKED";}
				echo "><B>ALL-GROUPS</B> - All user groups in the system<BR>\n";
				}
			echo "<input type=\"checkbox\" name=\"agent_status_viewable_groups[]\" value=\"--CAMPAIGN-AGENTS--\"";
			if (ereg(" --CAMPAIGN-AGENTS-- ", $VGROUP_vgroups))
				{echo " CHECKED";}
			echo "><B>CAMPAIGN-AGENTS</B> - All users logged into the same campaign as the agent<BR>\n";
			if ($admin_viewable_groupsALL > 0)
				{
				echo "<input type=\"checkbox\" name=\"agent_status_viewable_groups[]\" value=\"--NOT-LOGGED-IN-AGENTS--\"";
				if (ereg(" --NOT-LOGGED-IN-AGENTS-- ", $VGROUP_vgroups))
					{echo " CHECKED";}
				echo "><B>NOT-LOGGED-IN-AGENTS</B> - Tous les utilisateurs du système, même pas les utilisateurs inscrits<BR>\n";
				}

			$stmt="SELECT user_group,group_name from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
			$rslt=mysql_query($stmt, $link);
			$view_groups_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($view_groups_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$vgroups_id_value = $rowx[0];
				$vgroups_name_value = $rowx[1];
				echo "<input type=\"checkbox\" name=\"agent_status_viewable_groups[]\" value=\"$vgroups_id_value\"";
				$p=0;
				while ($p<1000)
					{
					if (ereg(" $vgroups_id_value ", $VGROUP_vgroups))
						{
						echo " CHECKED";
						}
					$p++;
					}
				echo "> <a href=\"$PHP_SELF?ADD=311111&user_group=$vgroups_id_value\">$vgroups_id_value</a> - $vgroups_name_value<BR>\n";
				$o++;
				}
			echo " <BR>&nbsp;</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Le statut de mandataire Afficher Time: </td><td align=left><select size=1 name=agent_status_view_time><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_status_view_time</option></select>$NWB#vicidial_user_groups-agent_status_view_time$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Voir le journal de l'Agent d'appel: </td><td align=left><select size=1 name=agent_call_log_view><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_call_log_view</option></select>$NWB#vicidial_user_groups-agent_call_log_view$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Xfer consultatif: </td><td align=left><select size=1 name=agent_xfer_consultative><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_consultative</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Xfer Override Dial: </td><td align=left><select size=1 name=agent_xfer_dial_override><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_dial_override</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Xfer message vocal: </td><td align=left><select size=1 name=agent_xfer_vm_transfer><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_vm_transfer</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Xfer aveugles: </td><td align=left><select size=1 name=agent_xfer_blind_transfer><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_blind_transfer</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Dial Avec Xfer clientèle: </td><td align=left><select size=1 name=agent_xfer_dial_with_customer><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_dial_with_customer</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Agent Autoriser Xfer Parc Dial Client: </td><td align=left><select size=1 name=agent_xfer_park_customer_dial><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_xfer_park_customer_dial</option></select>$NWB#vicidial_user_groups-agent_xfer_options$NWE</td></tr>\n";
			
			echo "<tr bgcolor=#B6D3FC><td align=right>Agent plein écran: </td><td align=left><select size=1 name=agent_fullscreen><option SELECTED>Y</option><option>N</option><option SELECTED>$agent_fullscreen</option></select>$NWB#vicidial_user_groups-agent_fullscreen$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Rapports admis: </td><td align=left><select MULTIPLE size=8 name=allowed_reports[]>\n";
			$Vreports_ARY = explode(',',$UGreports);
			$Vreports_ct = count($Vreports_ARY);
			$b=0;
			while ($b < $Vreports_ct)
				{
				$field_selected='';
				trim($Vreports_ARY[$b]);
				if (preg_match("/$Vreports_ARY[$b]/",$allowed_reports))
					{$field_selected = 'SELECTED';}
				echo "<option value=\"$Vreports_ARY[$b]\" $field_selected>$Vreports_ARY[$b]</option>\n";
				$b++;
				}
			echo "</select>$NWB#vicidial_user_groups-allowed_reports$NWE</td></tr>\n";

			if (strlen($SSwebphone_url) > 5)
				{
				echo "<tr bgcolor=#B6D3FC><td align=right>Remplacer URL Webphone: </td><td align=left><input type=text name=webphone_url_override size=60 maxlength=255 value=\"$webphone_url_override\"> $NWB#vicidial_user_groups-webphone_url_override$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Webphone Key System Override: </td><td align=left><input type=text name=webphone_systemkey_override size=60 maxlength=100 value=\"$webphone_systemkey_override\"> $NWB#vicidial_user_groups-webphone_systemkey_override$NWE</td></tr>\n";

				echo "<tr bgcolor=#B6D3FC><td align=right>Webphone Dialpad Override: </td><td align=left><select size=1 name=webphone_dialpad_override><option>DISABLED</option><option>Y</option><option>N</option><option>TOGGLE</option><option>TOGGLE_OFF</option><option SELECTED>$webphone_dialpad_override</option></select>$NWB#vicidial_user_groups-webphone_dialpad_override$NWE</td></tr>\n";
				}
			else
				{
				echo "<input type=hidden name=webphone_url_override value=\"$webphone_url_override\"> ";
				echo "<input type=hidden name=webphone_systemkey_override value=\"$webphone_systemkey_override\"> ";
				echo "<input type=hidden name=webphone_dialpad_override value=\"$webphone_dialpad_override\"> ";
				}

			if ($SSqc_features_active > 0)
				{
				echo "<tr bgcolor=#B6D3FC><td align=right>QC permis Campagnes:<BR>$NWB#vicidial_user_groups-qc_allowed_campaigns$NWE</td><td align=left>\n";
				echo "$qc_campaigns_list";
				echo " <BR>&nbsp;</td></tr>\n";
				echo "<tr bgcolor=#B6D3FC><td align=right>QC permis l'arrivée des groupes:<BR>$NWB#vicidial_user_groups-qc_allowed_inbound_groups$NWE</td><td align=left>\n";
				echo "$qc_groups_list";
				echo " <BR>&nbsp;</td></tr>\n";
				}


			echo "<tr bgcolor=#B6D3FC><td align=right>Groupes d'utilisateurs autorisés: <BR>$NWB#vicidial_user_groups-admin_viewable_groups$NWE</td><td align=left>\n";
			if ($admin_viewable_groupsALL > 0)
				{
				echo "<input type=\"checkbox\" name=\"admin_viewable_groups[]\" value=\"---ALL---\"";
				if (ereg(" ---ALL--- ", $admin_viewable_groups))
					{echo " CHECKED";}
				echo "><B>ALL-GROUPS</B> - All user groups in the system<BR>\n";
				}

			$stmt="SELECT user_group,group_name from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
			$rslt=mysql_query($stmt, $link);
			$view_groups_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($view_groups_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$vgroups_id_value =		$rowx[0];
				$vgroups_name_value =	$rowx[1];
				echo "<input type=\"checkbox\" name=\"admin_viewable_groups[]\" value=\"$vgroups_id_value\"";
				$p=0;
				while ($p<1000)
					{
					if (ereg(" $vgroups_id_value ", $admin_viewable_groups))
						{
						echo " CHECKED";
						}
					$p++;
					}
				echo "> <a href=\"$PHP_SELF?ADD=311111&user_group=$vgroups_id_value\">$vgroups_id_value</a> - $vgroups_name_value<BR>\n";
				$o++;
				}
			echo " <BR>&nbsp;</td></tr>\n";


			echo "<tr bgcolor=#B6D3FC><td align=right>Durée des appels autorisés: <BR>$NWB#vicidial_user_groups-admin_viewable_call_times$NWE</td><td align=left>\n";
			echo "<input type=\"checkbox\" name=\"admin_viewable_call_times[]\" value=\"---ALL---\"";
			if (ereg(" ---ALL--- ", $admin_viewable_call_times))
				{echo " CHECKED";}
			echo "><B>ALL-CALLTIMES</B> - Toutes les heures d'appels dans le système<BR>\n";

			$stmt="SELECT call_time_id,call_time_name from vicidial_call_times $whereLOGadmin_viewable_call_timesSQL order by call_time_id;";
			$rslt=mysql_query($stmt, $link);
			$view_calltimes_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($view_calltimes_to_print > $o)
				{
				$rowx=mysql_fetch_row($rslt);
				$vcalltimes_id_value =		$rowx[0];
				$vcalltimes_name_value =	$rowx[1];
				echo "<input type=\"checkbox\" name=\"admin_viewable_call_times[]\" value=\"$vcalltimes_id_value\"";
				$p=0;
				while ($p<1000)
					{
					if (ereg(" $vcalltimes_id_value ", $admin_viewable_call_times))
						{
						echo " CHECKED";
						}
					$p++;
					}
				echo "> <a href=\"$PHP_SELF?ADD=311111&user_group=$vcalltimes_id_value\">$vcalltimes_id_value</a> - $vcalltimes_name_value<BR>\n";
				$o++;
				}
			echo " <BR>&nbsp;</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
			echo "</TABLE></center>\n";


			### list of users in this user group

			$active_confs = 0;
			$stmt="SELECT user,full_name,user_level,active from vicidial_users where user_group='$user_group' $LOGadmin_viewable_groupsSQL;";
			$rsltx=mysql_query($stmt, $link);
			$users_to_print = mysql_num_rows($rsltx);

			echo "<center>\n";
			echo "<br><b>UTILISATEURS APPARTENANT A CE GROUPE D'UTILISATEURS: $users_to_print</b><br>\n";
			echo "<TABLE width=400 cellspacing=3>\n";
			echo "<tr><td>USER</td><td>FULL NAME</td><td>NIVEAU</td><td>ACTIF</td></tr>\n";

			$o=0;
			while ($users_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rsltx);
				$o++;

				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}

				echo "<tr $bgcolor>\n";
				echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3&user=$rowx[0]\">$rowx[0]</a></td>\n";
				echo "<td><font size=1>$rowx[1]</td>\n";
				echo "<td><font size=1>$rowx[2]</td>\n";
				echo "<td><font size=1>$rowx[3]</td>\n";
				echo "</tr>\n";
				}

			echo "</table></center><br></form>\n";


			##### BEGIN add/remove in-group as selected for all active users in this group #####
			echo "<center>\n";
			echo "<br><b>Ajouter ou supprimer des en-groupe sélectionné pour les utilisateurs actifs dans ce groupe d'utilisateurs</b><form action=$PHP_SELF#agent_ranks method=POST>\n";
			echo "<input type=hidden name=ADD value=4111>\n";
			echo "<input type=hidden name=SUB value=agents_select>\n";
			echo "<input type=hidden name=OLDuser_group value=\"$user_group\">\n";
			### get in-groups listings for dynamic pulldown
			$stmt="SELECT group_id,group_name from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
			$rslt=mysql_query($stmt, $link);
			$Xgroups_to_print = mysql_num_rows($rslt);
			$Xgroups_menu='';
			$o=0;
			while ($Xgroups_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$Xgroups_menu .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
				$o++;
				}
			echo "<select size=1 name=stage><option value=\"add\" SELECTED>add</option><option value=\"remove\">remove</option></select> &nbsp; \n";
			echo "In-Groupe: <select size=1 name=group_id>$Xgroups_menu</select><br>\n";
			echo "<input type=submit name=VALIDER value=VALIDER></form>\n";
			##### END add/remove in-group as selected for all active users in this group #####

			echo "<br><br><a href=\"$PHP_SELF?ADD=8111&user_group=$user_group\">Cliquez ici pour voir tous les CallBack Détient dans ce groupe d'utilisateurs</a><BR><BR>\n";
			echo "<br><br><a href=\"./timeclock_status.php?user_group=$user_group\">Cliquez ici pour voir le statut timeclock pour ce groupe d'utilisateurs</a><BR><BR>\n";

			if ($LOGdelete_user_groups > 0)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=511111&user_group=$user_group\">SUPPRIMER CE GROUPE </a>\n";
				}
			if ($LOGuser_level >= 9)
				{
				echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=USERGROUPS&stage=$user_group\">Cliquez ici pour voir les changements d'administrateur pour ce groupe d'utilisateurs</FONT>\n";
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=3111111 modify script info in the system
######################

if ($ADD==3111111)
	{
	if ($LOGmodify_scripts==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3111111&script_id=$script_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT script_id,script_name,script_comments,script_text,active,user_group from vicidial_scripts where script_id='$script_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$script_name =		$row[1];
		$script_comments =	$row[2];
		$script_text =		stripslashes($row[3]);
		$active =			$row[4];
		$user_group =		$row[5];

		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>MODIFIER UN SCRIPT<form name=scriptForm action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=4111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=script_id value=\"$script_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID du script: </td><td align=left><B>$script_id</B>$NWB#vicidial_scripts-script_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du script: </td><td align=left><input type=text name=script_name size=40 maxlength=50 value=\"$script_name\"> (titre du script)$NWB#vicidial_scripts-script_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires du script: </td><td align=left><input type=text name=script_comments size=50 maxlength=255 value=\"$script_comments\"> $NWB#vicidial_scripts-script_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_scripts-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option SELECTED>Y</option><option>N</option><option selected>$active</option></select>$NWB#vicidial_scripts-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Texte du script: <BR><BR><B><a href=\"javascript:openNewWindow('$PHP_SELF?ADD=7111111&script_id=$script_id')\">Prévisualisation du script</a></B> </td><td align=left>";
		# BEGIN Insert Field
		echo "<select id=\"selectedField\" name=\"selectedField\">";
		echo "<option value=\"fullname\">Agent Name</option>";
		echo "<option>vendor_lead_code</option>";
		echo "<option>source_id</option>";
		echo "<option>list_id</option>";
		echo "<option>list_name</option>";
		echo "<option>list_description</option>";
		echo "<option>gmt_offset_now</option>";
		echo "<option>called_since_last_reset</option>";
		echo "<option>phone_code</option>";
		echo "<option>phone_number</option>";
		echo "<option>title</option>";
		echo "<option>first_name</option>";
		echo "<option>middle_initial</option>";
		echo "<option>last_name</option>";
		echo "<option>address1</option>";
		echo "<option>address2</option>";
		echo "<option>address3</option>";
		echo "<option>city</option>";
		echo "<option>state</option>";
		echo "<option>province</option>";
		echo "<option>postal_code</option>";
		echo "<option>country_code</option>";
		echo "<option>gender</option>";
		echo "<option>date_of_birth</option>";
		echo "<option>alt_phone</option>";
		echo "<option>email</option>";
		echo "<option>security_phrase</option>";
		echo "<option>comments</option>";
		echo "<option>lead_id</option>";
		echo "<option>campaign</option>";
		echo "<option>phone_login</option>";
		echo "<option>group</option>";
		echo "<option>channel_group</option>";
		echo "<option>SQLdate</option>";
		echo "<option>epoch</option>";
		echo "<option>uniqueid</option>";
		echo "<option>customer_zap_channel</option>";
		echo "<option>server_ip</option>";
		echo "<option>SIPexten</option>";
		echo "<option>session_id</option>";
		echo "<option>dialed_number</option>";
		echo "<option>dialed_label</option>";
		echo "<option>rank</option>";
		echo "<option>owner</option>";
		echo "<option>camp_script</option>";
		echo "<option>in_script</option>";
		echo "<option>script_width</option>";
		echo "<option>script_height</option>";
		echo "<option>recording_filename</option>";
		echo "<option>recording_id</option>";
		echo "<option>user_custom_one</option>";
		echo "<option>user_custom_two</option>";
		echo "<option>user_custom_three</option>";
		echo "<option>user_custom_four</option>";
		echo "<option>user_custom_five</option>";
		echo "<option>preset_number_a</option>";
		echo "<option>preset_number_b</option>";
		echo "<option>preset_number_c</option>";
		echo "<option>preset_number_d</option>";
		echo "<option>preset_number_e</option>";
		echo "<option>preset_number_f</option>";
		echo "<option>preset_dtmf_a</option>";
		echo "<option>preset_dtmf_b</option>";
		echo "<option>did_id</option>";
		echo "<option>did_extension</option>";
		echo "<option>did_pattern</option>";
		echo "<option>did_description</option>";
		echo "<option>closecallid</option>";
		echo "<option>xfercallid</option>";
		echo "<option>agent_log_id</option>";
		echo "<option>entry_list_id</option>";
		echo "<option>call_id</option>";
		echo "</select>";
		echo "<input type=\"button\" name=\"insertField\" value=\"Insert\" onClick=\"scriptInsertField();\"><BR>";
		# END Insert Field
		echo "<TEXTAREA NAME=script_text ROWS=20 COLS=50>$script_text</TEXTAREA> $NWB#vicidial_scripts-script_text$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";



		echo "</TABLE><BR><BR>\n";
		echo "<B> CAMPAGNES utilisant ce script:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns where campaign_script='$script_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR><BR>\n";
		echo "<B> In-groups en utilisant ce script:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT group_id,group_name from vicidial_inbound_groups where ingroup_script='$script_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3111&group_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR><BR>\n";
		echo "<B> Remplacements LISTE utilisant ce script:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT list_id,list_name from vicidial_lists where agent_script_override='$script_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		if ($LOGdelete_scripts > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5111111&script_id=$script_id\">SUPPRIMER CE SCRIPT</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=SCRIPTS&stage=$script_id\">Cliquez ici pour voir les changements d'administration de ce script</FONT>\n";
			}

		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=31111111 modify filter info in the system
######################

if ($ADD==31111111)
	{
	if ($LOGmodify_filters==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31111111&lead_filter_id=$lead_filter_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT lead_filter_id,lead_filter_name,lead_filter_comments,lead_filter_sql,user_group from vicidial_lead_filters where lead_filter_id='$lead_filter_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$lead_filter_name =		$row[1];
		$lead_filter_comments =	$row[2];
		$lead_filter_sql =		stripslashes($row[3]);
		$user_group =			$row[4];

		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>MODIFIER UN FILTRE<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=41111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=lead_filter_id value=\"$lead_filter_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID du filtre:</td><td align=left><B>$lead_filter_id</B>$NWB#vicidial_lead_filters-lead_filter_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du filtre:</td><td align=left><input type=text name=lead_filter_name size=40 maxlength=50 value=\"$lead_filter_name\"> (courte description du filtre)$NWB#vicidial_lead_filters-lead_filter_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires du filtre:</td><td align=left><input type=text name=lead_filter_comments size=50 maxlength=255 value=\"$lead_filter_comments\"> $NWB#vicidial_lead_filters-lead_filter_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_lead_filters-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Filtre Sql:</td><td align=left><TEXTAREA NAME=lead_filter_sql ROWS=20 COLS=50>$lead_filter_sql</TEXTAREA> $NWB#vicidial_lead_filters-lead_filter_sql$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center></form>\n";

		##### get campaigns listing for dynamic pulldown
		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns $whereLOGallowed_campaignsSQL order by campaign_id";
		$rslt=mysql_query($stmt, $link);
		$campaigns_to_print = mysql_num_rows($rslt);
		$campaigns_list='';

		$o=0;
		while ($campaigns_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$campaigns_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}

		echo "<BR><BR>";
		echo "<br>TEST SUR LA CAMPAGNE: <form action=$PHP_SELF method=POST target=\"_blank\">\n";
		echo "<input type=hidden name=lead_filter_id value=\"$lead_filter_id\">\n";
		echo "<input type=hidden name=ADD value=\"73\">\n";
		echo "<select size=1 name=campaign_id>\n";
		echo "$campaigns_list";
		echo "</select>\n";
		echo "<input type=submit name=VALIDER value=VALIDER>\n";


		if ($LOGdelete_filters > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=51111111&lead_filter_id=$lead_filter_id\">SUPPRIMER CE FILTRE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=FILTRES&stage=$lead_filter_id\">Cliquez ici pour voir les changements d'administration à ce filtre</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=321111111 modify call time definition info in the system, ADD/REMOVE
######################

if ($ADD==321111111)
	{
	if ($LOGmodify_call_times==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=311111111&call_time_id=$call_time_id";
			$modify_footer_rafraîchir=1;
			}
		if ( ($stage=="ADD") and (strlen($state_rule)>0) )
			{
			$stmt="SELECT ct_state_call_times from vicidial_call_times where call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$ct_state_call_times = $row[0];

			if (eregi("\|$",$ct_state_call_times))
				{$ct_state_call_times = "$ct_state_call_times$state_rule\|";}
			else
				{$ct_state_call_times = "$ct_state_call_times\|$state_rule\|";}
			$stmt="UPDATE vicidial_call_times set ct_state_call_times='$ct_state_call_times' where call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);
			echo "Règle d'état ajoutée: $state_rule<BR>\n";
			}
		if ( ($stage=="REMOVE") and (strlen($state_rule)>0) )
			{
			$stmt="SELECT ct_state_call_times from vicidial_call_times where call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);
			$row=mysql_fetch_row($rslt);
			$ct_state_call_times = $row[0];

			$ct_state_call_times = eregi_replace("\|$state_rule\|",'|',$ct_state_call_times);
			$stmt="UPDATE vicidial_call_times set ct_state_call_times='$ct_state_call_times' where call_time_id='$call_time_id';";
			$rslt=mysql_query($stmt, $link);
			echo "Règle d'état supprimée: $state_rule<BR>\n";
			}

		$ADD=311111111;
		}
	else
		{
		echo "Vous n'êtes pas autorisé à voir cette page. Veuillez revenir en arrière.";
		}
	}


######################
# ADD=311111111 modify call time definition info in the system
######################

if ($ADD==311111111)
	{
	if ($LOGmodify_call_times==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=311111111&call_time_id=$call_time_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT call_time_id,call_time_name,call_time_comments,ct_default_start,ct_default_stop,ct_sunday_start,ct_sunday_stop,ct_monday_start,ct_monday_stop,ct_tuesday_start,ct_tuesday_stop,ct_wednesday_start,ct_wednesday_stop,ct_thursday_start,ct_thursday_stop,ct_friday_start,ct_friday_stop,ct_saturday_start,ct_saturday_stop,ct_state_call_times,default_afterhours_filename_override,sunday_afterhours_filename_override,monday_afterhours_filename_override,tuesday_afterhours_filename_override,wednesday_afterhours_filename_override,thursday_afterhours_filename_override,friday_afterhours_filename_override,saturday_afterhours_filename_override,user_group from vicidial_call_times where call_time_id='$call_time_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$call_time_name =		$row[1];
		$call_time_comments =	$row[2];
		$ct_default_start =		$row[3];
		$ct_default_stop =		$row[4];
		$ct_sunday_start =		$row[5];
		$ct_sunday_stop =		$row[6];
		$ct_monday_start =		$row[7];
		$ct_monday_stop =		$row[8];
		$ct_tuesday_start =		$row[9];
		$ct_tuesday_stop =		$row[10];
		$ct_wednesday_start =	$row[11];
		$ct_wednesday_stop =	$row[12];
		$ct_thursday_start =	$row[13];
		$ct_thursday_stop =		$row[14];
		$ct_friday_start =		$row[15];
		$ct_friday_stop =		$row[16];
		$ct_saturday_start =	$row[17];
		$ct_saturday_stop =		$row[18];
		$ct_state_call_times =	$row[19];
		$default_afterhours_filename_override =		$row[20];
		$sunday_afterhours_filename_override =		$row[21];
		$monday_afterhours_filename_override =		$row[22];
		$tuesday_afterhours_filename_override =		$row[23];
		$wednesday_afterhours_filename_override =	$row[24];
		$thursday_afterhours_filename_override =	$row[25];
		$friday_afterhours_filename_override =		$row[26];
		$saturday_afterhours_filename_override =	$row[27];
		$user_group =			$row[28];

		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>MODIFIER UNE PERIODE D'APPELS<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=411111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=call_time_id value=\"$call_time_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Identifiant de la période d'appels: </td><td align=left colspan=3><B>$call_time_id</B>$NWB#vicidial_call_times-call_time_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la période d'appels: </td><td align=left colspan=3><input type=text name=call_time_name size=40 maxlength=50 value=\"$call_time_name\"> (courte description de la période d'appel)$NWB#vicidial_call_times-call_time_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires de la période d'appels: </td><td align=left colspan=3><input type=text name=call_time_comments size=50 maxlength=255 value=\"$call_time_comments\"> $NWB#vicidial_call_times-call_time_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_call_times-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début par défaut:</td><td align=left><input type=text name=ct_default_start size=5 maxlength=4 value=\"$ct_default_start\"> </td><td align=right>Fin par défaut:</td><td align=left nowrap><input type=text name=ct_default_stop size=5 maxlength=4 value=\"$ct_default_stop\"> $NWB#vicidial_call_times-ct_default_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=default_afterhours_filename_override id=default_afterhours_filename_override size=20 maxlength=255 value=\"$default_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('default_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le dimanche:</td><td align=left><input type=text name=ct_sunday_start size=5 maxlength=4 value=\"$ct_sunday_start\"> </td><td align=right>Fin le dimanche:</td><td align=left><input type=text name=ct_sunday_stop size=5 maxlength=4 value=\"$ct_sunday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=sunday_afterhours_filename_override id=sunday_afterhours_filename_override size=20 maxlength=255 value=\"$sunday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('sunday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le lundi:</td><td align=left><input type=text name=ct_monday_start size=5 maxlength=4 value=\"$ct_monday_start\"> </td><td align=right>Fin le lundi:</td><td align=left><input type=text name=ct_monday_stop size=5 maxlength=4 value=\"$ct_monday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=monday_afterhours_filename_override id=monday_afterhours_filename_override size=20 maxlength=255 value=\"$monday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('monday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le mardi:</td><td align=left><input type=text name=ct_tuesday_start size=5 maxlength=4 value=\"$ct_tuesday_start\"> </td><td align=right>Fin le mardi:</td><td align=left><input type=text name=ct_tuesday_stop size=5 maxlength=4 value=\"$ct_tuesday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=tuesday_afterhours_filename_override id=tuesday_afterhours_filename_override size=20 maxlength=255 value=\"$tuesday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('tuesday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le mercredi:</td><td align=left><input type=text name=ct_wednesday_start size=5 maxlength=4 value=\"$ct_wednesday_start\"> </td><td align=right>Fin le mercredi:</td><td align=left><input type=text name=ct_wednesday_stop size=5 maxlength=4 value=\"$ct_wednesday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=wednesday_afterhours_filename_override id=wednesday_afterhours_filename_override size=20 maxlength=255 value=\"$wednesday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('wednesday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Jeudi Start:</td><td align=left><input type=text name=ct_thursday_start size=5 maxlength=4 value=\"$ct_thursday_start\"> </td><td align=right>Fin le jeudi:</td><td align=left><input type=text name=ct_thursday_stop size=5 maxlength=4 value=\"$ct_thursday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=thursday_afterhours_filename_override id=thursday_afterhours_filename_override size=20 maxlength=255 value=\"$thursday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('thursday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le vendredi:</td><td align=left><input type=text name=ct_friday_start size=5 maxlength=4 value=\"$ct_friday_start\"> </td><td align=right>Fin le vendredi:</td><td align=left><input type=text name=ct_friday_stop size=5 maxlength=4 value=\"$ct_friday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=friday_afterhours_filename_override id=friday_afterhours_filename_override size=20 maxlength=255 value=\"$friday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('friday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le samedi:</td><td align=left><input type=text name=ct_saturday_start size=5 maxlength=4 value=\"$ct_saturday_start\"> </td><td align=right>Fin le samedi:</td><td align=left><input type=text name=ct_saturday_stop size=5 maxlength=4 value=\"$ct_saturday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE &nbsp; &nbsp; &nbsp; AH Override: <input type=text name=saturday_afterhours_filename_override id=saturday_afterhours_filename_override size=20 maxlength=255 value=\"$saturday_afterhours_filename_override\"> <a href=\"javascript:launch_chooser('saturday_afterhours_filename_override','date',30);\">audio chooser</a> $NWB#vicidial_call_times-default_afterhours_filename_override$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=4><input type=submit name=VALIDER value=VALIDER></FORM></td></tr>\n";

		$ct_srs=1;
		$b=0;
		$srs_SQL ='';
		if (strlen($ct_state_call_times)>2)
			{
			$state_rules = explode('|',$ct_state_call_times);
			$ct_srs = ((count($state_rules)) - 1);
			}
		echo "<tr bgcolor=#B6D3FC><td align=center rowspan=$ct_srs>Activer les définitions des états des périodes d'appels pour cet enregistrement: </td>\n";
		echo "<td align=center colspan=3>&nbsp;</td></tr>\n";
		while($ct_srs >= $b)
			{
			if (strlen($state_rules[$b])>0)
				{
				$stmt="SELECT state_call_time_state,state_call_time_name from vicidial_state_call_times where state_call_time_id='$state_rules[$b]';";
				$rslt=mysql_query($stmt, $link);
				$row=mysql_fetch_row($rslt);
				echo "<tr bgcolor=#B6D3FC><td align=right colspan=2><a href=\"$PHP_SELF?ADD=3111111111&call_time_id=$state_rules[$b]\">$state_rules[$b] </a> - <a href=\"$PHP_SELF?ADD=321111111&call_time_id=$call_time_id&state_rule=$state_rules[$b]&stage=REMOVE\">REMOVE </a></td><td align=left>$row[0] - $row[1]</td></tr>\n";
				$srs_SQL .= "'$state_rules[$b]',";
				$srs_state_SQL .= "'$row[0]',";
				}
			$b++;
			}
		if (strlen($srs_SQL)>2)
			{
			$srs_SQL = "$srs_SQL''";
			$srs_state_SQL = "$srs_state_SQL''";
			$srs_SQL = "where state_call_time_id NOT IN($srs_SQL) and state_call_time_state NOT IN($srs_state_SQL) $LOGadmin_viewable_groupsSQL";
			}
		else
			{$srs_SQL="$whereLOGadmin_viewable_groupsSQL";}
		$stmt="SELECT state_call_time_id,state_call_time_name from vicidial_state_call_times $srs_SQL order by state_call_time_id;";
		$rslt=mysql_query($stmt, $link);
		$sct_to_print = mysql_num_rows($rslt);
		$sct_list='';

		$o=0;
		while ($sct_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$sct_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "<tr bgcolor=#B6D3FC><td align=right><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=321111111>\n";
		echo "<input type=hidden name=stage value=\"ADD\">\n";
		echo "<input type=hidden name=call_time_id value=\"$call_time_id\">\n";
		echo "Add state call time rule: </td><td align=left colspan=2><select size=1 name=state_rule>\n";
		echo "$sct_list";
		echo "</select></td>\n";
		echo "<td align=center colspan=4><input type=submit name=VALIDER value=VALIDER></FORM></td></tr>\n";

		echo "</TABLE><BR><BR>\n";
		echo "<B>CAMPAGNES UTILISANT CETTE PERIODE D'APPELS:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns where local_call_time='$call_time_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";
		echo "<B>INBOUND GROUPS USING THIS CALL TIME:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT group_id,group_name from vicidial_inbound_groups where call_time_id='$call_time_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=3111&group_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";
		echo "</center><BR><BR>\n";

		if ($LOGdelete_call_times > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=511111111&call_time_id=$call_time_id\">SUPPRIMER CETTE DEFINITION DE PERIODE D'APPEL</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CALLTIMES&stage=$call_time_id\">Cliquez ici pour voir les changements d'administration to this call time</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'êtes pas autorisé à voir cette page. Veuillez revenir en arrière.";
		}

	}


######################
# ADD=3111111111 modify state call time definition info in the system
######################

if ($ADD==3111111111)
	{
	if ($LOGmodify_call_times==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3111111111&call_time_id=$call_time_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT state_call_time_id,state_call_time_state,state_call_time_name,state_call_time_comments,sct_default_start,sct_default_stop,sct_sunday_start,sct_sunday_stop,sct_monday_start,sct_monday_stop,sct_tuesday_start,sct_tuesday_stop,sct_wednesday_start,sct_wednesday_stop,sct_thursday_start,sct_thursday_stop,sct_friday_start,sct_friday_stop,sct_saturday_start,sct_saturday_stop,user_group from vicidial_state_call_times where state_call_time_id='$call_time_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$state_call_time_state =$row[1];
		$call_time_name =		$row[2];
		$call_time_comments =	$row[3];
		$ct_default_start =		$row[4];
		$ct_default_stop =		$row[5];
		$ct_sunday_start =		$row[6];
		$ct_sunday_stop =		$row[7];
		$ct_monday_start =		$row[8];
		$ct_monday_stop =		$row[9];
		$ct_tuesday_start =		$row[10];
		$ct_tuesday_stop =		$row[11];
		$ct_wednesday_start =	$row[12];
		$ct_wednesday_stop =	$row[13];
		$ct_thursday_start =	$row[14];
		$ct_thursday_stop =		$row[15];
		$ct_friday_start =		$row[16];
		$ct_friday_stop =		$row[17];
		$ct_saturday_start =	$row[18];
		$ct_saturday_stop =		$row[19];
		$user_group =			$row[20];

		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>MODIFIER UNE PERIODE D'APPELS D'ETAT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=4111111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=call_time_id value=\"$call_time_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Identifiant de la période d'appels: </td><td align=left colspan=3><B>$call_time_id</B>$NWB#vicidial_call_times-call_time_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>State Call Time State: </td><td align=left colspan=3><input type=text name=state_call_time_state size=4 maxlength=2 value=\"$state_call_time_state\"> $NWB#vicidial_call_times-state_call_time_state$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la période d'appels d'état: </td><td align=left colspan=3><input type=text name=call_time_name size=40 maxlength=50 value=\"$call_time_name\"> (courte description de la période d'appel)$NWB#vicidial_call_times-call_time_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires de la période d'appels d'état: </td><td align=left colspan=3><input type=text name=call_time_comments size=50 maxlength=255 value=\"$call_time_comments\"> $NWB#vicidial_call_times-call_time_comments$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_call_times-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début par défaut:</td><td align=left><input type=text name=ct_default_start size=5 maxlength=4 value=\"$ct_default_start\"> </td><td align=right>Fin par défaut:</td><td align=left><input type=text name=ct_default_stop size=5 maxlength=4 value=\"$ct_default_stop\"> $NWB#vicidial_call_times-ct_default_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le dimanche:</td><td align=left><input type=text name=ct_sunday_start size=5 maxlength=4 value=\"$ct_sunday_start\"> </td><td align=right>Fin le dimanche:</td><td align=left><input type=text name=ct_sunday_stop size=5 maxlength=4 value=\"$ct_sunday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le lundi:</td><td align=left><input type=text name=ct_monday_start size=5 maxlength=4 value=\"$ct_monday_start\"> </td><td align=right>Fin le lundi:</td><td align=left><input type=text name=ct_monday_stop size=5 maxlength=4 value=\"$ct_monday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le mardi:</td><td align=left><input type=text name=ct_tuesday_start size=5 maxlength=4 value=\"$ct_tuesday_start\"> </td><td align=right>Fin le mardi:</td><td align=left><input type=text name=ct_tuesday_stop size=5 maxlength=4 value=\"$ct_tuesday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le mercredi:</td><td align=left><input type=text name=ct_wednesday_start size=5 maxlength=4 value=\"$ct_wednesday_start\"> </td><td align=right>Fin le mercredi:</td><td align=left><input type=text name=ct_wednesday_stop size=5 maxlength=4 value=\"$ct_wednesday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Jeudi Start:</td><td align=left><input type=text name=ct_thursday_start size=5 maxlength=4 value=\"$ct_thursday_start\"> </td><td align=right>Fin le jeudi:</td><td align=left><input type=text name=ct_thursday_stop size=5 maxlength=4 value=\"$ct_thursday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le vendredi:</td><td align=left><input type=text name=ct_friday_start size=5 maxlength=4 value=\"$ct_friday_start\"> </td><td align=right>Fin le vendredi:</td><td align=left><input type=text name=ct_friday_stop size=5 maxlength=4 value=\"$ct_friday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Début le samedi:</td><td align=left><input type=text name=ct_saturday_start size=5 maxlength=4 value=\"$ct_saturday_start\"> </td><td align=right>Fin le samedi:</td><td align=left><input type=text name=ct_saturday_stop size=5 maxlength=4 value=\"$ct_saturday_stop\"> $NWB#vicidial_call_times-ct_sunday_start$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=4><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE><BR><BR>\n";
		echo "<B>PERIODE D'APPELS UTILISANT CET ETAT DE PERIODE D'APPELS:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT call_time_id,call_time_name from vicidial_call_times where ct_state_call_times LIKE \"%|$call_time_id|%\" $whereLOGadmin_viewable_call_timesSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";
		echo "</center><BR><BR>\n";

		if ($LOGdelete_call_times > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5111111111&call_time_id=$call_time_id\">SUPPRIMER CETTE DEFINITION DE PERIODE D'APPEL D'ETAT</a>\n";
			}
		}
	else
		{
		echo "Vous n'êtes pas autorisé à voir cette page. Veuillez revenir en arrière.";
		}
	}


######################
# ADD=331111111 modify shift definition info in the system
######################

if ($ADD==331111111)
	{
	if ( ($LOGmodify_call_times==1) or ($LOGmodify_shifts==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=331111111&shift_id=$shift_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT shift_id,shift_name,shift_start_time,shift_length,shift_weekdays,report_option,user_group,report_rank from vicidial_shifts where shift_id='$shift_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$shift_name =		$row[1];
		$shift_start_time =	$row[2];
		$shift_length =		$row[3];
		$shift_weekdays =	$row[4];
		$report_option =	$row[5];
		$user_group =		$row[6];
		$report_rank =		$row[7];

		$shift_start_hour = substr($shift_start_time,0,2);
		$shift_start_min = substr($shift_start_time,2,2);
		$shift_length_hour = substr($shift_length,0,2);
		$shift_length_min = substr($shift_length,3,2);
		$shift_end_hour = ($shift_start_hour + $shift_length_hour);
		$shift_end_min = ($shift_start_min + $shift_length_min);
		if ($shift_end_min >=60) 
			{
			$shift_end_min = ($shift_end_min - 60);
			$shift_end_hour++;
			}
		if ($shift_end_hour >=24) 
			{
			$shift_end_hour = ($shift_end_hour - 24);
			}
		$shift_end_hour = sprintf("%02s", $shift_end_hour);	
		$shift_end_min = sprintf("%02s", $shift_end_min);	
		$shift_end = "$shift_end_hour$shift_end_min";

		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>MODIFIER UN DEPLACEMENT<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=431111111>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=shift_id value=\"$shift_id\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift ID:</td><td align=left><B>$shift_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift Nom:</td><td align=left><input type=text name=shift_name size=50 maxlength=50 value=\"$shift_name\"> (brève description de l'évolution)$NWB#vicidial_shifts-shift_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_shifts-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Start Time Shift:</td><td align=left><input type=text name=shift_start_time size=5 maxlength=4 id=shift_start_time value=\"$shift_start_time\">\n";
		echo " &nbsp; End Time Shift:<input type=text name=shift_end_time size=5 maxlength=4 id=shift_end_time value=\"$shift_end\">\n";
		echo "<input type=button name=shift_calc value=\"Calculate Longueur Shift\" onClick=\"shift_time();\"> $NWB#vicidial_shifts-shift_start_time$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Longueur Shift: </td><td align=left><input type=text name=shift_length id=shift_length size=6 maxlength=5 value=\"$shift_length\"> $NWB#vicidial_shifts-shift_length$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Shift-Ven:<BR>$NWB#vicidial_shifts-shift_weekdays$NWE</td><td align=left>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"0\"";
			if (ereg('0',$shift_weekdays)) {echo " CHECKED";}
		echo ">Dimanche<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"1\"";
			if (ereg('1',$shift_weekdays)) {echo " CHECKED";}
		echo ">Lundi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"2\"";
			if (ereg('2',$shift_weekdays)) {echo " CHECKED";}
		echo ">Mardi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"3\"";
			if (ereg('3',$shift_weekdays)) {echo " CHECKED";}
		echo ">Mercredi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"4\"";
			if (ereg('4',$shift_weekdays)) {echo " CHECKED";}
		echo ">Jeudi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"5\"";
			if (ereg('5',$shift_weekdays)) {echo " CHECKED";}
		echo ">Vendredi<BR>\n";
		echo "<input type=\"checkbox\" name=\"shift_weekdays[]\" value=\"6\"";
			if (ereg('6',$shift_weekdays)) {echo " CHECKED";}
		echo ">Samedi<BR>\n";
		echo "</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Option Report: </td><td align=left><select size=1 name=report_option><option>Y</option><option>N</option><option SELECTED>$report_option</option></select>$NWB#vicidial_shifts-report_option$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rapport Rang: </td><td align=left><select size=1 name=report_rank><option SELECTED>$report_rank</option>";
		$k=1;
		while ($k < 100)
			{
			echo "<option>$k</option>\n";
			$k++;
			}
		echo "</select>$NWB#vicidial_shifts-report_rank$NWE</td></tr>\n";
		
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "</TABLE><BR><BR>\n";
		echo "<B>Groupes d'utilisateurs UTILISANT CE SHIFT:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT user_group,group_name from vicidial_user_groups where group_shifts LIKE\"% $shift_id %\" $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=311111&user_group=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE>\n";
		echo "</center><BR><BR>\n";

		if ($LOGdelete_call_times > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=531111111&shift_id=$shift_id\">SUPPRIMER CETTE DEFINITION SHIFT</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=SHIFTS&stage=$shift_id\">Cliquez ici pour voir les changements d'administration to this shift</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'êtes pas autorisé à voir cette page. Veuillez revenir en arrière.";
		}

	}


######################
# ADD=31111111111 modify phone record in the system
######################

if ($ADD==31111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31111111111&extension=$extension&server_ip=$server_ip";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT extension,dialplan_number,voicemail_id,phone_ip,computer_ip,server_ip,login,pass,status,active,phone_type,fullname,company,picture,messages,old_messages,protocol,local_gmt,ASTmgrUSERNAME,ASTmgrSECRET,login_user,login_pass,login_campaign,park_on_extension,conf_on_extension,VICIDIAL_park_on_extension,VICIDIAL_park_on_filename,monitor_prefix,recording_exten,voicemail_exten,voicemail_dump_exten,ext_context,dtmf_send_extension,call_out_number_group,client_browser,install_directory,local_web_callerID_URL,VICIDIAL_web_URL,AGI_call_logging_enabled,user_switching_enabled,conferencing_enabled,admin_hangup_enabled,admin_hijack_enabled,admin_monitor_enabled,call_parking_enabled,updater_check_enabled,AFLogging_enabled,QUEUE_ACTION_enabled,CallerID_popup_enabled,voicemail_button_enabled,enable_fast_refresh,fast_refresh_rate,enable_persistant_mysql,auto_dial_next_number,VDstop_rec_after_each_call,DBX_server,DBX_database,DBX_user,DBX_pass,DBX_port,DBY_server,DBY_database,DBY_user,DBY_pass,DBY_port,outbound_cid,enable_sipsak_messages,email,template_id,conf_override,phone_context,phone_ring_timeout,conf_secret,delete_vm_after_email,is_webphone,use_external_server_ip,codecs_list,codecs_with_template,webphone_dialpad,on_hook_agent,webphone_auto_answer,voicemail_timezone,voicemail_options,user_group from phones where extension='$extension' and server_ip='$server_ip' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);

		echo "<br>MODIFIER UN TELEPHONE: $row[1]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=41111111111>\n";
		echo "<input type=hidden name=old_extension value=\"$row[0]\">\n";
		echo "<input type=hidden name=old_server_ip value=\"$row[5]\">\n";
		echo "<input type=hidden name=client_browser value=\"$row[34]\">\n";
		echo "<input type=hidden name=install_directory value=\"$row[35]\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Extension:</td><td align=left><input type=text name=extension size=20 maxlength=100 value=\"$row[0]\">$NWB#phones-extension$NWE <i></i></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nuémro dans le dial plan: </td><td align=left><input type=text name=dialplan_number size=15 maxlength=20 value=\"$row[1]\"> (chiffres seulement)$NWB#phones-dialplan_number$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Boîte vocale:</td><td align=left><input type=text name=voicemail_id size=10 maxlength=10 value=\"$row[2]\"> (chiffres seulement)$NWB#phones-voicemail_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>CallerID sortant: </td><td align=left><input type=text name=outbound_cid size=10 maxlength=20 value=\"$row[65]\"> (chiffres seulement)$NWB#phones-outbound_cid$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$row[83]\">$row[83]</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Adresse IP du téléphone: </td><td align=left><input type=text name=phone_ip size=20 maxlength=15 value=\"$row[3]\"> (optional)$NWB#phones-phone_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Adresse IP de l'ordinateur: </td><td align=left><input type=text name=computer_ip size=20 maxlength=15 value=\"$row[4]\"> (optional)$NWB#phones-computer_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111111&server_ip=$row[5]\">IP du serveur</a>: </td><td align=left><select size=1 name=server_ip>\n";

		echo "$servers_list";
		echo "<option SELECTED>$row[5]</option>\n";
		echo "</select>$NWB#phones-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Écran de connexion Agent: </td><td align=left><input type=text name=login size=15 maxlength=15 value=\"$row[6]\">$NWB#phones-login$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Login Mot de passe: </td><td align=left><input type=text name=pass size=10 maxlength=10 value=\"$row[7]\">$NWB#phones-pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Inscription Mot de passe: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=conf_secret size=20 maxlength=20 value=\"$row[72]\" onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#phones-conf_secret$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Définir en tant que Webphone: </td><td align=left><select size=1 name=is_webphone><option>Y</option><option>N</option><option selected>$row[74]</option></select>$NWB#phones-is_webphone$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Webphone Dialpad: </td><td align=left><select size=1 name=webphone_dialpad><option>Y</option><option>N</option><option>TOGGLE</option><option>TOGGLE_OFF</option><option SELECTED>$row[78]</option></select>$NWB#phones-webphone_dialpad$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Webphone Réponse automatique: </td><td align=left><select size=1 name=webphone_auto_answer><option>Y</option><option>N</option><option SELECTED>$row[80]</option></select>$NWB#phones-webphone_auto_answer$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisez IP du serveur externe: </td><td align=left><select size=1 name=use_external_server_ip><option>Y</option><option>N</option><option selected>$row[75]</option></select>$NWB#phones-use_external_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Etat: </td><td align=left><select size=1 name=status><option>ACTIF</option><option>SUSPENDED</option><option>CLOSED</option><option>PENDING</option><option>ADMIN</option><option selected>$row[8]</option></select>$NWB#phones-status$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Compte actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option selected>$row[9]</option></select>$NWB#phones-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Type de téléphone: </td><td align=left><input type=text name=phone_type size=20 maxlength=50 value=\"$row[10]\">$NWB#phones-phone_type$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=fullname size=20 maxlength=50 value=\"$row[11]\">$NWB#phones-fullname$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Email:</td><td align=left><input type=text name=email size=50 maxlength=100 value=\"$row[67]\"> $NWB#phones-email$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Supprimer messagerie vocale après le courrier électronique: </td><td align=left><select size=1 name=delete_vm_after_email><option>Y</option><option>N</option><option selected>$row[73]</option></select>$NWB#phones-delete_vm_after_email$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Zone de messagerie vocale: </td><td align=left><select size=1 name=voicemail_timezone>";
		$vm_zones = explode("\n",$SSvoicemail_timezones);
		$z=0;
		$vm_zones_ct = count($vm_zones);
		while($vm_zones_ct > $z)
			{
			if (strlen($vm_zones[$z]) > 5)
				{
				$vm_specs = explode("=",$vm_zones[$z]);
				$vm_abb = $vm_specs[0];
				$vm_details = explode('|',$vm_specs[1]);
				$vm_location = 	$vm_details[0];
				echo "<option value=\"$vm_abb\">$vm_abb - $vm_location</option>\n";
				}
			$z++;
			}
		echo "<option selected>$row[81]</option></select> $NWB#phones-voicemail_timezone$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Options de la messagerie vocale: </td><td align=left><input type=text name=voicemail_options size=50 maxlength=100 value=\"$row[82]\">$NWB#phones-voicemail_options$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Compagnie: </td><td align=left><input type=text name=company size=10 maxlength=10 value=\"$row[12]\">$NWB#phones-company$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Image: </td><td align=left><input type=text name=picture size=20 maxlength=19 value=\"$row[13]\">$NWB#phones-picture$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nouveaux messages: </td><td align=left><b>$row[14]</b>$NWB#phones-messages$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Anciens messages: </td><td align=left><b>$row[15]</b>$NWB#phones-old_messages$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Protocole client: </td><td align=left><select size=1 name=protocol><option>SIP</option><option>Zap</option><option>IAX2</option><option>EXTERNAL</option><option selected>$row[16]</option></select>$NWB#phones-protocol$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>GMT local: </td><td align=left><select size=1 name=local_gmt><option>12.75</option><option>12.00</option><option>11.00</option><option>10.00</option><option>9.50</option><option>9.00</option><option>8.00</option><option>7.00</option><option>6.50</option><option>6.00</option><option>5.75</option><option>5.50</option><option>5.00</option><option>4.50</option><option>4.00</option><option>3.50</option><option>3.00</option><option>2.00</option><option>1.00</option><option>0.00</option><option>-1.00</option><option>-2.00</option><option>-3.00</option><option>-3.50</option><option>-4.00</option><option>-5.00</option><option>-6.00</option><option>-7.00</option><option>-8.00</option><option>-9.00</option><option>-10.00</option><option>-11.00</option><option>-12.00</option><option selected>$row[17]</option></select> (Ne PAS ajuster pour DST)$NWB#phones-local_gmt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Phone Ring Timeout: </td><td align=left><input type=text name=phone_ring_timeout size=4 maxlength=5 value=\"$row[71]\">$NWB#phones-phone_ring_timeout$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>On-Hook Agent: </td><td align=left><select size=1 name=on_hook_agent><option>Y</option><option>N</option><option selected>$row[79]</option></select>$NWB#phones-on_hook_agent$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Login du manager: </td><td align=left><input type=text name=ASTmgrUSERNAME size=20 maxlength=20 value=\"$row[18]\">$NWB#phones-ASTmgrUSERNAME$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe du manager: </td><td align=left><input type=text name=ASTmgrSECRET size=20 maxlength=20 value=\"$row[19]\">$NWB#phones-ASTmgrSECRET$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur par défaut de VICIDIAL: </td><td align=left><input type=text name=login_user size=20 maxlength=20 value=\"$row[20]\">$NWB#phones-login_user$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe par défaut de VICIDIAL: </td><td align=left><input type=text name=login_pass size=20 maxlength=20 value=\"$row[21]\">$NWB#phones-login_pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Campagne par défaut de VICIDIAL: </td><td align=left><input type=text name=login_campaign size=10 maxlength=10 value=\"$row[22]\">$NWB#phones-login_campaign$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension du parc: </td><td align=left><input type=text name=park_on_extension size=10 maxlength=10 value=\"$row[23]\">$NWB#phones-park_on_extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension de la conférence: </td><td align=left><input type=text name=conf_on_extension size=10 maxlength=10 value=\"$row[24]\">$NWB#phones-conf_on_extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension du parc VICIDIAL: </td><td align=left><input type=text name=VICIDIAL_park_on_extension size=10 maxlength=10 value=\"$row[25]\">$NWB#phones-VICIDIAL_park_on_extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Fichier du parc VICIDIAL: </td><td align=left><input type=text name=VICIDIAL_park_on_filename size=10 maxlength=10 value=\"$row[26]\">$NWB#phones-VICIDIAL_park_on_filename$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Préfixe du moniteur: </td><td align=left><input type=text name=monitor_prefix size=10 maxlength=10 value=\"$row[27]\">$NWB#phones-monitor_prefix$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension d'enregistrement: </td><td align=left><input type=text name=recording_exten size=10 maxlength=10 value=\"$row[28]\">$NWB#phones-recording_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension de la boîte vocale: </td><td align=left><input type=text name=voicemail_exten size=10 maxlength=10 value=\"$row[29]\">$NWB#phones-voicemail_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension de VmailDump: </td><td align=left><input type=text name=voicemail_dump_exten size=20 maxlength=20 value=\"$row[30]\">$NWB#phones-voicemail_dump_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension du context: </td><td align=left><input type=text name=ext_context size=20 maxlength=20 value=\"$row[31]\">$NWB#phones-ext_context$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Contexte: </td><td align=left><input type=text name=phone_context size=20 maxlength=20 value=\"$row[70]\">$NWB#phones-phone_context$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Codecs admis: </td><td align=left><input type=text name=codecs_list size=40 maxlength=100 value=\"$row[76]\">$NWB#phones-codecs_list$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Codecs admis avec la matrice: </td><td align=left><select size=1 name=codecs_with_template><option>1</option><option>0</option><option selected>$row[77]</option></select>$NWB#phones-codecs_with_template$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Cannal d'envoi DTMF: </td><td align=left><input type=text name=dtmf_send_extension size=40 maxlength=100 value=\"$row[32]\">$NWB#phones-dtmf_send_extension$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'appels sortants: </td><td align=left><input type=text name=call_out_number_group size=40 maxlength=100 value=\"$row[33]\">$NWB#phones-call_out_number_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>URL du CallerID: </td><td align=left><input type=text name=local_web_callerID_URL size=40 maxlength=255 value=\"$row[36]\">$NWB#phones-local_web_callerID_URL$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>URL par défaut de VICIDIAL: </td><td align=left><input type=text name=VICIDIAL_web_URL size=40 maxlength=255 value=\"$row[37]\">$NWB#phones-VICIDIAL_web_URL$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Log des appels: </td><td align=left><select size=1 name=AGI_call_logging_enabled><option>1</option><option>0</option><option selected>$row[38]</option></select>$NWB#phones-AGI_call_logging_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Changement d'utilisateur: </td><td align=left><select size=1 name=user_switching_enabled><option>1</option><option>0</option><option selected>$row[39]</option></select>$NWB#phones-user_switching_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>En conférence: </td><td align=left><select size=1 name=conferencing_enabled><option>1</option><option>0</option><option selected>$row[40]</option></select>$NWB#phones-conferencing_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Raccrochage administrateur: </td><td align=left><select size=1 name=admin_hangup_enabled><option>1</option><option>0</option><option selected>$row[41]</option></select>$NWB#phones-admin_hangup_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Détournement administrateur: </td><td align=left><select size=1 name=admin_hijack_enabled><option>1</option><option>0</option><option selected>$row[42]</option></select>$NWB#phones-admin_hijack_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Moniteur administrateur: </td><td align=left><select size=1 name=admin_monitor_enabled><option>1</option><option>0</option><option selected>$row[43]</option></select>$NWB#phones-admin_monitor_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Parc d'appel: </td><td align=left><select size=1 name=call_parking_enabled><option>1</option><option>0</option><option selected>$row[44]</option></select>$NWB#phones-call_parking_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Contrôle de mise à jour: </td><td align=left><select size=1 name=updater_check_enabled><option>1</option><option>0</option><option selected>$row[45]</option></select>$NWB#phones-updater_check_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Log AF: </td><td align=left><select size=1 name=AFLogging_enabled><option>1</option><option>0</option><option selected>$row[46]</option></select>$NWB#phones-AFLogging_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Queue activée: </td><td align=left><select size=1 name=QUEUE_ACTION_enabled><option>1</option><option>0</option><option selected>$row[47]</option></select>$NWB#phones-QUEUE_ACTION_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Popup du CallerID: </td><td align=left><select size=1 name=CallerID_popup_enabled><option>1</option><option>0</option><option selected>$row[48]</option></select>$NWB#phones-CallerID_popup_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Bouton de la boîte vocale: </td><td align=left><select size=1 name=voicemail_button_enabled><option>1</option><option>0</option><option selected>$row[49]</option></select>$NWB#phones-voicemail_button_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Rafraichissement rapide: </td><td align=left><select size=1 name=enable_fast_rafraîchir><option>1</option><option>0</option><option selected>$row[50]</option></select>$NWB#phones-enable_fast_rafraîchir$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Taux du rafraichissement rapide: </td><td align=left><input type=text size=5 name=fast_rafraîchir_rate value=\"$row[51]\">(in ms)$NWB#phones-fast_rafraîchir_rate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>MySQL persistant: </td><td align=left><select size=1 name=enable_persistant_mysql><option>1</option><option>0</option><option selected>$row[52]</option></select>$NWB#phones-enable_persistant_mysql$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Appel automatique du numéro suivant: </td><td align=left><select size=1 name=auto_dial_next_number><option>1</option><option>0</option><option selected>$row[53]</option></select>$NWB#phones-auto_dial_next_number$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Arrêter l'enregistrement après chaque appel: </td><td align=left><select size=1 name=VDstop_rec_after_each_call><option>1</option><option>0</option><option selected>$row[54]</option></select>$NWB#phones-VDstop_rec_after_each_call$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Activer les messages SIPSAK: </td><td align=left><select size=1 name=enable_sipsak_messages><option>1</option><option>0</option><option selected>$row[66]</option></select>$NWB#phones-enable_sipsak_messages$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Serveur DBX: </td><td align=left><input type=text name=DBX_server size=15 maxlength=15 value=\"$row[55]\"> (PrimaireDB Server)$NWB#phones-DBX_server$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Base de données DBX: </td><td align=left><input type=text name=DBX_database size=15 maxlength=15 value=\"$row[56]\"> (PrimaireServer Database)$NWB#phones-DBX_database$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur DBX: </td><td align=left><input type=text name=DBX_user size=15 maxlength=15 value=\"$row[57]\"> (PrimaireDB Login)$NWB#phones-DBX_user$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe DBX: </td><td align=left><input type=text name=DBX_pass size=15 maxlength=15 value=\"$row[58]\"> (PrimaireDB Secret)$NWB#phones-DBX_pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Port DBX: </td><td align=left><input type=text name=DBX_port size=6 maxlength=6 value=\"$row[59]\"> (PrimaireDB Port)$NWB#phones-DBX_port$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Serveur DBY: </td><td align=left><input type=text name=DBY_server size=15 maxlength=15 value=\"$row[60]\"> (SecondaireDB Server)$NWB#phones-DBY_server$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Base de données DBY: </td><td align=left><input type=text name=DBY_database size=15 maxlength=15 value=\"$row[61]\"> (SecondaireServer Database)$NWB#phones-DBY_database$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur DBY: </td><td align=left><input type=text name=DBY_user size=15 maxlength=15 value=\"$row[62]\"> (SecondaireDB Login)$NWB#phones-DBY_user$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe DBY: </td><td align=left><input type=text name=DBY_pass size=15 maxlength=15 value=\"$row[63]\"> (SecondaireDB Secret)$NWB#phones-DBY_pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Port DBY: </td><td align=left><input type=text name=DBY_port size=6 maxlength=6 value=\"$row[64]\"> (SecondaireDB Port)$NWB#phones-DBY_port$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=331111111111&template_id=$row[68]\">ID modèle</a>: </td><td align=left><select size=1 name=template_id>\n";
		$stmt="SELECT template_id,template_name from vicidial_conf_templates $whereLOGadmin_viewable_groupsSQL order by template_id;";
		$rslt=mysql_query($stmt, $link);
		$templates_to_print = mysql_num_rows($rslt);
		$templates_list='<option SELECTED>--NONE--</option>';
		$o=0;
		while ($templates_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$templates_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$templates_list";
		echo "<option SELECTED>$row[68]</option>\n";
		echo "</select>$NWB#phones-template_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Conf Override: </td><td align=left><TEXTAREA NAME=conf_override ROWS=10 COLS=70>$row[69]</TEXTAREA> $NWB#phones-conf_override$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<br><br><a href=\"./phone_stats.php?extension=$row[0]&server_ip=$row[5]\">Cliquez ici pour les statistiques des téléphones</a>\n";

		echo "<br><br><a href=\"./user_stats.php?user=$row[0]\">Click here for phone call recordings</a>\n";

		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=51111111111&extension=$extension&server_ip=$server_ip\">SUPPRIMER CE TELEPHONE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=PHONES&stage=$extension\">Cliquez ici pour voir les changements d'administration to this phone</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=32111111111 modify phone alias record in the system
######################

if ($ADD==32111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=32111111111&alias_id=$alias_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT alias_id,alias_name,logins_list,user_group from phones_alias where alias_id='$alias_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);

		echo "<br>A MODIFIER TELEPHONE ALIAS RECORD: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=42111111111>\n";
		echo "<input type=hidden name=alias_id value=\"$row[0]\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias ID:</td><td align=left><B>$row[0]</B> $NWB#phones-alias_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias Nom:</td><td align=left><input type=text name=alias_name size=30 maxlength=50 value=\"$row[1]\"> $NWB#phones-alias_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$row[3]\">$row[3]</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphones Logins List: </td><td align=left><input type=text name=logins_list size=50 maxlength=255 value=\"$row[2]\"> (comma separated)$NWB#phones-logins_list$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";


		### list of phones in this phones alias
		$phone_alias_SQL = ereg_replace(',',"','",$row[2]);
	 
		echo "<center>\n";
		echo "<br><b>TELEPHONES PORTABLES DANS CETTE ALIAS:</b><br>\n";
		echo "<TABLE width=600 cellspacing=3>\n";
		echo "<tr><td>LOGIN</td><td>EXTENSION</td><td>SERVER</td><td>PROTOCOL</td><td>IP</td></tr>\n";

		$stmt="SELECT login,extension,server_ip,protocol,phone_ip from phones where login IN ('$phone_alias_SQL') $LOGadmin_viewable_groupsSQL;";
		if ($DB) {echo "|$stmt|";}
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111111&extension=$rowx[1]&server_ip=$rowx[2]\">$rowx[0]</a></td><td><font size=1>$rowx[1]</td><td><font size=1>$rowx[2]</td><td><font size=1>$rowx[3]</td><td><font size=1>$rowx[4]</td></tr>\n";
			}

		echo "</table></center><br>\n";

		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=52111111111&alias_id=$row[0]\">SUPPRIMER CETTE PHONE ALIAS</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=PHONEALIASES&stage=$alias_id\">Cliquez ici pour voir les changements d'administration to this phone alias</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=33111111111 modify group alias record in the system
######################

if ($ADD==33111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_phones==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=33111111111&group_alias_id=$group_alias_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT group_alias_id,group_alias_name,caller_id_number,caller_id_name,active,user_group from groups_alias where group_alias_id='$group_alias_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);

		echo "<br>Modifier un groupe ALIAS RECORD: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=43111111111>\n";
		echo "<input type=hidden name=group_alias_id value=\"$row[0]\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alias Groupe ID: </td><td align=left><B>$row[0]</B> $NWB#phones-group_alias_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du groupe Alias: </td><td align=left><input type=text name=group_alias_name size=30 maxlength=50 value=\"$row[1]\"> $NWB#phones-group_alias_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$row[5]\">$row[5]</option>\n";
		echo "</select>$NWB#phones-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre CallerID: </td><td align=left><input type=text name=caller_id_number size=20 maxlength=20 value=\"$row[2]\"> $NWB#phones-caller_id_number$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>CallerID Nom: </td><td align=left><input type=text name=caller_id_name size=20 maxlength=20 value=\"$row[3]\"> $NWB#phones-caller_id_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option selected>$row[4]</option></select></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";


		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=53111111111&group_alias_id=$row[0]\">Supprimer ce groupe ALIAS</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=GROUPALIASES&stage=$group_alias_id\">Cliquez ici pour voir les changements d'administration to this group alias</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=311111111111 modify server record in the system
######################

if ($ADD==311111111111)
	{
	if ($LOGmodify_servers==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=311111111111&server_id=$server_id&server_ip=$server_ip";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT server_id,server_description,server_ip,active,asterisk_version,max_vicidial_trunks,telnet_host,telnet_port,ASTmgrUSERNAME,ASTmgrSECRET,ASTmgrUSERNAMEupdate,ASTmgrUSERNAMElisten,ASTmgrUSERNAMEsend,local_gmt,voicemail_dump_exten,answer_transfer_agent,ext_context,sys_perf_log,vd_server_logs,agi_output,vicidial_balance_active,balance_trunks_offlimits,recording_web_link,alt_server_ip,active_asterisk_server,generate_vicidial_conf,rebuild_conf_files,outbound_calls_per_second,sysload,channels_total,cpu_idle_percent,disk_usage,sounds_update,vicidial_recording_limit,carrier_logging_active,vicidial_balance_rank,rebuild_music_on_hold,active_agent_login_server,conf_secret,external_server_ip,custom_dialplan_entry,active_twin_server_ip,user_group from servers where ( (server_id='$server_id') or (server_ip='$server_ip') ) $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$server_id =					$row[0];
		$server_description =			$row[1];
		$server_ip =					$row[2];
		$active =						$row[3];
		$asterisk_version =				$row[4];
		$max_vicidial_trunks =			$row[5];
		$telnet_host =					$row[6];
		$telnet_port =					$row[7];
		$ASTmgrUSERNAME =				$row[8];
		$ASTmgrSECRET =					$row[9];
		$ASTmgrUSERNAMEupdate =			$row[10];
		$ASTmgrUSERNAMElisten =			$row[11];
		$ASTmgrUSERNAMEsend =			$row[12];
		$local_gmt =					$row[13];
		$voicemail_dump_exten =			$row[14];
		$answer_transfer_agent =		$row[15];
		$ext_context =					$row[16];
		$sys_perf_log =					$row[17];
		$vd_server_logs =				$row[18];
		$agi_output =					$row[19];
		$vicidial_balance_active =		$row[20];
		$balance_trunks_offlimits =		$row[21];
		$recording_web_link =			$row[22];
		$alt_server_ip =				$row[23];
		$active_asterisk_server =		$row[24];
		$generate_vicidial_conf =		$row[25];
		$rebuild_conf_files =			$row[26];
		$outbound_calls_per_second =	$row[27];
		$sysload =						$row[28];
		$channels_total =				$row[29];
		$cpu_idle_percent =				$row[30];
		$disk_usage =					$row[31];
		$sounds_update =				$row[32];
		$vicidial_recording_limit =		$row[33];
		$carrier_logging_active =		$row[34];
		$vicidial_balance_rank =		$row[35];
		$rebuild_music_on_hold =		$row[36];
		$active_agent_login_server =	$row[37];
		$conf_secret =					$row[38];
		$external_server_ip =			$row[39];
		$custom_dialplan_entry =		$row[40];
		$active_twin_server_ip =		$row[41];
		$user_group =					$row[42];

		$cpu = (100 - $cpu_idle_percent);
		$disk_usage = preg_replace("/ /"," - ",$disk_usage);
		$disk_usage = preg_replace("/\|/","% &nbsp; &nbsp; ",$disk_usage);

		echo "<br>MODIFIER UN SERVEUR: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=411111111111>\n";
		echo "<input type=hidden name=old_server_id value=\"$server_id\">\n";
		echo "<input type=hidden name=old_server_ip value=\"$server_ip\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID du serveur: </td><td align=left><input type=text name=server_id size=10 maxlength=10 value=\"$server_id\">$NWB#servers-server_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Description du serveur: </td><td align=left><input type=text name=server_description size=30 maxlength=255 value=\"$server_description\">$NWB#servers-server_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Adresse IP du serveur: </td><td align=left><input type=text name=server_ip size=20 maxlength=15 value=\"$server_ip\">$NWB#servers-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option selected>$active</option></select>$NWB#servers-active$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Système de charge: </td><td align=left>$sysload - $cpu% &nbsp; $NWB#servers-sysload$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Live Chaînes: </td><td align=left>$channels_total &nbsp; $NWB#servers-channels_total$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Disk Usage: </td><td align=left>$disk_usage &nbsp; $NWB#servers-disk_usage$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#servers-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Version d'Asterisk: </td><td align=left><input type=text name=asterisk_version size=20 maxlength=20 value=\"$asterisk_version\">$NWB#servers-asterisk_version$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre max de trunks VICIDIAL: </td><td align=left><input type=text name=max_vicidial_trunks size=5 maxlength=4 value=\"$max_vicidial_trunks\">$NWB#servers-max_vicidial_trunks$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Max demande par seconde: </td><td align=left><input type=text name=outbound_calls_per_second size=5 maxlength=4 value=\"$outbound_calls_per_second\">$NWB#servers-outbound_calls_per_second$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Equilibrage des appels VICIDIAL: </td><td align=left><select size=1 name=vicidial_balance_active><option>Y</option><option>N</option><option selected>$vicidial_balance_active</option></select>$NWB#servers-vicidial_balance_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>VICIDIAL Solde Rank:</td><td align=left><input type=text name=vicidial_balance_rank size=4 maxlength=2 value=\"$vicidial_balance_rank\">$NWB#servers-vicidial_balance_rank$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Limite de l'équilibrage VICIDIAL: </td><td align=left><input type=text name=balance_trunks_offlimits size=5 maxlength=4 value=\"$balance_trunks_offlimits\">$NWB#servers-balance_trunks_offlimits$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Hôte telnet: </td><td align=left><input type=text name=telnet_host size=20 maxlength=20 value=\"$telnet_host\">$NWB#servers-telnet_host$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Port telnet: </td><td align=left><input type=text name=telnet_port size=6 maxlength=5 value=\"$telnet_port\">$NWB#servers-telnet_port$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur manager: </td><td align=left><input type=text name=ASTmgrUSERNAME size=20 maxlength=20 value=\"$ASTmgrUSERNAME\">$NWB#servers-ASTmgrUSERNAME$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe du manager: </td><td align=left><input type=text name=ASTmgrSECRET size=20 maxlength=20 value=\"$ASTmgrSECRET\">$NWB#servers-ASTmgrSECRET$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur de mise à jour manager: </td><td align=left><input type=text name=ASTmgrUSERNAMEupdate size=20 maxlength=20 value=\"$ASTmgrUSERNAMEupdate\">$NWB#servers-ASTmgrUSERNAMEupdate$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur manager pour l'écoute: </td><td align=left><input type=text name=ASTmgrUSERNAMElisten size=20 maxlength=20 value=\"$ASTmgrUSERNAMElisten\">$NWB#servers-ASTmgrUSERNAMElisten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utilisateur manager pour l'envoi: </td><td align=left><input type=text name=ASTmgrUSERNAMEsend size=20 maxlength=20 value=\"$ASTmgrUSERNAMEsend\">$NWB#servers-ASTmgrUSERNAMEsend$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Conf dossier secret: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=conf_secret size=20 maxlength=20 value=\"$conf_secret\" onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\">$NWB#servers-conf_secret$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>GMT local: </td><td align=left><select size=1 name=local_gmt><option>12.75</option><option>12.00</option><option>11.00</option><option>10.00</option><option>9.50</option><option>9.00</option><option>8.00</option><option>7.00</option><option>6.50</option><option>6.00</option><option>5.75</option><option>5.50</option><option>5.00</option><option>4.50</option><option>4.00</option><option>3.50</option><option>3.00</option><option>2.00</option><option>1.00</option><option>0.00</option><option>-1.00</option><option>-2.00</option><option>-3.00</option><option>-3.50</option><option>-4.00</option><option>-5.00</option><option>-6.00</option><option>-7.00</option><option>-8.00</option><option>-9.00</option><option>-10.00</option><option>-11.00</option><option>-12.00</option><option selected>$local_gmt</option></select> (Ne PAS ajuster pour DST)$NWB#servers-local_gmt$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>VMail Dump Exten: </td><td align=left><input type=text name=voicemail_dump_exten size=20 maxlength=20 value=\"$voicemail_dump_exten\">$NWB#servers-voicemail_dump_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension AD de VICIDIAL: </td><td align=left><input type=text name=answer_transfer_agent size=20 maxlength=20 value=\"$answer_transfer_agent\">$NWB#servers-answer_transfer_agent$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Contexte par défaut: </td><td align=left><input type=text name=ext_context size=20 maxlength=20 value=\"$ext_context\">$NWB#servers-ext_context$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Performances du système: </td><td align=left><select size=1 name=sys_perf_log><option>Y</option><option>N</option><option selected>$sys_perf_log</option></select>$NWB#servers-sys_perf_log$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Logs du serveur: </td><td align=left><select size=1 name=vd_server_logs><option>Y</option><option>N</option><option selected>$vd_server_logs</option></select>$NWB#servers-vd_server_logs$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Sortie des AGI: </td><td align=left><select size=1 name=agi_output><option>NONE</option><option>STDERR</option><option>FILE</option><option>BOTH</option><option selected>$agi_output</option></select>$NWB#servers-agi_output$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier Logging Actif: </td><td align=left><select size=1 name=carrier_logging_active><option>Y</option><option>N</option><option selected>$carrier_logging_active</option></select>$NWB#servers-carrier_logging_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Enregistrement Web Link: </td><td align=left><select size=1 name=recording_web_link><option>SERVER_IP</option><option>ALT_IP</option><option>EXTERNAL_IP</option><option selected>$recording_web_link</option></select>$NWB#servers-recording_web_link$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alternate Recording IP du serveur: </td><td align=left><input type=text name=alt_server_ip size=30 maxlength=100 value=\"$alt_server_ip\">$NWB#servers-alt_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur externe: </td><td align=left><input type=text name=external_server_ip size=30 maxlength=100 value=\"$external_server_ip\">$NWB#servers-external_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif IP du serveur double: </td><td align=left><input type=text name=active_twin_server_ip size=16 maxlength=15 value=\"$active_twin_server_ip\">$NWB#servers-active_twin_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Active Server Asterisk: </td><td align=left><select size=1 name=active_asterisk_server><option>Y</option><option>N</option><option selected>$active_asterisk_server</option></select>$NWB#servers-active_asterisk_server$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Active Server Agent: </td><td align=left><select size=1 name=active_agent_login_server><option>Y</option><option>N</option><option selected>$active_agent_login_server</option></select>$NWB#servers-active_agent_login_server$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Générer des fichiers de conf: </td><td align=left><select size=1 name=generate_vicidial_conf><option>Y</option><option>N</option><option selected>$generate_vicidial_conf</option></select>$NWB#servers-generate_vicidial_conf$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Reconstruire les fichiers de configuration: </td><td align=left><select size=1 name=rebuild_conf_files><option>Y</option><option>N</option><option selected>$rebuild_conf_files</option></select>$NWB#servers-rebuild_conf_files$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Reconstruire la musique d-attente: </td><td align=left><select size=1 name=rebuild_music_on_hold><option>Y</option><option>N</option><option selected>$rebuild_music_on_hold</option></select>$NWB#servers-rebuild_music_on_hold$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mise à jour de sons: </td><td align=left><select size=1 name=sounds_update><option>Y</option><option>N</option><option selected>$sounds_update</option></select>$NWB#servers-sounds_update$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>VICIDIAL Recording Limit: </td><td align=left><input type=text name=vicidial_recording_limit size=8 maxlength=6 value=\"$vicidial_recording_limit\">$NWB#servers-vicidial_recording_limit$NWE</td></tr>\n";

		if ($SSallow_custom_dialplan > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Entrée personnalisée Dialplan: $NWB#servers-custom_dialplan_entry$NWE <TEXTAREA NAME=custom_dialplan_entry ROWS=5 COLS=80>$custom_dialplan_entry</TEXTAREA></td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Entrée personnalisée Dialplan: </td><td align=left>Disabled <input type=hidden name=custom_dialplan_entry value=\"\">$NWB#servers-custom_dialplan_entry$NWE</td></tr>\n";
			}



		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center></form>\n";


		### vicidial server trunk records for this server
		echo "<br><br><b>LES MallesVICIDIAL POUR CE SERVEUR: &nbsp; $NWB#vicidial_server_trunks$NWE</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td> CAMPAGNE</td><td> Malles</td><td> RESTRICTION </td><td> </td><td> DELETE </td></tr>\n";

		$stmt="SELECT server_ip,campaign_id,dedicated_trunks,trunk_restriction from vicidial_server_trunks where server_ip='$server_ip' $LOGallowed_campaignsSQL order by campaign_id;";
		$rslt=mysql_query($stmt, $link);
		$recycle_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($recycle_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1>$rowx[1]<form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=server_ip value=\"$server_ip\">\n";
			echo "<input type=hidden name=campaign_id value=\"$rowx[1]\">\n";
			echo "<input type=hidden name=ADD value=421111111111></td>\n";
			echo "<td><font size=1><input size=6 maxlength=4 name=dedicated_trunks value=\"$rowx[2]\"></td>\n";
			echo "<td><select size=1 name=trunk_restriction><option>MAXIMUM_LIMIT</option><option>OVERFLOW_ALLOWED</option><option SELECTED>$rowx[3]</option></select></td>\n";
			echo "<td><font size=1><input type=submit name=submit value=MODIFY></form></td>\n";
			echo "<td><font size=1><a href=\"$PHP_SELF?ADD=621111111111&campaign_id=$rowx[1]&server_ip=$server_ip\">SUPPRIMER</a></td></tr>\n";
			}

		echo "</table>\n";

		echo "<br><b>AJOUTER UN NOUVEAU TRUNK SERVEUR VICIDIAL</b><BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=221111111111>\n";
		echo "<input type=hidden name=server_ip value=\"$server_ip\">\n";
		echo "Malles: <input size=6 maxlength=4 name=dedicated_trunks><BR>\n";
		echo "CAMPAGNE: <select size=1 name=campaign_id>\n";
		echo "$campaigns_list\n";
		echo "</select><BR>\n";
		echo "RESTRICTION: <select size=1 name=trunk_restriction><option>MAXIMUM_LIMIT</option><option>OVERFLOW_ALLOWED</option></select><BR>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</center></FORM><br>\n";


		### list of carriers on this server
		echo "<center>\n";
		echo "<br><b>SUPPORTS DE CE SERVEUR:</b><br>\n";
		echo "<TABLE width=600 cellspacing=3>\n";
		echo "<tr><td>CARRIER ID</td><td>NOM</td><td>REGISTRATION</td><td>ACTIF</td></tr>\n";

		$active_carriers = 0;
		$inactive_carriers = 0;
		$stmt="SELECT carrier_id,carrier_name,registration_string,active from vicidial_server_carriers where server_ip='$row[2]' $LOGadmin_viewable_groupsSQL;";
		$rsltx=mysql_query($stmt, $link);
		$carriers_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($carriers_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			if (ereg("Y", $rowx[3])) {$active_carriers++;}
			if (ereg("N", $rowx[3])) {$inactive_carriers++;}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=341111111111&carrier_id=$rowx[0]\">$rowx[0]</a></td><td><font size=1>$rowx[1]</td><td><font size=1>$rowx[2]</td><td><font size=1>$rowx[3]</td></tr>\n";
			}

		echo "</table></center><br>\n";


		### list of phones on this server
		echo "<center>\n";
		echo "<br><b>TELEPHONES SUR CE SERVEUR:</b><br>\n";
		echo "<TABLE width=400 cellspacing=3>\n";
		echo "<tr><td>EXTENSION</td><td>NOM</td><td>ACTIF</td></tr>\n";

		$active_phones = 0;
		$inactive_phones = 0;
		$stmt="SELECT extension,active,fullname from phones where server_ip='$row[2]' $LOGadmin_viewable_groupsSQL;";
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			if (ereg("Y", $rowx[1])) {$active_phones++;   $camp_lists .= "'$rowx[0]',";}
			if (ereg("N", $rowx[1])) {$inactive_phones++;}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111111&extension=$rowx[0]&server_ip=$row[2]\">$rowx[0]</a></td><td><font size=1>$rowx[2]</td><td><font size=1>$rowx[1]</td></tr>\n";
			}

		echo "</table></center><br>\n";


		### list of conferences on this server
		echo "<center>\n";
		echo "<br><b>CONFERENCES WITHIN THIS SERVER:</b><br>\n";
		echo "<TABLE width=400 cellspacing=3>\n";
		echo "<tr><td>CONFERENCE</td><td>EXTENSION</td></tr>\n";

		$active_confs = 0;
		$stmt="SELECT conf_exten,extension from conferences where server_ip='$row[2]'";
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			$active_confs++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3111111111111&conf_exten=$rowx[0]&server_ip=$row[2]\">$rowx[0]</a></td><td><font size=1>$rowx[2]</td></tr>\n";
			}

		echo "</table></center><br>\n";


		### list of vicidial conferences on this server
		echo "<center>\n";
		echo "<br><b>VICIDIAL CONFERENCES WITHIN THIS SERVER:</b><br>\n";
		echo "<TABLE width=400 cellspacing=3>\n";
		echo "<tr><td>VD CONFERENCE</td><td>EXTENSION</td></tr>\n";

		$active_vdconfs = 0;
		$stmt="SELECT conf_exten,extension from vicidial_conferences where server_ip='$row[2]'";
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			$active_vdconfs++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111111111&conf_exten=$rowx[0]&server_ip=$row[2]\">$rowx[0]</a></td><td><font size=1>$rowx[2]</td></tr>\n";
			}

		echo "</table></center><br>\n";


		echo "<center><b>\n";

			$camp_lists = eregi_replace(".$","",$camp_lists);
		echo "Ce serveur a $active_carriers active carriers and $inactive_carriers inactive carriers<br><br>\n";
		echo "Ce serveur a $active_phones téléphones actifs et $inactive_phones téléphones inactifs<br><br>\n";
		echo "Ce serveur a $active_confs active conferences<br><br>\n";
		echo "Ce serveur a $active_vdconfs active vicidial conferences<br><br>\n";
		echo "</b></center>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=511111111111&server_id=$server_id&server_ip=$server_ip\">SUPPRIMER CE SERVEUR</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=SERVERS&stage=$server_id\">Cliquez ici pour voir les changements d'administration to this server</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=331111111111 modify conf template record in the system
######################

if ($ADD==331111111111)
	{
	if ($LOGast_admin_access==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=331111111111&template_id=$template_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT template_id,template_name,template_contents,user_group from vicidial_conf_templates where template_id='$template_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$template_id =			$row[0];
		$template_name =		$row[1];
		$template_contents =	$row[2];
		$user_group =			$row[3];

		echo "<br>A MODIFIER CONF TEMPLATE RECORD: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=431111111111>\n";
		echo "<input type=hidden name=template_id value=\"$template_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID modèle: </td><td align=left><B>$template_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du modèle: </td><td align=left><input type=text name=template_name size=40 maxlength=50 value=\"$template_name\">$NWB#vicidial_conf_templates-template_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_conf_templates-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Template Sommaire: </td><td align=left><TEXTAREA NAME=template_contents ROWS=10 COLS=70>$template_contents</TEXTAREA> $NWB#vicidial_conf_templates-template_contents$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";

		### list of phones using this conf template
		echo "<center>\n";
		echo "<br><b>PHONES UTILISANT CE CONF TEMPLATE:</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>EXTENSION</td><td>NOM</td><td>SERVER</td><td>ACTIF</td></tr>\n";

		$active_phones = 0;
		$inactive_phones = 0;
		$stmt="SELECT extension,active,fullname,server_ip from phones where template_id='$template_id' $LOGadmin_viewable_groupsSQL;";
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			if (ereg("Y", $rowx[1])) {$active_phones++;   $camp_lists .= "'$rowx[0]',";}
			if (ereg("N", $rowx[1])) {$inactive_phones++;}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111111&extension=$rowx[0]&server_ip=$rowx[3]\">$rowx[0]</a></td><td><font size=1>$rowx[2]</td><td><font size=1>$rowx[3]</td><td><font size=1>$rowx[1]</td></tr>\n";
			}

		echo "</table></center><br>\n";

		### list of carriers using this conf template
		echo "<center>\n";
		echo "<br><b>SUPPORTS UTILISANT CE CONF TEMPLATE:</b><br>\n";
		echo "<TABLE width=500 cellspacing=3>\n";
		echo "<tr><td>CARRIER</td><td>NOM</td><td>SERVER</td><td>ACTIF</td></tr>\n";

		$active_phones = 0;
		$inactive_phones = 0;
		$stmt="SELECT carrier_id,active,carrier_name,server_ip from vicidial_server_carriers where template_id='$template_id' $LOGadmin_viewable_groupsSQL;";
		$rsltx=mysql_query($stmt, $link);
		$lists_to_print = mysql_num_rows($rsltx);
		$camp_lists='';

		$o=0;
		while ($lists_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rsltx);
			$o++;
			if (ereg("Y", $rowx[1])) {$active_phones++;   $camp_lists .= "'$rowx[0]',";}
			if (ereg("N", $rowx[1])) {$inactive_phones++;}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=341111111111&carrier_id=$rowx[0]\">$rowx[0]</a></td><td><font size=1>$rowx[2]</td><td><font size=1>$rowx[3]</td><td><font size=1>$rowx[1]</td></tr>\n";
			}

		echo "</table></center><br>\n";



		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=531111111111&template_id=$template_id&template_name=$template_name\">SUPPRIMER CETTE CONF TEMPLATE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CONFTEMPLATES&stage=$template_id\">Cliquez ici pour voir les changements d'administration to this conf template</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=341111111111 modify carrier record in the system
######################

if ($ADD==341111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_carriers==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=341111111111&carrier_id=$carrier_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT carrier_id,carrier_name,registration_string,template_id,account_entry,protocol,globals_string,dialplan_entry,server_ip,active,carrier_description,user_group from vicidial_server_carriers where carrier_id='$carrier_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$carrier_id =			$row[0];
		$carrier_name =			$row[1];
		$registration_string =	$row[2];
		$template_id =			$row[3];
		$account_entry =		$row[4];
		$protocol =				$row[5];
		$globals_string =		$row[6];
		$dialplan_entry =		$row[7];
		$server_ip =			$row[8];
		$active =				$row[9];
		$carrier_description =	$row[10];
		$user_group =			$row[11];

		echo "<br>MODIFIER UN SUPPORT D'ENREGISTREMENT: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=441111111111>\n";
		echo "<input type=hidden name=carrier_id value=\"$carrier_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier ID: </td><td align=left><B>$carrier_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nom du transporteur: </td><td align=left><input type=text name=carrier_name size=40 maxlength=50 value=\"$carrier_name\">$NWB#vicidial_server_carriers-carrier_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Carrier Description: </td><td align=left><input type=text name=carrier_description size=70 maxlength=255 value=\"$carrier_description\">$NWB#vicidial_server_carriers-carrier_description$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_server_carriers-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Inscription à cordes: </td><td align=left><input type=text name=registration_string size=50 maxlength=255 value=\"$registration_string\">$NWB#vicidial_server_carriers-registration_string$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=331111111111&template_id=$template_id\">ID modèle</a>: </td><td align=left><select size=1 name=template_id>\n";
		$stmt="SELECT template_id,template_name from vicidial_conf_templates $whereLOGadmin_viewable_groupsSQL order by template_id;";
		$rslt=mysql_query($stmt, $link);
		$templates_to_print = mysql_num_rows($rslt);
		$templates_list='<option SELECTED>--NONE--</option>';
		$o=0;
		while ($templates_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$templates_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
			$o++;
			}
		echo "$templates_list";
		echo "<option SELECTED>$template_id</option>\n";
		echo "</select>$NWB#vicidial_server_carriers-template_id$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Entrée de compte: </td><td align=left><TEXTAREA NAME=account_entry ROWS=10 COLS=70>$account_entry</TEXTAREA> $NWB#vicidial_server_carriers-account_entry$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Protocole: </td><td align=left><select size=1 name=protocol><option>SIP</option><option>Zap</option><option>IAX2</option><option>EXTERNAL</option><option SELECTED>$protocol</option></select>$NWB#vicidial_server_carriers-protocol$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Globals String: </td><td align=left><input type=text name=globals_string size=50 maxlength=255 value=\"$globals_string\">$NWB#vicidial_server_carriers-globals_string$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Dialplan Entrée: </td><td align=left><TEXTAREA NAME=dialplan_entry ROWS=10 COLS=70>$dialplan_entry</TEXTAREA> $NWB#vicidial_server_carriers-dialplan_entry$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>IP du serveur: </td><td align=left><select size=1 name=server_ip>\n";
		echo "$servers_list";
		echo "<option SELECTED>$server_ip</option>\n";
		echo "</select>$NWB#vicidial_server_carriers-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>Y</option><option>N</option><option SELECTED>$active</option></select>$NWB#vicidial_server_carriers-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=541111111111&carrier_id=$carrier_id&carrier_name=$carrier_name\">SUPPRIMER CETTE CARRIER</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CARRIERS&stage=$carrier_id\">Cliquez ici pour voir les changements d'administration to this carrier</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=351111111111 modify tts record in the system
######################

if ($ADD==351111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_tts==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=351111111111&tts_id=$tts_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT tts_id,tts_name,active,tts_text,tts_voice,user_group from vicidial_tts_prompts where tts_id='$tts_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$tts_id =		$row[0];
		$tts_name =		$row[1];
		$active =		$row[2];
		$tts_text =		$row[3];
		$tts_voice =	$row[4];
		$user_group =	$row[5];

		echo "<br>MODIFIER UN RECORD TTS: $tts_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=451111111111>\n";
		echo "<input type=hidden name=tts_id value=\"$tts_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>TTS ID: </td><td align=left><B>$tts_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>TTS Nom: </td><td align=left><input type=text name=tts_name size=50 maxlength=100 value=\"$tts_name\">$NWB#vicidial_tts_prompts-tts_name$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option><option SELECTED>$active</option></select>$NWB#vicidial_tts_prompts-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_tts_prompts-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>TTS Voix: </td><td align=left><input type=text name=tts_voice size=20 maxlength=100 value=\"$tts_voice\">$NWB#vicidial_tts_prompts-tts_voice$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>TTS Text: </td><td align=left><TEXTAREA NAME=tts_text ROWS=20 COLS=70>$tts_text</TEXTAREA> $NWB#vicidial_tts_prompts-tts_text$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=551111111111&tts_id=$tts_id&tts_name=$tts_name\">DELETE THIS ENTRY TTS</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=TTS&stage=$tts_id\">Cliquez ici pour voir les changements d'administration to this TTS entry</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=361111111111 modify music on hold record in the system
######################

if ($ADD==361111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_moh==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=361111111111&moh_id=$moh_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT moh_id,moh_name,active,random,user_group from vicidial_music_on_hold where moh_id='$moh_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$moh_id =		$row[0];
		$moh_name =		$row[1];
		$active =		$row[2];
		$random =		$row[3];
		$user_group =	$row[4];

		echo "<br>MODIFY A MUSIC ON HOLD RECORD: $moh_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=461111111111>\n";
		echo "<input type=hidden name=moh_id value=\"$moh_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Musique en attente d-identification: </td><td align=left><B>$moh_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Musique d-attente Nom: </td><td align=left><input type=text name=moh_name size=50 maxlength=100 value=\"$moh_name\">$NWB#vicidial_music_on_hold-moh_name$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_music_on_hold-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option><option SELECTED>$active</option></select>$NWB#vicidial_music_on_hold-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Random Order: </td><td align=left><select size=1 name=random><option>N</option><option>Y</option><option SELECTED>$random</option></select>$NWB#vicidial_music_on_hold-random$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Fichiers audio: </td><td align=left>\n";
		##### get files listing for rank/delete options
		$stmt="SELECT filename,rank from vicidial_music_on_hold_files where moh_id='$moh_id' order by rank;";
		$rsltx=mysql_query($stmt, $link);
		$mohfiles_to_print = mysql_num_rows($rsltx);
		$ranks = ($mohfiles_to_print + 2);
		$o=0;
		while ($mohfiles_to_print > $o)
			{
			$rowx=mysql_fetch_row($rsltx);
			echo "<font size=2>Rank:</font><select size=1 name=$rowx[0]>\n";
			echo "<option SELECTED>$rowx[1]</option>\n";
			$k=1;
			while ($ranks > $k)
				{
				echo "<option>$k</option>\n";
				$k++;
				}
			echo "</select>\n";

			echo " &nbsp; <B>$rowx[0]</B> - <a href=\"$PHP_SELF?ADD=461111111111&moh_id=$moh_id&stage=FILEDELETE&filename=$rowx[0]\">SUPPRIMER</a><BR>\n";
			$o++;
			}

		echo "</td></tr>\n";

		echo "<tr bgcolor=#B9CBFD><td align=right>Ajouter un fichier audio: </td><td><input type=text size=50 maxlength=50 name=filename id=filename value=\"\"> <a href=\"javascript:launch_chooser('filename','date',30);\">audio chooser</a>  $NWB#vicidial_music_on_hold-filename$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=561111111111&moh_id=$moh_id&moh_name=$moh_name\">DELETE MUSIC ON HOLD ENTRY</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=MOH&stage=$moh_id\">Cliquez ici pour voir les changements d'administration to this Musique d-attente entry</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=371111111111 modify voicemail box in the system
######################

if ($ADD==371111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_voicemail==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=371111111111&voicemail_id=$voicemail_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT voicemail_id,pass,fullname,active,email,messages,old_messages,delete_vm_after_email,voicemail_timezone,voicemail_options,user_group from vicidial_voicemail where voicemail_id='$voicemail_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$voicemail_id =				$row[0];
		$pass =						$row[1];
		$fullname =					$row[2];
		$active =					$row[3];
		$email =					$row[4];
		$messages =					$row[5];
		$old_messages =				$row[6];
		$delete_vm_after_email =	$row[7];
		$voicemail_timezone =		$row[8];
		$voicemail_options =		$row[9];
		$user_group =				$row[10];

		echo "<br>MODIFIER UN messagerie vocale: $tts_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=471111111111>\n";
		echo "<input type=hidden name=voicemail_id value=\"$voicemail_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>ID vocale: </td><td align=left><B>$voicemail_id</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe:</td><td align=left><input type=text name=pass size=12 maxlength=10 value=\"$pass\">$NWB#vicidial_voicemail-pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Name: </td><td align=left><input type=text name=fullname size=50 maxlength=100 value=\"$fullname\">$NWB#vicidial_voicemail-fullname$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Email:</td><td align=left><input type=text name=email size=50 maxlength=100 value=\"$email\">$NWB#vicidial_voicemail-email$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option><option SELECTED>$active</option></select>$NWB#vicidial_voicemail-active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_voicemail-user_group$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Supprimer messagerie vocale après le courrier électronique: </td><td align=left><select size=1 name=delete_vm_after_email><option>Y</option><option>N</option><option selected>$delete_vm_after_email</option></select>$NWB#vicidial_voicemail-delete_vm_after_email$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Zone de messagerie vocale: </td><td align=left><select size=1 name=voicemail_timezone>";
		$vm_zones = explode("\n",$SSvoicemail_timezones);
		$z=0;
		$vm_zones_ct = count($vm_zones);
		while($vm_zones_ct > $z)
			{
			if (strlen($vm_zones[$z]) > 5)
				{
				$vm_specs = explode("=",$vm_zones[$z]);
				$vm_abb = $vm_specs[0];
				$vm_details = explode('|',$vm_specs[1]);
				$vm_location = 	$vm_details[0];
				echo "<option value=\"$vm_abb\">$vm_abb - $vm_location</option>\n";
				}
			$z++;
			}
		echo "<option selected>$voicemail_timezone</option></select> $NWB#vicidial_voicemail-voicemail_timezone$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Options de la messagerie vocale: </td><td align=left><input type=text name=voicemail_options size=50 maxlength=100 value=\"$voicemail_options\">$NWB#vicidial_voicemail-voicemail_options$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nouveaux messages: </td><td align=left><B>$messages</B></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Anciens messages: </td><td align=left><B>$old_messages</B></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=571111111111&voicemail_id=$voicemail_id&fullname=$fullname\">SUPPRIMER CETTE BOITE VOCALE</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=VOICEMAIL&stage=$voicemail_id\">Cliquez ici pour voir les changements d'administration to this voicemail box</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=381111111111 modify screen label in the system
######################
if ($ADD==381111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_labels==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=381111111111&label_id=$label_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT label_id,label_name,active,label_hide_field_logs,label_title,label_first_name,label_middle_initial,label_last_name,label_address1,label_address2,label_address3,label_city,label_state,label_province,label_postal_code,label_vendor_lead_code,label_gender,label_phone_number,label_phone_code,label_alt_phone,label_security_phrase,label_email,label_comments,user_group from vicidial_screen_labels where label_id='$label_id' $LOGadmin_viewable_groupsSQL;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$label_id =					$row[0];
		$label_name =				$row[1];
		$active =					$row[2];
		$label_hide_field_logs =	$row[3];
		$label_title =				$row[4];
		$label_first_name =			$row[5];
		$label_middle_initial =		$row[6];
		$label_last_name =			$row[7];
		$label_address1 =			$row[8];
		$label_address2 =			$row[9];
		$label_address3 =			$row[10];
		$label_city =				$row[11];
		$label_state =				$row[12];
		$label_province =			$row[13];
		$label_postal_code =		$row[14];
		$label_vendor_lead_code =	$row[15];
		$label_gender =				$row[16];
		$label_phone_number =		$row[17];
		$label_phone_code =			$row[18];
		$label_alt_phone =			$row[19];
		$label_security_phrase =	$row[20];
		$label_email =				$row[21];
		$label_comments =			$row[22];
		$user_group =				$row[23];

		echo "<br>Modifier l'étiquette ÉCRAN: $tts_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=481111111111>\n";
		echo "<input type=hidden name=label_id value=\"$label_id\">\n";

		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Label ID: </td><td align=left><B>$label_id</B></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Label Name: </td><td align=left><input type=text name=label_name size=50 maxlength=100 value=\"$label_name\">$NWB#vicidial_screen_labels-label_name$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Actif: </td><td align=left><select size=1 name=active><option>N</option><option>Y</option><option SELECTED>$active</option></select>$NWB#vicidial_screen_labels-active$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe d'utilisateurs d'administration: </td><td align=left><select size=1 name=user_group>\n";
		echo "$UUgroups_list";
		echo "<option SELECTED value=\"$user_group\">$user_group</option>\n";
		echo "</select>$NWB#vicidial_screen_labels-user_group$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Masquer Label dans des journaux d'appels: </td><td align=left><select size=1 name=label_hide_field_logs><option>N</option><option>Y</option><option SELECTED>$label_hide_field_logs</option></select>$NWB#vicidial_screen_labels-label_hide_field_logs$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Titre Label: </td><td align=left><input type=text name=label_title size=20 maxlength=40 value=\"$label_title\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom Étiquette: </td><td align=left><input type=text name=label_first_name size=20 maxlength=40 value=\"$label_first_name\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Moyen-étiquette initiale: </td><td align=left><input type=text name=label_middle_initial size=20 maxlength=40 value=\"$label_middle_initial\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom de la dernière étiquette: </td><td align=left><input type=text name=label_last_name size=20 maxlength=40 value=\"$label_last_name\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Étiquette Adresse1: </td><td align=left><input type=text name=label_address1 size=20 maxlength=40 value=\"$label_address1\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Étiquette Adresse2: </td><td align=left><input type=text name=label_address2 size=20 maxlength=40 value=\"$label_address2\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Étiquette Address3: </td><td align=left><input type=text name=label_address3 size=20 maxlength=40 value=\"$label_address3\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Ville d'étiquettes: </td><td align=left><input type=text name=label_city size=20 maxlength=40 value=\"$label_city\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Etat d'étiquettes: </td><td align=left><input type=text name=label_state size=20 maxlength=40 value=\"$label_state\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Provinced'étiquettes: </td><td align=left><input type=text name=label_province size=20 maxlength=40 value=\"$label_province\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Étiquette Code postal: </td><td align=left><input type=text name=label_postal_code size=20 maxlength=40 value=\"$label_postal_code\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Code de plomb étiquette du vendeur: </td><td align=left><input type=text name=label_vendor_lead_code size=20 maxlength=40 value=\"$label_vendor_lead_code\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Sexe étiquette: </td><td align=left><input type=text name=label_gender size=20 maxlength=40 value=\"$label_gender\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Numéro de téléphone d'étiquettes: </td><td align=left><input type=text name=label_phone_number size=20 maxlength=40 value=\"$label_phone_number\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Code de Téléphone étiquette: </td><td align=left><input type=text name=label_phone_code size=20 maxlength=40 value=\"$label_phone_code\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Téléphone Alt étiquette: </td><td align=left><input type=text name=label_alt_phone size=20 maxlength=40 value=\"$label_alt_phone\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Phrase Label Security: </td><td align=left><input type=text name=label_security_phrase size=20 maxlength=40 value=\"$label_security_phrase\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Email étiquette: </td><td align=left><input type=text name=label_email size=20 maxlength=40 value=\"$label_email\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Commentaires étiquettes: </td><td align=left><input type=text name=label_comments size=20 maxlength=40 value=\"$label_comments\">$NWB#vicidial_screen_labels-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";


		echo "</TABLE><BR><BR>\n";
		echo "<B> CAMPAGNES UTILISANT CE LABEL ÉCRAN:</B><BR>\n";
		echo "<TABLE>\n";

		$stmt="SELECT campaign_id,campaign_name from vicidial_campaigns where screen_labels='$label_id' $LOGallowed_campaignsSQL;";
		$rslt=mysql_query($stmt, $link);
		$camps_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($camps_to_print > $o) 
			{
			$row=mysql_fetch_row($rslt);
			echo "<TR><TD><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\">$row[0] </a></TD><TD> $row[1]<BR></TD></TR>\n";
			$o++;
			}

		echo "</TABLE><BR><BR>\n";

		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=581111111111&label_id=$label_id&label_name=$label_name\">SUPPRIMER CETTE ETIQUETTE ECRAN</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=LABEL&stage=$label_id\">Cliquez ici pour voir les changements d'administration à cette étiquette écran</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################
# ADD=391111111111 modify contact in the system
######################
if ($ADD==391111111111)
	{
	if ( ($LOGast_admin_access==1) or ($LOGmodify_contacts==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=391111111111&contact_id=$contact_id";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		if ( (preg_match("/contact_information/",$SStables_use_alt_log_db)) and (strlen($SSalt_log_server_ip)>4) and (strlen($SSalt_log_dbname)>0) )
			{
			$linkALT=mysql_connect("$SSalt_log_server_ip", "$SSalt_log_login", "$SSalt_log_pass");
			mysql_select_db("$SSalt_log_dbname", $linkALT);
			}
		else
			{$linkALT = $link;}
		$stmt="SELECT first_name,last_name,office_num,cell_num,other_num1,other_num2,bu_name,department,group_name,job_title,location from contact_information where contact_id='$contact_id';";
		$rslt=mysql_query($stmt, $linkALT);
		$row=mysql_fetch_row($rslt);
		$first_name =	$row[0];
		$last_name =	$row[1];
		$office_num =	$row[2];
		$cell_num =		$row[3];
		$other_num1 =	$row[4];
		$other_num2 =	$row[5];
		$bu_name =		$row[6];
		$department =	$row[7];
		$group_name =	$row[8];
		$job_title =	$row[9];
		$location =		$row[10];

		echo "<br>Modifier un contact: $tts_id<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=491111111111>\n";
		echo "<input type=hidden name=contact_id value=\"$contact_id\">\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nom: </td><td align=left><input type=text name=first_name value=\"$first_name\" size=50 maxlength=50>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Prénom: </td><td align=left><input type=text name=last_name value=\"$last_name\" size=50 maxlength=50>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre Bureau: </td><td align=left><input type=text name=office_num value=\"$office_num\" size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre de cellules: </td><td align=left><input type=text name=cell_num value=\"$cell_num\" size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre d'autres 1: </td><td align=left><input type=text name=other_num1 value=\"$other_num1\" size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Nombre d'autres 2: </td><td align=left><input type=text name=other_num2 value=\"$other_num2\" size=20 maxlength=20>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>BU Name: </td><td align=left><input type=text name=bu_name value=\"$bu_name\" size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Department: </td><td align=left><input type=text name=department value=\"$department\" size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Groupe: </td><td align=left><input type=text name=group_name value=\"$group_name\" size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Job Title: </td><td align=left><input type=text name=job_title value=\"$job_title\" size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Location: </td><td align=left><input type=text name=location value=\"$location\" size=50 maxlength=100>$NWB#contact_information$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";

		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=591111111111&contact_id=$contact_id&first_name=$first_name&last_name=$last_name\">Supprimer ce contact</a>\n";
			}
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=CONTACTS&stage=$contact_id\">Cliquez ici pour voir les changements d'administration à ce contact</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}




######################
# ADD=3111111111111 modify conference record in the system
######################

if ($ADD==3111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=3111111111111&conf_exten=$conf_exten&server_ip=$server_ip";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT conf_exten,server_ip,extension from conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$conf_exten = $row[0];
		$server_ip = $row[1];

		echo "<br>MODIFIER UNE CONFERENCE: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=4111111111111>\n";
		echo "<input type=hidden name=old_conf_exten value=\"$row[0]\">\n";
		echo "<input type=hidden name=old_server_ip value=\"$row[1]\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Conférence: </td><td align=left><input type=text name=conf_exten size=10 maxlength=7 value=\"$row[0]\">$NWB#conferences-conf_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111111&server_ip=$row[1]\">IP du serveur</a>: </td><td align=left><select size=1 name=server_ip>\n";

		echo "$servers_list";
		echo "<option SELECTED>$row[1]</option>\n";
		echo "</select>$NWB#conferences-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension courante: </td><td align=left><input type=text name=extension size=20 maxlength=20 value=\"$row[2]\"></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=5111111111111&conf_exten=$conf_exten&server_ip=$server_ip\">SUPPRIMER CETTE CONFERENCE</a>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=31111111111111 modify vicidial conference record in the system
######################

if ($ADD==31111111111111)
	{
	if ($LOGast_admin_access==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=31111111111111&conf_exten=$conf_exten&server_ip=$server_ip";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT conf_exten,server_ip,extension,leave_3way,leave_3way_datetime from vicidial_conferences where conf_exten='$conf_exten' and server_ip='$server_ip';";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$conf_exten = $row[0];
		$server_ip = $row[1];

		echo "<br>MODIFY A VICIDIAL CONFERENCE RECORD: $row[0]<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=41111111111111>\n";
		echo "<input type=hidden name=old_conf_exten value=\"$row[0]\">\n";
		echo "<input type=hidden name=old_server_ip value=\"$row[1]\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Conférence: </td><td align=left><input type=text name=conf_exten size=10 maxlength=7 value=\"$row[0]\">$NWB#conferences-conf_exten$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right><a href=\"$PHP_SELF?ADD=311111111111&server_ip=$row[1]\">IP du serveur</a>: </td><td align=left><select size=1 name=server_ip>\n";

		echo "$servers_list";
		echo "<option SELECTED>$row[1]</option>\n";
		echo "</select>$NWB#conferences-server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Extension courante: </td><td align=left><input type=text name=extension size=20 maxlength=20 value=\"$row[2]\"></td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";

		echo "<center><b>\n";
		if ($LOGast_delete_phones > 0)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=51111111111111&conf_exten=$conf_exten&server_ip=$server_ip\">SUPPRIMER CETTE CONFERENCE VICIDIAL</a>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}



######################
# ADD=311111111111111 modify vicidial system settings
######################

if ($ADD==311111111111111)
	{
	if ($LOGmodify_servers==1)
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=311111111111111";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT count(*) from vicidial_phone_codes;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$vicidial_phone_codes_count =	$row[0];

		$stmt="SELECT count(*) from vicidial_postal_codes;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$vicidial_postal_codes_count =	$row[0];

		$stmt="SELECT count(*) from vicidial_nanpa_prefix_codes;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$vicidial_nanpa_prefix_codes_count =	$row[0];

		$stmt="SELECT sum(total_calls) from vicidial_daily_max_stats where stats_flag='OPEN' and stats_type!='TOTAL';";
		$rslt=mysql_query($stmt, $link);
		$stats_to_print = mysql_num_rows($rslt);
		if ($stats_to_print > 0) 
			{
			$rowx=mysql_fetch_row($rslt);
			$ALLtotal_calls = $rowx[0];
			}

		$stmt="SELECT max(max_inbound) from vicidial_daily_max_stats where stats_flag='OPEN' and stats_type='INGROUP';";
		$rslt=mysql_query($stmt, $link);
		$stats_to_print = mysql_num_rows($rslt);
		if ($stats_to_print > 0) 
			{
			$rowx=mysql_fetch_row($rslt);
			$ALLmax_inbound = $rowx[0];
			}

		$stmt="SELECT max(max_outbound) from vicidial_daily_max_stats where stats_flag='OPEN' and stats_type='CAMPAIGN';";
		$rslt=mysql_query($stmt, $link);
		$stats_to_print = mysql_num_rows($rslt);
		if ($stats_to_print > 0) 
			{
			$rowx=mysql_fetch_row($rslt);
			$ALLmax_outbound = $rowx[0];
			}

		$stmt="SELECT max_channels,max_calls,max_agents from vicidial_daily_max_stats where stats_flag='OPEN' and stats_type='TOTAL';";
		$rslt=mysql_query($stmt, $link);
		$stats_to_print = mysql_num_rows($rslt);
		if ($stats_to_print > 0) 
			{
			$rowx=mysql_fetch_row($rslt);
			$ALLchannels_count =	$rowx[0];
			$ALLcalls_count =		$rowx[1];
			$ALLagent_count =		$rowx[2];
			}

		$stmt="SELECT version,install_date,use_non_latin,webroot_writable,enable_queuemetrics_logging,queuemetrics_server_ip,queuemetrics_dbname,queuemetrics_login,queuemetrics_pass,queuemetrics_url,queuemetrics_log_id,queuemetrics_eq_prepend,vicidial_agent_disable,allow_sipsak_messages,admin_home_url,enable_agc_xfer_log,db_schema_version,auto_user_add_value,timeclock_end_of_day,timeclock_last_reset_date,vdc_header_date_format,vdc_customer_date_format,vdc_header_phone_format,vdc_agent_api_active,qc_last_pull_time,enable_vtiger_integration,vtiger_server_ip,vtiger_dbname,vtiger_login,vtiger_pass,vtiger_url,qc_features_active,outbound_autodial_active,outbound_calls_per_second,enable_tts_integration,agentonly_callback_campaign_lock,sounds_central_control_active,sounds_web_server,sounds_web_directory,active_voicemail_server,auto_dial_limit,user_territories_active,allow_custom_dialplan,db_schema_update_date,enable_second_webform,default_webphone,default_external_server_ip,webphone_url,enable_agc_dispo_log,custom_dialplan_entry,queuemetrics_loginout,callcard_enabled,queuemetrics_callstatus,default_codecs,admin_web_directory,label_title,label_first_name,label_middle_initial,label_last_name,label_address1,label_address2,label_address3,label_city,label_state,label_province,label_postal_code,label_vendor_lead_code,label_gender,label_phone_number,label_phone_code,label_alt_phone,label_security_phrase,label_email,label_comments,custom_fields_enabled,slave_db_server,reports_use_slave_db,webphone_systemkey,first_login_trigger,default_phone_registration_password,default_phone_login_password,default_server_password,admin_modify_refresh,nocache_admin,generate_cross_server_exten,queuemetrics_addmember_enabled,queuemetrics_dispo_pause,label_hide_field_logs,queuemetrics_pe_phone_append,test_campaign_calls,agents_calls_reset,default_voicemail_timezone,default_local_gmt,noanswer_log,alt_log_server_ip,alt_log_dbname,alt_log_login,alt_log_pass,tables_use_alt_log_db,did_agent_log,campaign_cid_areacodes_enabled,pllb_grouping_limit,did_ra_extensions_enabled,expanded_list_stats,contacts_enabled from system_settings;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$version =						$row[0];
		$install_date =					$row[1];
		$use_non_latin =				$row[2];
		$webroot_writable =				$row[3];
		$enable_queuemetrics_logging =	$row[4];
		$queuemetrics_server_ip =		$row[5];
		$queuemetrics_dbname =			$row[6];
		$queuemetrics_login =			$row[7];
		$queuemetrics_pass =			$row[8];
		$queuemetrics_url =				$row[9];
		$queuemetrics_log_id =			$row[10];
		$queuemetrics_eq_prepend =		$row[11];
		$vicidial_agent_disable =		$row[12];
		$allow_sipsak_messages =		$row[13];
		$admin_home_url =				$row[14];
		$enable_agc_xfer_log =			$row[15];
		$db_schema_version =			$row[16];
		$auto_user_add_value =			$row[17];
		$timeclock_end_of_day =			$row[18];
		$timeclock_last_reset_date =	$row[19];
		$vdc_header_date_format =		$row[20];
		$vdc_customer_date_format =		$row[21];
		$vdc_header_phone_format =		$row[22];
		$vdc_agent_api_active =			$row[23];
		$qc_last_pull_time = 			$row[24];
		$enable_vtiger_integration = 	$row[25];
		$vtiger_server_ip = 			$row[26];
		$vtiger_dbname = 				$row[27];
		$vtiger_login = 				$row[28];
		$vtiger_pass = 					$row[29];
		$vtiger_url = 					$row[30];
		$qc_features_active =			$row[31];
		$outbound_autodial_active =		$row[32];
		$outbound_calls_per_second =	$row[33];
		$enable_tts_integration =		$row[34];
		$agentonly_callback_campaign_lock = $row[35];
		$sounds_central_control_active = $row[36];
		$sounds_web_server =			$row[37];
		$sounds_web_directory =			$row[38];
		$active_voicemail_server =		$row[39];
		$auto_dial_limit =				$row[40];
		$user_territories_active =		$row[41];
		$allow_custom_dialplan =		$row[42];
		$db_schema_update_date =		$row[43];
		$enable_second_webform =		$row[44];
		$default_webphone =				$row[45];
		$default_external_server_ip =	$row[46];
		$webphone_url =					$row[47];
		$enable_agc_dispo_log =			$row[48];
		$custom_dialplan_entry =		$row[49];
		$queuemetrics_loginout =		$row[50];
		$callcard_enabled =				$row[51];
		$queuemetrics_callstatus =		$row[52];
		$default_codecs =				$row[53];
		$admin_web_directory =			$row[54];
		$label_title =					$row[55];
		$label_first_name =				$row[56];
		$label_middle_initial =			$row[57];
		$label_last_name =				$row[58];
		$label_address1 =				$row[59];
		$label_address2 =				$row[60];
		$label_address3 =				$row[61];
		$label_city =					$row[62];
		$label_state =					$row[63];
		$label_province =				$row[64];
		$label_postal_code =			$row[65];
		$label_vendor_lead_code =		$row[66];
		$label_gender =					$row[67];
		$label_phone_number =			$row[68];
		$label_phone_code =				$row[69];
		$label_alt_phone =				$row[70];
		$label_security_phrase =		$row[71];
		$label_email =					$row[72];
		$label_comments =				$row[73];
		$custom_fields_enabled =		$row[74];
		$slave_db_server =				$row[75];
		$reports_use_slave_db =			$row[76];
		$webphone_systemkey =			$row[77];
		$first_login_trigger =			$row[78];
		$default_phone_registration_password =	$row[79];
		$default_phone_login_password =	$row[80];
		$default_server_password =		$row[81];
		$admin_modify_rafraîchir =			$row[82];
		$nocache_admin =				$row[83];
		$generate_cross_server_exten =	$row[84];
		$queuemetrics_addmember_enabled =	$row[85];
		$queuemetrics_dispo_pause =		$row[86];
		$label_hide_field_logs = 		$row[87];
		$queuemetrics_pe_phone_append = $row[88];
		$test_campaign_calls =			$row[89];
		$agents_calls_reset =			$row[90];
		$default_voicemail_timezone =	$row[91];
		$default_local_gmt =			$row[92];
		$noanswer_log =					$row[93];
		$alt_log_server_ip =			$row[94];
		$alt_log_dbname =				$row[95];
		$alt_log_login =				$row[96];
		$alt_log_pass =					$row[97];
		$tables_use_alt_log_db =		$row[98];
		$did_agent_log =				$row[99];
		$campaign_cid_areacodes_enabled = $row[100];
		$pllb_grouping_limit =			$row[101];
		$did_ra_extensions_enabled =	$row[102];
		$expanded_list_stats =			$row[103];
		$contacts_enabled =				$row[104];

		echo "<br>MODIFIER LES REGLAGES DU SYSTEME VICIDIAL<form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=411111111111111>\n";
		echo "<input type=hidden name=sounds_web_directory value=\"$sounds_web_directory\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Version: </td><td align=left> $version</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DB Schema Version: </td><td align=left> $db_schema_version</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DB Schema Update Date: </td><td align=left> $db_schema_update_date</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Utilisateur-add Value: </td><td align=left> $auto_user_add_value</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Date d'installation: </td><td align=left> $install_date</td></tr>\n";
		$pcblinkB=''; $pcblinkE='';
		if ($vicidial_phone_codes_count < 1000) {$pcblinkB='<b><font color=red><blink>'; $pcblinkE='</blink></font></b>';}
		echo "<tr bgcolor=#B6D3FC><td align=right>Phone Codes: </td><td align=left> $pcblinkB$vicidial_phone_codes_count - $vicidial_postal_codes_count - $vicidial_nanpa_prefix_codes_count$pcblinkE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Today System Stats: </td><td align=left> $ALLtotal_calls - $ALLmax_inbound - $ALLmax_outbound - $ALLchannels_count - $ALLcalls_count - $ALLagent_count</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Utiliser Non-Latin: </td><td align=left><select size=1 name=use_non_latin><option>1</option><option>0</option><option selected>$use_non_latin</option></select>$NWB#settings-use_non_latin$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Webroot éditable: </td><td align=left><select size=1 name=webroot_writable><option>1</option><option>0</option><option selected>$webroot_writable</option></select>$NWB#settings-webroot_writable$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Affichage de la désactivation d'un agent VICIDIAL: </td><td align=left><select size=1 name=vicidial_agent_disable>\n";
		echo "<option value=\"NOT_ACTIVE\">NOT_ACTIVE</option>\n";
		echo "<option value=\"LIVE_AGENT\">LIVE_AGENT</option>\n";
		echo "<option value=\"EXTERNAL\">EXTERNAL</option>\n";
		echo "<option value=\"ALL\">ALL</option>\n";
		echo "<option selected value=\"$vicidial_agent_disable\">$vicidial_agent_disable</option>\n";
		echo "</select>$NWB#settings-vicidial_agent_disable$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Autoriser les messages SIPSAK: </td><td align=left><select size=1 name=allow_sipsak_messages><option>1</option><option>0</option><option selected>$allow_sipsak_messages</option></select>$NWB#settings-allow_sipsak_messages$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>URL de l'accueil de l'administration: </td><td align=left><input type=text name=admin_home_url size=50 maxlength=255 value=\"$admin_home_url\">$NWB#settings-admin_home_url$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Administrateur Modifier Auto-Refresh: </td><td align=left><input type=text name=admin_modify_rafraîchir size=6 maxlength=5 value=\"$admin_modify_rafraîchir\">$NWB#settings-admin_modify_rafraîchir$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Admin No-Cache: </td><td align=left><select size=1 name=nocache_admin><option>1</option><option>0</option><option selected>$nocache_admin</option></select>$NWB#settings-nocache_admin$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Permettez Le Fichier journal De Transfert D'Agent: </td><td align=left><select size=1 name=enable_agc_xfer_log><option>1</option><option>0</option><option selected>$enable_agc_xfer_log</option></select>$NWB#settings-enable_agc_xfer_log$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Activer Logfile Disposition Agent: </td><td align=left><select size=1 name=enable_agc_dispo_log><option>1</option><option>0</option><option selected>$enable_agc_dispo_log</option></select>$NWB#settings-enable_agc_dispo_log$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Horloge en temps Fin de la journée:</td><td align=left><input type=text name=timeclock_end_of_day size=5 maxlength=4 value=\"$timeclock_end_of_day\">$NWB#settings-timeclock_end_of_day$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Par défaut locale GMT: </td><td align=left><select size=1 name=default_local_gmt><option>12.75</option><option>12.00</option><option>11.00</option><option>10.00</option><option>9.50</option><option>9.00</option><option>8.00</option><option>7.00</option><option>6.50</option><option>6.00</option><option>5.75</option><option>5.50</option><option>5.00</option><option>4.50</option><option>4.00</option><option>3.50</option><option>3.00</option><option>2.00</option><option>1.00</option><option>0.00</option><option>-1.00</option><option>-2.00</option><option>-3.00</option><option>-3.50</option><option>-4.00</option><option>-5.00</option><option>-6.00</option><option>-7.00</option><option>-8.00</option><option>-9.00</option><option>-10.00</option><option>-11.00</option><option>-12.00</option><option selected>$default_local_gmt</option></select> (Ne PAS ajuster pour DST)$NWB#settings-default_local_gmt$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Zone messagerie vocale par défaut: </td><td align=left><select size=1 name=default_voicemail_timezone>";
		$vm_zones = explode("\n",$SSvoicemail_timezones);
		$z=0;
		$vm_zones_ct = count($vm_zones);
		while($vm_zones_ct > $z)
			{
			if (strlen($vm_zones[$z]) > 5)
				{
				$vm_specs = explode("=",$vm_zones[$z]);
				$vm_abb = $vm_specs[0];
				$vm_details = explode('|',$vm_specs[1]);
				$vm_location = 	$vm_details[0];
				echo "<option value=\"$vm_abb\">$vm_abb - $vm_location</option>\n";
				}
			$z++;
			}
		echo "<option selected>$default_voicemail_timezone</option></select> $NWB#settings-default_voicemail_timezone$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Agents Appels Réinitialiser: </td><td align=left><select size=1 name=agents_calls_reset><option>1</option><option>0</option><option selected>$agents_calls_reset</option></select>$NWB#settings-agents_calls_reset$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Dernière timeclock Auto Déconnection:</td><td align=left> $timeclock_last_reset_date</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Agent Header Screen Format Date: </td><td align=left><select size=1 name=vdc_header_date_format>\n";
		echo "<option>MS_DASH_24HR  2008-06-24 23:59:59</option>\n";
		echo "<option>US_SLASH_24HR 06/24/2008 23:59:59</option>\n";
		echo "<option>EU_SLASH_24HR 24/06/2008 23:59:59</option>\n";
		echo "<option>AL_TEXT_24HR  JUN 24 23:59:59</option>\n";
		echo "<option>MS_DASH_AMPM  2008-06-24 11:59:59 PM</option>\n";
		echo "<option>US_SLASH_AMPM 06/24/2008 11:59:59 PM</option>\n";
		echo "<option>EU_SLASH_AMPM 24/06/2008 11:59:59 PM</option>\n";
		echo "<option>AL_TEXT_AMPM  JUN 24 11:59:59 PM</option>\n";
		echo "<option selected value=\"$vdc_header_date_format\">$vdc_header_date_format</option>\n";
		echo "</select>$NWB#settings-vdc_header_date_format$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Agent client Screen Format Date: </td><td align=left><select size=1 name=vdc_customer_date_format>\n";
		echo "<option>MS_DASH_24HR  2008-06-24 23:59:59</option>\n";
		echo "<option>US_SLASH_24HR 06/24/2008 23:59:59</option>\n";
		echo "<option>EU_SLASH_24HR 24/06/2008 23:59:59</option>\n";
		echo "<option>AL_TEXT_24HR  JUN 24 23:59:59</option>\n";
		echo "<option>MS_DASH_AMPM  2008-06-24 11:59:59 PM</option>\n";
		echo "<option>US_SLASH_AMPM 06/24/2008 11:59:59 PM</option>\n";
		echo "<option>EU_SLASH_AMPM 24/06/2008 11:59:59 PM</option>\n";
		echo "<option>AL_TEXT_AMPM  JUN 24 11:59:59 PM</option>\n";
		echo "<option selected value=\"$vdc_customer_date_format\">$vdc_customer_date_format</option>\n";
		echo "</select>$NWB#settings-vdc_customer_date_format$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Agent Client Téléphone Screen Format: </td><td align=left><select size=1 name=vdc_header_phone_format>\n";
		echo "<option>US_DASH 000-000-0000</option>\n";
		echo "<option>US_PARN (000)000-0000</option>\n";
		echo "<option>MS_NODS 0000000000</option>\n";
		echo "<option>UK_DASH 00 0000-0000</option>\n";
		echo "<option>AU_SPAC 000 000 000</option>\n";
		echo "<option>IT_DASH 0000-000-000</option>\n";
		echo "<option>FR_SPAC 00 00 00 00 00</option>\n";
		echo "<option selected value=\"$vdc_header_phone_format\">$vdc_header_phone_format</option>\n";
		echo "</select>$NWB#settings-vdc_header_phone_format$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Agent API Active:</td><td align=left><select size=1 name=vdc_agent_api_active><option>1</option><option>0</option><option selected>$vdc_agent_api_active</option></select>$NWB#settings-vdc_agent_api_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Agent Only Lock Campagne de rappel: </td><td align=left><select size=1 name=agentonly_callback_campaign_lock><option>1</option><option>0</option><option selected>$agentonly_callback_campaign_lock</option></select>$NWB#settings-agentonly_callback_campaign_lock$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Central Sound Control Actif: </td><td align=left><select size=1 name=sounds_central_control_active><option>1</option><option>0</option><option selected>$sounds_central_control_active</option></select>$NWB#settings-sounds_central_control_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Sounds Web Server: </td><td align=left><input type=text name=sounds_web_server size=30 maxlength=50 value=\"$sounds_web_server\">$NWB#settings-sounds_web_server$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Sounds Web Directory: </td><td align=left><a href=\"http://$sounds_web_server/$sounds_web_directory\">$sounds_web_directory</a> $NWB#settings-sounds_web_directory$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Annuaire Web Admin: </td><td align=left><input type=text name=admin_web_directory size=50 maxlength=255 value=\"$admin_web_directory\">$NWB#settings-admin_web_directory$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Active Server Boîte vocale: </td><td align=left><select size=1 name=active_voicemail_server>\n";
		echo "$servers_list";
		echo "<option SELECTED>$active_voicemail_server</option>\n";
		echo "</select>$NWB#settings-active_voicemail_server$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Dial Limite: </td><td align=left><select size=1 name=auto_dial_limit><option selected>$auto_dial_limit</option>\n";
		$adl=1;
		while($adl < 1000)
			{
			echo "<option>$adl</option>\n";
			if ($adl < 3)
				{$adl = ($adl + 0.1);}
			else
				{
				if ($adl < 4)
					{$adl = ($adl + 0.25);}
				else
					{
					if ($adl < 5)
						{$adl = ($adl + 0.5);}
					else
						{
						if ($adl < 10)
							{$adl = ($adl + 1);}
						else
							{
							if ($adl < 20)
								{$adl = ($adl + 2);}
							else
								{
								if ($adl < 40)
									{$adl = ($adl + 5);}
								else
									{
									if ($adl < 200)
										{$adl = ($adl + 10);}
									else
										{
										if ($adl < 400)
											{$adl = ($adl + 50);}
										else
											{
											if ($adl < 1000)
												{$adl = ($adl + 100);}
											else
												{$adl = ($adl + 1);}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		echo "<option>$adl</option></select>$NWB#settings-auto_dial_limit$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Auto Outbound Dial-Actif: </td><td align=left><select size=1 name=outbound_autodial_active><option>1</option><option>0</option><option selected>$outbound_autodial_active</option></select>$NWB#settings-outbound_autodial_active$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Max REMPLISSAGE demande par seconde: </td><td align=left><input type=text name=outbound_calls_per_second size=4 maxlength=3 value=\"$outbound_calls_per_second\">$NWB#settings-outbound_calls_per_second$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Permettant de personnaliser le plan d-appel Entrées: </td><td align=left><select size=1 name=allow_custom_dialplan><option>1</option><option>0</option><option selected>$allow_custom_dialplan</option></select>$NWB#settings-allow_custom_dialplan$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Limite Groupement PLLB: </td><td align=left><input type=text name=pllb_grouping_limit size=4 maxlength=3 value=\"$pllb_grouping_limit\">$NWB#settings-pllb_grouping_limit$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Générer les extensions de téléphone de la Croix-Server: </td><td align=left><select size=1 name=generate_cross_server_exten><option>1</option><option>0</option><option selected>$generate_cross_server_exten</option></select>$NWB#settings-generate_cross_server_exten$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Territoires utilisateur Actif: </td><td align=left><select size=1 name=user_territories_active><option>1</option><option>0</option><option selected>$user_territories_active</option></select>$NWB#settings-user_territories_active$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer Webform Deuxième: </td><td align=left><select size=1 name=enable_second_webform><option>1</option><option>0</option><option selected>$enable_second_webform</option></select>$NWB#settings-enable_second_webform$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer TTS Intégration: </td><td align=left><select size=1 name=enable_tts_integration><option>1</option><option>0</option><option selected>$enable_tts_integration</option></select>$NWB#settings-enable_tts_integration$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer CallCard: </td><td align=left><select size=1 name=callcard_enabled><option>1</option><option>0</option><option selected>$callcard_enabled</option></select>$NWB#settings-callcard_enabled$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer les champs de liste personnalisés: </td><td align=left><select size=1 name=custom_fields_enabled><option>1</option><option>0</option><option selected>$custom_fields_enabled</option></select>$NWB#settings-custom_fields_enabled$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Permettre des appels de test de la campagne: </td><td align=left><select size=1 name=test_campaign_calls><option>1</option><option>0</option><option selected>$test_campaign_calls</option></select>$NWB#settings-test_campaign_calls$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer Statistiques liste élargie: </td><td align=left><select size=1 name=expanded_list_stats><option>1</option><option>0</option><option selected>$expanded_list_stats</option></select>$NWB#settings-expanded_list_stats$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer le code zonal de la campagne CID: </td><td align=left><select size=1 name=campaign_cid_areacodes_enabled><option>1</option><option>0</option><option selected>$campaign_cid_areacodes_enabled</option></select>$NWB#settings-campaign_cid_areacodes_enabled$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Activer télécommande remplace extension de l'agent: </td><td align=left><select size=1 name=did_ra_extensions_enabled><option>1</option><option>0</option><option selected>$did_ra_extensions_enabled</option></select>$NWB#settings-did_ra_extensions_enabled$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Enable Contacts: </td><td align=left><select size=1 name=contacts_enabled><option>1</option><option>0</option><option selected>$contacts_enabled</option></select>$NWB#settings-contacts_enabled$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Trigger connecter d'abord: </td><td align=left><input type=hidden name=first_login_trigger value=\"$first_login_trigger\"> $first_login_trigger &nbsp; $NWB#settings-first_login_trigger$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe par défaut d'inscription Téléphone: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passX name=default_phone_registration_password size=20 maxlength=20 value=\"$default_phone_registration_password\" onkeyup=\"return pwdChanged('reg_passX','reg_pass_imgX');\">$NWB#settings-default_phone_registration_password$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_imgX src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passX','reg_pass_imgX');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Login Mot de passe par défaut Téléphone: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passY name=default_phone_login_password size=20 maxlength=20 value=\"$default_phone_login_password\" onkeyup=\"return pwdChanged('reg_passY','reg_pass_imgY');\">$NWB#settings-default_phone_login_password$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_imgY src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passY','reg_pass_imgY');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe par défaut du serveur: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passZ name=default_server_password size=20 maxlength=20 value=\"$default_server_password\" onkeyup=\"return pwdChanged('reg_passZ','reg_pass_imgZ');\">$NWB#settings-default_server_password$NWE &nbsp; &nbsp; Force: <IMG id=reg_pass_imgZ src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passZ','reg_pass_imgZ');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Database Server esclave: </td><td align=left><input type=text name=slave_db_server size=30 maxlength=50 value=\"$slave_db_server\">$NWB#settings-slave_db_server$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Rapports d'utiliser DB Slave: </td><td align=left><select MULTIPLE size=4 name=reports_use_slave_db[]>\n";

		$Vreports_ARY = explode(',',$Vreports);
		$Vreports_ct = count($Vreports_ARY);
		$b=0;
		while ($b < $Vreports_ct)
			{
			$field_selected='';
			trim($Vreports_ARY[$b]);
			if (preg_match("/$Vreports_ARY[$b]/",$reports_use_slave_db))
				{$field_selected = 'SELECTED';}
			echo "<option value=\"$Vreports_ARY[$b]\" $field_selected>$Vreports_ARY[$b]</option>\n";
			$b++;
			}
		echo "</select>$NWB#settings-reports_use_slave_db$NWE</td></tr>\n";

		if ($SSallow_custom_dialplan > 0)
			{
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>Entrée personnalisée Dialplan: $NWB#settings-custom_dialplan_entry$NWE <TEXTAREA NAME=custom_dialplan_entry ROWS=5 COLS=80>$custom_dialplan_entry</TEXTAREA></td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Recharger Dialplan Sur les serveurs: </td><td align=left><select size=1 name=reload_dialplan_on_servers><option>1</option><option selected>0</option></select>$NWB#settings-reload_dialplan_on_servers$NWE</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=right>Entrée personnalisée Dialplan: </td><td align=left>Disabled <input type=hidden name=custom_dialplan_entry value=\"\">$NWB#settings-custom_dialplan_entry$NWE</td></tr>\n";
			}

		echo "<tr bgcolor=#B6D3FC><td align=right>Masquer Label dans des journaux d'appels: </td><td align=left><select size=1 name=label_hide_field_logs><option>N</option><option>Y</option><option SELECTED>$label_hide_field_logs</option></select>$NWB#settings-label_hide_field_logs$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Titre Label: </td><td align=left><input type=text name=label_title size=20 maxlength=40 value=\"$label_title\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Nom Étiquette: </td><td align=left><input type=text name=label_first_name size=20 maxlength=40 value=\"$label_first_name\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Moyen-étiquette initiale: </td><td align=left><input type=text name=label_middle_initial size=20 maxlength=40 value=\"$label_middle_initial\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Nom de la dernière étiquette: </td><td align=left><input type=text name=label_last_name size=20 maxlength=40 value=\"$label_last_name\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Étiquette Adresse1: </td><td align=left><input type=text name=label_address1 size=20 maxlength=40 value=\"$label_address1\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Étiquette Adresse2: </td><td align=left><input type=text name=label_address2 size=20 maxlength=40 value=\"$label_address2\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Étiquette Address3: </td><td align=left><input type=text name=label_address3 size=20 maxlength=40 value=\"$label_address3\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Ville d'étiquettes: </td><td align=left><input type=text name=label_city size=20 maxlength=40 value=\"$label_city\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Etat d'étiquettes: </td><td align=left><input type=text name=label_state size=20 maxlength=40 value=\"$label_state\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Provinced'étiquettes: </td><td align=left><input type=text name=label_province size=20 maxlength=40 value=\"$label_province\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Étiquette Code postal: </td><td align=left><input type=text name=label_postal_code size=20 maxlength=40 value=\"$label_postal_code\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Code de plomb étiquette du vendeur: </td><td align=left><input type=text name=label_vendor_lead_code size=20 maxlength=40 value=\"$label_vendor_lead_code\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Sexe étiquette: </td><td align=left><input type=text name=label_gender size=20 maxlength=40 value=\"$label_gender\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Numéro de téléphone d'étiquettes: </td><td align=left><input type=text name=label_phone_number size=20 maxlength=40 value=\"$label_phone_number\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Code de Téléphone étiquette: </td><td align=left><input type=text name=label_phone_code size=20 maxlength=40 value=\"$label_phone_code\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Téléphone Alt étiquette: </td><td align=left><input type=text name=label_alt_phone size=20 maxlength=40 value=\"$label_alt_phone\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Phrase Label Security: </td><td align=left><input type=text name=label_security_phrase size=20 maxlength=40 value=\"$label_security_phrase\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Email étiquette: </td><td align=left><input type=text name=label_email size=20 maxlength=40 value=\"$label_email\">$NWB#settings-default_field_labels$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCCCCC><td align=right>Commentaires étiquettes: </td><td align=left><input type=text name=label_comments size=20 maxlength=40 value=\"$label_comments\">$NWB#settings-default_field_labels$NWE</td></tr>\n";


		echo "<tr bgcolor=#B6D3FC><td align=right>QC Active Caractéristiques: </td><td align=left><select size=1 name=qc_features_active><option>1</option><option>0</option><option selected>$qc_features_active</option></select>$NWB#settings-qc_features_active$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Pull QC Dernière Heure:</td><td align=left> $qc_last_pull_time</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Codecs par défaut: </td><td align=left><input type=text name=default_codecs size=40 maxlength=100 value=\"$default_codecs\">$NWB#settings-default_codecs$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Webphone par défaut: </td><td align=left><select size=1 name=default_webphone><option>1</option><option>0</option><option selected>$default_webphone</option></select>$NWB#settings-default_webphone$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>IP par défaut du serveur externe: </td><td align=left><select size=1 name=default_external_server_ip><option>1</option><option>0</option><option selected>$default_external_server_ip</option></select>$NWB#settings-default_external_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>URL Webphone: </td><td align=left><input type=text name=webphone_url size=50 maxlength=255 value=\"$webphone_url\">$NWB#settings-webphone_url$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Key System Webphone: </td><td align=left><input type=text name=webphone_systemkey size=50 maxlength=100 value=\"$webphone_systemkey\">$NWB#settings-webphone_systemkey$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Non-Réponse Connexion: </td><td align=left><select size=1 name=noanswer_log><option>Y</option><option>N</option><option selected>$noanswer_log</option></select>$NWB#settings-noanswer_log$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>DID journal de l'Agent: </td><td align=left><select size=1 name=did_agent_log><option>Y</option><option>N</option><option selected>$did_agent_log</option></select>$NWB#settings-did_agent_log$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alt-Server Log DB: </td><td align=left><input type=text name=alt_log_server_ip size=18 maxlength=50 value=\"$alt_log_server_ip\">$NWB#settings-alt_log_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alt-Log DB Name: </td><td align=left><input type=text name=alt_log_dbname size=18 maxlength=50 value=\"$alt_log_dbname\">$NWB#settings-alt_log_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alt-Log DB Login: </td><td align=left><input type=text name=alt_log_login size=18 maxlength=50 value=\"$alt_log_login\">$NWB#settings-alt_log_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alt-Log DB Mot de passe:</td><td align=left><input type=text name=alt_log_pass size=18 maxlength=50 value=\"$alt_log_pass\">$NWB#settings-alt_log_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#B6D3FC><td align=right>Alt-Log tableaux: </td><td align=left><select MULTIPLE size=4 name=tables_use_alt_log_db[]>\n";
		$Vtables_ARY = explode(',',$Vtables);
		$Vtables_ct = count($Vtables_ARY);
		$b=0;
		while ($b < $Vtables_ct)
			{
			$field_selected='';
			trim($Vtables_ARY[$b]);
			if (preg_match("/$Vtables_ARY[$b]/",$tables_use_alt_log_db))
				{$field_selected = 'SELECTED';}
			echo "<option value=\"$Vtables_ARY[$b]\" $field_selected>$Vtables_ARY[$b]</option>\n";
			$b++;
			}
		echo "</select>$NWB#settings-tables_use_alt_log_db$NWE</td></tr>\n";

		echo "<tr bgcolor=#99FFCC><td align=right>Activer le log des QueueMetrics: </td><td align=left><select size=1 name=enable_queuemetrics_logging><option>1</option><option>0</option><option selected>$enable_queuemetrics_logging</option></select>$NWB#settings-enable_queuemetrics_logging$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>IP du serveur QueueMetrics: </td><td align=left><input type=text name=queuemetrics_server_ip size=18 maxlength=15 value=\"$queuemetrics_server_ip\">$NWB#settings-queuemetrics_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Nom de la base de données QueueMetrics: </td><td align=left><input type=text name=queuemetrics_dbname size=18 maxlength=50 value=\"$queuemetrics_dbname\">$NWB#settings-queuemetrics_dbname$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Login de la base de données QueueMetrics: </td><td align=left><input type=text name=queuemetrics_login size=18 maxlength=50 value=\"$queuemetrics_login\">$NWB#settings-queuemetrics_login$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Mot de passe de la base de données QueueMetrics: </td><td align=left><input type=text name=queuemetrics_pass size=18 maxlength=50 value=\"$queuemetrics_pass\">$NWB#settings-queuemetrics_pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>QueueMetrics URL: </td><td align=left><input type=text name=queuemetrics_url size=50 maxlength=255 value=\"$queuemetrics_url\">$NWB#settings-queuemetrics_url$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Identifiant des log de QueueMetrics: </td><td align=left><input type=text name=queuemetrics_log_id size=12 maxlength=10 value=\"$queuemetrics_log_id\">$NWB#settings-queuemetrics_log_id$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Préfixe EnterQueue QueueMetrics: </td><td align=left><select size=1 name=queuemetrics_eq_prepend>\n";
		echo "<option value=\"NONE\">NONE</option>\n";
		echo "<option value=\"lead_id\">lead_id</option>\n";
		echo "<option value=\"list_id\">list_id</option>\n";
		echo "<option value=\"source_id\">source_id</option>\n";
		echo "<option value=\"vendor_lead_code\">vendor_lead_code</option>\n";
		echo "<option value=\"address3\">address3</option>\n";
		echo "<option value=\"security_phrase\">security_phrase</option>\n";
		echo "<option selected value=\"$queuemetrics_eq_prepend\">$queuemetrics_eq_prepend</option>\n";
		echo "</select>$NWB#settings-queuemetrics_eq_prepend$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>QueueMetrics connecter-Out: </td><td align=left><select size=1 name=queuemetrics_loginout>\n";
		echo "<option value=\"STANDARD\">STANDARD</option>\n";
		echo "<option value=\"CALLBACK\">CALLBACK</option>\n";
		echo "<option value=\"NONE\">NONE</option>\n";
		echo "<option selected value=\"$queuemetrics_loginout\">$queuemetrics_loginout</option>\n";
		echo "</select>$NWB#settings-queuemetrics_loginout$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>QueueMetrics CallEtat: </td><td align=left><select size=1 name=queuemetrics_callstatus><option>1</option><option>0</option><option selected>$queuemetrics_callstatus</option></select>$NWB#settings-queuemetrics_callstatus$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>QueueMetrics addMember Enabled: </td><td align=left><select size=1 name=queuemetrics_addmember_enabled><option>1</option><option>0</option><option selected>$queuemetrics_addmember_enabled</option></select>$NWB#settings-queuemetrics_addmember_enabled$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Code de QueueMetrics Pause Dispo: </td><td align=left><input type=text name=queuemetrics_dispo_pause size=8 maxlength=6 value=\"$queuemetrics_dispo_pause\">$NWB#settings-queuemetrics_dispo_pause$NWE</td></tr>\n";
		echo "<tr bgcolor=#99FFCC><td align=right>Téléphone QueueMetrics Environnement Téléphone Append: </td><td align=left><select size=1 name=queuemetrics_pe_phone_append><option>1</option><option>0</option><option selected>$queuemetrics_pe_phone_append</option></select>$NWB#settings-queuemetrics_pe_phone_append$NWE</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Activer Vtiger Integration: </td><td align=left><select size=1 name=enable_vtiger_integration><option>1</option><option>0</option><option selected>$enable_vtiger_integration</option></select>$NWB#settings-enable_vtiger_integration$NWE\n";
		echo " &nbsp; <a href=\"./vtiger_user.php\" target=\"_blank\">Cliquez ici pour synchroniser les utilisateurs avec Vtiger</a>\n";
		echo "</td></tr>\n";

		echo "<tr bgcolor=#CCFFFF><td align=right>Vtiger DB IP du serveur: </td><td align=left><input type=text name=vtiger_server_ip size=18 maxlength=15 value=\"$vtiger_server_ip\">$NWB#settings-vtiger_server_ip$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Vtiger DB Name: </td><td align=left><input type=text name=vtiger_dbname size=18 maxlength=50 value=\"$vtiger_dbname\">$NWB#settings-vtiger_dbname$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Vtiger DB Login: </td><td align=left><input type=text name=vtiger_login size=18 maxlength=50 value=\"$vtiger_login\">$NWB#settings-vtiger_login$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Vtiger DB Mot de passe:</td><td align=left><input type=text name=vtiger_pass size=18 maxlength=50 value=\"$vtiger_pass\">$NWB#settings-vtiger_pass$NWE</td></tr>\n";
		echo "<tr bgcolor=#CCFFFF><td align=right>Vtiger Web: </td><td align=left><input type=text name=vtiger_url size=50 maxlength=255 value=\"$vtiger_url\">$NWB#settings-vtiger_url$NWE</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=submit VALUE=VALIDER></td></tr>\n";
		echo "</TABLE></center>\n";
		echo "</form>\n";
		if ($LOGuser_level >= 9)
			{
			echo "<br><br><a href=\"$PHP_SELF?ADD=720000000000000&category=SYSTEMSETTINGS&stage=system_settings\">Cliquez ici pour voir les changements d'administration to the system settings</FONT>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}






######################
# ADD=321111111111111 modify vicidial system statuses
######################

if ($ADD==321111111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_statuses==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=321111111111111";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br><center>\n";
		echo "<b>STATUTS DE VICIDIAL DANS CE SYSTÈME :&nbsp; $NWB#vicidial_statuses$NWE</b><br>\n";
		echo "<TABLE width=700 cellspacing=3>\n";
		echo "<tr><td align=center valign=bottom><font size=2><b>S<br>T<br>A<br>T<br>U<br>S</td>\n";
		echo "<td align=center valign=bottom><font size=2><b>DESCRIPTION</td>\n";
		echo "<td align=center valign=bottom><font size=2><b>CATÉGORIE</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b><br>A<br>G<br>E<br>N<br>T<br>&nbsp;<BR>S<br>E<br>L<br>E<br>C<br>T<br>A<br>B<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>H<br>U<br>M<br>A<br>N<br>&nbsp;<BR>A<br>N<br>S<br>W<br>E<br>R</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>S<br>A<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>D<br>N<br>C</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>C<br>U<br>S<br>T<br>O<br>M<br>E<br>R<br>&nbsp;<br>C<br>O<br>N<br>T<br>A<br>C<br>T</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>N<br>O<br>T<br>&nbsp;<br>I<br>N<br>T<br>E<br>R<br>E<br>S<br>T<br>E<br>D</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>U<br>N<br>W<br>O<br>R<br>K<br>A<br>B<br>L<br>E</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#99ffcc\"><font size=2><b>S<br>C<br>H<br>E<br>D<br>U<br>L<br>E<br>D<br>&nbsp;<br>C<br>A<br>L<br>L<br>B<br>A<br>C<br>K</td>\n";
		echo "<td align=center valign=bottom bgcolor=\"#ccffff\"><font size=2><b>C<br>O<br>M<br>P<br>L<br>E<br>T<br>E<br>D<br></td>\n";
		echo "<td align=center valign=bottom><font size=2><b>MODIFY/DELETE</td></tr>\n";

		##### get status category listings for dynamic pulldown
		$stmt="SELECT vsc_id,vsc_name from vicidial_status_categories order by vsc_id desc";
		$rslt=mysql_query($stmt, $link);
		$cats_to_print = mysql_num_rows($rslt);
		$cats_list="";

		$o=0;
		while ($cats_to_print > $o)
			{
			$rowx=mysql_fetch_row($rslt);
			$cats_list .= "<option value=\"$rowx[0]\">$rowx[0] - " . substr($rowx[1],0,20) . "</option>\n";
			$catsname_list["$rowx[0]"] = substr($rowx[1],0,20);
			$o++;
			}

		$stmt="SELECT status,status_name,selectable,human_answered,category,sale,dnc,customer_contact,not_interested,unworkable,scheduled_callback,completed from vicidial_statuses order by status;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$AScategory = $rowx[4];
			$o++;

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			echo "<tr $bgcolor><td><form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=421111111111111>\n";
			echo "<input type=hidden name=stage value=modify>\n";
			echo "<input type=hidden name=status value=\"$rowx[0]\">\n";
			echo "<font size=2><B>$rowx[0]</B></td>\n";
			echo "<td><input type=text name=status_name size=20 maxlength=30 value=\"$rowx[1]\"></td>\n";
			echo "<td>\n";
			echo "<select size=1 name=category>\n";
			echo "$cats_list";
			echo "<option selected value=\"$AScategory\">$AScategory - $catsname_list[$AScategory]</option>\n";
			echo "</select>\n";
			echo "\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=selectable><option>Y</option><option>N</option><option selected>$rowx[2]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=human_answered><option>Y</option><option>N</option><option selected>$rowx[3]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=sale><option>Y</option><option>N</option><option selected>$rowx[5]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=dnc><option>Y</option><option>N</option><option selected>$rowx[6]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=customer_contact><option>Y</option><option>N</option><option selected>$rowx[7]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=not_interested><option>Y</option><option>N</option><option selected>$rowx[8]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=unworkable><option>Y</option><option>N</option><option selected>$rowx[9]</option></select>\n";
			echo "</td><td bgcolor=\"#99ffcc\"><select size=1 name=scheduled_callbacks><option>Y</option><option>N</option><option selected>$rowx[10]</option></select>\n";
			echo "</td><td bgcolor=\"#ccffff\"><select size=1 name=completed><option>Y</option><option>N</option><option selected>$rowx[11]</option></select>\n";
			echo "</td><td align=center nowrap><font size=1><input type=submit name=submit value=MODIFY> &nbsp; &nbsp; &nbsp; &nbsp; \n";
			echo " &nbsp; \n";
			
			if (preg_match("/^B$|^NA$|^DNC$|^NA$|^DROP$|^INCALL$|^QUEUE$|^NEW$/i",$rowx[0]))
				{
				echo "<DEL>SUPPRIMER</DEL>\n";
				}
			else
				{
				echo "<a href=\"$PHP_SELF?ADD=421111111111111&status=$rowx[0]&stage=delete\">SUPPRIMER</a>\n";
				}
			echo "</form></td></tr>\n";
			}

		echo "</table>\n";

		echo "<br>AJOUTEZ LE NOUVEAU STATUT DE SYSTÈME<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=221111111111111>\n";
		echo "Etat: <input type=text name=status_id size=7 maxlength=6> &nbsp; \n";
		echo "Description: <input type=text name=status_name size=30 maxlength=30> &nbsp; \n";
		echo "Selectionnable: <select size=1 name=selectable><option>Y</option><option>N</option></select> &nbsp; \n";
		echo "Réponse de l'homme: <select size=1 name=human_answered><option>Y</option><option>N</option></select> <BR>\n";
		echo "Sale: <select size=1 name=sale><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "DNC: <select size=1 name=dnc><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Customer Contact: <select size=1 name=customer_contact><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Not Interested: <select size=1 name=not_interested><option>Y</option><option SELECTED>N</option></select> &nbsp;  <BR>\n";
		echo "Unworkable: <select size=1 name=unworkable><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Callback: <select size=1 name=scheduled_callbacks><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Completed: <select size=1 name=completed><option>Y</option><option SELECTED>N</option></select> &nbsp; \n";
		echo "Catégorie :\n";
		echo "<select size=1 name=category>\n";
		echo "$cats_list";
		echo "<option selected value=\"$AScategory\">$AScategory - $catsname_list[$AScategory]</option>\n";
		echo "</select> &nbsp; <BR>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";

		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}





######################
# ADD=331111111111111 modify vicidial status categories
######################

if ($ADD==331111111111111)
	{
	if ( ($LOGmodify_servers==1) or ($LOGmodify_statuses==1) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=331111111111111";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br><center>\n";
		echo "<b>VICIDIAL ÉTAT CATEGORIES: &nbsp; $NWB#vicidial_status_categories$NWE</b><br>\n";
		echo "<TABLE width=700 cellspacing=3>\n";
		echo "<tr><td>CATÉGORIE</td><td>NOM</td><td>STATUTS DE CETTE CATEGORIE</td></tr>\n";

		$stmt="SELECT vsc_id,vsc_name,vsc_description,tovdad_display,sale_category,dead_lead_category from vicidial_status_categories order by vsc_id;";
		$rslt=mysql_query($stmt, $link);
		$statuses_to_print = mysql_num_rows($rslt);
		$o=0;
		while ($statuses_to_print > $o) 
			{
			$rowx=mysql_fetch_row($rslt);
			$Avsc_id[$o] =				$rowx[0];
			$Avsc_name[$o] =			$rowx[1];
			$Avsc_description[$o] =		$rowx[2];
			$Atovdad_display[$o] =		$rowx[3];
			$Asale_category[$o] =		$rowx[4];
			$Adead_lead_category[$o] =	$rowx[5];
			$o++;
			}
		$p=0;
		while ($o > $p)
			{
			if (eregi("1$|3$|5$|7$|9$", $p))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}

			$CATstatuses='';
			$stmt="SELECT status from vicidial_statuses where category='$Avsc_id[$p]' order by status;";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$q=0;
			while ($statuses_to_print > $q) 
				{
				$rowx=mysql_fetch_row($rslt);
				$CATstatuses.=" $rowx[0]";
				$q++;
				}
			$stmt="SELECT status from vicidial_campaign_statuses where category='$Avsc_id[$p]' $LOGadmin_viewable_groupsSQL order by status;";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$q=0;
			while ($statuses_to_print > $q) 
				{
				$rowx=mysql_fetch_row($rslt);
				$CATstatuses.=" $rowx[0]";
				$q++;
				}

			echo "<tr $bgcolor><td><form action=$PHP_SELF method=POST>\n";
			echo "<input type=hidden name=ADD value=431111111111111>\n";
			echo "<input type=hidden name=stage value=modify>\n";
			echo "<input type=hidden name=vsc_id value=\"$Avsc_id[$p]\">\n";
			echo "<font size=2><B>$Avsc_id[$p]</B></td>\n";
			echo "<td><input type=text name=vsc_name size=30 maxlength=50 value=\"$Avsc_name[$p]\"></td>\n";
			echo "<td><font size=1>\n";
			echo "$CATstatuses";
			echo "</td></tr>\n";
			echo "<tr $bgcolor>\n";
			echo "<td colspan=3>TO VDAD Afficher: <select size=1 name=tovdad_display><option>Y</option><option>N</option><option selected>$Atovdad_display[$p]</option></select> &nbsp; &nbsp; Vente Catégorie:<select size=1 name=sale_category><option>Y</option><option>N</option><option selected>$Asale_category[$p]</option></select> &nbsp; &nbsp; Dead Lead Catégorie:<select size=1 name=dead_lead_category><option>Y</option><option>N</option><option selected>$Adead_lead_category[$p]</option></select> &nbsp; </td></tr>\n";
			echo "<tr $bgcolor><td colspan=3><font size=1>Description: <input type=text name=vsc_description size=90 maxlength=255 value=\"$Avsc_description[$p]\"></td></tr>\n";
			echo "<tr $bgcolor><td colspan=3 align=center><font size=1><input type=submit name=submit value=MODIFY> &nbsp; &nbsp; &nbsp; &nbsp; \n";
			echo " &nbsp; <a href=\"$PHP_SELF?ADD=431111111111111&vsc_id=$Avsc_id[$p]&stage=delete\">SUPPRIMER</a></td></tr>\n";
			echo "<tr><td colspan=4><font size=1> &nbsp; </form></td></tr>\n";

			$p++;
			}
	
		echo "</table>\n";

		echo "<br>AJOUTEZ LA NOUVELLE CATÉGORIE DE STATUT<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=231111111111111>\n";
		echo "Category ID: <input type=text name=vsc_id size=20 maxlength=20> &nbsp; \n";
		echo "Name: <input type=text name=vsc_name size=20 maxlength=50> &nbsp; <BR>\n";
		echo "TimeOnVDAD Afficher: <select size=1 name=tovdad_display><option>Y</option><option selected>N</option></select> &nbsp; \n";
		echo "Vente Catégorie:<select size=1 name=sale_category><option>Y</option><option selected>N</option></select> &nbsp; \n";
		echo "Dead Lead Catégorie:<select size=1 name=dead_lead_category><option>Y</option><option selected>N</option></select> &nbsp; <BR>\n";
		echo "Description: <input type=text name=vsc_description size=80 maxlength=255> &nbsp; \n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";

		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}





######################
# ADD=341111111111111 modify vicidial QC status code
######################

if ($ADD==341111111111111)
	{
	if ( ($LOGmodify_servers==1) and ($SSqc_features_active > 0) )
		{
		if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_rafraîchir_set < 1) )
			{
			$modify_url = "$PHP_SELF?ADD=341111111111111";
			$modify_footer_rafraîchir=1;
			}
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br><center>\n";
		echo "<b>VICIDIAL QC ÉTAT DANS CE SYSTEME DE CODES:&nbsp; $NWB#vicidial_qc_status_codes$NWE</b><br>\n";
		echo "<TABLE width=600 cellspacing=3>\n";
		echo "<tr><td>STATUS CODE</td><td>DESCRIPTION</td><td>MODIFY/DELETE</td></tr>\n";

		##### go through each QC status code
		$stmt="SELECT count(*) from vicidial_qc_codes;";
		$rslt=mysql_query($stmt, $link);
		$rowx=mysql_fetch_row($rslt);
		if ($rowx[0] > 0)
			{
			$stmt="SELECT code,code_name from vicidial_qc_codes order by code;";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$o=0;
			while ($statuses_to_print > $o) 
				{
				$rowx=mysql_fetch_row($rslt);
				$o++;

				if (eregi("1$|3$|5$|7$|9$", $o))
					{$bgcolor='bgcolor="#B9CBFD"';} 
				else
					{$bgcolor='bgcolor="#9BB9FB"';}

				echo "<tr $bgcolor><td><form action=$PHP_SELF method=POST>\n";
				echo "<input type=hidden name=ADD value=441111111111111>\n";
				echo "<input type=hidden name=stage value=modify>\n";
				echo "<input type=hidden name=code value=\"$rowx[0]\">\n";
				echo "<font size=2><B>$rowx[0]</B></td>\n";
				echo "<td><input type=text name=code_name size=20 maxlength=30 value=\"$rowx[1]\"></td>\n";
				echo "<td align=center nowrap><font size=1><input type=submit name=submit value=MODIFY> &nbsp; &nbsp; &nbsp; &nbsp; \n";
				echo " &nbsp; \n";
				
				if (preg_match("/^B$|^NA$|^DNC$|^NA$|^DROP$|^INCALL$|^QUEUE$|^NEW$/i",$rowx[0]))
					{
					echo "<DEL>SUPPRIMER</DEL>\n";
					}
				else
					{
					echo "<a href=\"$PHP_SELF?ADD=441111111111111&status=$rowx[0]&stage=delete\">SUPPRIMER</a>\n";
					}
				echo "</form></td></tr>\n";
				}
			}
		echo "</table>\n";

		echo "<br>ADD NEW QC Code de statut<BR><form action=$PHP_SELF method=POST>\n";
		echo "<input type=hidden name=ADD value=241111111111111>\n";
		echo "Etat: <input type=text name=code size=9 maxlength=8> &nbsp; \n";
		echo "Description: <input type=text name=code_name size=30 maxlength=30><BR>\n";
		echo "<input type=submit name=submit value=AJOUTER><BR>\n";

		echo "</FORM><br>\n";

		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}






######################
# ADD=550 user search form
######################

if ($ADD==550)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br>RECHERCHER UN UTILISATEUR<form action=$PHP_SELF method=POST>\n";
	echo "<input type=hidden name=ADD value=660>\n";
	echo "<center><TABLE width=$section_width cellspacing=3>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Numéro d'utilisateur : </td><td align=left><input type=text name=user size=20 maxlength=20></td></tr>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Nom complet: </td><td align=left><input type=text name=full_name size=30 maxlength=30></td></tr>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Niveau de l'utilisateur: </td><td align=left><select size=1 name=user_level><option selected>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option></select></td></tr>\n";
	echo "<tr bgcolor=#B6D3FC><td align=right>Groupe utilisateur: </td><td align=left><select size=1 name=user_group>\n";

	$stmt="SELECT user_group,group_name from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group";
	$rslt=mysql_query($stmt, $link);
	$groups_to_print = mysql_num_rows($rslt);
	$o=0;
	$groups_list='';
	while ($groups_to_print > $o) 
		{
		$rowx=mysql_fetch_row($rslt);
		$groups_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
		$o++;
		}
	echo "$groups_list</select></td></tr>\n";

	echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=search value=search></td></tr>\n";
	echo "</TABLE></center>\n";
	}

######################
# ADD=660 user search results
######################

if ($ADD==660)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$SQL = '';
	if ($user) {$SQL .= " user LIKE \"%$user%\" and";}
	if ($full_name) {$SQL .= " full_name LIKE \"%$full_name%\" and";}
	if ($user_level > 0) {$SQL .= " user_level LIKE \"%$user_level%\" and";}
	if ($user_group) {$SQL .= " user_group = '$user_group' and";}
	$SQL = eregi_replace(" and$", "", $SQL);
	if (strlen($SQL)>5) {$SQL = "and $SQL";}

	$stmt="SELECT user_id,user,pass,full_name,user_level,user_group,phone_login,phone_pass,delete_users,delete_user_groups,delete_lists,delete_campaigns,delete_ingroups,delete_remote_agents,load_leads,campaign_detail,ast_admin_access,ast_delete_phones,delete_scripts,modify_leads,hotkeys_active,change_agent_campaign,agent_choose_ingroups,closer_campaigns,scheduled_callbacks,agentonly_callbacks,agentcall_manual,vicidial_recording,vicidial_transfers,delete_filters,alter_agent_interface_options,closer_default_blended,delete_call_times,modify_call_times,modify_users,modify_campaigns,modify_lists,modify_scripts,modify_filters,modify_ingroups,modify_usergroups,modify_remoteagents,modify_servers,view_reports,vicidial_recording_override,alter_custdata_override,qc_enabled,qc_user_level,qc_pass,qc_finish,qc_commit,add_timeclock_log,modify_timeclock_log,delete_timeclock_log,alter_custphone_override,vdc_agent_api_access,modify_inbound_dids,delete_inbound_dids,active,alert_enabled,download_lists,agent_shift_enforcement_override,manager_shift_enforcement_override,shift_override_flag,export_reports,delete_from_dnc,email,user_code,territory,allow_alerts from vicidial_users where user_level <= $LOGuser_level $LOGadmin_viewable_groupsSQL $SQL order by full_name desc;";
#	echo "\n|$stmt|\n";
	$rslt=mysql_query($stmt, $link);
	$people_to_print = mysql_num_rows($rslt);

	echo "<br>RESULTATS DE LA RECHERCHE:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";

	$o=0;
	while ($people_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1>$row[1]</td><td><font size=1>$row[3]</td><td><font size=1>$row[4]</td><td><font size=1>$row[5]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3&user=$row[1]\">MODIFIER</a> | <a href=\"./user_stats.php?user=$row[1]\">STATISTIQUES</a> | <a href=\"./user_status.php?user=$row[1]\">ETAT</a> | <a href=\"./AST_agent_time_sheet.php?agent=$row[1]\">TIME</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";

	}


######################################################################################################
######################################################################################################
#######   8 series, Callback lists
######################################################################################################
######################################################################################################

######################
# ADD=8 find all callbacks on hold by a User
######################
if ($ADD==8)
	{
	if ($LOGmodify_users==1)
		{
		if ($SUB==89)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where user='$user' and status IN('LIVE','ACTIVE') and callback_time < '$past_month_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>Utilisateur($user) callback listings LIVE for more than one month have been made INACTIVE\n";
			}
		if ($SUB==899)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where user='$user' and status IN('LIVE','ACTIVE') and callback_time < '$past_week_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>Utilisateur($user) callback listings LIVE for more than one week have been made INACTIVE\n";
			}
		}
	$CBinactiveLINK = "<BR><a href=\"$PHP_SELF?ADD=8&SUB=89&user=$user\">Remove LIVE Callbacks older than one month for this user</a><BR><a href=\"$PHP_SELF?ADD=8&SUB=899&user=$user\">Remove LIVE Callbacks older than one week for this user</a><BR>";

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$CBquerySQLwhere = "and user='$user'";

	echo "<br>USER CALLBACK HOLD LISTINGS: $user\n";
	$oldADD = "ADD=8&user=$user";
	$ADD='82';
	}

######################
# ADD=81 find all callbacks on hold within a Campaign
######################
if ($ADD==81)
	{
	if ($LOGmodify_campaigns==1)
		{
		if ($SUB==89)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where campaign_id='$campaign_id' and status IN('LIVE','ACTIVE') and callback_time < '$past_month_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>campaign($campaign_id) callback listings LIVE for more than one month have been made INACTIVE\n";
			}
		if ($SUB==899)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where campaign_id='$campaign_id' and status IN('LIVE','ACTIVE') and callback_time < '$past_week_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>campaign($campaign_id) callback listings LIVE for more than one week have been made INACTIVE\n";
			}
		}
	$CBinactiveLINK = "<BR><a href=\"$PHP_SELF?ADD=81&SUB=89&campaign_id=$campaign_id\">Remove LIVE Callbacks older than one month for this campaign</a><BR><a href=\"$PHP_SELF?ADD=81&SUB=899&campaign_id=$campaign_id\">Remove LIVE Callbacks older than one week for this campaign</a><BR>";

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$CBquerySQLwhere = "and campaign_id='$campaign_id'";

	echo "<br>CAMPAIGN CALLBACK HOLD LISTINGS: $campaign_id\n";
	$oldADD = "ADD=81&campaign_id=$campaign_id";
	$ADD='82';
	}

######################
# ADD=811 find all callbacks on hold within a List
######################
if ($ADD==811)
	{
	if ($LOGmodify_lists==1)
		{
		if ($SUB==89)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where list_id='$list_id' and status IN('LIVE','ACTIVE') and callback_time < '$past_month_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>list($list_id) callback listings LIVE for more than one month have been made INACTIVE\n";
			}
		if ($SUB==899)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where list_id='$list_id' and status IN('LIVE','ACTIVE') and callback_time < '$past_week_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>list($list_id) callback listings LIVE for more than one week have been made INACTIVE\n";
			}
		}
	$CBinactiveLINK = "<BR><a href=\"$PHP_SELF?ADD=811&SUB=89&list_id=$list_id\">Remove LIVE Callbacks older than one month for this list</a><BR><a href=\"$PHP_SELF?ADD=811&SUB=899&list_id=$list_id\">Remove LIVE Callbacks older than one week for this list</a><BR>";

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$CBquerySQLwhere = "and list_id='$list_id'";

	echo "<br>LIST CALLBACK HOLD LISTINGS: $list_id\n";
	$oldADD = "ADD=811&list_id=$list_id";
	$ADD='82';
	}

######################
# ADD=8111 find all callbacks on hold within a user group
######################
if ($ADD==8111)
	{
	if ($LOGmodify_usergroups==1)
		{
		if ($SUB==89)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where user_group='$user_group' and status IN('LIVE','ACTIVE') and callback_time < '$past_month_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>user group($user_group) callback listings LIVE for more than one month have been made INACTIVE\n";
			}
		if ($SUB==899)
			{
			$stmt="UPDATE vicidial_callbacks SET status='INACTIVE' where user_group='$user_group' and status IN('LIVE','ACTIVE') and callback_time < '$past_week_date';";
			$rslt=mysql_query($stmt, $link);
			echo "<br>user group($user_group) callback listings LIVE for more than one week have been made INACTIVE\n";
			}
		}
	$CBinactiveLINK = "<BR><a href=\"$PHP_SELF?ADD=8111&SUB=89&user_group=$user_group\">Remove LIVE Callbacks older than one month for this user group</a><BR><a href=\"$PHP_SELF?ADD=8111&SUB=899&user_group=$user_group\">Remove LIVE Callbacks older than one week for this user group</a><BR>";

	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$CBquerySQLwhere = "and user_group='$user_group'";

	echo "<br>GROUPE D'UTILISATEURS CALLBACK HOLD LISTINGS: $list_id\n";
	$oldADD = "ADD=8111&user_group=$user_group";
	$ADD='82';
	}

######################
# ADD=82 display all callbacks on hold
######################
if ($ADD==82)
	{
	$USERlink='stage=USERIDDOWN';
	$GROUPlink='stage=GROUPDOWN';
	$ENDATElink='stage=ENDATEDOWN';
	$SQLorder='order by ';
	if (eregi("USERIDDOWN",$stage)) {$SQLorder='order by user desc,';   $USERlink='stage=USERIDUP';}
	if (eregi("GROUPDOWN",$stage)) {$SQLorder='order by user_group desc,';   $NAMElink='stage=NAMEUP';}
	if (eregi("ENDATEDOWN",$stage)) {$SQLorder='order by entry_time desc,';   $NIVEAUlink='stage=NIVEAUUP';}

	$stmt="SELECT callback_id,lead_id,list_id,campaign_id,status,entry_time,callback_time,modify_date,user,recipient,comments,user_group from vicidial_callbacks where status IN('ACTIVE','LIVE') $CBquerySQLwhere $SQLorder recipient,status desc,callback_time;";
	$rslt=mysql_query($stmt, $link);
	$cb_to_print = mysql_num_rows($rslt);

	echo "<TABLE><TR><TD>\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>\n";
	echo "<td><font size=1 color=white>LEAD</td><td><font size=1 color=white>LIST</td>\n";
	echo "<td><font size=1 color=white> CAMPAGNE</td>\n";
	echo "<td><a href=\"$PHP_SELF?$oldADD&$ENDATElink\"><font size=1 color=white><B>ENTRY DATE</B></a></td>\n";
	echo "<td><font size=1 color=white>CALLBACK DATE</td>\n";
	echo "<td><a href=\"$PHP_SELF?$oldADD&$USERlink\"><font size=1 color=white><B>USER</B></a></td>\n";
	echo "<td><font size=1 color=white>RECIPIENT</td>\n";
	echo "<td><font size=1 color=white>ETAT</td>\n";
	echo "<td><a href=\"$PHP_SELF?$oldADD&$GROUPlink\"><font size=1 color=white><B>GROUP</B></a></td></tr>\n";

	$o=0;
	while ($cb_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor>";
		echo "<td><font size=1><A HREF=\"admin_modify_lead.php?lead_id=$row[1]\" target=\"_blank\">$row[1]</A></td>";
		echo "<td><font size=1><A HREF=\"$PHP_SELF?ADD=311&list_id=$row[2]\">$row[2]</A></td>";
		echo "<td><font size=1><A HREF=\"$PHP_SELF?ADD=31&campaign_id=$row[3]\">$row[3]</A></td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td><font size=1>$row[6]</td>";
		echo "<td><font size=1><A HREF=\"$PHP_SELF?ADD=3&user=$row[8]\">$row[8]</A></td>";
		echo "<td><font size=1>$row[9]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1><A HREF=\"$PHP_SELF?ADD=311111&user_group=$row[11]\">$row[11]</A></td>";
		echo "</tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";

	echo "$CBinactiveLINK";
	}



######################################################################################################
######################################################################################################
#######   0 series, displays and searches
######################################################################################################
######################################################################################################

######################
# ADD=0 display all active users
######################
if ($ADD==0)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";
	echo "<br>LISTE DES UTILISATEURS: ";
	if (ereg('display_all',$status)) 
		{
		$SQLstatus = '';
		echo " &nbsp; <a href=\"$PHP_SELF?ADD=0\"><font size=1 color=black>Afficher uniquement les utilisateurs actifs</a>\n";
		}
	else
		{
		$SQLstatus = "and active='Y'";
		echo " &nbsp; <a href=\"$PHP_SELF?ADD=0&status=display_all\"><font size=1 color=black>Afficher tous les utilisateurs</a>\n";
		}

	$USERlink='stage=USERIDDOWN';
	$NAMElink='stage=NAMEDOWN';
	$NIVEAUlink='stage=NIVEAUDOWN';
	$GROUPlink='stage=GROUPDOWN';
	$SQLorder='order by full_name';
	if (eregi("USERIDUP",$stage)) {$SQLorder='order by user asc';   $USERlink='stage=USERIDDOWN';}
	if (eregi("USERIDDOWN",$stage)) {$SQLorder='order by user desc';   $USERlink='stage=USERIDUP';}
	if (eregi("NAMEUP",$stage)) {$SQLorder='order by full_name asc';   $NAMElink='stage=NAMEDOWN';}
	if (eregi("NAMEDOWN",$stage)) {$SQLorder='order by full_name desc';   $NAMElink='stage=NAMEUP';}
	if (eregi("NIVEAUUP",$stage)) {$SQLorder='order by user_level asc';   $NIVEAUlink='stage=NIVEAUDOWN';}
	if (eregi("NIVEAUDOWN",$stage)) {$SQLorder='order by user_level desc';   $NIVEAUlink='stage=NIVEAUUP';}
	if (eregi("GROUPUP",$stage)) {$SQLorder='order by user_group asc';   $GROUPlink='stage=GROUPDOWN';}
	if (eregi("GROUPDOWN",$stage)) {$SQLorder='order by user_group desc';   $GROUPlink='stage=GROUPUP';}
	$stmt="SELECT user,full_name,user_level,user_group,active from vicidial_users  where user_level <= $LOGuser_level $LOGadmin_viewable_groupsSQL $SQLstatus $SQLorder";
	$rslt=mysql_query($stmt, $link);
	$people_to_print = mysql_num_rows($rslt);

	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><a href=\"$PHP_SELF?ADD=0&status=$status&$USERlink\"><font size=1 color=white><B>USER ID</B></a></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=0&status=$status&$NAMElink\"><font size=1 color=white><B>FULL NAME</B></a></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=0&status=$status&$NIVEAUlink\"><font size=1 color=white><B>NIVEAU</B></a></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=0&status=$status&$GROUPlink\"><font size=1 color=white><B>GROUP</B></a></td>";
	echo "<td><font size=1 color=white><B>ACTIF</B></td>";
	echo "<td align=center><font size=1 color=white><B>LIENS</B></td></tr>\n";

	$o=0;
	while ($people_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><a href=\"$PHP_SELF?ADD=3&user=$row[0]\"><font size=1 color=black>$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1><CENTER><a href=\"$PHP_SELF?ADD=3&user=$row[0]\">MODIFIER</a> | <a href=\"./user_stats.php?user=$row[0]\">STATISTIQUES</a> | <a href=\"./user_status.php?user=$row[0]\">ETAT</a> | <a href=\"./AST_agent_time_sheet.php?agent=$row[0]\">TIME</a></CENTER></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=10 display all campaigns
######################
if ($ADD==10)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$camp_group_SQL = $LOGadmin_viewable_groupsSQL;
	if (strlen($whereLOGallowed_campaignsSQL) < 6)
		{$camp_group_SQL = $whereLOGadmin_viewable_groupsSQL;}
	$stmt="SELECT campaign_id,campaign_name,active,dial_method,auto_dial_level,lead_order,dial_statuses,user_group from vicidial_campaigns $whereLOGallowed_campaignsSQL $camp_group_SQL order by campaign_id;";
	$rslt=mysql_query($stmt, $link);
	$campaigns_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES CAMPAGNES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>CAMPAIGN ID</B></td>";
	echo "<td><font size=1 color=white><CENTER><B>NOM</B></CENTER></td>";
	echo "<td><font size=1 color=white><B>ACTIVE &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>GROUP &nbsp; </B></td>";
	if ($SSoutbound_autodial_active > 0)
		{
		echo "<td><font size=1 color=white><B>DIAL PROCEDE &nbsp; </B></td>";
		echo "<td><font size=1 color=white><B> NIVEAU &nbsp; </B></td>";
		echo "<td><font size=1 color=white><B>RESPONSABLE DE COMMANDE &nbsp; </B></td>";
		echo "<td><font size=1 color=white><B>DIAL STATUTS &nbsp; </B></td>";
		}
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($campaigns_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=34&campaign_id=$row[0]\">$row[0]</a> &nbsp; </td>";
		echo "<td><font size=1>$row[1] &nbsp; </td>";
		echo "<td><font size=1>$row[2] &nbsp; </td>";
		echo "<td><font size=1>$row[7] &nbsp; </td>";
		if ($SSoutbound_autodial_active > 0)
			{
			echo "<td><font size=1>$row[3] &nbsp; </td>";
			echo "<td><font size=1>$row[4] &nbsp; </td>";
			echo "<td><font size=1>$row[5] &nbsp; </td>";
			echo "<td><font size=1>$row[6]</td>";
			}
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=100 display all lists
######################
if ($ADD==100)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$LISTlink='stage=LISTIDDOWN';
	$NAMElink='stage=LISTNAMEDOWN';
	$TALLYlink='stage=TALLYDOWN';
	$ACTIVElink='stage=ACTIVEDOWN';
	$CAMPAIGNlink='stage=CAMPAIGNDOWN';
	$CALLDATElink='stage=CALLDATEDOWN';
	$SQLorder='order by list_id';
	if (eregi("LISTIDUP",$stage))		{$SQLorder='order by list_id asc';				$LISTlink='stage=LISTIDDOWN';}
	if (eregi("LISTIDDOWN",$stage))		{$SQLorder='order by list_id desc';				$LISTlink='stage=LISTIDUP';}
	if (eregi("LISTNAMEUP",$stage))		{$SQLorder='order by list_name asc';			$NAMElink='stage=LISTNAMEDOWN';}
	if (eregi("LISTNAMEDOWN",$stage))	{$SQLorder='order by list_name desc';			$NAMElink='stage=LISTNAMEUP';}
	if (eregi("TALLYUP",$stage))		{$SQLorder='order by tally asc';				$TALLYlink='stage=TALLYDOWN';}
	if (eregi("TALLYDOWN",$stage))		{$SQLorder='order by tally desc';				$TALLYlink='stage=TALLYUP';}
	if (eregi("ACTIVEUP",$stage))		{$SQLorder='order by active asc';				$ACTIVElink='stage=ACTIVEDOWN';}
	if (eregi("ACTIVEDOWN",$stage))		{$SQLorder='order by active desc';				$ACTIVElink='stage=ACTIVEUP';}
	if (eregi("CAMPAIGNUP",$stage))		{$SQLorder='order by campaign_id asc';			$CAMPAIGNlink='stage=CAMPAIGNDOWN';}
	if (eregi("CAMPAIGNDOWN",$stage))	{$SQLorder='order by campaign_id desc';			$CAMPAIGNlink='stage=CAMPAIGNUP';}
	if (eregi("CALLDATEUP",$stage))		{$SQLorder='order by list_lastcalldate asc';	$CALLDATElink='stage=CALLDATEDOWN';}
	if (eregi("CALLDATEDOWN",$stage))	{$SQLorder='order by list_lastcalldate desc';	$CALLDATElink='stage=CALLDATEUP';}
	$stmt="SELECT vls.list_id,list_name,list_description,count(*) as tally,active,list_lastcalldate,campaign_id,reset_time from vicidial_lists vls,vicidial_list vl where vls.list_id=vl.list_id $LOGallowed_campaignsSQL group by list_id $SQLorder";
	$rslt=mysql_query($stmt, $link);
	$lists_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES LISTES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$LISTlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID DE LA LISTE</B></a></TD>";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$NAMElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>NOM DE LA LISTE</B></a></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</B></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>RTIME</B></TD>\n";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$TALLYlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ABOUTIT COUNT</B></a></TD>\n";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$ACTIVElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ACTIF</B></a></TD>";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$CALLDATElink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>LAST CALL DATE</B></a></TD>";
	echo "<TD><a href=\"$PHP_SELF?ADD=100&$CAMPAIGNlink\"><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>CAMPAIGN</B></a></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>MODIFIER</TD>\n";
	echo "</TR>\n";

	$lists_printed = '';
	$o=0;
	while ($lists_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$lists_printed .= "'$row[0]',";
		$o++;
		}

	$stmt="SELECT list_id,list_name,list_description,0,active,list_lastcalldate,campaign_id,reset_time from vicidial_lists where list_id NOT IN($lists_printed'') $LOGallowed_campaignsSQL;";
	$rslt=mysql_query($stmt, $link);
	$lists_to_print = mysql_num_rows($rslt);
	$o=0;
	while ($lists_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=311&list_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1000 display all inbound groups
######################
if ($ADD==1000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT group_id,group_name,queue_priority,active,call_time_id,group_color,user_group from vicidial_inbound_groups $whereLOGadmin_viewable_groupsSQL order by group_id;";
	$rslt=mysql_query($stmt, $link);
	$ingroups_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES GROUPES ENTRANTS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><font size=1 color=white>IN-GROUP</TD>";
	echo "<TD><font size=1 color=white>NOM</TD>";
	echo "<TD><font size=1 color=white>PRIORITÉ</TD>\n";
	echo "<TD><font size=1 color=white>ACTIF</TD>";
	echo "<TD><font size=1 color=white>GROUPE ADMIN</TD>";
	echo "<TD><font size=1 color=white>TIME</TD>";
	echo "<TD><font size=1 color=white>COLOR</TD>\n";
	echo "<TD><font size=1 color=white>MODIFIER</TD>\n";
	echo "</TR>\n";

	$o=0;
	while ($ingroups_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3111&group_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td bgcolor=\"$row[5]\"><font size=1> &nbsp;</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3111&group_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1300 display all inbound dids
######################
if ($ADD==1300)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT did_id,did_pattern,did_description,did_active,did_route,record_call,user_group from vicidial_inbound_dids $whereLOGadmin_viewable_groupsSQL order by did_pattern;";
	$rslt=mysql_query($stmt, $link);
	$dids_to_print = mysql_num_rows($rslt);

	echo "<br>INBOUND DID LISTINGS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><font size=1 color=white>#</TD>";
	echo "<TD><font size=1 color=white>DID</TD>";
	echo "<TD><font size=1 color=white>DESCRIPTION</TD>\n";
	echo "<TD><font size=1 color=white>ACTIF</TD>";
	echo "<TD><font size=1 color=white>GROUPE ADMIN</TD>";
	echo "<TD><font size=1 color=white>ROUTE</TD>";
	echo "<TD><font size=1 color=white>REC</TD>";
	echo "<TD><font size=1 color=white>MODIFIER</TD>\n";
	echo "</TR>\n";

	$o=0;
	while ($dids_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3311&did_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3311&did_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1500 display all call menus
######################
if ($ADD==1500)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT menu_id,menu_name,menu_prompt,menu_timeout,user_group from vicidial_call_menu $whereLOGadmin_viewable_groupsSQL order by menu_id;";
	$rslt=mysql_query($stmt, $link);
	$menus_to_print = mysql_num_rows($rslt);

	echo "<br>CALL MENU LISTINGS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><font size=1 color=white>MENU ID</TD>";
	echo "<TD><font size=1 color=white>NOM</TD>";
	echo "<TD><font size=1 color=white>GROUP</TD>";
	echo "<TD><font size=1 color=white>PROMPT</TD>\n";
	echo "<TD><font size=1 color=white>TIMEOUT</TD>";
	echo "<TD><font size=1 color=white>OPTIONS</TD>";
	echo "<TD><font size=1 color=white>MODIFIER</TD>\n";
	echo "</TR>\n";

	$o=0;
	$menu_id = $MT;

	while ($menus_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$menu_id[$o] =		$row[0];
		$menu_name[$o] =	$row[1];
		$menu_prompt[$o] =	$row[2];
		$menu_timeout[$o] =	$row[3];
		$menu_group[$o] =	$row[4];
		$o++;
		}

	$o=0;
	while ($menus_to_print > $o) 
		{
		$stmt="SELECT count(*) from vicidial_call_menu_options where menu_id=\"$menu_id[$o]\";";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3511&menu_id=$menu_id[$o]\">$menu_id[$o]</a></td>";
		echo "<td><font size=1> $menu_name[$o]</td>";
		echo "<td><font size=1> $menu_group[$o]</td>";
		echo "<td><font size=1> $menu_prompt[$o]</td>";
		echo "<td><font size=1> $menu_timeout[$o]</td>";
		echo "<td><font size=1> $row[0]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3511&menu_id=$menu_id[$o]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1700 display all filter phone groups
######################
if ($ADD==1700)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT vfpg.filter_phone_group_id,filter_phone_group_name,filter_phone_group_description,count(*) as tally,user_group from vicidial_filter_phone_groups vfpg,vicidial_filter_phone_numbers vfpn where vfpg.filter_phone_group_id=vfpn.filter_phone_group_id $LOGadmin_viewable_groupsSQL group by filter_phone_group_id order by filter_phone_group_id;";
	$rslt=mysql_query($stmt, $link);
	$lists_to_print = mysql_num_rows($rslt);

	echo "<br>Filtrer les listings Group Téléphone:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>FPG ID</B></a></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>FPG NAME</B></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</B></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GROUPE ADMIN</B></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>PHONES COUNT</B></a></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>MODIFIER</TD>\n";
	echo "</TR>\n";

	$lists_printed = '';
	$o=0;
	while ($lists_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$groups_printed .= "'$row[0]',";
		$o++;
		}

	$stmt="SELECT filter_phone_group_id,filter_phone_group_name,filter_phone_group_description,0,user_group from vicidial_filter_phone_groups where filter_phone_group_id NOT IN($groups_printed'') $LOGadmin_viewable_groupsSQL order by filter_phone_group_id;";
	$rslt=mysql_query($stmt, $link);
	$lists_to_print = mysql_num_rows($rslt);
	$o=0;
	while ($lists_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=10000 display all remote agents
######################
if ($ADD==10000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	# gather list of allowed users
	$stmt="SELECT user from vicidial_users $whereLOGadmin_viewable_groupsSQL order by user;";
	$rslt=mysql_query($stmt, $link);
	$users_to_print = mysql_num_rows($rslt);
	$o=0;
	$user_start_SQL='';
	while ($users_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		$user_start_SQL .= "'$row[0]',";
		$o++;
		}
	$user_start_SQL = preg_replace("/,$/","",$user_start_SQL);
	if (strlen($user_start_SQL) > 2)
		{$user_start_SQL = "user_start IN($user_start_SQL)";}

	$ra_user_SQL = "and $user_start_SQL";
	if (strlen($whereLOGallowed_campaignsSQL) < 6)
		{$ra_user_SQL = "where $user_start_SQL";}

	$stmt="SELECT remote_agent_id,user_start,number_of_lines,server_ip,conf_exten,extension_group,status,campaign_id from vicidial_remote_agents $whereLOGallowed_campaignsSQL $ra_user_SQL order by server_ip,campaign_id,user_start;";
	if ($DB) {echo "$stmt\n";}
	$rslt=mysql_query($stmt, $link);
	$remoteagents_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES AGENTS DISTANTS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>USER</B></td>";
	echo "<td><font size=1 color=white><B>LINES</B></td>";
	echo "<td><font size=1 color=white><B>SERVEUR &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>CONF-EXTEN &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>GROUP &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>STATUS &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>CAMPAIGN &nbsp; </B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($remoteagents_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111&remote_agent_id=$row[0]\">$row[1]</a></td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=31111&remote_agent_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=12000 display all extension group entries
######################
if ($ADD==12000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT extension_id,extension_group_id,extension,rank,campaign_groups,call_count_today,last_call_time,last_callerid from vicidial_extension_groups $whereLOGadmin_viewable_groupsSQL order by extension_group_id,rank,extension;";
	$rslt=mysql_query($stmt, $link);
	$extensiongroups_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES GROUPES D'EXTENSION:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white><B>GROUP</B></td>";
	echo "<td><font size=1 color=white><B>EXTENSION</B></td>";
	echo "<td><font size=1 color=white><B>RANK &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>RESTRICT &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>COUNT &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>LAST CALL &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>LAST ID &nbsp; </B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($extensiongroups_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=32111&extension_id=$row[0]\">$row[1]</a></td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> $row[6]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=32111&extension_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=100000 display all user groups
######################
if ($ADD==100000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT user_group,group_name,forced_timeclock_login from vicidial_user_groups $whereLOGadmin_viewable_groupsSQL order by user_group;";
	$rslt=mysql_query($stmt, $link);
	$usergroups_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES GROUPES D'UTILISATEURS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>GROUPE D'UTILISATEURS</B></td>";
	echo "<td><font size=1 color=white><B>GROUP NAME</B></td>";
	echo "<td><font size=1 color=white><B>Force timeclock &nbsp; </B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($usergroups_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311111&user_group=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=311111&user_group=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1000000 display all scripts
######################
if ($ADD==1000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT script_id,script_name,active,user_group from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
	$rslt=mysql_query($stmt, $link);
	$scripts_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES SCRIPTS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>SCRIPT ID</B></td>";
	echo "<td><font size=1 color=white><B>Nom du script</B></td>";
	echo "<td><font size=1 color=white><B>ACTIVE &nbsp; </B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN &nbsp; </B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($scripts_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3111111&script_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=3111111&script_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=10000000 display all filters
######################
if ($ADD==10000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT lead_filter_id,lead_filter_name,user_group from vicidial_lead_filters $whereLOGadmin_viewable_groupsSQL order by lead_filter_id;";
	$rslt=mysql_query($stmt, $link);
	$filters_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES FILTRES DE FICHES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>FILTER ID</B></td>";
	echo "<td><font size=1 color=white><B>FILTER NAME</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($filters_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111&lead_filter_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=31111111&lead_filter_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=100000000 display all call times
######################
if ($ADD==100000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if (strlen($whereLOGadmin_viewable_groupsSQL) > 0) {$tempLOGadmin_viewable_call_timesSQL = $LOGadmin_viewable_call_timesSQL;}
	else {$tempLOGadmin_viewable_call_timesSQL = $whereLOGadmin_viewable_call_timesSQL;}

	$stmt="SELECT call_time_id,call_time_name,ct_default_start,ct_default_stop,user_group from vicidial_call_times $whereLOGadmin_viewable_groupsSQL $tempLOGadmin_viewable_call_timesSQL order by call_time_id;";
	$rslt=mysql_query($stmt, $link);
	$calltimes_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES PERIODES D'APPELS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>CALLTIME ID</B></td>";
	echo "<td><font size=1 color=white><B>CALLTIME NOM</B></td>";
	echo "<td><font size=1 color=white><B>Démarrage par défaut</B></td>";
	echo "<td><font size=1 color=white><B>DEFAULT STOP</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($calltimes_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2] </td>";
		echo "<td><font size=1> $row[3] </td>";
		echo "<td><font size=1> $row[4] </td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=1000000000 display all state call times
######################
if ($ADD==1000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT state_call_time_id,state_call_time_state,state_call_time_name,sct_default_start,sct_default_stop,user_group from vicidial_state_call_times $whereLOGadmin_viewable_groupsSQL order by state_call_time_id;";
	$rslt=mysql_query($stmt, $link);
	$statecalltimes_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES PERIODES D'APPELS D'ETAT:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>CALLTIME ID</B></td>";
	echo "<td><font size=1 color=white><B>CALLTIME STATE</B></td>";
	echo "<td><font size=1 color=white><B>CALLTIME NOM</B></td>";
	echo "<td><font size=1 color=white><B>Démarrage par défaut</B></td>";
	echo "<td><font size=1 color=white><B>DEFAULT STOP</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($statecalltimes_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3111111111&call_time_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td><font size=1> $row[3] </td>";
		echo "<td><font size=1> $row[4] </td>";
		echo "<td><font size=1> $row[5] </td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=3111111111&call_time_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=130000000 display all shifts
######################
if ($ADD==130000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT shift_id,shift_name,shift_start_time,shift_length,shift_weekdays,user_group from vicidial_shifts $whereLOGadmin_viewable_groupsSQL order by shift_id;";
	$rslt=mysql_query($stmt, $link);
	$shifts_to_print = mysql_num_rows($rslt);

	echo "<br>SHIFT inscriptions:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>SHIFT ID</B></td>";
	echo "<td><font size=1 color=white><B>SHIFT NOM</B></td>";
	echo "<td><font size=1 color=white><B>SHIFT START</B></td>";
	echo "<td><font size=1 color=white><B>SHIFT LONGUEUR</B></td>";
	echo "<td><font size=1 color=white><B>SEMAINE</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($shifts_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=331111111&shift_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2] </td>";
		echo "<td><font size=1> $row[3] </td>";
		echo "<td><font size=1> $row[4] </td>";
		echo "<td><font size=1> $row[5] </td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=331111111&shift_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=10000000000 display all phones
######################
if ($ADD==10000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$EXTENlink='stage=EXTENDOWN';
	$PROTOlink='stage=PROTODOWN';
	$SERVERlink='stage=SERVERDOWN';
	$STATUSlink='stage=STATUSDOWN';
	$SQLorder='order by extension,server_ip';
	if (eregi("EXTENUP",$stage)) {$SQLorder='order by extension asc';   $EXTENlink='stage=EXTENDOWN';}
	if (eregi("EXTENDOWN",$stage)) {$SQLorder='order by extension desc';   $EXTENlink='stage=EXTENUP';}
	if (eregi("PROTOUP",$stage)) {$SQLorder='order by protocol asc';   $PROTOlink='stage=PROTODOWN';}
	if (eregi("PROTODOWN",$stage)) {$SQLorder='order by protocol desc';   $PROTOlink='stage=PROTOUP';}
	if (eregi("SERVERUP",$stage)) {$SQLorder='order by server_ip asc';   $SERVERlink='stage=SERVERDOWN';}
	if (eregi("SERVERDOWN",$stage)) {$SQLorder='order by server_ip desc';   $SERVERlink='stage=SERVERUP';}
	if (eregi("STATUSUP",$stage)) {$SQLorder='order by status asc';   $STATUSlink='stage=STATUSDOWN';}
	if (eregi("STATUSDOWN",$stage)) {$SQLorder='order by status desc';   $STATUSlink='stage=STATUSUP';}
	$stmt="SELECT extension,protocol,server_ip,dialplan_number,voicemail_id,status,fullname,messages,old_messages,user_group from phones $whereLOGadmin_viewable_groupsSQL $SQLorder";
	$rslt=mysql_query($stmt, $link);
	$phones_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES TELEPHONES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><a href=\"$PHP_SELF?ADD=10000000000&$EXTENlink\"><font size=1 color=white><B>EXTEN</B></a></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=10000000000&$PROTOlink\"><font size=1 color=white><B>PROTO</B></a></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=10000000000&$SERVERlink\"><font size=1 color=white><B>SERVER</B></a></td>";
	echo "<td colspan=2><font size=1 color=white><B>DIAL PLAN</B></td>";
	echo "<td><a href=\"$PHP_SELF?ADD=10000000000&$STATUSlink\"><font size=1 color=white><B>ETAT</B></a></td>";
	echo "<td><font size=1 color=white><B>NOM</B></td>";
	echo "<td colspan=2><font size=1 color=white><B>VMAIL</B></td>";
	echo "<td><font size=1 color=white><B>GROUP</B></td>";
	echo "<td align=center><font size=1 color=white><B>LIENS</B></td></tr>\n";

	$o=0;
	while ($phones_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><a href=\"$PHP_SELF?ADD=31111111111&extension=$row[0]&server_ip=$row[2]\"><font size=1 color=black>$row[0]</font></a></td>
		<td><font size=1>$row[1]</td>
		<td><font size=1>$row[2]</td>
		<td><font size=1>$row[3]</td>
		<td><font size=1>$row[4]</td>
		<td><font size=1>$row[5]</td>
		<td><font size=1>$row[6]</td>
		<td><font size=1>$row[7]</td>
		<td><font size=1>$row[8]</td>
		<td><font size=1>$row[9]</td>";
		echo "<td><font size=1><a href=\"$PHP_SELF?ADD=31111111111&extension=$row[0]&server_ip=$row[2]\">MODIFIER</a> | <a href=\"./phone_stats.php?extension=$row[0]&server_ip=$row[2]\">STATISTIQUES</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=12000000000 display all phones alias
######################
if ($ADD==12000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT alias_id,alias_name,logins_list,user_group from phones_alias $whereLOGadmin_viewable_groupsSQL order by alias_id;";
	$rslt=mysql_query($stmt, $link);
	$phonealias_to_print = mysql_num_rows($rslt);

	echo "<br>TÉLÉLISTE DE TELEPHONESE ALIASAGES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white><B>ALIAS ID</B></a></td>";
	echo "<td><font size=1 color=white><B>Alias</B></a></td>";
	echo "<td><font size=1 color=white><B>TÉLÉLISTE DE TELEPHONESE Connexions</B></a></td>";
	echo "<td><font size=1 color=white><B>GROUP</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($phonealias_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><a href=\"$PHP_SELF?ADD=32111111111&alias_id=$row[0]\"><font size=1 color=black>$row[0]</font></a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=32111111111&alias_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=13000000000 display all group alias
######################
if ($ADD==13000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT group_alias_id,group_alias_name,caller_id_number,caller_id_name,active,user_group from groups_alias $whereLOGadmin_viewable_groupsSQL order by group_alias_id;";
	$rslt=mysql_query($stmt, $link);
	$phonealias_to_print = mysql_num_rows($rslt);

	echo "<br>GROUPE ALIAS LISTAGES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white><B>ALIAS ID GROUP</B></a></td>";
	echo "<td><font size=1 color=white><B>GROUPE NOM ALIAS</B></a></td>";
	echo "<td><font size=1 color=white><B>CID NUMÉRO</B></a></td>";
	echo "<td><font size=1 color=white><B>CID NOM</B></a></td>";
	echo "<td><font size=1 color=white><B>ACTIF</B></a></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($phonealias_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><a href=\"$PHP_SELF?ADD=33111111111&group_alias_id=$row[0]\"><font size=1 color=black>$row[0]</font></a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=33111111111&group_alias_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=100000000000 display all servers
######################
if ($ADD==100000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT server_id,server_description,server_ip,active,asterisk_version,max_vicidial_trunks,local_gmt from servers $whereLOGadmin_viewable_groupsSQL order by server_id";
	$rslt=mysql_query($stmt, $link);
	$servers_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES SERVEURS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>SERVEUR ID</B></td>";
	echo "<td><font size=1 color=white><B>NOM</B></td>";
	echo "<td><font size=1 color=white><B>SERVEUR IP</B></td>";
	echo "<td><font size=1 color=white><B>ACTIF</B></td>";
	echo "<td><font size=1 color=white><B>ASTERISK</B></td>";
	echo "<td><font size=1 color=white><B>Malles</B></td>";
	echo "<td><font size=1 color=white><B>GMT</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($servers_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=311111111111&server_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td><font size=1>$row[6]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=311111111111&server_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=130000000000 display all conf templates
######################
if ($ADD==130000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT template_id,template_name,user_group from vicidial_conf_templates $whereLOGadmin_viewable_groupsSQL order by template_id";
	$rslt=mysql_query($stmt, $link);
	$templates_to_print = mysql_num_rows($rslt);

	echo "<br>CONF TEMPLATE LISTEAGES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>ID modèle</B></td>";
	echo "<td><font size=1 color=white><B>Nom du modèle</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($templates_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=331111111111&template_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=331111111111&template_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=140000000000 display all carriers
######################
if ($ADD==140000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT carrier_id,carrier_name,server_ip,protocol,registration_string,active,user_group from vicidial_server_carriers $whereLOGadmin_viewable_groupsSQL order by carrier_id";
	$rslt=mysql_query($stmt, $link);
	$carriers_to_print = mysql_num_rows($rslt);

	echo "<br>CARRIER LISTEAGES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>Carrier ID</B></td>";
	echo "<td><font size=1 color=white><B>Nom du transporteur</B></td>";
	echo "<td><font size=1 color=white><B>IP du serveur</B></td>";
	echo "<td><font size=1 color=white><B>Protocol</B></td>";
	echo "<td><font size=1 color=white><B>Inscription</B></td>";
	echo "<td><font size=1 color=white><B>Active</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($carriers_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=341111111111&carrier_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td><font size=1>$row[6]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=341111111111&carrier_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=150000000000 display all tts entries
######################
if ($ADD==150000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT tts_id,tts_name,active,tts_text,tts_voice,user_group from vicidial_tts_prompts $whereLOGadmin_viewable_groupsSQL order by tts_id";
	$rslt=mysql_query($stmt, $link);
	$tts_to_print = mysql_num_rows($rslt);

	echo "<br>TEXT-TO-SPEECH(TTS) LISTINGS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>TTS ID</B></td>";
	echo "<td><font size=1 color=white><B>TTS Nom</B></td>";
	echo "<td><font size=1 color=white><B>Active</B></td>";
	echo "<td><font size=1 color=white><B>TTS Voix</B></td>";
	echo "<td><font size=1 color=white><B>TTS Text</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($tts_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$row[3]=ereg_replace(";|<|>","",$row[3]);
		while(strlen($row[3]) > 50) {$row[3] = substr("$row[3]", 0, -1);}
		if(strlen($row[3]) > 47) {$row[3] = "$row[3]...";}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=351111111111&tts_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=351111111111&tts_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=160000000000 display all music on hold entries
######################
if ($ADD==160000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT moh_id,moh_name,active,random,user_group from vicidial_music_on_hold where remove='N' $LOGadmin_viewable_groupsSQL order by moh_id";
	$rslt=mysql_query($stmt, $link);
	$moh_to_print = mysql_num_rows($rslt);

	echo "<br>MUSIC-ON-HOLD(MOH) LISTINGS:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>MOH ID</B></td>";
	echo "<td><font size=1 color=white><B>MOH Name</B></td>";
	echo "<td><font size=1 color=white><B>Active</B></td>";
	echo "<td><font size=1 color=white><B>Random Order</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($moh_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		$row[3]=ereg_replace(";|<|>","",$row[3]);
		while(strlen($row[3]) > 50) {$row[3] = substr("$row[3]", 0, -1);}
		if(strlen($row[3]) > 47) {$row[3] = "$row[3]...";}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=361111111111&moh_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=361111111111&moh_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=170000000000 display all voicemail entries
######################
if ($ADD==170000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT voicemail_id,fullname,active,messages,old_messages,delete_vm_after_email,user_group from vicidial_voicemail $whereLOGadmin_viewable_groupsSQL order by voicemail_id";
	$rslt=mysql_query($stmt, $link);
	$vm_to_print = mysql_num_rows($rslt);

	echo "<br>VOCAL BOITES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>VOICEMAIL ID</B></td>";
	echo "<td><font size=1 color=white><B>Name</B></td>";
	echo "<td><font size=1 color=white><B>Active</B></td>";
	echo "<td><font size=1 color=white><B>Nouveaux messages</B></td>";
	echo "<td><font size=1 color=white><B>Anciens messages</B></td>";
	echo "<td><font size=1 color=white><B>Delete</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($vm_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=371111111111&voicemail_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td><font size=1>$row[6]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=371111111111&voicemail_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=180000000000 display all screen label entries
######################
if ($ADD==180000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT label_id,label_name,active,user_group from vicidial_screen_labels $whereLOGadmin_viewable_groupsSQL order by label_id";
	$rslt=mysql_query($stmt, $link);
	$lb_to_print = mysql_num_rows($rslt);

	echo "<br>Les étiquettes de l'écran de l'agent:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>LABEL ID</B></td>";
	echo "<td><font size=1 color=white><B>Name</B></td>";
	echo "<td><font size=1 color=white><B>Active</B></td>";
	echo "<td><font size=1 color=white><B>GROUPE ADMIN</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($lb_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=381111111111&label_id=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=381111111111&label_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=190000000000 display all contacts entries
######################
if ($ADD==190000000000)
	{
	echo "<CENTER><TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (preg_match("/contact_information/",$SStables_use_alt_log_db)) and (strlen($SSalt_log_server_ip)>4) and (strlen($SSalt_log_dbname)>0) )
		{
		$linkALT=mysql_connect("$SSalt_log_server_ip", "$SSalt_log_login", "$SSalt_log_pass");
		mysql_select_db("$SSalt_log_dbname", $linkALT);
		}
	else
		{$linkALT = $link;}
	$stmt="SELECT contact_id,first_name,last_name,office_num,bu_name,department,group_name,job_title,location from contact_information order by first_name,last_name,office_num limit 20000;";
	$rslt=mysql_query($stmt, $linkALT);
	$lb_to_print = mysql_num_rows($rslt);

	echo "<br>Contacts:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>NOM</B></td>";
	echo "<td><font size=1 color=white><B>Nombre Bureau</B></td>";
	echo "<td><font size=1 color=white><B>BU Name</B></td>";
	echo "<td><font size=1 color=white><B>Department</B></td>";
	echo "<td><font size=1 color=white><B>Group</B></td>";
	echo "<td><font size=1 color=white><B>Job Title</B></td>";
	echo "<td><font size=1 color=white><B>Location</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($lb_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		while (strlen($row[4])>20) {$row[4] = preg_replace("/.$/","",$row[4]);}
		while (strlen($row[5])>20) {$row[5] = preg_replace("/.$/","",$row[5]);}
		while (strlen($row[6])>20) {$row[6] = preg_replace("/.$/","",$row[6]);}
		while (strlen($row[7])>20) {$row[7] = preg_replace("/.$/","",$row[7]);}
		while (strlen($row[8])>20) {$row[8] = preg_replace("/.$/","",$row[8]);}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=391111111111&contact_id=$row[0]\">$row[1] $row[2]</a></td>";
		echo "<td><font size=1>$row[3]</td>";
		echo "<td><font size=1>$row[4]</td>";
		echo "<td><font size=1>$row[5]</td>";
		echo "<td><font size=1>$row[6]</td>";
		echo "<td><font size=1>$row[7]</td>";
		echo "<td><font size=1>$row[8]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=391111111111&contact_id=$row[0]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}


######################
# ADD=1000000000000 display all conferences
######################
if ($ADD==1000000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT conf_exten,server_ip,extension from conferences order by conf_exten";
	$rslt=mysql_query($stmt, $link);
	$conferences_to_print = mysql_num_rows($rslt);

	echo "<br>LISTE DES CONFERENCES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>CONFERENCE</B></td>";
	echo "<td><font size=1 color=white><B>SERVEUR IP</B></td>";
	echo "<td><font size=1 color=white><B>EXTENSION</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($conferences_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=3111111111111&conf_exten=$row[0]&server_ip=$row[1]\">$row[0]</a></td>";
		echo "<td><font size=1>$row[1]</td>";
		echo "<td><font size=1>$row[2]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=3111111111111&conf_exten=$row[0]&server_ip=$row[1]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}

######################
# ADD=10000000000000 display all vicidial conferences
######################
if ($ADD==10000000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT conf_exten,server_ip,extension from vicidial_conferences order by conf_exten";
	$rslt=mysql_query($stmt, $link);
	$vicidialconf_to_print = mysql_num_rows($rslt);

	echo "<br>VICIDIAL LISTE DES CONFERENCES:\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<tr bgcolor=black>";
	echo "<td><font size=1 color=white align=left><B>CONFERENCE</B></td>";
	echo "<td><font size=1 color=white><B>SERVEUR IP</B></td>";
	echo "<td><font size=1 color=white><B>EXTENSION</B></td>";
	echo "<td align=center><font size=1 color=white><B>MODIFIER</B></td></tr>\n";

	$o=0;
	while ($vicidialconf_to_print > $o) 
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=31111111111111&conf_exten=$row[0]&server_ip=$row[1]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> $row[2]</td>";
		echo "<td align=center><font size=1><a href=\"$PHP_SELF?ADD=31111111111111&conf_exten=$row[0]&server_ip=$row[1]\">MODIFIER</a></td></tr>\n";
		$o++;
		}

	echo "</TABLE></center>\n";
	}





######################
# ADD=700000000000000 view all activity in the admin log
######################

if ($ADD==700000000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ($stage > 9999)
		{
		$next_limit = ($stage + 10000);
		$limitSQL = "10000 offset $stage";
		}
	else
		{
		$next_limit = "10000";
		$limitSQL = "10000";
		}

	$stmt="SELECT admin_log_id,event_date,user,ip_address,event_section,event_type,record_id,event_code,user_group from vicidial_admin_log $whereLOGadmin_viewable_groupsSQL order by event_date desc limit $limitSQL;";
	$rslt=mysql_query($stmt, $link);
	$logs_to_print = mysql_num_rows($rslt);

	echo "<br>ADMIN CHANGE LOG: (Mise à 10.000 dossiers)\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID</B></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DATE TIME</B></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>USER</B></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>IP</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>SECTION</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>TYPE</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>RECORD ID</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GROUP</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GOTO</TD>\n";
	echo "</TR>\n";

	$logs_printed = '';
	$o=0;
	while ($logs_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);
		if (eregi("USER|AGENT",$row[4])) {$record_link = "ADD=3&user=$row[6]";}
		if (eregi('CAMPAIGN',$row[4])) {$record_link = "ADD=31&campaign_id=$row[6]";}
		if (eregi('LIST',$row[4])) {$record_link = "ADD=311&list_id=$row[6]";}
		if (eregi('SCRIPT',$row[4])) {$record_link = "ADD=3111111&script_id=$row[6]";}
		if (eregi('FILTER',$row[4])) {$record_link = "ADD=31111111&lead_filter_id=$row[6]";}
		if (eregi('INGROUP',$row[4])) {$record_link = "ADD=3111&group_id=$row[6]";}
		if (eregi('DID',$row[4])) {$record_link = "ADD=3311&did_id=$row[6]";}
		if (eregi('USERGROUP',$row[4])) {$record_link = "ADD=311111&user_group=$row[6]";}
		if (eregi('REMOTEAGENT',$row[4])) {$record_link = "ADD=31111&remote_agent_id=$row[6]";}
		if (eregi('PHONE',$row[4])) {$record_link = "ADD=10000000000";}
		if (eregi('CALLTIME',$row[4])) {$record_link = "ADD=311111111&call_time_id=$row[6]";}
		if (eregi('SHIFT',$row[4])) {$record_link = "ADD=331111111&shift_id=$row[6]";}
		if (eregi('CONFTEMPLATE',$row[4])) {$record_link = "ADD=331111111111&template_id=$row[6]";}
		if (eregi('CARRIER',$row[4])) {$record_link = "ADD=341111111111&carrier_id=$row[6]";}
		if (eregi('SERVER',$row[4])) {$record_link = "ADD=311111111111&server_id=$row[6]";}
		if (eregi('CONFERENCE',$row[4])) {$record_link = "ADD=1000000000000";}
		if (eregi('SYSTEM',$row[4])) {$record_link = "ADD=311111111111111";}
		if (eregi('CATEGOR',$row[4])) {$record_link = "ADD=331111111111111";}
		if (eregi('GROUPALIAS',$row[4])) {$record_link = "ADD=33111111111&group_alias_id=$row[6]";}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=730000000000000&stage=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?ADD=710000000000000&stage=$row[2]\">$row[2]</a></td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?ADD=720000000000000&category=$row[4]&stage=$row[6]\">$row[6]</a></td>";
		echo "<td><font size=1> $row[8]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?$record_link\">GOTO</a></td>";
		echo "</tr>\n";
		$logs_printed .= "'$row[0]',";
		$o++;
		}
	echo "</TABLE><BR><BR>\n";
	echo "<a href=\"$PHP_SELF?ADD=700000000000000&stage=$next_limit\">NEXT</a>\n";
	echo "</center>\n";
	}


######################
# ADD=710000000000000 view all activity in the admin log made by one user
######################

if ($ADD==710000000000000)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	$stmt="SELECT full_name from vicidial_users where user='$stage' $LOGadmin_viewable_groupsSQL;";
	$rslt=mysql_query($stmt, $link);
	$names_to_print = mysql_num_rows($rslt);
	if ($names_to_print > 0)
		{
		$row=mysql_fetch_row($rslt);
		$user_name = $row[0];
		}

	$stmt="SELECT admin_log_id,event_date,user,ip_address,event_section,event_type,record_id,event_code,user_group from vicidial_admin_log where user='$stage' $LOGadmin_viewable_groupsSQL order by event_date desc limit 10000;";
	$rslt=mysql_query($stmt, $link);
	$logs_to_print = mysql_num_rows($rslt);

	echo "<br>ADMIN CHANGE LOG: Les modifications apportées par $stage - $user_name\n";
	echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
	echo "<TR BGCOLOR=BLACK>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID</B></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DATE TIME</B></TD>";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>USER</B></TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>IP</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>SECTION</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>TYPE</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>RECORD ID</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GROUP</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</TD>\n";
	echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GOTO</TD>\n";
	echo "</TR>\n";

	$logs_printed = '';
	$o=0;
	while ($logs_to_print > $o)
		{
		$row=mysql_fetch_row($rslt);

		if (eregi("USER|AGENT",$row[4])) {$record_link = "ADD=3&user=$row[6]";}
		if (eregi('CAMPAIGN',$row[4])) {$record_link = "ADD=31&campaign_id=$row[6]";}
		if (eregi('LIST',$row[4])) {$record_link = "ADD=311&list_id=$row[6]";}
		if (eregi('SCRIPT',$row[4])) {$record_link = "ADD=3111111&script_id=$row[6]";}
		if (eregi('FILTER',$row[4])) {$record_link = "ADD=31111111&lead_filter_id=$row[6]";}
		if (eregi('INGROUP',$row[4])) {$record_link = "ADD=3111&group_id=$row[6]";}
		if (eregi('DID',$row[4])) {$record_link = "ADD=3311&did_id=$row[6]";}
		if (eregi('USERGROUP',$row[4])) {$record_link = "ADD=311111&user_group=$row[6]";}
		if (eregi('REMOTEAGENT',$row[4])) {$record_link = "ADD=31111&remote_agent_id=$row[6]";}
		if (eregi('PHONE',$row[4])) {$record_link = "ADD=10000000000";}
		if (eregi('CALLTIME',$row[4])) {$record_link = "ADD=311111111&call_time_id=$row[6]";}
		if (eregi('SHIFT',$row[4])) {$record_link = "ADD=331111111&shift_id=$row[6]";}
		if (eregi('CONFTEMPLATE',$row[4])) {$record_link = "ADD=331111111111&template_id=$row[6]";}
		if (eregi('CARRIER',$row[4])) {$record_link = "ADD=341111111111&carrier_id=$row[6]";}
		if (eregi('SERVER',$row[4])) {$record_link = "ADD=311111111111&server_id=$row[6]";}
		if (eregi('CONFERENCE',$row[4])) {$record_link = "ADD=1000000000000";}
		if (eregi('SYSTEM',$row[4])) {$record_link = "ADD=311111111111111";}
		if (eregi('CATEGOR',$row[4])) {$record_link = "ADD=331111111111111";}
		if (eregi('GROUPALIAS',$row[4])) {$record_link = "ADD=33111111111&group_alias_id=$row[6]";}

		if (eregi("1$|3$|5$|7$|9$", $o))
			{$bgcolor='bgcolor="#B9CBFD"';} 
		else
			{$bgcolor='bgcolor="#9BB9FB"';}
		echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=730000000000000&stage=$row[0]\">$row[0]</a></td>";
		echo "<td><font size=1> $row[1]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?ADD=710000000000000&stage=$row[2]\">$row[2]</a></td>";
		echo "<td><font size=1> $row[3]</td>";
		echo "<td><font size=1> $row[4]</td>";
		echo "<td><font size=1> $row[5]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?ADD=720000000000000&category=$row[4]&stage=$row[6]\">$row[6]</a></td>";
		echo "<td><font size=1> $row[8]</td>";
		echo "<td><font size=1> $row[7]</td>";
		echo "<td><font size=1> <a href=\"$PHP_SELF?$record_link\">GOTO</a></td>";
		echo "</tr>\n";
		$logs_printed .= "'$row[0]',";
		$o++;
		}
	echo "</TABLE><BR><BR>\n";
	echo "\n";
	echo "</center>\n";
	}


######################
# ADD=720000000000000 view all activity in the admin log made to one section/value
######################

if ($ADD==720000000000000)
	{
	if ($LOGuser_level >= 9)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$sectionSQL = "event_section='$category'";
		if (preg_match("/CAMPAIGNS/",$category))
			{$sectionSQL = "event_section IN('CAMPAIGNS','CAMPAIGN_SURVEY','CAMPAIGN_LISTMIX','CAMPAIGN_PRESET','CAMPAIGN_QC','CAMPAIGN_PAUSECODE','CAMPAIGN_RECYCLE','CAMPAIGN_HOTKEY','CAMPAIGN_STATUS','CAMPAIGN_DIALSTATUSES','CAMPAIGN_DIALSTATUS','CAMPAIGN_AC-CID')";}
		if (preg_match("/DIDS/",$category))
			{$sectionSQL = "event_section IN('DIDS','DID_RA-EXTEN')";}

		$stmt="SELECT admin_log_id,event_date,user,ip_address,event_section,event_type,record_id,event_code,user_group from vicidial_admin_log where $sectionSQL and record_id='$stage' $LOGadmin_viewable_groupsSQL order by event_date desc limit 10000;";
		$rslt=mysql_query($stmt, $link);
		$logs_to_print = mysql_num_rows($rslt);

		echo "<br>ADMIN CHANGE LOG: Section Records - $category - $stage\n";
		echo "<center><TABLE width=$section_width cellspacing=0 cellpadding=1>\n";
		echo "<TR BGCOLOR=BLACK>";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>ID</B></TD>";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DATE TIME</B></TD>";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>USER</B></TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>IP</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>SECTION</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>TYPE</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>RECORD ID</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GROUP</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>DESCRIPTION</TD>\n";
		echo "<TD><B><FONT FACE=\"Arial,Helvetica\" size=1 color=white>GOTO</TD>\n";
		echo "</TR>\n";

		$logs_printed = '';
		$o=0;
		while ($logs_to_print > $o)
			{
			$row=mysql_fetch_row($rslt);

			if (eregi("USER|AGENT",$row[4])) {$record_link = "$PHP_SELF?ADD=3&user=$row[6]";}
			if (eregi('CAMPAIGN',$row[4])) {$record_link = "$PHP_SELF?ADD=31&campaign_id=$row[6]";}
			if (eregi('LIST',$row[4])) {$record_link = "$PHP_SELF?ADD=311&list_id=$row[6]";}
			if (eregi('SCRIPT',$row[4])) {$record_link = "$PHP_SELF?ADD=3111111&script_id=$row[6]";}
			if (eregi('FILTER',$row[4])) {$record_link = "$PHP_SELF?ADD=31111111&lead_filter_id=$row[6]";}
			if (eregi('INGROUP',$row[4])) {$record_link = "$PHP_SELF?ADD=3111&group_id=$row[6]";}
			if (eregi('DID',$row[4])) {$record_link = "$PHP_SELF?ADD=3311&did_id=$row[6]";}
			if (eregi('USERGROUP',$row[4])) {$record_link = "$PHP_SELF?ADD=311111&user_group=$row[6]";}
			if (eregi('REMOTEAGENT',$row[4])) {$record_link = "$PHP_SELF?ADD=31111&remote_agent_id=$row[6]";}
			if (eregi('PHONE',$row[4])) {$record_link = "$PHP_SELF?ADD=10000000000";}
			if (eregi('CALLTIME',$row[4])) {$record_link = "$PHP_SELF?ADD=311111111&call_time_id=$row[6]";}
			if (eregi('SHIFT',$row[4])) {$record_link = "$PHP_SELF?ADD=331111111&shift_id=$row[6]";}
			if (eregi('CONFTEMPLATE',$row[4])) {$record_link = "$PHP_SELF?ADD=331111111111&template_id=$row[6]";}
			if (eregi('CARRIER',$row[4])) {$record_link = "$PHP_SELF?ADD=341111111111&carrier_id=$row[6]";}
			if (eregi('SERVER',$row[4])) {$record_link = "$PHP_SELF?ADD=311111111111&server_id=$row[6]";}
			if (eregi('CONFERENCE',$row[4])) {$record_link = "$PHP_SELF?ADD=1000000000000";}
			if (eregi('SYSTEM',$row[4])) {$record_link = "$PHP_SELF?ADD=311111111111111";}
			if (eregi('CATEGOR',$row[4])) {$record_link = "$PHP_SELF?ADD=331111111111111";}
			if (eregi('GROUPALIAS',$row[4])) {$record_link = "$PHP_SELF?ADD=33111111111&group_alias_id=$row[6]";}
			if (eregi('LEADS',$row[4])) {$record_link = "./admin_modify_lead.php?lead_id=$row[6]";}

			if (eregi("1$|3$|5$|7$|9$", $o))
				{$bgcolor='bgcolor="#B9CBFD"';} 
			else
				{$bgcolor='bgcolor="#9BB9FB"';}
			echo "<tr $bgcolor><td><font size=1><a href=\"$PHP_SELF?ADD=730000000000000&stage=$row[0]\">$row[0]</a></td>";
			echo "<td><font size=1> $row[1]</td>";
			echo "<td><font size=1> <a href=\"$PHP_SELF?ADD=710000000000000&stage=$row[2]\">$row[2]</a></td>";
			echo "<td><font size=1> $row[3]</td>";
			echo "<td><font size=1> $row[4]</td>";
			echo "<td><font size=1> $row[5]</td>";
			echo "<td><font size=1> $row[6]</td>";
			echo "<td><font size=1> $row[8]</td>";
			echo "<td><font size=1> $row[7]</td>";
			echo "<td><font size=1> <a href=\"$record_link\">GOTO</a></td>";
			echo "</tr>\n";
			$logs_printed .= "'$row[0]',";
			$o++;
			}
		echo "</TABLE><BR><BR>\n";
		echo "\n";
		echo "</center>\n";
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=730000000000000 detail view of one admin log entry
######################

if ($ADD==730000000000000)
	{
	if ($LOGuser_level >= 9)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT admin_log_id,event_date,val.user,ip_address,event_section,event_type,record_id,event_code,event_notes,event_sql,full_name,val.user_group from vicidial_admin_log val, vicidial_users vu where admin_log_id='$stage' and val.user=vu.user $valLOGadmin_viewable_groupsSQL;";
		if ($DB > 0) {echo "$stmt\n";}
		$rslt=mysql_query($stmt, $link);
		$logs_to_print = mysql_num_rows($rslt);

		if ($logs_to_print > 0)
			{
			$row=mysql_fetch_row($rslt);
			echo "<br>ADMIN CHANGE LOG: Record Détail - $stage<BR><BR>\n";
			echo "<center><TABLE width=$section_width cellspacing=5 cellpadding=0>\n";
			echo "<TR>";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>ID: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[0]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>DATE TIME: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[1]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>USER: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[2] - $row[10]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>IP: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[3]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>SECTION: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[4]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>TYPE: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[5]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>RECORD ID: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=2>$row[6]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>DESCRIPTION: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=1>$row[7]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>GROUPE ADMIN: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=1>$row[11]</TD>";
			echo "</TR><TR>\n";
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>NOTES: </B></TD>";
			echo "<TD ALIGN=LEFT><FONT FACE=\"Arial,Helvetica\" size=1>$row[8]</TD>";
			echo "</TR><TR>\n";
			$row[9] = eregi_replace("',","' ,",$row[9]);
			$row[9] = preg_replace("/\|/","<BR>",$row[9]);
			echo "<TD ALIGN=RIGHT><B><FONT FACE=\"Arial,Helvetica\" size=2>SQL: </B></TD>";
			echo "<TD ALIGN=LEFT width=700><p style=\"width: 700; text-wrap: normal; word-wrap: break-word\"><FONT FACE=\"Arial,Helvetica\" size=1>$row[9]</TD>";
			echo "</TR>\n";
			echo "</TABLE><BR><BR>\n";
			echo "\n";
			echo "</center>\n";
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}


######################
# ADD=999999 display reports section
######################
if ($ADD==999999)
	{
	if ($LOGview_reports==1)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		$stmt="SELECT server_id,server_description,server_ip,active,sysload,channels_total,cpu_idle_percent,disk_usage from servers order by server_id;";
		$rslt=mysql_query($stmt, $link);
		if ($DB) {echo "$stmt\n";}
		$servers_to_print = mysql_num_rows($rslt);
		$i=0;
		while ($i < $servers_to_print)
			{
			$row=mysql_fetch_row($rslt);
			$server_id[$i] =			$row[0];
			$server_description[$i] =	$row[1];
			$server_ip[$i] =			$row[2];
			$active[$i] =				$row[3];
			$sysload[$i] =				$row[4];
			$channels_total[$i] =		$row[5];
			$cpu_idle_percent[$i] =		$row[6];
			$disk_usage[$i] =			$row[7];
			$i++;
			}

		$stmt="SELECT queuemetrics_url,vtiger_url from system_settings;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$queuemetrics_url_LU =		$row[0];
		$vtiger_url_LU =			$row[1];

		$stmt="SELECT count(*) from vicidial_list_update_log;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$list_update_count =		$row[0];

		$stmt="SELECT count(*) from dialable_inventory_snapshots;";
		$rslt=mysql_query($stmt, $link);
		$row=mysql_fetch_row($rslt);
		$inventory_report_count =	$row[0];

		?>

		<HTML>
		<HEAD>

		<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
		<TITLE>Stats Rapports Server et</TITLE></HEAD><BODY BGCOLOR=WHITE>
		<FONT SIZE=4><B>Stats Rapports Server et</B></FONT><BR><BR>
		<TABLE BORDER=0 CELLPADDING=5 CELLSPACING=0><TR><TD VALIGN=TOP>
		 &nbsp; &nbsp; &nbsp;
		</TD><TD VALIGN=TOP>

		<?php

		echo "<B>Real-Time Rapports</B><BR>\n";
		echo "<UL>\n";
		if ( (preg_match("/Real-Time Main Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"realtime_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Real-Time Main Report</a></FONT>\n";}
				#	echo "<BR> &nbsp; Real-Time SIP: <a href=\"AST_timeonVDADall.php?SIPmonitorLINK=1\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Listen</a></FONT> - <a href=\"AST_timeonVDADall.php?SIPmonitorLINK=2\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Barge</a></FONT>\n";
				#	echo "<BR> &nbsp; Real-Time IAX: <a href=\"AST_timeonVDADall.php?IAXmonitorLINK=1\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Listen</a></FONT> - <a href=\"AST_timeonVDADall.php?IAXmonitorLINK=2\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Barge</a></FONT><BR><BR>\n";
		if ( (preg_match("/Real-Time Campagne Summary/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_timeonVDADallSUMMARY.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Real-Time Campagne Summary</a></FONT>\n";}
		echo "</UL><BR>\n";
		echo "<B>Inbound and Outbound Calling Rapports</B><BR>\n";
		echo "<UL>\n";
		if ( (preg_match("/Inbound Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_CLOSERstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound Report</a></FONT>\n";}
		if ( ( (preg_match("/Inbound Report/",$LOGallowed_reports)) and (preg_match("/Inbound DID Report/",$LOGallowed_reports)) ) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_CLOSERstats.php?DID=Y\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Rapport entrant par DID</a></FONT>\n";}
		if ( (preg_match("/Inbound Service Level Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_CLOSER_service_level.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound Service Level Report</a></FONT>\n";}
		if ( (preg_match("/Inbound Résumé Hourly Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_CLOSERsummary_hourly.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound Résumé Hourly Report</a></FONT>\n";}
		if ( (preg_match("/Inbound Daily Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_inbound_daily_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound Daily Report</a></FONT>\n";}
		if ( (preg_match("/Inbound DID Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_DIDstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound DID Report</a></FONT>\n";}
		if ( (preg_match("/Inbound IVR Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_IVRstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Inbound IVR Report</a></FONT>\n";}
		if ( (preg_match("/Outbound Calling Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_VDADstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Outbound Calling Report</a></FONT>\n";}
		if ( (preg_match("/Outbound Summary Interval Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_OUTBOUNDsummary_interval.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Outbound Summary Interval Report</a></FONT>\n";}
		if ( (preg_match("/Outbound IVR Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{
			echo "<LI><a href=\"AST_IVRstats.php?type=outbound\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Outbound IVR Report</a>";
			if ($LOGexport_reports >= 1)
				{
				if ( (preg_match("/Appels d'exportation Rapport/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
					{echo " - <a href=\"call_report_export.php?ivr_export=YES\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Export</a></FONT>";}
				}
			echo "</FONT>\n";
			}
		if ( (preg_match("/Fronter - Closer Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"fcstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Fronter - Closer Report</a></FONT>\n";}
		if ( (preg_match("/Listes Statuts De Campagne Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_LISTS_campaign_stats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Listes Statuts De Campagne Report</a></FONT>\n";}
		if ( (preg_match("/Campagne Status List Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_campaign_status_list_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Campagne Status List Report</a></FONT>\n";}
				# echo "<LI><a href=\"vicidial_sales_viewer.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>AGENT SPREADSHEET PERFORMANCE</a></FONT>\n";
		if ( ( (preg_match("/Dialer Rapport d'inventaire/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) and ($inventory_report_count > 0) )
			{echo "<LI><a href=\"AST_dialer_inventory_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Dialer Rapport d'inventaire</a></FONT>\n";}

		if ($LOGexport_reports >= 1)
			{
			if ( (preg_match("/Appels d'exportation Rapport/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
				{echo "<LI><a href=\"call_report_export.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Appels d'exportation Rapport</a></FONT>\n";}
			if ( (preg_match("/Pistes d'exportation Rapport/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
				{echo "<LI><a href=\"lead_report_export.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Pistes d'exportation Rapport</a></FONT>\n";}
			}
		echo "</UL>\n";
		echo "</TD><TD VALIGN=TOP>\n";
		echo " &nbsp; &nbsp; &nbsp;\n";
		echo "</TD><TD VALIGN=TOP>\n";
		echo "<B>Agent Rapports</B><BR>\n";
		echo "<UL>\n";
		if ( (preg_match("/Agent Time Détails/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_time_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Agent Time Détails</a></FONT>\n";}
		if ( (preg_match("/Agent Status Détail/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_status_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Agent Status Détail</a></FONT>\n";}
		if ( (preg_match("/Agent Performance Détail/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_performance_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Agent Performance Détail</a></FONT>\n";}
		if ( (preg_match("/Team Performance Détail/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_team_performance_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Team Performance Détail</a></FONT>\n";}
		if ( (preg_match("/Single Agent Daily/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_days_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Single Agent Daily</a></FONT>\n";}
		if ( (preg_match("/Statistiques utilisateur/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"user_stats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Statistiques utilisateur</a></FONT>\n";}
		if ( (preg_match("/Utilisateur Feuille de temps/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_time_sheet.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Utilisateur Feuille de temps</a></FONT>\n";}
		echo "</UL><BR>\n";
		echo "<B>Time Clock Rapports</B><BR>\n";
		echo "<UL>\n";
		if ( (preg_match("/UtilisateurHorloge en temps Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"timeclock_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>UtilisateurHorloge en temps Report</a></FONT>\n";}
		if ( (preg_match("/Groupe utilisateurHorloge en temps Status Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"timeclock_status.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Groupe utilisateurHorloge en temps Status Report</a></FONT>\n";}
		if ( (preg_match("/UtilisateurHorloge en temps Rapport détaillé/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_agent_timeclock_detail.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>UtilisateurHorloge en temps Rapport détaillé</a></FONT>\n";}
		echo "</UL><BR>\n";
		echo "<B>Other Rapports and Links</B><BR>\n";
		echo "<UL>\n";
		if ( (preg_match("/Server Performance Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"AST_server_performance.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Server Performance Report</a></FONT>\n";}

		if ( (preg_match("/Maximum System Stats/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
			{echo "<LI><a href=\"admin.php?ADD=999992&stage=TOTAL\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Maximum System Stats</a></FONT>\n";}

		if ( ($LOGuser_level >= 9) and ( (preg_match("/Administration Change Log/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) )
			{
			echo "<LI><a href=\"$PHP_SELF?ADD=700000000000000\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Administration Change Log</a></FONT>\n";
			}
		if ($SSenable_queuemetrics_logging > 0)
			{
			echo "<LI><a href=\"$queuemetrics_url_LU\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>QueueMetrics Rapports</a></FONT>\n";
			}
		if ($SSenable_vtiger_integration > 0)
			{
			echo "<LI><a href=\"$vtiger_url_LU\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>VtigerCRM Home</a></FONT>\n";
			}
		if ( ($list_update_count > 0) and ( (preg_match("/List Update Stats/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) )
			{
			echo "<LI><a href=\"./AST_LIST_UPDATEstats.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>List Update Stats</a></FONT>\n";
			}
		if ($SScallcard_enabled > 0)
			{
			if ( (preg_match("/CallCard Search/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
				{echo "<LI><a href=\"callcard_admin.php?action=SEARCH\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>CallCard Search</a></FONT>\n";}
			}

		echo "</UL>\n";
		echo "</TD></TR></TABLE>\n";

		if ( (file_exists('custom_report_links.html')) and ( (preg_match("/Custom Rapports Links/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) )
			{
			readfile('custom_report_links.html');
			}


		if ($reports_only_user < 1)
			{
			echo "<PRE><TABLE BORDER=1 CELLPADDING=2 cellspacing=0>\n";

			if ($stage == 'TIME')
				{
				echo "<TR><TD>SERVEUR <a href=\"$PHP_SELF?ADD=999999\">-</a></TD>";
				echo "<TD>DESCRIPTION</TD><TD>IP</TD><TD>ACT</TD><TD>LOAD</TD><TD>CHAN</TD><TD>DISK</TD><TD>TIME</TD></TR>\n";
				}
			else
				{
				echo "<TR><TD>SERVEUR <a href=\"$PHP_SELF?ADD=999999&stage=TIME\">+</a></TD>";
				echo "<TD>DESCRIPTION</TD><TD>IP</TD><TD>ACT</TD><TD>LOAD</TD><TD>CHAN</TD><TD>DISK</TD><TD>OUTBOUND</TD><TD>INBOUND</TD></TR>\n";
				}

			$o=0;
			while ($servers_to_print > $o)
				{
				$cpu = (100 - $cpu_idle_percent[$o]);
				$disk = '';
				$disk_ary = explode('|',$disk_usage[$o]);
				$disk_ary_ct = count($disk_ary);
				$k=0;
				while ($k < $disk_ary_ct)
					{
					$disk_ary[$k] = preg_replace("/^\d* /","",$disk_ary[$k]);
					if ($k<1) {$disk = "$disk_ary[$k]";}
					else
						{
						if ($disk_ary[$k] > $disk) {$disk = "$disk_ary[$k]";}
						}
					$k++;
					}
				$disk = "$disk%";
				echo "<TR>\n";
				echo "<TD><a href=\"$PHP_SELF?ADD=311111111111&server_id=$server_id[$o]\">$server_id[$o]</a></TD>\n";
				echo "<TD>$server_description[$o]</TD>\n";
				echo "<TD>$server_ip[$o]</TD>\n";
				echo "<TD>$active[$o]</TD>\n";
				echo "<TD>$sysload[$o] - $cpu%</TD>\n";
				echo "<TD>$channels_total[$o]</TD>\n";
				echo "<TD ALIGN=RIGHT>$disk</TD>\n";
				if ($stage == 'TIME')
					{
					$stmt="SELECT last_update from server_updater where server_ip='$server_ip[$o]';";
					$rslt=mysql_query($stmt, $link);
					if ($DB) {echo "$stmt\n";}
					$servertime_to_print = mysql_num_rows($rslt);
					if ($servertime_to_print)
						{
						$row=mysql_fetch_row($rslt);
						echo "<TD NOWRAP>$row[0]</TD>";
						}
					}
				else
					{
					if ( (preg_match("/Real-Time Main Report/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
						{
						echo "<TD><a href=\"AST_timeonVDAD.php?server_ip=$server_ip[$o]\">LINK</a></TD>\n";
						echo "<TD><a href=\"AST_timeonVDAD.php?server_ip=$server_ip[$o]&closer_display=1\">LINK</a></TD>\n";
						}
					else
						{
						echo "<TD> &nbsp; </TD>\n";
						echo "<TD> &nbsp; </TD>\n";
						}
					}
				echo "</TR>\n";
				$o++;
				}

			if ($stage == 'TIME')
				{
				echo "<TR><TD COLSPAN=2> &nbsp; </TD><TD>PHP Time</TD><TD COLSPAN=4> &nbsp; </TD><TD NOWRAP>" . date("Y-m-d H:i:s") . "</TD></TR>";

				$stmt="SELECT NOW();";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$dbtime_to_print = mysql_num_rows($rslt);
				if ($dbtime_to_print)
					{
					$row=mysql_fetch_row($rslt);
					echo "<TR><TD COLSPAN=2> &nbsp; </TD><TD>DB Time</TD><TD COLSPAN=4> &nbsp; </TD><TD NOWRAP>$row[0]</TD></TR>";
					}
				}
			echo "</TABLE>\n";

			if ( ($LOGuser_level >= 9) and ( (preg_match("/Administration Change Log/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) )
				{
				echo "<BR><BR> &nbsp; <a href=\"$PHP_SELF?ADD=999994\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLUE SIZE=1>Utilitaire Admin</a></FONT>\n";
				}
			}
		}
	else
		{
		echo "Vous n'avez pas la permission de voir cette page\n";
		exit;
		}
	}
##### END report links #####


######################
# ADD=999998 display admin links page
######################
if ($ADD==999998)
	{
	?>

	<HTML>
	<HEAD>

	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
	<TITLE>Administration: Admin</TITLE></HEAD><BODY BGCOLOR=WHITE>
	<FONT SIZE=4><B>Administration</B></FONT><BR><BR><CENTER>
	<TABLE BORDER=0 CELLPADDING=5 CELLSPACING=0><TR><TD VALIGN=TOP>
	<UL>
	<?php

	echo "<LI><a href=\"$PHP_SELF?ADD=100000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Période d'appels </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=130000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Shifts </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=10000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Téléphones </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=130000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Modèles </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=140000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Carriers </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=100000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Serveurs </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=1000000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Conférences </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=311111111111111\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Réglages du système</a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=180000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Les étiquettes de l'écran de l'agent </a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=321111111111111\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3>Statuts De Système</a>\n";
	echo "<LI><a href=\"$PHP_SELF?ADD=170000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Boîte vocale </a>\n";

	if ( ($sounds_central_control_active > 0) or ($SSsounds_central_control_active > 0) )
		{
		echo "<LI><a href=\"audio_store.php\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Audio Store </a>\n";
		echo "<LI><a href=\"$PHP_SELF?ADD=160000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Musique d-attente </a>\n";
		}
	if ($SSenable_tts_integration > 0)
		{
		echo "<LI><a href=\"$PHP_SELF?ADD=150000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Text To Speech </a>\n";
		}
	if ($SScallcard_enabled > 0)
		{
		echo "<LI><a href=\"callcard_admin.php\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> CallCard Admin </a>\n";
		}
	if ($SScontacts_enabled > 0)
		{
		echo "<LI><a href=\"$PHP_SELF?ADD=190000000000\"><FONT FACE=\"ARIAL,HELVETICA\" SIZE=3> Contacts </a>\n";
		}

	echo "</UL>\n";
	echo "</TD><TD WIDTH=400> &nbsp; \n";
	}
##### END admin links #####


######################
# ADD=999997 - user force change password page
######################
if ($ADD==999997)
	{
	$show_form=1;
	if ($stage=='VALIDER')
		{
		if ( (strlen($pass) > 20) or (strlen($pass) < 2) or ($pass==$PHP_AUTH_PW) )
			{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |1|" . strlen($pass);}
		else
			{
			$stmt="SELECT count(*) from vicidial_users where user='$user' and pass='$PHP_AUTH_PW' and force_change_password='Y' and active='Y' and user_level > 6;";
			$rslt=mysql_query($stmt, $link);
			if ($DB) {echo "$stmt\n";}
			$userpass_to_print = mysql_num_rows($rslt);
			if ($userpass_to_print < 1)
				{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |2|$userpass_to_print";}
			else
				{
				$row=mysql_fetch_row($rslt);
				if ($row[0] < 1)
					{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |3|$row[0]";}
				else
					{
					$show_form=0;

					$stmt="UPDATE vicidial_users SET pass='$pass',force_change_password='N' where user='$user' and force_change_password='Y' and active='Y' and user_level > 6;";
					$rslt=mysql_query($stmt, $link);

					### LOG INSERTION Admin Log Table ###
					$SQL_log = "$stmt|";
					$SQL_log = ereg_replace(';','',$SQL_log);
					$SQL_log = addslashes($SQL_log);
					$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$user', event_code='USER FORCE CHANGEMENT DE MOT DE PASSE', event_sql=\"$SQL_log\", event_notes='';";
					if ($DB) {echo "|$stmt|\n";}
					$rslt=mysql_query($stmt, $link);

					echo "Mot de passe a été mis à jour, vous pouvez maintenant continuer\n";
					}
				}
			}
		}
	if ($show_form > 0)
		{
		echo "<TABLE><TR><TD>\n";
		echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

		echo "<br>CHANGEMENT DE MOT DE PASSE<form action=$PHP_SELF method=POST name=userform id=userform>\n";
		echo "<input type=hidden name=ADD value=999997>\n";
		echo "<input type=hidden name=DB value=\"$DB\">\n";
		echo "<input type=hidden name=stage value=VALIDER>\n";
		echo "<input type=hidden name=user value=\"$PHP_AUTH_USER\">\n";
		echo "<center><TABLE width=$section_width cellspacing=3>\n";

		echo "<tr bgcolor=#B6D3FC><td align=right>Nouveau mot de passe: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=pass size=20 maxlength=20 onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\"> &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=left colspan=2>Vous êtes tenu de changer votre mot de passe avant de pouvoir continuer à l'administration. Un mot de passe fort est à la fois minuscules et majuscules, ainsi que au moins un numéro. Votre mot de passe doit être de 2 à 20 caractères de long et ne peut pas contenir tous les caractères qui ne sont pas des lettres ou des numéros. Assurez-vous que ce mot de passe est quelque chose que vous pouvez vous rappeler, parce que dès que vous effectuez cette modification, vous serez invité à saisir votre nouveau mot de passe pour vous reconnecter à l'administration</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
		echo "</TABLE></center></form>\n";
		}
	}
##### END user force change password page #####


######################
# ADD=999996 - initial install welcome page
######################
if ($ADD==999996)
	{
	if ($SSfirst_login_trigger=='Y')
		{
		$show_form=1;
		if ($stage=='VALIDER')
			{
			if ( (strlen($pass) > 20) or (strlen($pass) < 2) or ($pass==$PHP_AUTH_PW) )
				{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |1|" . strlen($pass);}
			else
				{
				$stmt="SELECT count(*) from vicidial_users where user='$user' and pass='$PHP_AUTH_PW' and active='Y' and user_level > 6;";
				$rslt=mysql_query($stmt, $link);
				if ($DB) {echo "$stmt\n";}
				$userpass_to_print = mysql_num_rows($rslt);
				if ($userpass_to_print < 1)
					{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |2|$userpass_to_print";}
				else
					{
					$row=mysql_fetch_row($rslt);
					if ($row[0] < 1)
						{echo "Mot de passe n'a pas été modifié, s'il vous plaît essayer de nouveau |3|$row[0]";}
					else
						{
						$show_form=0;

						if (strlen($default_phone_registration_password) < 2) {$default_phone_registration_password = $SSdefault_phone_registration_password;}
						if (strlen($default_phone_login_password) < 2) {$default_phone_login_password = $SSdefault_phone_login_password;}
						if (strlen($default_server_password) < 2) {$default_server_password = $SSdefault_server_password;}
						if (strlen($default_local_gmt) < 2) {$default_local_gmt = $SSdefault_local_gmt;}
						if (strlen($default_voicemail_timezone) < 2) {$default_voicemail_timezone = $SSdefault_voicemail_timezone;}

						$stmt="UPDATE vicidial_users SET pass='$pass',force_change_password='N' where user='$user' and active='Y' and user_level > 6;";
						$rslt=mysql_query($stmt, $link);

						$stmtA="UPDATE system_settings SET first_login_trigger='N',default_phone_registration_password='$default_phone_registration_password',default_phone_login_password='$default_phone_login_password',default_server_password='$default_server_password',default_local_gmt='$default_local_gmt',default_voicemail_timezone='$default_voicemail_timezone';";
						$rslt=mysql_query($stmtA, $link);

						$stmtB="UPDATE phones SET conf_secret='$default_phone_registration_password',pass='$default_phone_login_password',local_gmt='$default_local_gmt',voicemail_timezone='$default_voicemail_timezone';";
						$rslt=mysql_query($stmtB, $link);

						$stmtC="UPDATE servers SET conf_secret='$default_server_password',rebuild_conf_files='Y';";
						$rslt=mysql_query($stmtC, $link);

						### LOG INSERTION Admin Log Table ###
						$SQL_log = "$stmt|$stmtA|$stmtB|$stmtC|";
						$SQL_log = ereg_replace(';','',$SQL_log);
						$SQL_log = addslashes($SQL_log);
						$stmt="INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='UTILISATEURS', event_type='MODIFY', record_id='$user', event_code='INITIAL SETTINGS UPDATE', event_sql=\"$SQL_log\", event_notes='';";
						if ($DB) {echo "|$stmt|\n";}
						$rslt=mysql_query($stmt, $link);

						echo "Les mots de passe ont été mis à jour, vous pouvez maintenant continuer sur dans l'administration. <BR><BR>Vous voudrez peut-être commencer par lire le manuel Gestionnaire Vicidial disponible à l'adresse <a href=\"http://www.vicidial.org/store.php#MANAGER\" target=\"_blank\">vicidial.org</a> (il ya une version gratuite disponible)\n";
						}
					}
				}
			}
		if ($show_form > 0)
			{
			echo "<TABLE><TR><TD>\n";
			echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

			echo "<br><b>Bienvenue à Vicidial, écran de configuration initiale</b><br><br><form action=$PHP_SELF method=POST name=userform id=userform>\n";
			echo "<input type=hidden name=ADD value=999996>\n";
			echo "<input type=hidden name=DB value=\"$DB\">\n";
			echo "<input type=hidden name=stage value=VALIDER>\n";
			echo "<input type=hidden name=user value=\"$PHP_AUTH_USER\">\n";
			echo "<center><TABLE width=$section_width cellspacing=3>\n";

			echo "<tr bgcolor=#B6D3FC><td align=left colspan=2>Vous êtes tenu de changer votre mot de passe avant de pouvoir continuer à l'administration. Un mot de passe fort est à la fois minuscules et majuscules, ainsi que au moins un numéro. Votre mot de passe doit être de 2 à 20 caractères de long et ne peut pas contenir tous les caractères qui ne sont pas des lettres ou des numéros. Assurez-vous que ce mot de passe est quelque chose que vous pouvez vous rappeler, parce que dès que vous avez terminé cet écran de configuration initiale, vous serez invité à saisir votre nouveau mot de passe à nouveau de se reconnecter à l'administration</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Nouveau mot de passe: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_pass name=pass size=20 maxlength=20 onkeyup=\"return pwdChanged('reg_pass','reg_pass_img');\"> &nbsp; &nbsp; Force: <IMG id=reg_pass_img src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_pass','reg_pass_img');\"></td></tr>\n";

			echo "<tr><td colspan=2> &nbsp; </td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=left colspan=2>Les trois prochaines mots de passe par défaut sont définis dans la section Paramètres système, et vous pouvez les changer après que vous les définir ici. Il s'agit d'une bonne idée de faire ces mots de passe fort pour que personne ne peut pirater vos comptes de téléphone et des appels téléphoniques lieu sans que vous sachiez. Le mot de passe d'enregistrement par défaut utilisée lors de nouveaux téléphones sont ajoutés au système en tant que SIP ou IAX mot de passe téléphone VOIP. Le téléphone de connexion par défaut mot de passe utilisé lors web nouveaux téléphones sont ajoutés au système, comme le mot de passe de téléphone que l'agent aurait utiliser dans l'interface agent Vicidial. Le mot de passe par défaut du serveur utilisé lorsque de nouveaux serveurs sont ajoutés au système pour les serveurs de communiquer les uns avec les autres.</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe par défaut d'inscription Téléphone: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passX name=default_phone_registration_password size=20 maxlength=20 value=\"$SSdefault_phone_registration_password\" onkeyup=\"return pwdChanged('reg_passX','reg_pass_imgX');\"> &nbsp; &nbsp; Force: <IMG id=reg_pass_imgX src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passX','reg_pass_imgX');\"></td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Login Mot de passe par défaut Téléphone: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passY name=default_phone_login_password size=20 maxlength=20 value=\"$SSdefault_phone_login_password\" onkeyup=\"return pwdChanged('reg_passY','reg_pass_imgY');\"> &nbsp; &nbsp; Force: <IMG id=reg_pass_imgY src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passY','reg_pass_imgY');\"></td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Mot de passe par défaut du serveur: </td><td align=left style=\"display:table-cell; vertical-align:middle;\"><input type=text id=reg_passZ name=default_server_password size=20 maxlength=20 value=\"$SSdefault_server_password\" onkeyup=\"return pwdChanged('reg_passZ','reg_pass_imgZ');\"> &nbsp; &nbsp; Force: <IMG id=reg_pass_imgZ src='../vicidial/images/pixel.gif' style=\"vertical-align:middle;\" onLoad=\"return pwdChanged('reg_passZ','reg_pass_imgZ');\"></td></tr>\n";

			echo "<tr><td colspan=2> &nbsp; </td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=left colspan=2>Les deux prochaines paramètres sont également définis dans la section Paramètres système, et vous pouvez les changer après que vous les définir ici. Vous devez régler le défaut local GMT avec le fuseau horaire que vos agents veulent être po La zone de messagerie vocale est la liste des fuseaux horaires boîte vocale que les messages vocaux seront enregistrés avec le temps lorsque de nouveaux messages sont laissés.</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Par défaut locale GMT: </td><td align=left><select size=1 name=default_local_gmt><option>12.75</option><option>12.00</option><option>11.00</option><option>10.00</option><option>9.50</option><option>9.00</option><option>8.00</option><option>7.00</option><option>6.50</option><option>6.00</option><option>5.75</option><option>5.50</option><option>5.00</option><option>4.50</option><option>4.00</option><option>3.50</option><option>3.00</option><option>2.00</option><option>1.00</option><option>0.00</option><option>-1.00</option><option>-2.00</option><option>-3.00</option><option>-3.50</option><option>-4.00</option><option>-5.00</option><option>-6.00</option><option>-7.00</option><option>-8.00</option><option>-9.00</option><option>-10.00</option><option>-11.00</option><option>-12.00</option><option selected>$SSdefault_local_gmt</option></select> (Ne PAS ajuster pour DST)$NWB#settings-default_local_gmt$NWE</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=right>Zone messagerie vocale par défaut: </td><td align=left><select size=1 name=default_voicemail_timezone>";
			$vm_zones = explode("\n",$SSvoicemail_timezones);
			$z=0;
			$vm_zones_ct = count($vm_zones);
			while($vm_zones_ct > $z)
				{
				if (strlen($vm_zones[$z]) > 5)
					{
					$vm_specs = explode("=",$vm_zones[$z]);
					$vm_abb = $vm_specs[0];
					$vm_details = explode('|',$vm_specs[1]);
					$vm_location = 	$vm_details[0];
					echo "<option value=\"$vm_abb\">$vm_abb - $vm_location</option>\n";
					}
				$z++;
				}
			echo "<option selected>$SSdefault_voicemail_timezone</option></select> $NWB#settings-default_voicemail_timezone$NWE</td></tr>\n";

			echo "<tr><td colspan=2> &nbsp; </td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2><input type=submit name=VALIDER value=VALIDER></td></tr>\n";
			echo "</TABLE></center></form>\n";
			}
		}
	}
##### END initial install welcome page #####


######################
# ADD=999995 - copyright trademark license page
######################
if ($ADD==999995)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br><B> Bienvenue à Vicidial: page de copyright, marque et de licence</B><BR><BR>\n";
	echo "<center><TABLE width=$section_width cellspacing=5 cellpadding=2>\n";

	echo "<tr bgcolor=#B6D3FC><td align=right valign=top><B><font size=3>Copyright: </B></td><td align=left> &nbsp; Le Call Center Suite Vicidial est maintenue par le <a href=\"http://www.vicidial.com/\" target=\"_blank\">ViciDial Group</a>, &copy; 2012</td></tr>\n";

	echo "<tr bgcolor=#B6D3FC><td align=right valign=top><B><font size=3>Trademark: </B></td><td align=left> &nbsp; \"VICIDIAL\" est une marque déposée de la <a href=\"http://www.vicidial.com/\" target=\"_blank\">ViciDial Group</a>. Voici notre <a href=\"http://www.vicidial.com/trademark.html\" target=\"_blank\">politique d'utilisation des marques</a></td></tr>\n";

	echo "<tr bgcolor=#B6D3FC><td align=right valign=top><B><font size=3>License: </B></td><td align=left> &nbsp; Le Call Center Suite Vicidial est publié sous la <a href=\"http://www.vicidial.com/agpl.html\" target=\"_blank\">AGPLv2 licence open source</a></td></tr>\n";

	echo "<tr bgcolor=#B6D3FC><td align=right valign=top nowrap><B><font size=3>Source Code: </B></td><td align=left> &nbsp; Le Centre Vicidial Appel Suite logicielle est disponible pour téléchargement, et pour l'utilisation, exempt du coût. Vous pouvez télécharger le facile à installer <a href=\"http://www.vicibox.com/server/index.html\" target=\"_blank\">ViciBox CD ISO version</a>, ou seulement l' <a href=\"http://sourceforge.net/projects/astguiclient/files/\" target=\"_blank\">le code source</a></td></tr>\n";

	echo "</TABLE></center></form>\n";
	if ($first_login_link > 0)
		{
		echo "<BR><BR>";
		echo "<BR><center><a href=\"$PHP_SELF?ADD=999996\"><B><font size=4>Continuer sur la configuration initiale</font></b></a></center><BR> &nbsp; \n";
		}
	}
##### END copyright trademark license page #####


######################
# ADD=999994 - admin hidden utilities page
######################
if ($ADD==999994)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br><B> Administration: Page cachée utilitaires - Si vous ne savez pas ce que ces utilitaires, vous ne devriez pas les utiliser</B><BR><BR>\n";
	echo "<center><TABLE width=$section_width cellspacing=5 cellpadding=2><tr bgcolor=#B6D3FC><td align=left valign=top>\n";

	if ( ($LOGuser_level >= 9) and ( (preg_match("/Administration Change Log/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) ) )
		{
		echo "<UL>\n";
		echo "<LI><a href=\"welcome_languages.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>La page d'accueil Langues</a></FONT>\n";
		echo "<LI><a href=\"campaign_debug.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Page Debug Campagne</a></FONT>\n";
		echo "<LI><a href=\"AST_carrier_log_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Rapport Connexion Transporteur</a></FONT>\n";
		echo "<LI><a href=\"AST_hangup_cause_report.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Hangup Cause Report</a></FONT>\n";
		echo "<LI><a href=\"admin_phones_bulk_insert.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Insérer une page en vrac Téléphone</a></FONT>\n";
		echo "<LI><a href=\"send_CID_call.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Envoyer un appel Avec la page CID personnalisé</a></FONT>\n";
		echo "<LI><a href=\"voice_lab.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Page Lab discours vocal</a></FONT>\n";
		echo "<LI><a href=\"../agc/phone_only.php\"><FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>Webphone Only Page</a></FONT>\n";
		echo "</UL>\n<BR>&nbsp;\n";
		}

	echo "</td></tr></TABLE></center>\n";
	}
##### END admin hidden utilities page #####


######################
# ADD=999993 - max stats detail report
######################
if ($ADD==999993)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	if ( (preg_match("/Maximum Stats Détail/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
		{
		if ($stage == 'in-group')
			{
			$in_out = 'in-group';
			$max_type = 'max_inbound';
			$modify_link = "<a href=\"$PHP_SELF?ADD=3111&group_id=$campaign_id\">";
			$stmt="SELECT group_name from vicidial_inbound_groups where group_id='$campaign_id' $LOGadmin_viewable_groupsSQL;";
			$rslt=mysql_query($stmt, $link);
			$rows_to_print = mysql_num_rows($rslt);
			if ($rows_to_print > 0) 
				{
				$rowx=mysql_fetch_row($rslt);
				$campaign_name = $rowx[0];
				}
			else
				{echo "Not found";   exit;}
			}
		elseif ($stage == 'remote-agent')
			{
			$remote_agent_id='';
			$stmt="SELECT remote_agent_id from vicidial_remote_agents where user_start='$campaign_id';";
			$rslt=mysql_query($stmt, $link);
			$rows_to_print = mysql_num_rows($rslt);
			if ($rows_to_print > 0) 
				{
				$rowx=mysql_fetch_row($rslt);
				$remote_agent_id = $rowx[0];
				}
			else
				{echo "Not found";   exit;}
			$modify_link = "<a href=\"$PHP_SELF?ADD=31111&remote_agent_id=$remote_agent_id\">";
			$campaign_name=$campaign_id;
			}
		else
			{
			$in_out = 'campaign';
			$max_type = 'max_outbound';
			$modify_link = "<a href=\"$PHP_SELF?ADD=31&campaign_id=$campaign_id\">";
			$stmt="SELECT campaign_name from vicidial_campaigns where campaign_id='$campaign_id' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			$rows_to_print = mysql_num_rows($rslt);
			if ($rows_to_print > 0) 
				{
				$rowx=mysql_fetch_row($rslt);
				$campaign_name = $rowx[0];
				}
			else
				{echo "Not found";   exit;}
			}

		echo "<br><B> Administration: Maximum Stats Détail for $stage $modify_link$campaign_id</a> - $campaign_name</B> &nbsp; $NWB#vicidial_max_stats$NWE<BR><BR>\n";
		echo "<center><TABLE width=$section_width cellspacing=5 cellpadding=2>\n";

		if ($stage == 'remote-agent')
			{
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($campaign_id,'30',$stage,$link,'ra_total_calls','call count',0);
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($campaign_id,'30',$stage,$link,'ra_concurrent_calls','most concurrent calls',0);
			echo "</td></tr>\n";
			}
		else
			{
			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($campaign_id,'30',$in_out,$link,'total_calls','call count',0);
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($campaign_id,'30',$in_out,$link,$max_type,'most concurrent calls',0);
			echo "</td></tr>\n";

			echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
				horizontal_bar_chart($campaign_id,'30',$in_out,$link,'max_agents','most concurrent agents',0);
			echo "</td></tr>\n";
			}
		}
	else
		{echo "Vous n'avez pas la permission de voir cette page";}

	echo "</TABLE></center>\n";
	}
##### END max stats detail report #####


######################
# ADD=999992 - max system stats report
######################
if ($ADD==999992)
	{
	echo "<TABLE><TR><TD>\n";
	echo "<FONT FACE=\"ARIAL,HELVETICA\" COLOR=BLACK SIZE=2>";

	echo "<br><B> Administration: Maximum System Stats &nbsp; $NWB#vicidial_max_stats$NWE</B><BR><BR>\n";
	echo "<center><TABLE width=$section_width cellspacing=5 cellpadding=2>\n";

	if ( (preg_match("/Maximum System Stats/",$LOGallowed_reports)) or (preg_match("/ALL RAPPORTS/",$LOGallowed_reports)) )
		{
		$stmt="SELECT sum(total_calls) from vicidial_daily_max_stats where campaign_id!='' and stats_flag='OPEN';";
		$rslt=mysql_query($stmt, $link);
		$rows_to_print = mysql_num_rows($rslt);
		if ($rows_to_print > 0) 
			{
			$rowx=mysql_fetch_row($rslt);
			$ALLtotal_calls = $rowx[0];

			$stmt="UPDATE vicidial_daily_max_stats SET total_calls='$ALLtotal_calls' where campaign_id='' and stats_flag='OPEN' and stats_type='TOTAL';";
			$rslt=mysql_query($stmt, $link);
			}

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'total_calls','total call count in and out',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'total_calls_inbound_all','total inbound call count',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'total_calls_outbound_all','total outbound call count',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'(max_inbound + max_outbound)','most concurrent calls in and out',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'max_inbound','most concurrent calls inbound total',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'max_outbound','most concurrent calls outbound total',0);
		echo "</td></tr>\n";

		echo "<tr bgcolor=#B6D3FC><td align=center colspan=2>\n";
			horizontal_bar_chart($campaign_id,'30','system',$link,'max_agents','most concurrent agents',0);
		echo "</td></tr>\n";
		}
	else
		{echo "Vous n'avez pas la permission de voir cette page";}
	echo "</TABLE></center>\n";
	}
##### END max system stats report #####





echo "</TD></TR></TABLE></center>\n";
echo "</TD></TR></TABLE></center>\n";

$ENDtime = date("U");

$RUNtime = ($ENDtime - $STARTtime);

echo "</TD></TR>\n";
echo "<TR><TD BGCOLOR=#015B91 ALIGN=CENTER>\n";
echo "<font size=0 color=white><br><br><!-- RUNTIME: $RUNtime seconds<BR> -->";
echo "VERSION: $admin_version<BR>";
echo "CONSTRUCTION: $build\n";
if (!preg_match("/_CONSTRUCTION_/",$SShosted_settings))
	{echo "<BR><a href=\"$PHP_SELF?ADD=999995\"><font color=white>&copy; 2012 ViciDial Group</font></a><BR><img src=\"../vicidial/images/pixel.gif\">";}
echo "</font>\n";
?>

</TD><TD BGCOLOR=#D9E6FE>
</TD></TR><TABLE>
</body>
<?php

if ( ($SSnocache_admin=='1') or ( ($SSadmin_modify_rafraîchir > 1) and ($modify_footer_rafraîchir > 0) and (strlen($modify_url)>10) ) )
	{
	echo "<head>\n";
	if ($SSnocache_admin=='1')
		{
		echo "<META HTTP-EQUIV=\"Pragma\" CONTENT=\"no-cache\">\n";
		echo "<META HTTP-EQUIV=\"Expires\" CONTENT=\"-1\">\n";
		echo "<META HTTP-EQUIV=\"CACHE-CONTROL\" CONTENT=\"NO-CACHE\">\n";
		}
	if ( ($SSadmin_modify_rafraîchir > 1) and ($modify_footer_rafraîchir > 0) and (strlen($modify_url)>10) )
		{
		echo "<META HTTP-EQUIV=\"REFRESH\" CONTENT=\"$SSadmin_modify_rafraîchir;URL=$modify_url\">\n";
		}
	echo "</head>\n";
	}

echo "</html>\n";

	
exit;


##### CALCULATE COMPLETE LEADS #####
function complete_leads($DB,$link,$dial_statuses,$camp_lists,$call_count_limit,$single_status,$campaign_id)
{
if (isset($camp_lists))
	{
	if (strlen($camp_lists)>1)
		{
		if (strlen($dial_statuses)>2)
			{
			$dial_statuses = preg_replace("/ -$/","",$dial_statuses);
			$Dstatuses = explode(" ", $dial_statuses);
			$Ds_to_print = (count($Dstatuses) - 0);
			$Dsql = '';
			$o=0;
			while ($Ds_to_print > $o) 
				{
				$o++;
				$Dsql .= "'$Dstatuses[$o]',";
				}
			$Dsql = preg_replace("/,$/","",$Dsql);
			if (strlen($Dsql) < 2) {$Dsql = "''";}

			$CCLsql = "(called_count < 0) or";
			if ($call_count_limit > 0)
				{$CCLsql = "(called_count >= $call_count_limit) or";}

			$complete_statuses='';
			$stmt="SELECT status from vicidial_statuses where completed='Y';";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$q=0;
			while ($statuses_to_print > $q) 
				{
				$rowx=mysql_fetch_row($rslt);
				$complete_statuses.="'$rowx[0]',";
				$q++;
				}
			$stmt="SELECT status from vicidial_campaign_statuses where completed='Y' $LOGallowed_campaignsSQL;";
			$rslt=mysql_query($stmt, $link);
			$statuses_to_print = mysql_num_rows($rslt);
			$q=0;
			while ($statuses_to_print > $q) 
				{
				$rowx=mysql_fetch_row($rslt);
				$complete_statuses.="'$rowx[0]',";
				$q++;
				}
			$complete_statuses = preg_replace("/,$/","",$complete_statuses);
			if (strlen($complete_statuses) < 2) {$complete_statuses = "''";}
			$CSsql = "status IN($complete_statuses)";

			$stmt="SELECT count(*) FROM vicidial_list where ( (status IN($Dsql)) and (list_id IN($camp_lists)) and ( $CCLsql ($CSsql) ) );";
			#$DB=1;
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$rslt_rows = mysql_num_rows($rslt);
			if ($rslt_rows)
				{
				$rowx=mysql_fetch_row($rslt);
				$complete_leads = $rowx[0];
				}
			else {$complete_leads = '0';}

			if ($DB > 0) {echo "|$DB|\n";}
			if ($single_status > 0)
				{return $complete_leads;}
			else
				{echo "Il ya $complete_leads fils terminés dans ces listes\n";}
			}
		else
			{
			echo "aucun statut d'appel selectionnés pour cette campagne\n";
			}
		}
	else
		{
		echo "pas de listes actives pour cette campagne\n";
		}
	}
else
	{
	echo "pas de listes actives pour cette campagne\n";
	}
}


##### CALCULATE DIALABLE LEADS #####
function dialable_leads($DB,$link,$local_call_time,$dial_statuses,$camp_lists,$drop_lockout_time,$call_count_limit,$single_status,$fSQL)
{
##### BEGIN calculate what gmt_offset_now values are within the allowed local_call_time setting ###
if (isset($camp_lists))
	{
	if (strlen($camp_lists)>1)
		{
		if (strlen($dial_statuses)>2)
			{
			$g=0;
			$p='13';
			$GMT_gmt[0] = '';
			$GMT_hour[0] = '';
			$GMT_day[0] = '';
			while ($p > -13)
				{
				$pzone=3600 * $p;
				$pmin=(gmdate("i", time() + $pzone));
				$phour=( (gmdate("G", time() + $pzone)) * 100);
				$pday=gmdate("w", time() + $pzone);
				$tz = sprintf("%.2f", $p);	
				$GMT_gmt[$g] = "$tz";
				$GMT_day[$g] = "$pday";
				$GMT_hour[$g] = ($phour + $pmin);
				$p = ($p - 0.25);
				$g++;
				}

			$stmt="SELECT call_time_id,call_time_name,call_time_comments,ct_default_start,ct_default_stop,ct_sunday_start,ct_sunday_stop,ct_monday_start,ct_monday_stop,ct_tuesday_start,ct_tuesday_stop,ct_wednesday_start,ct_wednesday_stop,ct_thursday_start,ct_thursday_stop,ct_friday_start,ct_friday_stop,ct_saturday_start,ct_saturday_stop,ct_state_call_times FROM vicidial_call_times where call_time_id='$local_call_time';";
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$rowx=mysql_fetch_row($rslt);
			$Gct_default_start =	"$rowx[3]";
			$Gct_default_stop =		"$rowx[4]";
			$Gct_sunday_start =		"$rowx[5]";
			$Gct_sunday_stop =		"$rowx[6]";
			$Gct_monday_start =		"$rowx[7]";
			$Gct_monday_stop =		"$rowx[8]";
			$Gct_tuesday_start =	"$rowx[9]";
			$Gct_tuesday_stop =		"$rowx[10]";
			$Gct_wednesday_start =	"$rowx[11]";
			$Gct_wednesday_stop =	"$rowx[12]";
			$Gct_thursday_start =	"$rowx[13]";
			$Gct_thursday_stop =	"$rowx[14]";
			$Gct_friday_start =		"$rowx[15]";
			$Gct_friday_stop =		"$rowx[16]";
			$Gct_saturday_start =	"$rowx[17]";
			$Gct_saturday_stop =	"$rowx[18]";
			$Gct_state_call_times = "$rowx[19]";

			$ct_states = '';
			$ct_state_gmt_SQL = '';
			$ct_srs=0;
			$b=0;
			if (strlen($Gct_state_call_times)>2)
				{
				$state_rules = explode('|',$Gct_state_call_times);
				$ct_srs = ((count($state_rules)) - 2);
				}
			while($ct_srs >= $b)
				{
				if (strlen($state_rules[$b])>1)
					{
					$stmt="SELECT state_call_time_id,state_call_time_state,state_call_time_name,state_call_time_comments,sct_default_start,sct_default_stop,sct_sunday_start,sct_sunday_stop,sct_monday_start,sct_monday_stop,sct_tuesday_start,sct_tuesday_stop,sct_wednesday_start,sct_wednesday_stop,sct_thursday_start,sct_thursday_stop,sct_friday_start,sct_friday_stop,sct_saturday_start,sct_saturday_stop from vicidial_state_call_times where state_call_time_id='$state_rules[$b]';";
					$rslt=mysql_query($stmt, $link);
					$row=mysql_fetch_row($rslt);
					$Gstate_call_time_id =		"$row[0]";
					$Gstate_call_time_state =	"$row[1]";
					$Gsct_default_start =		"$row[4]";
					$Gsct_default_stop =		"$row[5]";
					$Gsct_sunday_start =		"$row[6]";
					$Gsct_sunday_stop =			"$row[7]";
					$Gsct_monday_start =		"$row[8]";
					$Gsct_monday_stop =			"$row[9]";
					$Gsct_tuesday_start =		"$row[10]";
					$Gsct_tuesday_stop =		"$row[11]";
					$Gsct_wednesday_start =		"$row[12]";
					$Gsct_wednesday_stop =		"$row[13]";
					$Gsct_thursday_start =		"$row[14]";
					$Gsct_thursday_stop =		"$row[15]";
					$Gsct_friday_start =		"$row[16]";
					$Gsct_friday_stop =			"$row[17]";
					$Gsct_saturday_start =		"$row[18]";
					$Gsct_saturday_stop =		"$row[19]";

					$ct_states .="'$Gstate_call_time_state',";

					$r=0;
					$state_gmt='';
					while($r < $g)
						{
						if ($GMT_day[$r]==0)	#### Dimanche heure locale
							{
							if (($Gsct_sunday_start==0) and ($Gsct_sunday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_sunday_start) and ($GMT_hour[$r]<$Gsct_sunday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==1)	#### Lundi heure locale
							{
							if (($Gsct_monday_start==0) and ($Gsct_monday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_monday_start) and ($GMT_hour[$r]<$Gsct_monday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==2)	#### Mardi heure locale
							{
							if (($Gsct_tuesday_start==0) and ($Gsct_tuesday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_tuesday_start) and ($GMT_hour[$r]<$Gsct_tuesday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==3)	#### Mercredi heure locale
							{
							if (($Gsct_wednesday_start==0) and ($Gsct_wednesday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_wednesday_start) and ($GMT_hour[$r]<$Gsct_wednesday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==4)	#### Jeudi heure locale
							{
							if (($Gsct_thursday_start==0) and ($Gsct_thursday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_thursday_start) and ($GMT_hour[$r]<$Gsct_thursday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==5)	#### Vendredi heure locale
							{
							if (($Gsct_friday_start==0) and ($Gsct_friday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_friday_start) and ($GMT_hour[$r]<$Gsct_friday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						if ($GMT_day[$r]==6)	#### Samedi heure locale
							{
							if (($Gsct_saturday_start==0) and ($Gsct_saturday_stop==0))
								{
								if ( ($GMT_hour[$r]>=$Gsct_default_start) and ($GMT_hour[$r]<$Gsct_default_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							else
								{
								if ( ($GMT_hour[$r]>=$Gsct_saturday_start) and ($GMT_hour[$r]<$Gsct_saturday_stop) )
									{$state_gmt.="'$GMT_gmt[$r]',";}
								}
							}
						$r++;
						}
					$state_gmt = "$state_gmt'99'";
					$ct_state_gmt_SQL .= "or (state='$Gstate_call_time_state' and gmt_offset_now IN($state_gmt)) ";
					}

				$b++;
				}
			if (strlen($ct_states)>2)
				{
				$ct_states = eregi_replace(",$",'',$ct_states);
				$ct_statesSQL = "and state NOT IN($ct_states)";
				}
			else
				{
				$ct_statesSQL = "";
				}

			$r=0;
			$default_gmt='';
			while($r < $g)
				{
				if ($GMT_day[$r]==0)	#### Dimanche heure locale
					{
					if (($Gct_sunday_start==0) and ($Gct_sunday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_sunday_start) and ($GMT_hour[$r]<$Gct_sunday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==1)	#### Lundi heure locale
					{
					if (($Gct_monday_start==0) and ($Gct_monday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_monday_start) and ($GMT_hour[$r]<$Gct_monday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==2)	#### Mardi heure locale
					{
					if (($Gct_tuesday_start==0) and ($Gct_tuesday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_tuesday_start) and ($GMT_hour[$r]<$Gct_tuesday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==3)	#### Mercredi heure locale
					{
					if (($Gct_wednesday_start==0) and ($Gct_wednesday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_wednesday_start) and ($GMT_hour[$r]<$Gct_wednesday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==4)	#### Jeudi heure locale
					{
					if (($Gct_thursday_start==0) and ($Gct_thursday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_thursday_start) and ($GMT_hour[$r]<$Gct_thursday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==5)	#### Vendredi heure locale
					{
					if (($Gct_friday_start==0) and ($Gct_friday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_friday_start) and ($GMT_hour[$r]<$Gct_friday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				if ($GMT_day[$r]==6)	#### Samedi heure locale
					{
					if (($Gct_saturday_start==0) and ($Gct_saturday_stop==0))
						{
						if ( ($GMT_hour[$r]>=$Gct_default_start) and ($GMT_hour[$r]<$Gct_default_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					else
						{
						if ( ($GMT_hour[$r]>=$Gct_saturday_start) and ($GMT_hour[$r]<$Gct_saturday_stop) )
							{$default_gmt.="'$GMT_gmt[$r]',";}
						}
					}
				$r++;
				}

			$default_gmt = "$default_gmt'99'";
			$all_gmtSQL = "(gmt_offset_now IN($default_gmt) $ct_statesSQL) $ct_state_gmt_SQL";

			$dial_statuses = preg_replace("/ -$/","",$dial_statuses);
			$Dstatuses = explode(" ", $dial_statuses);
			$Ds_to_print = (count($Dstatuses) - 0);
			$Dsql = '';
			$o=0;
			while ($Ds_to_print > $o) 
				{
				$o++;
				$Dsql .= "'$Dstatuses[$o]',";
				}
			$Dsql = preg_replace("/,$/","",$Dsql);
			if (strlen($Dsql) < 2) {$Dsql = "''";}

			$DLTsql='';
			if ($drop_lockout_time > 0)
				{
				$DLseconds = ($drop_lockout_time * 3600);
				$DLseconds = floor($DLseconds);
				$DLseconds = intval("$DLseconds");
				$DLTsql = "and ( ( (status IN('DROP','XDROP')) and (last_local_call_time < CONCAT(DATE_ADD(NOW(), INTERVAL -$DLseconds SECOND),' ',CURTIME()) ) ) or (status NOT IN('DROP','XDROP')) )";
				}

			$CCLsql='';
			if ($call_count_limit > 0)
				{
				$CCLsql = "and (called_count < $call_count_limit)";
				}

			$stmt="SELECT count(*) FROM vicidial_list where called_since_last_reset='N' and status IN($Dsql) and list_id IN($camp_lists) and ($all_gmtSQL) $CCLsql $DLTsql $fSQL";
			#$DB=1;
			if ($DB) {echo "$stmt\n";}
			$rslt=mysql_query($stmt, $link);
			$rslt_rows = mysql_num_rows($rslt);
			if ($rslt_rows)
				{
				$rowx=mysql_fetch_row($rslt);
				$active_leads = "$rowx[0]";
				}
			else {$active_leads = '0';}

			if ($DB > 0) {echo "|$DB|\n";}
			if ($single_status > 0)
				{return $active_leads;}
			else
				{echo "Cette campagne a $active_leads fiches à appeler dans ces listes\n";}
			}
		else
			{
			echo "aucun statut d'appel selectionnés pour cette campagne\n";
			}
		}
	else
		{
		echo "pas de listes actives pour cette campagne\n";
		}
	}
else
	{
	echo "pas de listes actives pour cette campagne\n";
	}
##### END calculate what gmt_offset_now values are within the allowed local_call_time setting ###
}
?>
